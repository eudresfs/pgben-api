# ========================================
# CONFIGURAÇÕES DE AMBIENTE - EXEMPLO
# ========================================
# ATENÇÃO: Este arquivo contém apenas exemplos de configuração.
# NUNCA commite chaves reais ou dados sensíveis neste arquivo.
# Copie para .env e configure com valores reais.

# Nome do projeto Docker Compose
COMPOSE_PROJECT_NAME=pgben

# ========================================
# CONFIGURAÇÕES DO BANCO DE DADOS
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASS=your_secure_password_here
DB_NAME=pgben
DB_POOL_SIZE=10
DB_SSL=false

# Timezone do banco de dados e aplicação
# Deve ser consistente com o timezone configurado no PostgreSQL
# Padrão: America/Sao_Paulo (horário de Brasília)
DB_TIMEZONE=America/Sao_Paulo

# ========================================
# CONFIGURAÇÕES JWT - SEGURANÇA CRÍTICA
# ========================================
# IMPORTANTE: Gere suas próprias chaves RSA 2048 bits
# Exemplo de comando (ou use o script do projeto 'scripts/gerar-chaves-jwt.js'): openssl genrsa -out keys/private.key 2048
# Exemplo de comando (ou use o script do projeto 'scripts/gerar-chaves-jwt.js'): openssl rsa -in keys/private.key -pubout -out keys/public.key

JWT_ALGORITHM=RS256
# NUNCA use estas chaves em produção - são apenas exemplos

# Caminhos para arquivos de chaves (recomendado)
JWT_PRIVATE_KEY_PATH=./keys/private.key
JWT_PUBLIC_KEY_PATH=./keys/public.key

JWT_ACCESS_TOKEN_EXPIRES_IN=30m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# ========================================
# CHAVES DE CRIPTOGRAFIA
# ========================================
# Gere uma chave de 32 caracteres (256 bits)
# Comando: openssl rand -hex 32
ENCRYPTION_KEY=SUBSTITUA_POR_CHAVE_256_BITS_HEX
AUDIT_SIGNING_KEY=SUBSTITUA_POR_CHAVE_AUDITORIA_256_BITS

# ========================================
# CONFIGURAÇÕES DE EMAIL SMTP
# ========================================

# Configuração básica
EMAIL_ENABLED=true
NODE_ENV=production

# SMTP Principal (SendGrid exemplo)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=SG.your_api_key
SMTP_FROM=noreply@empresa.com
SMTP_FROM_NAME=Sistema Empresa

# SMTP Fallback (MailerSend exemplo)
SMTP_FALLBACK_HOST=smtp.mailersend.net
SMTP_FALLBACK_PORT=587
SMTP_FALLBACK_USER=MS_username
SMTP_FALLBACK_PASS=MS_password

# Performance e Segurança
EMAIL_RATE_LIMIT_MS=500
EMAIL_MAX_RETRIES=3
EMAIL_MAX_ATTACHMENT_SIZE=26214400
EMAIL_TEMPLATE_TTL=7200

# Domínios (opcional)
EMAIL_DOMAIN_BLACKLIST=tempmail.com,guerrillamail.com
EMAIL_DOMAIN_WHITELIST=empresa.com,parceiro.com

# Timeouts
SMTP_CONNECTION_TIMEOUT=30000
SMTP_SOCKET_TIMEOUT=60000

# ========================================
# CONFIGURAÇÕES MINIO (ARMAZENAMENTO)
# ========================================
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=SUBSTITUA_POR_ACCESS_KEY_SEGURA
MINIO_SECRET_KEY=SUBSTITUA_POR_SECRET_KEY_SEGURA
MINIO_BUCKET=documents
MINIO_USE_SSL=false

# ========================================
# CONFIGURAÇÕES DA APLICAÇÃO
# ========================================
APP_PORT=3000
API_PREFIX=/api/v1
NODE_ENV=development
APP_NAME=PGBEN
FRONTEND_URL=http://localhost:5173

# ========================================
# CONFIGURAÇÕES DE RATE LIMITING
# ========================================
THROTTLE_TTL=60
THROTTLE_LIMIT=200
THROTTLE_LOGIN_LIMIT=10
THROTTLE_REGISTER_LIMIT=5

# ========================================
# CONFIGURAÇÕES DE SEGURANÇA - COOKIES E SESSÃO
# ========================================
# Chave secreta para assinatura de cookies (32+ caracteres)
# Comando: openssl rand -hex 32
COOKIE_SECRET=SUBSTITUA_POR_CHAVE_COOKIE_SEGURA_256_BITS

# Chave secreta para sessões (32+ caracteres)
# Comando: openssl rand -hex 32
SESSION_SECRET=SUBSTITUA_POR_CHAVE_SESSAO_SEGURA_256_BITS

# Domínios permitidos para CORS (separados por vírgula)
ALLOWED_ORIGINS=http://localhost:5173,https://pgben.gov.br
ALLOWED_DOMAINS=localhost:3000,localhost:5173,pgben.gov.br

# ========================================
# CONFIGURAÇÕES REDIS
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=SUBSTITUA_POR_SENHA_REDIS_SEGURA
REDIS_DB=0
REDIS_TTL=3600

# ========================================
# CONFIGURAÇÕES DE LOGGING
# ========================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_FILES=30
LOG_MAX_SIZE=10m

# ========================================
# CONFIGURAÇÕES DE SEGURANÇA
# ========================================
# Configurações para cookies seguros
CSRF_SECRET=SUBSTITUA_POR_CHAVE_CSRF_SEGURA

# Configurações de CORS
CORS_ORIGIN=http://localhost:5173
CORS_CREDENTIALS=true


# ========================================
# CONFIGURAÇÕES DE NOTIFICAÇÔES
# ========================================
# Configurações SSE
SSE_HEARTBEAT_INTERVAL=30000          # Intervalo de heartbeat em ms (30 segundos)
SSE_CONNECTION_TIMEOUT=300000         # Timeout de conexão em ms (5 minutos)
SSE_MAX_CONNECTIONS_PER_USER=5       # Máximo de conexões por usuário
SSE_CLEANUP_INTERVAL=60000            # Intervalo de limpeza em ms (1 minuto)
SSE_ENABLE_COMPRESSION=true           # Habilitar compressão gzip
SSE_CORS_ORIGINS=http://localhost:3000,https://pgben-server.kemosoft.com.br

# ========================================
# CONFIGURAÇÕES DO USUÁRIO ADMINISTRADOR PADRÃO
# ========================================
# Configurações para criação automática do usuário administrador
# IMPORTANTE: Altere estas credenciais antes de usar em produção
DEFAULT_ADMIN_USER_EMAIL=admin@natal.pgben.gov.br
DEFAULT_ADMIN_USER_NAME=Administrador do Sistema
DEFAULT_ADMIN_USER_PASSWORD=SUBSTITUA_POR_SENHA_SEGURA

# ========================================
# CONFIGURAÇÕES DE DESENVOLVIMENTO
# ========================================
# Apenas para desenvolvimento
DEBUG=false
SWAGGER_ENABLED=true
API_DOCS_PATH=/api/docs

# ========================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ========================================
# 1. Copie este arquivo para .env
# 2. Substitua todos os valores SUBSTITUA_POR_* por valores reais
# 3. Gere chaves RSA para JWT:
#    mkdir keys
#    node .scripts/gerar-chaves-jwt.js
# 4. Configure seu servidor SMTP
# 5. Configure Redis e MinIO
# 6. NUNCA commite o arquivo .env no Git