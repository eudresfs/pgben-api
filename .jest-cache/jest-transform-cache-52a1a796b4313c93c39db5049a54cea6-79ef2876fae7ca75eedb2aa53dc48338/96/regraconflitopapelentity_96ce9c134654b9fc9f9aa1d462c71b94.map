{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\regra-conflito-papel.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\regra-conflito-papel.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n  ManyToOne,\n  JoinColumn,\n} from 'typeorm';\nimport { PapelCidadao } from './papel-cidadao.entity';\n\n/**\n * Entidade de Regra de Conflito de Papel\n *\n * Armazena as regras que definem conflitos entre papéis no sistema,\n * garantindo a integridade das regras de negócio.\n */\n@Entity('regra_conflito_papel')\nexport class RegraConflitoPapel {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ name: 'papel_origem_id', type: 'uuid' })\n  papel_origem_id: string;\n\n  @ManyToOne(() => PapelCidadao)\n  @JoinColumn({ name: 'papel_origem_id' })\n  papel_origem: PapelCidadao;\n\n  @Column({ name: 'papel_destino_id', type: 'uuid' })\n  papel_destino_id: string;\n\n  @ManyToOne(() => PapelCidadao)\n  @JoinColumn({ name: 'papel_destino_id' })\n  papel_destino: PapelCidadao;\n\n  @Column({ type: 'varchar', length: 255 })\n  descricao: string;\n\n  @Column({ type: 'boolean', default: true })\n  ativo: boolean;\n\n  @CreateDateColumn({ name: 'created_at' })\n  created_at: Date;\n\n  @UpdateDateColumn({ name: 'updated_at' })\n  updated_at: Date;\n\n  @Column({ name: 'created_by', type: 'uuid', nullable: true })\n  created_by: string;\n\n  @Column({ name: 'updated_by', type: 'uuid', nullable: true })\n  updated_by: string;\n\n  // Getters e Setters\n  get papelOrigemId(): string {\n    return this.papel_origem_id;\n  }\n\n  set papelOrigemId(value: string) {\n    this.papel_origem_id = value;\n  }\n\n  get papelDestinoId(): string {\n    return this.papel_destino_id;\n  }\n\n  set papelDestinoId(value: string) {\n    this.papel_destino_id = value;\n  }\n\n  get createdAt(): Date {\n    return this.created_at;\n  }\n\n  get updatedAt(): Date {\n    return this.updated_at;\n  }\n\n  get createdBy(): string {\n    return this.created_by;\n  }\n\n  get updatedBy(): string {\n    return this.updated_by;\n  }\n\n  // Métodos Utilitários\n\n  /**\n   * Verifica se a regra foi criada recentemente (últimas 24 horas)\n   */\n  isCriadoRecentemente(): boolean {\n    const agora = new Date();\n    const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);\n    return this.created_at > umDiaAtras;\n  }\n\n  /**\n   * Calcula a idade da regra em dias\n   */\n  getIdadeEmDias(): number {\n    const agora = new Date();\n    const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  }\n\n  /**\n   * Verifica se a regra está ativa\n   */\n  isAtivo(): boolean {\n    return this.ativo;\n  }\n\n  /**\n   * Verifica se a regra foi modificada recentemente (últimas 24 horas)\n   */\n  foiModificadoRecentemente(): boolean {\n    const agora = new Date();\n    const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);\n    return this.updated_at > umDiaAtras;\n  }\n\n  /**\n   * Verifica se tem criador definido\n   */\n  temCriador(): boolean {\n    return !!this.created_by;\n  }\n\n  /**\n   * Verifica se tem editor definido\n   */\n  temEditor(): boolean {\n    return !!this.updated_by;\n  }\n\n  /**\n   * Verifica se foi criada por um usuário específico\n   */\n  foiCriadaPor(usuarioId: string): boolean {\n    return this.created_by === usuarioId;\n  }\n\n  /**\n   * Verifica se foi editada por um usuário específico\n   */\n  foiEditadaPor(usuarioId: string): boolean {\n    return this.updated_by === usuarioId;\n  }\n\n  /**\n   * Verifica se envolve um papel específico (origem ou destino)\n   */\n  envolvePapel(papelId: string): boolean {\n    return this.papel_origem_id === papelId || this.papel_destino_id === papelId;\n  }\n\n  /**\n   * Verifica se é uma regra bidirecional (origem e destino são iguais)\n   */\n  isBidirecional(): boolean {\n    return this.papel_origem_id === this.papel_destino_id;\n  }\n\n  /**\n   * Obtém um resumo da regra\n   */\n  getSummary(): string {\n    const status = this.isAtivo() ? 'Ativa' : 'Inativa';\n    const tipo = this.isBidirecional() ? 'Bidirecional' : 'Unidirecional';\n    return `${this.descricao} (${tipo}) - ${status}`;\n  }\n\n  /**\n   * Gera uma chave única para a regra\n   */\n  getUniqueKey(): string {\n    return `regra_${this.papel_origem_id}_${this.papel_destino_id}`;\n  }\n\n  /**\n   * Verifica se a regra é consistente\n   */\n  isConsistente(): boolean {\n    // Verifica se tem papéis origem e destino\n    if (!this.papel_origem_id || !this.papel_destino_id) return false;\n    \n    // Verifica se tem descrição\n    if (!this.descricao || this.descricao.trim().length === 0) return false;\n    \n    // Verifica se a descrição não é muito curta\n    if (this.descricao.trim().length < 10) return false;\n    \n    return true;\n  }\n\n  /**\n   * Verifica se pode ser removida\n   */\n  podeSerRemovida(): boolean {\n    // Regras podem ser desativadas ao invés de removidas\n    return true;\n  }\n\n  /**\n   * Clona a regra (sem ID)\n   */\n  clone(): Partial<RegraConflitoPapel> {\n    return {\n      papel_origem_id: this.papel_origem_id,\n      papel_destino_id: this.papel_destino_id,\n      descricao: this.descricao,\n      ativo: this.ativo,\n    };\n  }\n\n  /**\n   * Verifica se é uma regra crítica (afeta papéis importantes)\n   */\n  isCritica(): boolean {\n    // Esta verificação dependeria dos tipos de papel envolvidos\n    // Por enquanto, considera todas as regras como potencialmente críticas\n    return this.isAtivo();\n  }\n\n  /**\n   * Verifica se requer aprovação para mudanças\n   */\n  requerAprovacao(): boolean {\n    // Regras ativas sempre requerem aprovação para mudanças\n    return this.isAtivo();\n  }\n\n  /**\n   * Obtém o tipo de conflito baseado na descrição\n   */\n  getTipoConflito(): 'INCOMPATIBILIDADE' | 'RESTRICAO' | 'VALIDACAO' | 'OUTRO' {\n    const descricaoLower = this.descricao.toLowerCase();\n    \n    if (descricaoLower.includes('incompatível') || descricaoLower.includes('conflito')) {\n      return 'INCOMPATIBILIDADE';\n    }\n    \n    if (descricaoLower.includes('não pode') || descricaoLower.includes('proibido')) {\n      return 'RESTRICAO';\n    }\n    \n    if (descricaoLower.includes('validar') || descricaoLower.includes('verificar')) {\n      return 'VALIDACAO';\n    }\n    \n    return 'OUTRO';\n  }\n\n  /**\n   * Formata a data de criação\n   */\n  getCriacaoFormatada(): string {\n    return this.created_at.toLocaleDateString('pt-BR');\n  }\n\n  /**\n   * Formata a data de atualização\n   */\n  getAtualizacaoFormatada(): string {\n    return this.updated_at.toLocaleDateString('pt-BR');\n  }\n\n  /**\n   * Remove informações sensíveis para logs\n   */\n  toSafeLog(): Partial<RegraConflitoPapel> {\n    return {\n      id: this.id,\n      descricao: this.descricao,\n      ativo: this.ativo,\n      created_at: this.created_at,\n      updated_at: this.updated_at,\n    };\n  }\n\n  /**\n   * Verifica se a regra precisa de revisão (muito antiga)\n   */\n  precisaRevisao(): boolean {\n    // Regras com mais de 1 ano podem precisar de revisão\n    return this.getIdadeEmDias() > 365;\n  }\n\n  /**\n   * Obtém sugestões de melhoria para a regra\n   */\n  getSugestoesMelhoria(): string[] {\n    const sugestoes: string[] = [];\n    \n    if (!this.isConsistente()) {\n      sugestoes.push('Verificar e corrigir inconsistências na regra');\n    }\n    \n    if (this.descricao.length < 20) {\n      sugestoes.push('Expandir descrição da regra para maior clareza');\n    }\n    \n    if (this.precisaRevisao()) {\n      sugestoes.push('Revisar regra (criada há mais de 1 ano)');\n    }\n    \n    if (!this.temCriador()) {\n      sugestoes.push('Definir responsável pela criação da regra');\n    }\n    \n    if (this.isBidirecional()) {\n      sugestoes.push('Verificar se regra bidirecional está correta');\n    }\n    \n    return sugestoes;\n  }\n\n  /**\n   * Verifica se pode ser aplicada a um contexto específico\n   */\n  podeSerAplicada(contexto: { papelOrigemId: string; papelDestinoId: string }): boolean {\n    if (!this.isAtivo()) return false;\n    \n    // Verifica correspondência direta\n    if (this.papel_origem_id === contexto.papelOrigemId && \n        this.papel_destino_id === contexto.papelDestinoId) {\n      return true;\n    }\n    \n    // Se for bidirecional, verifica correspondência inversa\n    if (this.isBidirecional() && \n        this.papel_origem_id === contexto.papelDestinoId && \n        this.papel_destino_id === contexto.papelOrigemId) {\n      return true;\n    }\n    \n    return false;\n  }\n\n  /**\n   * Obtém estatísticas da regra\n   */\n  getEstatisticas(): {\n    idadeEmDias: number;\n    tipo: string;\n    status: string;\n    ultimaModificacao: string;\n  } {\n    return {\n      idadeEmDias: this.getIdadeEmDias(),\n      tipo: this.getTipoConflito(),\n      status: this.isAtivo() ? 'Ativa' : 'Inativa',\n      ultimaModificacao: this.getAtualizacaoFormatada(),\n    };\n  }\n}\n"],"version":3}