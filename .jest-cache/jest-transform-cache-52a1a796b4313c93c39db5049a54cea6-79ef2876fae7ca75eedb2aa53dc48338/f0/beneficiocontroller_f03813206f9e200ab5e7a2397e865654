7cc038deecf64576f03502c7b37fc287
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.BeneficioController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const beneficio_service_1 = require("../services/beneficio.service");
const create_tipo_beneficio_dto_1 = require("../dto/create-tipo-beneficio.dto");
const update_tipo_beneficio_dto_1 = require("../dto/update-tipo-beneficio.dto");
const create_requisito_documento_dto_1 = require("../dto/create-requisito-documento.dto");
const configurar_fluxo_dto_1 = require("../dto/configurar-fluxo.dto");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const permission_guard_1 = require("../../../auth/guards/permission.guard");
const requires_permission_decorator_1 = require("../../../auth/decorators/requires-permission.decorator");
const entities_1 = require("../../../entities");
/**
 * Controlador de benefícios
 *
 * Responsável por gerenciar as rotas relacionadas a tipos de benefícios
 */
let BeneficioController = class BeneficioController {
    beneficioService;
    constructor(beneficioService) {
        this.beneficioService = beneficioService;
    }
    /**
     * Lista todos os tipos de benefícios
     */
    async findAll(page, limit, search, ativo) {
        return this.beneficioService.findAll({
            page: page ? +page : undefined,
            limit: limit ? +limit : undefined,
            search,
            ativo: ativo !== undefined ? ativo : undefined,
        });
    }
    /**
     * Obtém detalhes de um tipo de benefício específico
     */
    async findOne(id) {
        return this.beneficioService.findById(id);
    }
    /**
     * Cria um novo tipo de benefício
     */
    async create(createTipoBeneficioDto) {
        return this.beneficioService.create(createTipoBeneficioDto);
    }
    /**
     * Atualiza um tipo de benefício existente
     */
    async update(id, updateTipoBeneficioDto) {
        return this.beneficioService.update(id, updateTipoBeneficioDto);
    }
    /**
     * Lista requisitos documentais de um benefício
     */
    async findRequisitos(id) {
        return this.beneficioService.findRequisitosByBeneficioId(id);
    }
    /**
     * Adiciona requisito documental a um benefício
     */
    async addRequisito(id, createRequisitoDocumentoDto) {
        return this.beneficioService.addRequisito(id, createRequisitoDocumentoDto);
    }
    /**
     * Configura fluxo de aprovação de um benefício
     */
    async configurarFluxo(id, configurarFluxoDto) {
        return this.beneficioService.configurarFluxo(id, configurarFluxoDto);
    }
};
exports.BeneficioController = BeneficioController;
__decorate([
    (0, common_1.Get)(),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.listar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Listar tipos de benefícios',
        description: 'Retorna uma lista paginada de todos os tipos de benefícios cadastrados no sistema.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de benefícios retornada com sucesso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiQuery)({
        name: 'page',
        required: false,
        type: Number,
        description: 'Página atual',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'limit',
        required: false,
        type: Number,
        description: 'Itens por página',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'search',
        required: false,
        type: String,
        description: 'Termo de busca (nome)',
    }),
    (0, swagger_1.ApiQuery)({
        name: 'ativo',
        required: false,
        type: Boolean,
        description: 'Filtro por status',
    }),
    __param(0, (0, common_1.Query)('page')),
    __param(1, (0, common_1.Query)('limit')),
    __param(2, (0, common_1.Query)('search')),
    __param(3, (0, common_1.Query)('ativo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Number, Number, String, Boolean]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.visualizar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Obter detalhes de um benefício',
        description: 'Retorna os detalhes completos de um tipo de benefício específico.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Benefício encontrado com sucesso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Benefício não encontrado',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "findOne", null);
__decorate([
    (0, common_1.Post)(),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.criar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Criar novo tipo de benefício',
        description: 'Cria um novo tipo de benefício no sistema.',
    }),
    (0, swagger_1.ApiBody)({
        type: create_tipo_beneficio_dto_1.CreateTipoBeneficioDto,
        examples: {
            'Auxílio Emergencial': {
                value: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Benefício criado com sucesso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 409,
        description: 'Nome já em uso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_tipo_beneficio_dto_1.CreateTipoBeneficioDto !== "undefined" && create_tipo_beneficio_dto_1.CreateTipoBeneficioDto) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "create", null);
__decorate([
    (0, common_1.Put)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.editar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Atualizar tipo de benefício existente',
        description: 'Atualiza os dados de um tipo de benefício existente.',
    }),
    (0, swagger_1.ApiBody)({
        type: update_tipo_beneficio_dto_1.UpdateTipoBeneficioDto,
        examples: {
            'Atualização de Benefício': {
                value: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Benefício atualizado com sucesso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Benefício não encontrado',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 409,
        description: 'Nome já em uso',
        content: {
            'application/json': {
                example: '',
            },
        },
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof update_tipo_beneficio_dto_1.UpdateTipoBeneficioDto !== "undefined" && update_tipo_beneficio_dto_1.UpdateTipoBeneficioDto) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "update", null);
__decorate([
    (0, common_1.Get)(':id/requisitos'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.requisito.listar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Listar requisitos documentais' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de requisitos retornada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Benefício não encontrado' }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "findRequisitos", null);
__decorate([
    (0, common_1.Post)(':id/requisitos'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.requisito.adicionar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Adicionar requisito documental' }),
    (0, swagger_1.ApiResponse)({ status: 201, description: 'Requisito adicionado com sucesso' }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Dados inválidos' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Benefício não encontrado' }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_d = typeof create_requisito_documento_dto_1.CreateRequisitoDocumentoDto !== "undefined" && create_requisito_documento_dto_1.CreateRequisitoDocumentoDto) === "function" ? _d : Object]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "addRequisito", null);
__decorate([
    (0, common_1.Put)(':id/fluxo'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'beneficio.fluxo.configurar',
        scopeType: entities_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Configurar fluxo de aprovação' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Fluxo configurado com sucesso' }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Dados inválidos' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Benefício não encontrado' }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_e = typeof configurar_fluxo_dto_1.ConfigurarFluxoDto !== "undefined" && configurar_fluxo_dto_1.ConfigurarFluxoDto) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], BeneficioController.prototype, "configurarFluxo", null);
exports.BeneficioController = BeneficioController = __decorate([
    (0, swagger_1.ApiTags)('Benefícios'),
    (0, common_1.Controller)('beneficio'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, permission_guard_1.PermissionGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof beneficio_service_1.BeneficioService !== "undefined" && beneficio_service_1.BeneficioService) === "function" ? _a : Object])
], BeneficioController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGJlbmVmaWNpb1xcY29udHJvbGxlcnNcXGJlbmVmaWNpby5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FVd0I7QUFDeEIsNkNBT3lCO0FBQ3pCLHFFQUFpRTtBQUNqRSxnRkFBMEU7QUFDMUUsZ0ZBQTBFO0FBQzFFLDBGQUFvRjtBQUNwRixzRUFBaUU7QUFDakUsd0VBQW1FO0FBQ25FLDRFQUF3RTtBQUN4RSwwR0FBNEY7QUFDNUYsZ0RBQThDO0FBRTlDOzs7O0dBSUc7QUFLSSxJQUFNLG1CQUFtQixHQUF6QixNQUFNLG1CQUFtQjtJQUNEO0lBQTdCLFlBQTZCLGdCQUFrQztRQUFsQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO0lBQUcsQ0FBQztJQUVuRTs7T0FFRztJQTRDRyxBQUFOLEtBQUssQ0FBQyxPQUFPLENBQ0ksSUFBYSxFQUNaLEtBQWMsRUFDYixNQUFlLEVBQ2hCLEtBQWU7UUFFL0IsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO1lBQ25DLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQzlCLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQ2pDLE1BQU07WUFDTixLQUFLLEVBQUUsS0FBSyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTO1NBQy9DLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7T0FFRztJQTZCRyxBQUFOLEtBQUssQ0FBQyxPQUFPLENBQTZCLEVBQVU7UUFDbEQsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzVDLENB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QkFBbUI7SUFKL0IsSUFBQSxpQkFBTyxFQUFDLFlBQVksQ0FBQztJQUNyQixJQUFBLG1CQUFVLEVBQUMsV0FBVyxDQUFDO0lBQ3ZCLElBQUEsa0JBQVMsRUFBQyw2QkFBWSxFQUFFLGtDQUFlLENBQUM7SUFDeEMsSUFBQSx1QkFBYSxHQUFFO3lEQUVpQyxvQ0FBZ0Isb0JBQWhCLG9DQUFnQjtHQURwRCxtQkFBbUIsQ0EyUS9CIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxiZW5lZmljaW9cXGNvbnRyb2xsZXJzXFxiZW5lZmljaW8uY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250cm9sbGVyLFxuICBHZXQsXG4gIFBvc3QsXG4gIEJvZHksXG4gIFB1dCxcbiAgUGFyYW0sXG4gIFBhcnNlVVVJRFBpcGUsXG4gIFF1ZXJ5LFxuICBVc2VHdWFyZHMsXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaUJlYXJlckF1dGgsXG4gIEFwaVF1ZXJ5LFxuICBBcGlCb2R5LFxufSBmcm9tICdAbmVzdGpzL3N3YWdnZXInO1xuaW1wb3J0IHsgQmVuZWZpY2lvU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2JlbmVmaWNpby5zZXJ2aWNlJztcbmltcG9ydCB7IENyZWF0ZVRpcG9CZW5lZmljaW9EdG8gfSBmcm9tICcuLi9kdG8vY3JlYXRlLXRpcG8tYmVuZWZpY2lvLmR0byc7XG5pbXBvcnQgeyBVcGRhdGVUaXBvQmVuZWZpY2lvRHRvIH0gZnJvbSAnLi4vZHRvL3VwZGF0ZS10aXBvLWJlbmVmaWNpby5kdG8nO1xuaW1wb3J0IHsgQ3JlYXRlUmVxdWlzaXRvRG9jdW1lbnRvRHRvIH0gZnJvbSAnLi4vZHRvL2NyZWF0ZS1yZXF1aXNpdG8tZG9jdW1lbnRvLmR0byc7XG5pbXBvcnQgeyBDb25maWd1cmFyRmx1eG9EdG8gfSBmcm9tICcuLi9kdG8vY29uZmlndXJhci1mbHV4by5kdG8nO1xuaW1wb3J0IHsgSnd0QXV0aEd1YXJkIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9ndWFyZHMvand0LWF1dGguZ3VhcmQnO1xuaW1wb3J0IHsgUGVybWlzc2lvbkd1YXJkIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9ndWFyZHMvcGVybWlzc2lvbi5ndWFyZCc7XG5pbXBvcnQgeyBSZXF1aXJlc1Blcm1pc3Npb24gfSBmcm9tICcuLi8uLi8uLi9hdXRoL2RlY29yYXRvcnMvcmVxdWlyZXMtcGVybWlzc2lvbi5kZWNvcmF0b3InO1xuaW1wb3J0IHsgU2NvcGVUeXBlIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMnO1xuXG4vKipcbiAqIENvbnRyb2xhZG9yIGRlIGJlbmVmw61jaW9zXG4gKlxuICogUmVzcG9uc8OhdmVsIHBvciBnZXJlbmNpYXIgYXMgcm90YXMgcmVsYWNpb25hZGFzIGEgdGlwb3MgZGUgYmVuZWbDrWNpb3NcbiAqL1xuQEFwaVRhZ3MoJ0JlbmVmw61jaW9zJylcbkBDb250cm9sbGVyKCdiZW5lZmljaW8nKVxuQFVzZUd1YXJkcyhKd3RBdXRoR3VhcmQsIFBlcm1pc3Npb25HdWFyZClcbkBBcGlCZWFyZXJBdXRoKClcbmV4cG9ydCBjbGFzcyBCZW5lZmljaW9Db250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBiZW5lZmljaW9TZXJ2aWNlOiBCZW5lZmljaW9TZXJ2aWNlKSB7fVxuXG4gIC8qKlxuICAgKiBMaXN0YSB0b2RvcyBvcyB0aXBvcyBkZSBiZW5lZsOtY2lvc1xuICAgKi9cbiAgQEdldCgpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnYmVuZWZpY2lvLmxpc3RhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnTGlzdGFyIHRpcG9zIGRlIGJlbmVmw61jaW9zJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdSZXRvcm5hIHVtYSBsaXN0YSBwYWdpbmFkYSBkZSB0b2RvcyBvcyB0aXBvcyBkZSBiZW5lZsOtY2lvcyBjYWRhc3RyYWRvcyBubyBzaXN0ZW1hLicsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSBiZW5lZsOtY2lvcyByZXRvcm5hZGEgY29tIHN1Y2Vzc28nLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgICdhcHBsaWNhdGlvbi9qc29uJzoge1xuICAgICAgICBleGFtcGxlOiAnJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAncGFnZScsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZXNjcmlwdGlvbjogJ1DDoWdpbmEgYXR1YWwnLFxuICB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdsaW1pdCcsXG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZXNjcmlwdGlvbjogJ0l0ZW5zIHBvciBww6FnaW5hJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnc2VhcmNoJyxcbiAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlc2NyaXB0aW9uOiAnVGVybW8gZGUgYnVzY2EgKG5vbWUpJyxcbiAgfSlcbiAgQEFwaVF1ZXJ5KHtcbiAgICBuYW1lOiAnYXRpdm8nLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlc2NyaXB0aW9uOiAnRmlsdHJvIHBvciBzdGF0dXMnLFxuICB9KVxuICBhc3luYyBmaW5kQWxsKFxuICAgIEBRdWVyeSgncGFnZScpIHBhZ2U/OiBudW1iZXIsXG4gICAgQFF1ZXJ5KCdsaW1pdCcpIGxpbWl0PzogbnVtYmVyLFxuICAgIEBRdWVyeSgnc2VhcmNoJykgc2VhcmNoPzogc3RyaW5nLFxuICAgIEBRdWVyeSgnYXRpdm8nKSBhdGl2bz86IGJvb2xlYW4sXG4gICkge1xuICAgIHJldHVybiB0aGlzLmJlbmVmaWNpb1NlcnZpY2UuZmluZEFsbCh7XG4gICAgICBwYWdlOiBwYWdlID8gK3BhZ2UgOiB1bmRlZmluZWQsXG4gICAgICBsaW1pdDogbGltaXQgPyArbGltaXQgOiB1bmRlZmluZWQsXG4gICAgICBzZWFyY2gsXG4gICAgICBhdGl2bzogYXRpdm8gIT09IHVuZGVmaW5lZCA/IGF0aXZvIDogdW5kZWZpbmVkLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBkZXRhbGhlcyBkZSB1bSB0aXBvIGRlIGJlbmVmw61jaW8gZXNwZWPDrWZpY29cbiAgICovXG4gIEBHZXQoJzppZCcpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnYmVuZWZpY2lvLnZpc3VhbGl6YXInLFxuICAgIHNjb3BlVHlwZTogU2NvcGVUeXBlLkdMT0JBTCxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ09idGVyIGRldGFsaGVzIGRlIHVtIGJlbmVmw61jaW8nLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldG9ybmEgb3MgZGV0YWxoZXMgY29tcGxldG9zIGRlIHVtIHRpcG8gZGUgYmVuZWbDrWNpbyBlc3BlY8OtZmljby4nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQmVuZWbDrWNpbyBlbmNvbnRyYWRvIGNvbSBzdWNlc3NvJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZGVzY3JpcHRpb246ICdCZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycsXG4gICAgY29udGVudDoge1xuICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nOiB7XG4gICAgICAgIGV4YW1wbGU6ICcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBhc3luYyBmaW5kT25lKEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuYmVuZWZpY2lvU2VydmljZS5maW5kQnlJZChpZCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JpYSB1bSBub3ZvIHRpcG8gZGUgYmVuZWbDrWNpb1xuICAgKi9cbiAgQFBvc3QoKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHtcbiAgICBwZXJtaXNzaW9uTmFtZTogJ2JlbmVmaWNpby5jcmlhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQ3JpYXIgbm92byB0aXBvIGRlIGJlbmVmw61jaW8nLFxuICAgIGRlc2NyaXB0aW9uOiAnQ3JpYSB1bSBub3ZvIHRpcG8gZGUgYmVuZWbDrWNpbyBubyBzaXN0ZW1hLicsXG4gIH0pXG4gIEBBcGlCb2R5KHtcbiAgICB0eXBlOiBDcmVhdGVUaXBvQmVuZWZpY2lvRHRvLFxuICAgIGV4YW1wbGVzOiB7XG4gICAgICAnQXV4w61saW8gRW1lcmdlbmNpYWwnOiB7XG4gICAgICAgIHZhbHVlOiAnJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcbiAgICBkZXNjcmlwdGlvbjogJ0JlbmVmw61jaW8gY3JpYWRvIGNvbSBzdWNlc3NvJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDAsXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDksXG4gICAgZGVzY3JpcHRpb246ICdOb21lIGrDoSBlbSB1c28nLFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgICdhcHBsaWNhdGlvbi9qc29uJzoge1xuICAgICAgICBleGFtcGxlOiAnJyxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSlcbiAgYXN5bmMgY3JlYXRlKEBCb2R5KCkgY3JlYXRlVGlwb0JlbmVmaWNpb0R0bzogQ3JlYXRlVGlwb0JlbmVmaWNpb0R0bykge1xuICAgIHJldHVybiB0aGlzLmJlbmVmaWNpb1NlcnZpY2UuY3JlYXRlKGNyZWF0ZVRpcG9CZW5lZmljaW9EdG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dWFsaXphIHVtIHRpcG8gZGUgYmVuZWbDrWNpbyBleGlzdGVudGVcbiAgICovXG4gIEBQdXQoJzppZCcpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnYmVuZWZpY2lvLmVkaXRhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQXR1YWxpemFyIHRpcG8gZGUgYmVuZWbDrWNpbyBleGlzdGVudGUnLFxuICAgIGRlc2NyaXB0aW9uOiAnQXR1YWxpemEgb3MgZGFkb3MgZGUgdW0gdGlwbyBkZSBiZW5lZsOtY2lvIGV4aXN0ZW50ZS4nLFxuICB9KVxuICBAQXBpQm9keSh7XG4gICAgdHlwZTogVXBkYXRlVGlwb0JlbmVmaWNpb0R0byxcbiAgICBleGFtcGxlczoge1xuICAgICAgJ0F0dWFsaXphw6fDo28gZGUgQmVuZWbDrWNpbyc6IHtcbiAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQmVuZWbDrWNpbyBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDAsXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZGVzY3JpcHRpb246ICdCZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycsXG4gICAgY29udGVudDoge1xuICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nOiB7XG4gICAgICAgIGV4YW1wbGU6ICcnLFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDA5LFxuICAgIGRlc2NyaXB0aW9uOiAnTm9tZSBqw6EgZW0gdXNvJyxcbiAgICBjb250ZW50OiB7XG4gICAgICAnYXBwbGljYXRpb24vanNvbic6IHtcbiAgICAgICAgZXhhbXBsZTogJycsXG4gICAgICB9LFxuICAgIH0sXG4gIH0pXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZyxcbiAgICBAQm9keSgpIHVwZGF0ZVRpcG9CZW5lZmljaW9EdG86IFVwZGF0ZVRpcG9CZW5lZmljaW9EdG8sXG4gICkge1xuICAgIHJldHVybiB0aGlzLmJlbmVmaWNpb1NlcnZpY2UudXBkYXRlKGlkLCB1cGRhdGVUaXBvQmVuZWZpY2lvRHRvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0YSByZXF1aXNpdG9zIGRvY3VtZW50YWlzIGRlIHVtIGJlbmVmw61jaW9cbiAgICovXG4gIEBHZXQoJzppZC9yZXF1aXNpdG9zJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdiZW5lZmljaW8ucmVxdWlzaXRvLmxpc3RhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0xpc3RhciByZXF1aXNpdG9zIGRvY3VtZW50YWlzJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnTGlzdGEgZGUgcmVxdWlzaXRvcyByZXRvcm5hZGEgY29tIHN1Y2Vzc28nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwNCwgZGVzY3JpcHRpb246ICdCZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycgfSlcbiAgYXN5bmMgZmluZFJlcXVpc2l0b3MoQFBhcmFtKCdpZCcsIFBhcnNlVVVJRFBpcGUpIGlkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5iZW5lZmljaW9TZXJ2aWNlLmZpbmRSZXF1aXNpdG9zQnlCZW5lZmljaW9JZChpZCk7XG4gIH1cblxuICAvKipcbiAgICogQWRpY2lvbmEgcmVxdWlzaXRvIGRvY3VtZW50YWwgYSB1bSBiZW5lZsOtY2lvXG4gICAqL1xuICBAUG9zdCgnOmlkL3JlcXVpc2l0b3MnKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHtcbiAgICBwZXJtaXNzaW9uTmFtZTogJ2JlbmVmaWNpby5yZXF1aXNpdG8uYWRpY2lvbmFyJyxcbiAgICBzY29wZVR5cGU6IFNjb3BlVHlwZS5HTE9CQUwsXG4gIH0pXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQWRpY2lvbmFyIHJlcXVpc2l0byBkb2N1bWVudGFsJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDIwMSwgZGVzY3JpcHRpb246ICdSZXF1aXNpdG8gYWRpY2lvbmFkbyBjb20gc3VjZXNzbycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDAsIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDQsIGRlc2NyaXB0aW9uOiAnQmVuZWbDrWNpbyBuw6NvIGVuY29udHJhZG8nIH0pXG4gIGFzeW5jIGFkZFJlcXVpc2l0byhcbiAgICBAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZyxcbiAgICBAQm9keSgpIGNyZWF0ZVJlcXVpc2l0b0RvY3VtZW50b0R0bzogQ3JlYXRlUmVxdWlzaXRvRG9jdW1lbnRvRHRvLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5iZW5lZmljaW9TZXJ2aWNlLmFkZFJlcXVpc2l0byhpZCwgY3JlYXRlUmVxdWlzaXRvRG9jdW1lbnRvRHRvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmEgZmx1eG8gZGUgYXByb3Zhw6fDo28gZGUgdW0gYmVuZWbDrWNpb1xuICAgKi9cbiAgQFB1dCgnOmlkL2ZsdXhvJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdiZW5lZmljaW8uZmx1eG8uY29uZmlndXJhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0NvbmZpZ3VyYXIgZmx1eG8gZGUgYXByb3Zhw6fDo28nIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogMjAwLCBkZXNjcmlwdGlvbjogJ0ZsdXhvIGNvbmZpZ3VyYWRvIGNvbSBzdWNlc3NvJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMCwgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwNCwgZGVzY3JpcHRpb246ICdCZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycgfSlcbiAgYXN5bmMgY29uZmlndXJhckZsdXhvKFxuICAgIEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nLFxuICAgIEBCb2R5KCkgY29uZmlndXJhckZsdXhvRHRvOiBDb25maWd1cmFyRmx1eG9EdG8sXG4gICkge1xuICAgIHJldHVybiB0aGlzLmJlbmVmaWNpb1NlcnZpY2UuY29uZmlndXJhckZsdXhvKGlkLCBjb25maWd1cmFyRmx1eG9EdG8pO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=