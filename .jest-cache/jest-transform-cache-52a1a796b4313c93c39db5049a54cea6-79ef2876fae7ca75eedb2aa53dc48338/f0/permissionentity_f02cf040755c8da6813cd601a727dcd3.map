{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\permission.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\permission.entity.ts"],"sourcesContent":["import {\n  Column,\n  CreateDateColumn,\n  Entity,\n  JoinColumn,\n  ManyToOne,\n  OneToMany,\n  PrimaryGeneratedColumn,\n  UpdateDateColumn,\n  Index,\n} from 'typeorm';\nimport {\n  IsNotEmpty,\n  IsString,\n  Length,\n  IsOptional,\n  IsEnum,\n} from 'class-validator';\nimport { Status } from '../enums/status.enum';\nimport { Usuario } from './usuario.entity';\n\n/**\n * Entidade que representa uma permissão no sistema.\n *\n * As permissões seguem o formato `modulo.recurso.operacao` e podem ser compostas\n * (ex: `modulo.*` para representar todas as permissões de um módulo).\n */\n@Entity('permissao')\n@Index(['nome'], { unique: true })\n@Index(['modulo'])\n@Index(['acao'])\n@Index(['status'])\nexport class Permission {\n  /**\n   * Identificador único da permissão\n   */\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  /**\n   * Nome da permissão no formato `modulo.recurso.operacao`\n   */\n  @Column({ type: 'varchar', length: 100, unique: true, name: 'nome' })\n  @IsNotEmpty({ message: 'Nome da permissão é obrigatório' })\n  @IsString({ message: 'Nome deve ser uma string' })\n  @Length(3, 100, { message: 'Nome deve ter entre 3 e 100 caracteres' })\n  nome: string;\n\n  /**\n   * Descrição da permissão\n   */\n  @Column({ type: 'varchar', length: 255, name: 'descricao' })\n  @IsNotEmpty({ message: 'Descrição da permissão é obrigatória' })\n  @IsString({ message: 'Descrição deve ser uma string' })\n  @Length(5, 255, { message: 'Descrição deve ter entre 5 e 255 caracteres' })\n  descricao: string;\n\n  /**\n   * Módulo ao qual a permissão pertence\n   */\n  @Column({ type: 'varchar', length: 50, nullable: true, name: 'modulo' })\n  @IsOptional()\n  @IsString({ message: 'Módulo deve ser uma string' })\n  @Length(2, 50, { message: 'Módulo deve ter entre 2 e 50 caracteres' })\n  modulo: string | null;\n\n  /**\n   * Ação permitida pela permissão\n   */\n  @Column({ type: 'varchar', length: 50, nullable: true, name: 'acao' })\n  @IsOptional()\n  @IsString({ message: 'Ação deve ser uma string' })\n  @Length(2, 50, { message: 'Ação deve ter entre 2 e 50 caracteres' })\n  acao: string | null;\n\n  /**\n   * Status da permissão (ativo/inativo)\n   */\n  @Column({\n    type: 'enum',\n    enum: Status,\n    default: Status.ATIVO,\n    name: 'status',\n  })\n  @IsEnum(Status, { message: 'Status deve ser ATIVO ou INATIVO' })\n  status: Status;\n\n  // Nota: As propriedades e relacionamentos hierárquicos foram removidos\n  // pois não existem no banco de dados.\n\n  // Nota: As colunas criado_por e atualizado_por foram removidas\n  // pois não existem no banco de dados atual.\n\n  /**\n   * Data de criação\n   */\n  @CreateDateColumn({ name: 'created_at' })\n  created_at: Date;\n\n  /**\n   * Data de última atualização\n   */\n  @UpdateDateColumn({ name: 'updated_at' })\n  updated_at: Date;\n\n  // Getters e setters para compatibilidade com código existente\n  get name(): string {\n    return this.nome;\n  }\n\n  set name(value: string) {\n    this.nome = value;\n  }\n\n  get description(): string {\n    return this.descricao;\n  }\n\n  set description(value: string) {\n    this.descricao = value;\n  }\n\n  // Getters e setters para hierarquia foram removidos pois não existem no banco de dados\n  // Método para determinar se é uma permissão composta pelo nome\n  isHierarchical(): boolean {\n    return this.nome ? this.nome.includes('.*') : false;\n  }\n\n  // Método para obter o módulo de uma permissão pelo nome\n  getModule(): string {\n    if (!this.nome) {\n      return '';\n    }\n    const parts = this.nome.split('.');\n    return parts.length > 0 ? parts[0] : '';\n  }\n\n  // Método para verificar se uma permissão é parte de um módulo\n  isPartOfModule(moduleName: string): boolean {\n    return this.nome ? this.nome.startsWith(`${moduleName}.`) : false;\n  }\n\n  get createdAt(): Date {\n    return this.created_at;\n  }\n\n  get updatedAt(): Date {\n    return this.updated_at;\n  }\n\n  // Métodos utilitários para gerenciar status\n  /**\n   * Verifica se a permissão está ativa\n   */\n  isAtiva(): boolean {\n    return this.status === Status.ATIVO;\n  }\n\n  /**\n   * Ativa a permissão\n   */\n  ativar(): void {\n    this.status = Status.ATIVO;\n  }\n\n  /**\n   * Desativa a permissão\n   */\n  desativar(): void {\n    this.status = Status.INATIVO;\n  }\n\n  /**\n   * Verifica se a permissão pode ser deletada\n   * (implementar lógica específica conforme regras de negócio)\n   */\n  podeSerDeletada(): boolean {\n    // Por enquanto, permite deletar apenas permissões inativas\n    return this.status === Status.INATIVO;\n  }\n\n  /**\n   * Valida o formato do nome da permissão\n   */\n  validarFormatoNome(): boolean {\n    if (!this.nome) return false;\n\n    // Formato esperado: modulo.recurso.operacao ou modulo.*\n    const regex = /^[a-zA-Z][a-zA-Z0-9_-]*\\.[a-zA-Z*][a-zA-Z0-9_.*-]*$/;\n    return regex.test(this.nome);\n  }\n\n  /**\n   * Extrai informações estruturadas do nome da permissão\n   */\n  getPermissionInfo(): { modulo: string; recurso?: string; operacao?: string } {\n    if (!this.nome) {\n      return { modulo: '' };\n    }\n\n    const parts = this.nome.split('.');\n\n    if (parts.length === 2 && parts[1] === '*') {\n      return { modulo: parts[0] };\n    }\n\n    if (parts.length >= 3) {\n      return {\n        modulo: parts[0],\n        recurso: parts[1],\n        operacao: parts.slice(2).join('.'),\n      };\n    }\n\n    return { modulo: parts[0] };\n  }\n\n  /**\n   * Verifica se a permissão é uma permissão de administrador\n   */\n  isAdminPermission(): boolean {\n    return this.nome ? this.nome.startsWith('admin.') : false;\n  }\n\n  /**\n   * Verifica se a permissão é uma permissão de sistema\n   */\n  isSystemPermission(): boolean {\n    return this.nome ? this.nome.startsWith('system.') : false;\n  }\n\n  /**\n   * Verifica se a permissão é uma permissão de leitura\n   */\n  isReadPermission(): boolean {\n    return this.nome\n      ? this.nome.includes('.read') ||\n          this.nome.includes('.view') ||\n          this.nome.includes('.list')\n      : false;\n  }\n\n  /**\n   * Verifica se a permissão é uma permissão de escrita\n   */\n  isWritePermission(): boolean {\n    return this.nome\n      ? this.nome.includes('.write') ||\n          this.nome.includes('.create') ||\n          this.nome.includes('.update') ||\n          this.nome.includes('.delete')\n      : false;\n  }\n\n  /**\n   * Verifica se a permissão é uma permissão global (com wildcard)\n   */\n  isGlobalPermission(): boolean {\n    return this.nome ? this.nome.endsWith('.*') : false;\n  }\n\n  /**\n   * Obtém o nível de criticidade da permissão\n   */\n  getCriticalityLevel(): 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL' {\n    if (this.isSystemPermission() || this.isAdminPermission()) {\n      return 'CRITICAL';\n    }\n\n    if (this.isGlobalPermission()) {\n      return 'HIGH';\n    }\n\n    if (this.isWritePermission()) {\n      return 'MEDIUM';\n    }\n\n    return 'LOW';\n  }\n\n  /**\n   * Verifica se a permissão é compatível com outra permissão\n   */\n  isCompatibleWith(otherPermission: Permission): boolean {\n    if (!this.nome || !otherPermission.nome) {\n      return false;\n    }\n\n    // Permissões do mesmo módulo são compatíveis\n    return this.getModule() === otherPermission.getModule();\n  }\n\n  /**\n   * Gera uma chave única para a permissão\n   */\n  getUniqueKey(): string {\n    return `permission_${this.nome}_${this.id}`;\n  }\n\n  /**\n   * Verifica se a permissão inclui outra permissão (para permissões hierárquicas)\n   */\n  includes(otherPermission: Permission): boolean {\n    if (!this.nome || !otherPermission.nome) {\n      return false;\n    }\n\n    // Se esta permissão é global para um módulo, inclui todas as permissões do módulo\n    if (this.isGlobalPermission()) {\n      const thisModule = this.getModule();\n      const otherModule = otherPermission.getModule();\n      return thisModule === otherModule;\n    }\n\n    // Caso contrário, só inclui se for exatamente a mesma permissão\n    return this.nome === otherPermission.nome;\n  }\n\n  /**\n   * Obtém uma descrição amigável da permissão\n   */\n  getFriendlyDescription(): string {\n    const info = this.getPermissionInfo();\n\n    if (this.isGlobalPermission()) {\n      return `Todas as permissões do módulo ${info.modulo}`;\n    }\n\n    if (info.recurso && info.operacao) {\n      return `${info.operacao} em ${info.recurso} do módulo ${info.modulo}`;\n    }\n\n    return this.descricao || this.nome;\n  }\n\n  /**\n   * Valida se a permissão está em um estado consistente\n   */\n  isValid(): boolean {\n    return (\n      !!this.nome &&\n      !!this.descricao &&\n      this.validarFormatoNome() &&\n      Object.values(Status).includes(this.status)\n    );\n  }\n\n  // Métodos getters e setters para criado_por e atualizado_por foram removidos\n  // pois as colunas não existem no banco de dados atual.\n}\n"],"version":3}