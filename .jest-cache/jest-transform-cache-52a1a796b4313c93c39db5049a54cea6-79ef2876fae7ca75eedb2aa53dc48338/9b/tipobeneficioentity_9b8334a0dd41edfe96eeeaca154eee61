bbe6527b6040eea581382d1a54df3281
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TipoBeneficio = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const solicitacao_entity_1 = require("./solicitacao.entity");
const requisito_documento_entity_1 = require("./requisito-documento.entity");
const campo_dinamico_beneficio_entity_1 = require("./campo-dinamico-beneficio.entity");
const enums_1 = require("../enums");
let TipoBeneficio = class TipoBeneficio {
    id;
    codigo;
    nome;
    descricao;
    periodicidade;
    valor;
    status;
    criterios_elegibilidade;
    especificacoes;
    requisito_documento;
    campos_dinamicos;
    solicitacao;
    created_at;
    updated_at;
    removed_at;
    // Getters e Setters
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se o benefício foi criado recentemente (últimas 24 horas)
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do registro em dias
     */
    getIdadeRegistroEmDias() {
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    /**
     * Verifica se o benefício foi removido
     */
    foiRemovido() {
        return !!this.removed_at;
    }
    /**
     * Verifica se o benefício está ativo
     */
    isAtivo() {
        return this.status === 'ativo' && !this.removed_at;
    }
    /**
     * Verifica se é benefício único
     */
    isBeneficioUnico() {
        return this.periodicidade === enums_1.PeriodicidadeEnum.UNICO;
    }
    /**
     * Verifica se é benefício recorrente
     */
    isBeneficioRecorrente() {
        return !this.isBeneficioUnico();
    }
    /**
     * Verifica se é benefício mensal
     */
    isBeneficioMensal() {
        return this.periodicidade === enums_1.PeriodicidadeEnum.MENSAL;
    }
    /**
     * Verifica se tem valor definido
     */
    temValor() {
        return this.valor !== null && this.valor !== undefined && this.valor > 0;
    }
    /**
     * Obtém o valor formatado em moeda brasileira
     */
    getValorFormatado() {
        if (!this.temValor())
            return 'Valor não definido';
        return new Intl.NumberFormat('pt-BR', {
            style: 'currency',
            currency: 'BRL',
        }).format(this.valor);
    }
    /**
     * Obtém a descrição da periodicidade
     */
    getDescricaoPeriodicidade() {
        const descricoes = {
            [enums_1.PeriodicidadeEnum.UNICO]: 'Único',
            [enums_1.PeriodicidadeEnum.MENSAL]: 'Mensal',
            [enums_1.PeriodicidadeEnum.BIMESTRAL]: 'Bimestral',
            [enums_1.PeriodicidadeEnum.TRIMESTRAL]: 'Trimestral',
            [enums_1.PeriodicidadeEnum.SEMESTRAL]: 'Semestral',
            [enums_1.PeriodicidadeEnum.ANUAL]: 'Anual',
        };
        return descricoes[this.periodicidade] || 'Não definido';
    }
    /**
     * Verifica se tem critérios de elegibilidade definidos
     */
    temCriteriosElegibilidade() {
        return (!!this.criterios_elegibilidade &&
            Object.keys(this.criterios_elegibilidade).length > 0);
    }
    /**
     * Verifica se tem critério de idade mínima
     */
    temIdadeMinima() {
        return (this.temCriteriosElegibilidade() &&
            this.criterios_elegibilidade.idade_minima !== undefined &&
            this.criterios_elegibilidade.idade_minima !== null);
    }
    /**
     * Verifica se tem critério de idade máxima
     */
    temIdadeMaxima() {
        return (this.temCriteriosElegibilidade() &&
            this.criterios_elegibilidade.idade_maxima !== undefined &&
            this.criterios_elegibilidade.idade_maxima !== null);
    }
    /**
     * Verifica se tem critério de renda máxima
     */
    temRendaMaxima() {
        return (this.temCriteriosElegibilidade() &&
            this.criterios_elegibilidade.renda_maxima !== undefined &&
            this.criterios_elegibilidade.renda_maxima !== null);
    }
    /**
     * Verifica se tem critério de tempo mínimo de residência
     */
    temTempoMinimoResidencia() {
        return (this.temCriteriosElegibilidade() &&
            this.criterios_elegibilidade.tempo_minimo_residencia !== undefined &&
            this.criterios_elegibilidade.tempo_minimo_residencia !== null);
    }
    /**
     * Verifica se uma idade atende aos critérios
     */
    idadeAtendeAosCriterios(idade) {
        if (!this.temCriteriosElegibilidade())
            return true;
        if (this.temIdadeMinima() &&
            idade < (this.criterios_elegibilidade?.idade_minima ?? 0)) {
            return false;
        }
        if (this.temIdadeMaxima() &&
            idade > (this.criterios_elegibilidade?.idade_maxima ?? 0)) {
            return false;
        }
        return true;
    }
    /**
     * Verifica se uma renda atende aos critérios
     */
    rendaAtendeAosCriterios(renda) {
        if (!this.temRendaMaxima())
            return true;
        return (this.criterios_elegibilidade.renda_maxima !== undefined &&
            renda <= this.criterios_elegibilidade.renda_maxima);
    }
    /**
     * Verifica se o tempo de residência atende aos critérios
     */
    tempoResidenciaAtendeAosCriterios(tempoMeses) {
        if (!this.temTempoMinimoResidencia())
            return true;
        return (this.criterios_elegibilidade.tempo_minimo_residencia !== undefined &&
            tempoMeses >= this.criterios_elegibilidade.tempo_minimo_residencia);
    }
    /**
     * Obtém a faixa etária permitida
     */
    getFaixaEtaria() {
        if (!this.temIdadeMinima() && !this.temIdadeMaxima()) {
            return 'Qualquer idade';
        }
        if (this.temIdadeMinima() && !this.temIdadeMaxima()) {
            return `A partir de ${this.criterios_elegibilidade.idade_minima} anos`;
        }
        if (!this.temIdadeMinima() && this.temIdadeMaxima()) {
            return `Até ${this.criterios_elegibilidade.idade_maxima} anos`;
        }
        return `De ${this.criterios_elegibilidade.idade_minima} a ${this.criterios_elegibilidade.idade_maxima} anos`;
    }
    /**
     * Obtém a renda máxima formatada
     */
    getRendaMaximaFormatada() {
        if (!this.temRendaMaxima() ||
            this.criterios_elegibilidade.renda_maxima === undefined)
            return 'Sem limite de renda';
        return new Intl.NumberFormat('pt-BR', {
            style: 'currency',
            currency: 'BRL',
        }).format(this.criterios_elegibilidade.renda_maxima);
    }
    /**
     * Obtém o tempo mínimo de residência formatado
     */
    getTempoMinimoResidenciaFormatado() {
        if (!this.temTempoMinimoResidencia())
            return 'Sem exigência de tempo';
        const meses = this.criterios_elegibilidade.tempo_minimo_residencia;
        if (meses === undefined || meses < 12) {
            return `${meses ?? 0} mês(es)`;
        }
        else {
            const anos = Math.floor(meses / 12);
            const mesesRestantes = meses % 12;
            if (mesesRestantes === 0) {
                return `${anos} ano(s)`;
            }
            else {
                return `${anos} ano(s) e ${mesesRestantes} mês(es)`;
            }
        }
    }
    /**
     * Obtém lista de outros critérios
     */
    getOutrosCriterios() {
        if (!this.temCriteriosElegibilidade() ||
            !this.criterios_elegibilidade.outros) {
            return [];
        }
        return this.criterios_elegibilidade.outros;
    }
    /**
     * Verifica se tem requisitos de documentos
     */
    temRequisitosDocumentos() {
        return this.requisito_documento && this.requisito_documento.length > 0;
    }
    /**
     * Obtém número de requisitos obrigatórios
     */
    getNumeroRequisitosObrigatorios() {
        if (!this.temRequisitosDocumentos())
            return 0;
        return this.requisito_documento.filter((req) => req.obrigatorio).length;
    }
    /**
     * Verifica se tem campos dinâmicos
     */
    temCamposDinamicos() {
        return this.campos_dinamicos && this.campos_dinamicos.length > 0;
    }
    /**
     * Obtém número de campos dinâmicos obrigatórios
     */
    getNumeroCamposDinamicosObrigatorios() {
        if (!this.temCamposDinamicos())
            return 0;
        return this.campos_dinamicos.filter((campo) => campo.obrigatorio).length;
    }
    /**
     * Verifica se pode ser solicitado (ativo e não removido)
     */
    podeSerSolicitado() {
        return this.isAtivo();
    }
    /**
     * Obtém um resumo do benefício
     */
    getSummary() {
        const valor = this.getValorFormatado();
        const periodicidade = this.getDescricaoPeriodicidade();
        const status = this.isAtivo() ? 'Ativo' : 'Inativo';
        return `${this.nome} - ${valor} (${periodicidade}) - ${status}`;
    }
    /**
     * Gera uma chave única para o benefício
     */
    getUniqueKey() {
        return `tipo_beneficio_${this.nome.toLowerCase().replace(/\s+/g, '_')}`;
    }
    /**
     * Verifica se o benefício é consistente
     */
    isConsistente() {
        // Verifica se tem nome
        if (!this.nome || this.nome.trim().length === 0)
            return false;
        // Verifica se tem descrição
        if (!this.descricao || this.descricao.trim().length === 0)
            return false;
        // Verifica se tem valor válido
        if (!this.temValor())
            return false;
        // Verifica critérios de elegibilidade
        if (this.temCriteriosElegibilidade()) {
            if (this.temIdadeMinima() && this.temIdadeMaxima()) {
                if (this.criterios_elegibilidade.idade_minima !== undefined &&
                    this.criterios_elegibilidade.idade_maxima !== undefined &&
                    this.criterios_elegibilidade.idade_minima >
                        this.criterios_elegibilidade.idade_maxima) {
                    return false;
                }
            }
            if (this.temRendaMaxima() &&
                this.criterios_elegibilidade.renda_maxima !== undefined &&
                this.criterios_elegibilidade.renda_maxima < 0) {
                return false;
            }
            if (this.temTempoMinimoResidencia() &&
                this.criterios_elegibilidade.tempo_minimo_residencia !== undefined &&
                this.criterios_elegibilidade.tempo_minimo_residencia < 0) {
                return false;
            }
        }
        return true;
    }
    /**
     * Verifica se pode ser removido
     */
    podeSerRemovido() {
        // Não pode remover se já foi removido
        if (this.foiRemovido())
            return false;
        // Pode implementar lógica adicional aqui
        // Por exemplo, verificar se tem solicitações ativas
        return true;
    }
    /**
     * Clona o tipo de benefício (sem ID)
     */
    clone() {
        return {
            nome: this.nome,
            descricao: this.descricao,
            periodicidade: this.periodicidade,
            valor: this.valor,
            status: enums_1.Status.ATIVO,
            criterios_elegibilidade: this.criterios_elegibilidade
                ? JSON.parse(JSON.stringify(this.criterios_elegibilidade))
                : null,
        };
    }
    /**
     * Verifica se é um benefício de alto valor
     */
    isAltoValor() {
        // Considera alto valor acima de R$ 1000
        return this.temValor() && this.valor > 1000;
    }
    /**
     * Obtém a complexidade do benefício baseada em critérios e requisitos
     */
    getComplexidade() {
        let pontos = 0;
        // Critérios de elegibilidade
        if (this.temCriteriosElegibilidade()) {
            pontos += Object.keys(this.criterios_elegibilidade).length;
        }
        // Requisitos de documentos
        if (this.temRequisitosDocumentos()) {
            pontos += this.requisito_documento.length;
        }
        // Campos dinâmicos
        if (this.temCamposDinamicos()) {
            pontos += this.campos_dinamicos.length;
        }
        if (pontos <= 3)
            return 'BAIXA';
        if (pontos <= 7)
            return 'MEDIA';
        return 'ALTA';
    }
    /**
     * Formata a data de criação
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de atualização
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleDateString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            nome: this.nome,
            periodicidade: this.periodicidade,
            status: enums_1.Status.ATIVO,
            created_at: this.created_at,
            updated_at: this.updated_at,
        };
    }
    /**
     * Obtém sugestões de melhoria para o benefício
     */
    getSugestoesMelhoria() {
        const sugestoes = [];
        if (!this.temCriteriosElegibilidade()) {
            sugestoes.push('Definir critérios de elegibilidade');
        }
        if (!this.temRequisitosDocumentos()) {
            sugestoes.push('Adicionar requisitos de documentos');
        }
        if (!this.isConsistente()) {
            sugestoes.push('Verificar e corrigir inconsistências nos dados');
        }
        if (this.status === enums_1.Status.INATIVO) {
            sugestoes.push('Considerar reativar o benefício se necessário');
        }
        return sugestoes;
    }
    /**
     * Verifica se precisa de atualização (dados muito antigos)
     */
    precisaAtualizacao() {
        // Dados com mais de 1 ano podem precisar de revisão
        const umAnoAtras = new Date();
        umAnoAtras.setFullYear(umAnoAtras.getFullYear() - 1);
        return this.updated_at < umAnoAtras;
    }
    /**
     * Obtém estatísticas do benefício
     */
    getEstatisticas() {
        return {
            valor: this.getValorFormatado(),
            periodicidade: this.getDescricaoPeriodicidade(),
            complexidade: this.getComplexidade(),
            criteriosElegibilidade: this.temCriteriosElegibilidade()
                ? Object.keys(this.criterios_elegibilidade).length
                : 0,
            requisitosDocumentos: this.temRequisitosDocumentos()
                ? this.requisito_documento.length
                : 0,
            camposDinamicos: this.temCamposDinamicos()
                ? this.campos_dinamicos.length
                : 0,
        };
    }
};
exports.TipoBeneficio = TipoBeneficio;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], TipoBeneficio.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Código é obrigatório' }),
    __metadata("design:type", String)
], TipoBeneficio.prototype, "codigo", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome é obrigatório' }),
    __metadata("design:type", String)
], TipoBeneficio.prototype, "nome", void 0);
__decorate([
    (0, typeorm_1.Column)('text'),
    (0, class_validator_1.IsNotEmpty)({ message: 'Descrição é obrigatória' }),
    __metadata("design:type", String)
], TipoBeneficio.prototype, "descricao", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: enums_1.PeriodicidadeEnum,
        enumName: 'periodicidade',
        default: enums_1.PeriodicidadeEnum.UNICO,
    }),
    __metadata("design:type", typeof (_a = typeof enums_1.PeriodicidadeEnum !== "undefined" && enums_1.PeriodicidadeEnum) === "function" ? _a : Object)
], TipoBeneficio.prototype, "periodicidade", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2 }),
    (0, class_validator_1.IsNumber)({}, { message: 'Valor deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Valor não pode ser negativo' }),
    __metadata("design:type", Number)
], TipoBeneficio.prototype, "valor", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: enums_1.Status,
        enumName: 'status_enum',
        default: enums_1.Status.ATIVO,
    }),
    __metadata("design:type", typeof (_b = typeof enums_1.Status !== "undefined" && enums_1.Status) === "function" ? _b : Object)
], TipoBeneficio.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TipoBeneficio.prototype, "criterios_elegibilidade", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], TipoBeneficio.prototype, "especificacoes", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => requisito_documento_entity_1.RequisitoDocumento, (requisito) => requisito.tipo_beneficio),
    __metadata("design:type", Array)
], TipoBeneficio.prototype, "requisito_documento", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => campo_dinamico_beneficio_entity_1.CampoDinamicoBeneficio, (campo) => campo.tipo_beneficio),
    __metadata("design:type", Array)
], TipoBeneficio.prototype, "campos_dinamicos", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => solicitacao_entity_1.Solicitacao, (solicitacao) => solicitacao.tipo_beneficio),
    __metadata("design:type", Array)
], TipoBeneficio.prototype, "solicitacao", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], TipoBeneficio.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], TipoBeneficio.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], TipoBeneficio.prototype, "removed_at", void 0);
exports.TipoBeneficio = TipoBeneficio = __decorate([
    (0, typeorm_1.Entity)('tipo_beneficio'),
    (0, typeorm_1.Index)(['nome'], { unique: true }),
    (0, typeorm_1.Index)(['codigo'], { unique: true })
], TipoBeneficio);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFx0aXBvLWJlbmVmaWNpby5lbnRpdHkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLHFDQVNpQjtBQUNqQixxREFBNEQ7QUFDNUQsNkRBQW1EO0FBQ25ELDZFQUFrRTtBQUNsRSx1RkFBMkU7QUFDM0Usb0NBQXFEO0FBSzlDLElBQU0sYUFBYSxHQUFuQixNQUFNLGFBQWE7SUFFeEIsRUFBRSxDQUFTO0lBSVgsTUFBTSxDQUFTO0lBSWYsSUFBSSxDQUFTO0lBSWIsU0FBUyxDQUFTO0lBUWxCLGFBQWEsQ0FBb0I7SUFLakMsS0FBSyxDQUFTO0lBUWQsTUFBTSxDQUFTO0lBR2YsdUJBQXVCLENBTXJCO0lBR0YsY0FBYyxDQStCWjtJQUdGLG1CQUFtQixDQUF1QjtJQUcxQyxnQkFBZ0IsQ0FBMkI7SUFHM0MsV0FBVyxDQUFnQjtJQUczQixVQUFVLENBQU87SUFHakIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUVqQixvQkFBb0I7SUFDcEIsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsc0JBQXNCO0lBRXRCOztPQUVHO0lBQ0gsb0JBQW9CO1FBQ2xCLE1BQU0sS0FBSyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDekIsTUFBTSxVQUFVLEdBQUcsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ25FLE9BQU8sSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENB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VyxDQUFDLGNBQWMsQ0FBQzs7a0RBQy9DO0FBRzNCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7aURBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTtpREFBQztBQUdqQjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1AsSUFBSSxvQkFBSixJQUFJO2lEQUFDO3dCQWhHTixhQUFhO0lBSHpCLElBQUEsZ0JBQU0sRUFBQyxnQkFBZ0IsQ0FBQztJQUN4QixJQUFBLGVBQUssRUFBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ2pDLElBQUEsZUFBSyxFQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7R0FDdkIsYUFBYSxDQXltQnpCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxlbnRpdGllc1xcdGlwby1iZW5lZmljaW8uZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEVudGl0eSxcbiAgUHJpbWFyeUdlbmVyYXRlZENvbHVtbixcbiAgQ29sdW1uLFxuICBDcmVhdGVEYXRlQ29sdW1uLFxuICBVcGRhdGVEYXRlQ29sdW1uLFxuICBEZWxldGVEYXRlQ29sdW1uLFxuICBPbmVUb01hbnksXG4gIEluZGV4LFxufSBmcm9tICd0eXBlb3JtJztcbmltcG9ydCB7IElzTm90RW1wdHksIElzTnVtYmVyLCBNaW4gfSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xuaW1wb3J0IHsgU29saWNpdGFjYW8gfSBmcm9tICcuL3NvbGljaXRhY2FvLmVudGl0eSc7XG5pbXBvcnQgeyBSZXF1aXNpdG9Eb2N1bWVudG8gfSBmcm9tICcuL3JlcXVpc2l0by1kb2N1bWVudG8uZW50aXR5JztcbmltcG9ydCB7IENhbXBvRGluYW1pY29CZW5lZmljaW8gfSBmcm9tICcuL2NhbXBvLWRpbmFtaWNvLWJlbmVmaWNpby5lbnRpdHknO1xuaW1wb3J0IHsgUGVyaW9kaWNpZGFkZUVudW0sIFN0YXR1cyB9IGZyb20gJy4uL2VudW1zJztcblxuQEVudGl0eSgndGlwb19iZW5lZmljaW8nKVxuQEluZGV4KFsnbm9tZSddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuQEluZGV4KFsnY29kaWdvJ10sIHsgdW5pcXVlOiB0cnVlIH0pXG5leHBvcnQgY2xhc3MgVGlwb0JlbmVmaWNpbyB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKHsgdW5pcXVlOiB0cnVlIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0PDs2RpZ28gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBjb2RpZ286IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnTm9tZSDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIG5vbWU6IHN0cmluZztcblxuICBAQ29sdW1uKCd0ZXh0JylcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnRGVzY3Jpw6fDo28gw6kgb2JyaWdhdMOzcmlhJyB9KVxuICBkZXNjcmljYW86IHN0cmluZztcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogUGVyaW9kaWNpZGFkZUVudW0sXG4gICAgZW51bU5hbWU6ICdwZXJpb2RpY2lkYWRlJyxcbiAgICBkZWZhdWx0OiBQZXJpb2RpY2lkYWRlRW51bS5VTklDTyxcbiAgfSlcbiAgcGVyaW9kaWNpZGFkZTogUGVyaW9kaWNpZGFkZUVudW07XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSlcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdWYWxvciBkZXZlIHNlciB1bSBuw7ptZXJvJyB9KVxuICBATWluKDAsIHsgbWVzc2FnZTogJ1ZhbG9yIG7Do28gcG9kZSBzZXIgbmVnYXRpdm8nIH0pXG4gIHZhbG9yOiBudW1iZXI7XG5cbiAgQENvbHVtbih7XG4gICAgdHlwZTogJ2VudW0nLFxuICAgIGVudW06IFN0YXR1cyxcbiAgICBlbnVtTmFtZTogJ3N0YXR1c19lbnVtJyxcbiAgICBkZWZhdWx0OiBTdGF0dXMuQVRJVk8sXG4gIH0pXG4gIHN0YXR1czogU3RhdHVzO1xuXG4gIEBDb2x1bW4oJ2pzb25iJywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBjcml0ZXJpb3NfZWxlZ2liaWxpZGFkZToge1xuICAgIGlkYWRlX21pbmltYT86IG51bWJlcjtcbiAgICBpZGFkZV9tYXhpbWE/OiBudW1iZXI7XG4gICAgcmVuZGFfbWF4aW1hPzogbnVtYmVyO1xuICAgIHRlbXBvX21pbmltb19yZXNpZGVuY2lhPzogbnVtYmVyO1xuICAgIG91dHJvcz86IHN0cmluZ1tdO1xuICB9O1xuXG4gIEBDb2x1bW4oJ2pzb25iJywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBlc3BlY2lmaWNhY29lczoge1xuICAgIC8vIEVzcGVjaWZpY2HDp8O1ZXMgcGFyYSBBdXjDrWxpbyBOYXRhbGlkYWRlXG4gICAgdGVtcG9fZ2VzdGFjYW9fbWluaW1vPzogbnVtYmVyO1xuICAgIHByYXpvX21heGltb19hcG9zX25hc2NpbWVudG8/OiBudW1iZXI7XG4gICAgcmVxdWVyX3ByZV9uYXRhbD86IGJvb2xlYW47XG4gICAgcmVxdWVyX2NvbXByb3ZhbnRlX3Jlc2lkZW5jaWE/OiBib29sZWFuO1xuICAgIG51bWVyb19tYXhpbW9fZmlsaG9zPzogbnVtYmVyO1xuICAgIHZhbG9yX2NvbXBsZW1lbnRhcj86IG51bWJlcjtcblxuICAgIC8vIEVzcGVjaWZpY2HDp8O1ZXMgcGFyYSBBbHVndWVsIFNvY2lhbFxuICAgIGR1cmFjYW9fbWF4aW1hX21lc2VzPzogbnVtYmVyO1xuICAgIHBlcm1pdGVfcHJvcnJvZ2FjYW8/OiBib29sZWFuO1xuICAgIHRlbXBvX21heGltb19wcm9ycm9nYWNhb19tZXNlcz86IG51bWJlcjtcbiAgICBtb3Rpdm9zX3ZhbGlkb3M/OiBzdHJpbmdbXTtcbiAgICB2YWxvcl9tYXhpbW9fYWx1Z3VlbD86IG51bWJlcjtcbiAgICByZXF1ZXJfdmlzaXRhX3RlY25pY2E/OiBib29sZWFuO1xuXG4gICAgLy8gRXNwZWNpZmljYcOnw7VlcyBwYXJhIEF1eMOtbGlvIEZ1bmVyYWxcbiAgICB2YWxvcl9tYXhpbW9fdXJuYT86IG51bWJlcjtcbiAgICB0aXBvc191cm5hX3Blcm1pdGlkb3M/OiBzdHJpbmdbXTtcbiAgICBwcmF6b19tYXhpbW9fc29saWNpdGFjYW9fZGlhcz86IG51bWJlcjtcbiAgICByZXF1ZXJfY2VydGlkYW9fb2JpdG8/OiBib29sZWFuO1xuICAgIHBlcm1pdGVfcGFyY2VsYW1lbnRvPzogYm9vbGVhbjtcblxuICAgIC8vIEVzcGVjaWZpY2HDp8O1ZXMgcGFyYSBDZXN0YSBCw6FzaWNhXG4gICAgcXVhbnRpZGFkZV9tYXhpbWFfY2VzdGFzPzogbnVtYmVyO1xuICAgIHBlcmlvZGljaWRhZGVfZW50cmVnYT86IHN0cmluZztcbiAgICB0aXBvc19lbnRyZWdhPzogc3RyaW5nW107XG4gICAgaXRlbnNfY2VzdGE/OiBzdHJpbmdbXTtcbiAgICBwZXNvX3RvdGFsX2tnPzogbnVtYmVyO1xuICAgIHBlcm1pdGVfc3Vic3RpdHVpY2FvX2l0ZW5zPzogYm9vbGVhbjtcbiAgfTtcblxuICBAT25lVG9NYW55KCgpID0+IFJlcXVpc2l0b0RvY3VtZW50bywgKHJlcXVpc2l0bykgPT4gcmVxdWlzaXRvLnRpcG9fYmVuZWZpY2lvKVxuICByZXF1aXNpdG9fZG9jdW1lbnRvOiBSZXF1aXNpdG9Eb2N1bWVudG9bXTtcblxuICBAT25lVG9NYW55KCgpID0+IENhbXBvRGluYW1pY29CZW5lZmljaW8sIChjYW1wbykgPT4gY2FtcG8udGlwb19iZW5lZmljaW8pXG4gIGNhbXBvc19kaW5hbWljb3M6IENhbXBvRGluYW1pY29CZW5lZmljaW9bXTtcblxuICBAT25lVG9NYW55KCgpID0+IFNvbGljaXRhY2FvLCAoc29saWNpdGFjYW8pID0+IHNvbGljaXRhY2FvLnRpcG9fYmVuZWZpY2lvKVxuICBzb2xpY2l0YWNhbzogU29saWNpdGFjYW9bXTtcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkX2F0OiBEYXRlO1xuXG4gIEBEZWxldGVEYXRlQ29sdW1uKClcbiAgcmVtb3ZlZF9hdDogRGF0ZTtcblxuICAvLyBHZXR0ZXJzIGUgU2V0dGVyc1xuICBnZXQgY3JlYXRlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZWRfYXQ7XG4gIH1cblxuICBnZXQgdXBkYXRlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZWRfYXQ7XG4gIH1cblxuICBnZXQgcmVtb3ZlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZWRfYXQ7XG4gIH1cblxuICAvLyBNw6l0b2RvcyBVdGlsaXTDoXJpb3NcblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBiZW5lZsOtY2lvIGZvaSBjcmlhZG8gcmVjZW50ZW1lbnRlICjDumx0aW1hcyAyNCBob3JhcylcbiAgICovXG4gIGlzQ3JpYWRvUmVjZW50ZW1lbnRlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB1bURpYUF0cmFzID0gbmV3IERhdGUoYWdvcmEuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdCA+IHVtRGlhQXRyYXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYSBhIGlkYWRlIGRvIHJlZ2lzdHJvIGVtIGRpYXNcbiAgICovXG4gIGdldElkYWRlUmVnaXN0cm9FbURpYXMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBhZ29yYSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZlRpbWUgPSBNYXRoLmFicyhhZ29yYS5nZXRUaW1lKCkgLSB0aGlzLmNyZWF0ZWRfYXQuZ2V0VGltZSgpKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGJlbmVmw61jaW8gZm9pIHJlbW92aWRvXG4gICAqL1xuICBmb2lSZW1vdmlkbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnJlbW92ZWRfYXQ7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBiZW5lZsOtY2lvIGVzdMOhIGF0aXZvXG4gICAqL1xuICBpc0F0aXZvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2F0aXZvJyAmJiAhdGhpcy5yZW1vdmVkX2F0O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGJlbmVmw61jaW8gw7puaWNvXG4gICAqL1xuICBpc0JlbmVmaWNpb1VuaWNvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBlcmlvZGljaWRhZGUgPT09IFBlcmlvZGljaWRhZGVFbnVtLlVOSUNPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGJlbmVmw61jaW8gcmVjb3JyZW50ZVxuICAgKi9cbiAgaXNCZW5lZmljaW9SZWNvcnJlbnRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pc0JlbmVmaWNpb1VuaWNvKCk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgYmVuZWbDrWNpbyBtZW5zYWxcbiAgICovXG4gIGlzQmVuZWZpY2lvTWVuc2FsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBlcmlvZGljaWRhZGUgPT09IFBlcmlvZGljaWRhZGVFbnVtLk1FTlNBTDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gdmFsb3IgZGVmaW5pZG9cbiAgICovXG4gIHRlbVZhbG9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnZhbG9yICE9PSBudWxsICYmIHRoaXMudmFsb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnZhbG9yID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyB2YWxvciBmb3JtYXRhZG8gZW0gbW9lZGEgYnJhc2lsZWlyYVxuICAgKi9cbiAgZ2V0VmFsb3JGb3JtYXRhZG8oKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsb3IoKSkgcmV0dXJuICdWYWxvciBuw6NvIGRlZmluaWRvJztcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdwdC1CUicsIHtcbiAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgY3VycmVuY3k6ICdCUkwnLFxuICAgIH0pLmZvcm1hdCh0aGlzLnZhbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSBkZXNjcmnDp8OjbyBkYSBwZXJpb2RpY2lkYWRlXG4gICAqL1xuICBnZXREZXNjcmljYW9QZXJpb2RpY2lkYWRlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgZGVzY3JpY29lcyA9IHtcbiAgICAgIFtQZXJpb2RpY2lkYWRlRW51bS5VTklDT106ICfDmm5pY28nLFxuICAgICAgW1BlcmlvZGljaWRhZGVFbnVtLk1FTlNBTF06ICdNZW5zYWwnLFxuICAgICAgW1BlcmlvZGljaWRhZGVFbnVtLkJJTUVTVFJBTF06ICdCaW1lc3RyYWwnLFxuICAgICAgW1BlcmlvZGljaWRhZGVFbnVtLlRSSU1FU1RSQUxdOiAnVHJpbWVzdHJhbCcsXG4gICAgICBbUGVyaW9kaWNpZGFkZUVudW0uU0VNRVNUUkFMXTogJ1NlbWVzdHJhbCcsXG4gICAgICBbUGVyaW9kaWNpZGFkZUVudW0uQU5VQUxdOiAnQW51YWwnLFxuICAgIH07XG4gICAgcmV0dXJuIGRlc2NyaWNvZXNbdGhpcy5wZXJpb2RpY2lkYWRlXSB8fCAnTsOjbyBkZWZpbmlkbyc7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIGNyaXTDqXJpb3MgZGUgZWxlZ2liaWxpZGFkZSBkZWZpbmlkb3NcbiAgICovXG4gIHRlbUNyaXRlcmlvc0VsZWdpYmlsaWRhZGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgICEhdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZSAmJlxuICAgICAgT2JqZWN0LmtleXModGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZSkubGVuZ3RoID4gMFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIGNyaXTDqXJpbyBkZSBpZGFkZSBtw61uaW1hXG4gICAqL1xuICB0ZW1JZGFkZU1pbmltYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy50ZW1Dcml0ZXJpb3NFbGVnaWJpbGlkYWRlKCkgJiZcbiAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUuaWRhZGVfbWluaW1hICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUuaWRhZGVfbWluaW1hICE9PSBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gY3JpdMOpcmlvIGRlIGlkYWRlIG3DoXhpbWFcbiAgICovXG4gIHRlbUlkYWRlTWF4aW1hKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnRlbUNyaXRlcmlvc0VsZWdpYmlsaWRhZGUoKSAmJlxuICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9tYXhpbWEgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9tYXhpbWEgIT09IG51bGxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSBjcml0w6lyaW8gZGUgcmVuZGEgbcOheGltYVxuICAgKi9cbiAgdGVtUmVuZGFNYXhpbWEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudGVtQ3JpdGVyaW9zRWxlZ2liaWxpZGFkZSgpICYmXG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYSAhPT0gbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIGNyaXTDqXJpbyBkZSB0ZW1wbyBtw61uaW1vIGRlIHJlc2lkw6puY2lhXG4gICAqL1xuICB0ZW1UZW1wb01pbmltb1Jlc2lkZW5jaWEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudGVtQ3JpdGVyaW9zRWxlZ2liaWxpZGFkZSgpICYmXG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnRlbXBvX21pbmltb19yZXNpZGVuY2lhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUudGVtcG9fbWluaW1vX3Jlc2lkZW5jaWEgIT09IG51bGxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtYSBpZGFkZSBhdGVuZGUgYW9zIGNyaXTDqXJpb3NcbiAgICovXG4gIGlkYWRlQXRlbmRlQW9zQ3JpdGVyaW9zKGlkYWRlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMudGVtQ3JpdGVyaW9zRWxlZ2liaWxpZGFkZSgpKSByZXR1cm4gdHJ1ZTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMudGVtSWRhZGVNaW5pbWEoKSAmJlxuICAgICAgaWRhZGUgPCAodGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZT8uaWRhZGVfbWluaW1hID8/IDApXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy50ZW1JZGFkZU1heGltYSgpICYmXG4gICAgICBpZGFkZSA+ICh0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlPy5pZGFkZV9tYXhpbWEgPz8gMClcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB1bWEgcmVuZGEgYXRlbmRlIGFvcyBjcml0w6lyaW9zXG4gICAqL1xuICByZW5kYUF0ZW5kZUFvc0NyaXRlcmlvcyhyZW5kYTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLnRlbVJlbmRhTWF4aW1hKCkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICByZW5kYSA8PSB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyB0ZW1wbyBkZSByZXNpZMOqbmNpYSBhdGVuZGUgYW9zIGNyaXTDqXJpb3NcbiAgICovXG4gIHRlbXBvUmVzaWRlbmNpYUF0ZW5kZUFvc0NyaXRlcmlvcyh0ZW1wb01lc2VzOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMudGVtVGVtcG9NaW5pbW9SZXNpZGVuY2lhKCkpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnRlbXBvX21pbmltb19yZXNpZGVuY2lhICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHRlbXBvTWVzZXMgPj0gdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS50ZW1wb19taW5pbW9fcmVzaWRlbmNpYVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZmFpeGEgZXTDoXJpYSBwZXJtaXRpZGFcbiAgICovXG4gIGdldEZhaXhhRXRhcmlhKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnRlbUlkYWRlTWluaW1hKCkgJiYgIXRoaXMudGVtSWRhZGVNYXhpbWEoKSkge1xuICAgICAgcmV0dXJuICdRdWFscXVlciBpZGFkZSc7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGVtSWRhZGVNaW5pbWEoKSAmJiAhdGhpcy50ZW1JZGFkZU1heGltYSgpKSB7XG4gICAgICByZXR1cm4gYEEgcGFydGlyIGRlICR7dGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9taW5pbWF9IGFub3NgO1xuICAgIH1cblxuICAgIGlmICghdGhpcy50ZW1JZGFkZU1pbmltYSgpICYmIHRoaXMudGVtSWRhZGVNYXhpbWEoKSkge1xuICAgICAgcmV0dXJuIGBBdMOpICR7dGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9tYXhpbWF9IGFub3NgO1xuICAgIH1cblxuICAgIHJldHVybiBgRGUgJHt0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLmlkYWRlX21pbmltYX0gYSAke3RoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUuaWRhZGVfbWF4aW1hfSBhbm9zYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSByZW5kYSBtw6F4aW1hIGZvcm1hdGFkYVxuICAgKi9cbiAgZ2V0UmVuZGFNYXhpbWFGb3JtYXRhZGEoKTogc3RyaW5nIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy50ZW1SZW5kYU1heGltYSgpIHx8XG4gICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYSA9PT0gdW5kZWZpbmVkXG4gICAgKVxuICAgICAgcmV0dXJuICdTZW0gbGltaXRlIGRlIHJlbmRhJztcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdwdC1CUicsIHtcbiAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgY3VycmVuY3k6ICdCUkwnLFxuICAgIH0pLmZvcm1hdCh0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLnJlbmRhX21heGltYSk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG8gdGVtcG8gbcOtbmltbyBkZSByZXNpZMOqbmNpYSBmb3JtYXRhZG9cbiAgICovXG4gIGdldFRlbXBvTWluaW1vUmVzaWRlbmNpYUZvcm1hdGFkbygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy50ZW1UZW1wb01pbmltb1Jlc2lkZW5jaWEoKSkgcmV0dXJuICdTZW0gZXhpZ8OqbmNpYSBkZSB0ZW1wbyc7XG5cbiAgICBjb25zdCBtZXNlcyA9IHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUudGVtcG9fbWluaW1vX3Jlc2lkZW5jaWE7XG4gICAgaWYgKG1lc2VzID09PSB1bmRlZmluZWQgfHwgbWVzZXMgPCAxMikge1xuICAgICAgcmV0dXJuIGAke21lc2VzID8/IDB9IG3DqnMoZXMpYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYW5vcyA9IE1hdGguZmxvb3IobWVzZXMgLyAxMik7XG4gICAgICBjb25zdCBtZXNlc1Jlc3RhbnRlcyA9IG1lc2VzICUgMTI7XG4gICAgICBpZiAobWVzZXNSZXN0YW50ZXMgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGAke2Fub3N9IGFubyhzKWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7YW5vc30gYW5vKHMpIGUgJHttZXNlc1Jlc3RhbnRlc30gbcOqcyhlcylgO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbGlzdGEgZGUgb3V0cm9zIGNyaXTDqXJpb3NcbiAgICovXG4gIGdldE91dHJvc0NyaXRlcmlvcygpOiBzdHJpbmdbXSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMudGVtQ3JpdGVyaW9zRWxlZ2liaWxpZGFkZSgpIHx8XG4gICAgICAhdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5vdXRyb3NcbiAgICApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUub3V0cm9zO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSByZXF1aXNpdG9zIGRlIGRvY3VtZW50b3NcbiAgICovXG4gIHRlbVJlcXVpc2l0b3NEb2N1bWVudG9zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlcXVpc2l0b19kb2N1bWVudG8gJiYgdGhpcy5yZXF1aXNpdG9fZG9jdW1lbnRvLmxlbmd0aCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG7Dum1lcm8gZGUgcmVxdWlzaXRvcyBvYnJpZ2F0w7NyaW9zXG4gICAqL1xuICBnZXROdW1lcm9SZXF1aXNpdG9zT2JyaWdhdG9yaW9zKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLnRlbVJlcXVpc2l0b3NEb2N1bWVudG9zKCkpIHJldHVybiAwO1xuICAgIHJldHVybiB0aGlzLnJlcXVpc2l0b19kb2N1bWVudG8uZmlsdGVyKChyZXEpID0+IHJlcS5vYnJpZ2F0b3JpbykubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSBjYW1wb3MgZGluw6JtaWNvc1xuICAgKi9cbiAgdGVtQ2FtcG9zRGluYW1pY29zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNhbXBvc19kaW5hbWljb3MgJiYgdGhpcy5jYW1wb3NfZGluYW1pY29zLmxlbmd0aCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG7Dum1lcm8gZGUgY2FtcG9zIGRpbsOibWljb3Mgb2JyaWdhdMOzcmlvc1xuICAgKi9cbiAgZ2V0TnVtZXJvQ2FtcG9zRGluYW1pY29zT2JyaWdhdG9yaW9zKCk6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLnRlbUNhbXBvc0RpbmFtaWNvcygpKSByZXR1cm4gMDtcbiAgICByZXR1cm4gdGhpcy5jYW1wb3NfZGluYW1pY29zLmZpbHRlcigoY2FtcG8pID0+IGNhbXBvLm9icmlnYXRvcmlvKS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgcG9kZSBzZXIgc29saWNpdGFkbyAoYXRpdm8gZSBuw6NvIHJlbW92aWRvKVxuICAgKi9cbiAgcG9kZVNlclNvbGljaXRhZG8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNBdGl2bygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSB1bSByZXN1bW8gZG8gYmVuZWbDrWNpb1xuICAgKi9cbiAgZ2V0U3VtbWFyeSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbG9yID0gdGhpcy5nZXRWYWxvckZvcm1hdGFkbygpO1xuICAgIGNvbnN0IHBlcmlvZGljaWRhZGUgPSB0aGlzLmdldERlc2NyaWNhb1BlcmlvZGljaWRhZGUoKTtcbiAgICBjb25zdCBzdGF0dXMgPSB0aGlzLmlzQXRpdm8oKSA/ICdBdGl2bycgOiAnSW5hdGl2byc7XG4gICAgcmV0dXJuIGAke3RoaXMubm9tZX0gLSAke3ZhbG9yfSAoJHtwZXJpb2RpY2lkYWRlfSkgLSAke3N0YXR1c31gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlcmEgdW1hIGNoYXZlIMO6bmljYSBwYXJhIG8gYmVuZWbDrWNpb1xuICAgKi9cbiAgZ2V0VW5pcXVlS2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGB0aXBvX2JlbmVmaWNpb18ke3RoaXMubm9tZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJ18nKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gYmVuZWbDrWNpbyDDqSBjb25zaXN0ZW50ZVxuICAgKi9cbiAgaXNDb25zaXN0ZW50ZSgpOiBib29sZWFuIHtcbiAgICAvLyBWZXJpZmljYSBzZSB0ZW0gbm9tZVxuICAgIGlmICghdGhpcy5ub21lIHx8IHRoaXMubm9tZS50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBWZXJpZmljYSBzZSB0ZW0gZGVzY3Jpw6fDo29cbiAgICBpZiAoIXRoaXMuZGVzY3JpY2FvIHx8IHRoaXMuZGVzY3JpY2FvLnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFZlcmlmaWNhIHNlIHRlbSB2YWxvciB2w6FsaWRvXG4gICAgaWYgKCF0aGlzLnRlbVZhbG9yKCkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFZlcmlmaWNhIGNyaXTDqXJpb3MgZGUgZWxlZ2liaWxpZGFkZVxuICAgIGlmICh0aGlzLnRlbUNyaXRlcmlvc0VsZWdpYmlsaWRhZGUoKSkge1xuICAgICAgaWYgKHRoaXMudGVtSWRhZGVNaW5pbWEoKSAmJiB0aGlzLnRlbUlkYWRlTWF4aW1hKCkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUuaWRhZGVfbWluaW1hICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlLmlkYWRlX21heGltYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9taW5pbWEgPlxuICAgICAgICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5pZGFkZV9tYXhpbWFcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy50ZW1SZW5kYU1heGltYSgpICYmXG4gICAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUucmVuZGFfbWF4aW1hICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS5yZW5kYV9tYXhpbWEgPCAwXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMudGVtVGVtcG9NaW5pbW9SZXNpZGVuY2lhKCkgJiZcbiAgICAgICAgdGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZS50ZW1wb19taW5pbW9fcmVzaWRlbmNpYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUudGVtcG9fbWluaW1vX3Jlc2lkZW5jaWEgPCAwXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHBvZGUgc2VyIHJlbW92aWRvXG4gICAqL1xuICBwb2RlU2VyUmVtb3ZpZG8oKTogYm9vbGVhbiB7XG4gICAgLy8gTsOjbyBwb2RlIHJlbW92ZXIgc2UgasOhIGZvaSByZW1vdmlkb1xuICAgIGlmICh0aGlzLmZvaVJlbW92aWRvKCkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFBvZGUgaW1wbGVtZW50YXIgbMOzZ2ljYSBhZGljaW9uYWwgYXF1aVxuICAgIC8vIFBvciBleGVtcGxvLCB2ZXJpZmljYXIgc2UgdGVtIHNvbGljaXRhw6fDtWVzIGF0aXZhc1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2xvbmEgbyB0aXBvIGRlIGJlbmVmw61jaW8gKHNlbSBJRClcbiAgICovXG4gIGNsb25lKCk6IFBhcnRpYWw8VGlwb0JlbmVmaWNpbz4ge1xuICAgIHJldHVybiB7XG4gICAgICBub21lOiB0aGlzLm5vbWUsXG4gICAgICBkZXNjcmljYW86IHRoaXMuZGVzY3JpY2FvLFxuICAgICAgcGVyaW9kaWNpZGFkZTogdGhpcy5wZXJpb2RpY2lkYWRlLFxuICAgICAgdmFsb3I6IHRoaXMudmFsb3IsXG4gICAgICBzdGF0dXM6IFN0YXR1cy5BVElWTyxcbiAgICAgIGNyaXRlcmlvc19lbGVnaWJpbGlkYWRlOiB0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlXG4gICAgICAgID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmNyaXRlcmlvc19lbGVnaWJpbGlkYWRlKSlcbiAgICAgICAgOiBudWxsLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgdW0gYmVuZWbDrWNpbyBkZSBhbHRvIHZhbG9yXG4gICAqL1xuICBpc0FsdG9WYWxvcigpOiBib29sZWFuIHtcbiAgICAvLyBDb25zaWRlcmEgYWx0byB2YWxvciBhY2ltYSBkZSBSJCAxMDAwXG4gICAgcmV0dXJuIHRoaXMudGVtVmFsb3IoKSAmJiB0aGlzLnZhbG9yID4gMTAwMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSBjb21wbGV4aWRhZGUgZG8gYmVuZWbDrWNpbyBiYXNlYWRhIGVtIGNyaXTDqXJpb3MgZSByZXF1aXNpdG9zXG4gICAqL1xuICBnZXRDb21wbGV4aWRhZGUoKTogJ0JBSVhBJyB8ICdNRURJQScgfCAnQUxUQScge1xuICAgIGxldCBwb250b3MgPSAwO1xuXG4gICAgLy8gQ3JpdMOpcmlvcyBkZSBlbGVnaWJpbGlkYWRlXG4gICAgaWYgKHRoaXMudGVtQ3JpdGVyaW9zRWxlZ2liaWxpZGFkZSgpKSB7XG4gICAgICBwb250b3MgKz0gT2JqZWN0LmtleXModGhpcy5jcml0ZXJpb3NfZWxlZ2liaWxpZGFkZSkubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFJlcXVpc2l0b3MgZGUgZG9jdW1lbnRvc1xuICAgIGlmICh0aGlzLnRlbVJlcXVpc2l0b3NEb2N1bWVudG9zKCkpIHtcbiAgICAgIHBvbnRvcyArPSB0aGlzLnJlcXVpc2l0b19kb2N1bWVudG8ubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIENhbXBvcyBkaW7Dom1pY29zXG4gICAgaWYgKHRoaXMudGVtQ2FtcG9zRGluYW1pY29zKCkpIHtcbiAgICAgIHBvbnRvcyArPSB0aGlzLmNhbXBvc19kaW5hbWljb3MubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmIChwb250b3MgPD0gMykgcmV0dXJuICdCQUlYQSc7XG4gICAgaWYgKHBvbnRvcyA8PSA3KSByZXR1cm4gJ01FRElBJztcbiAgICByZXR1cm4gJ0FMVEEnO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgYSBkYXRhIGRlIGNyaWHDp8Ojb1xuICAgKi9cbiAgZ2V0Q3JpYWNhb0Zvcm1hdGFkYSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZWRfYXQudG9Mb2NhbGVEYXRlU3RyaW5nKCdwdC1CUicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgYSBkYXRhIGRlIGF0dWFsaXphw6fDo29cbiAgICovXG4gIGdldEF0dWFsaXphY2FvRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdC50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGluZm9ybWHDp8O1ZXMgc2Vuc8OtdmVpcyBwYXJhIGxvZ3NcbiAgICovXG4gIHRvU2FmZUxvZygpOiBQYXJ0aWFsPFRpcG9CZW5lZmljaW8+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBub21lOiB0aGlzLm5vbWUsXG4gICAgICBwZXJpb2RpY2lkYWRlOiB0aGlzLnBlcmlvZGljaWRhZGUsXG4gICAgICBzdGF0dXM6IFN0YXR1cy5BVElWTyxcbiAgICAgIGNyZWF0ZWRfYXQ6IHRoaXMuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHRoaXMudXBkYXRlZF9hdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBzdWdlc3TDtWVzIGRlIG1lbGhvcmlhIHBhcmEgbyBiZW5lZsOtY2lvXG4gICAqL1xuICBnZXRTdWdlc3RvZXNNZWxob3JpYSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3VnZXN0b2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLnRlbUNyaXRlcmlvc0VsZWdpYmlsaWRhZGUoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0RlZmluaXIgY3JpdMOpcmlvcyBkZSBlbGVnaWJpbGlkYWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnRlbVJlcXVpc2l0b3NEb2N1bWVudG9zKCkpIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdBZGljaW9uYXIgcmVxdWlzaXRvcyBkZSBkb2N1bWVudG9zJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzQ29uc2lzdGVudGUoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ1ZlcmlmaWNhciBlIGNvcnJpZ2lyIGluY29uc2lzdMOqbmNpYXMgbm9zIGRhZG9zJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBTdGF0dXMuSU5BVElWTykge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0NvbnNpZGVyYXIgcmVhdGl2YXIgbyBiZW5lZsOtY2lvIHNlIG5lY2Vzc8OhcmlvJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1Z2VzdG9lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBwcmVjaXNhIGRlIGF0dWFsaXphw6fDo28gKGRhZG9zIG11aXRvIGFudGlnb3MpXG4gICAqL1xuICBwcmVjaXNhQXR1YWxpemFjYW8oKTogYm9vbGVhbiB7XG4gICAgLy8gRGFkb3MgY29tIG1haXMgZGUgMSBhbm8gcG9kZW0gcHJlY2lzYXIgZGUgcmV2aXPDo29cbiAgICBjb25zdCB1bUFub0F0cmFzID0gbmV3IERhdGUoKTtcbiAgICB1bUFub0F0cmFzLnNldEZ1bGxZZWFyKHVtQW5vQXRyYXMuZ2V0RnVsbFllYXIoKSAtIDEpO1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZWRfYXQgPCB1bUFub0F0cmFzO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBlc3RhdMOtc3RpY2FzIGRvIGJlbmVmw61jaW9cbiAgICovXG4gIGdldEVzdGF0aXN0aWNhcygpOiB7XG4gICAgdmFsb3I6IHN0cmluZztcbiAgICBwZXJpb2RpY2lkYWRlOiBzdHJpbmc7XG4gICAgY29tcGxleGlkYWRlOiBzdHJpbmc7XG4gICAgY3JpdGVyaW9zRWxlZ2liaWxpZGFkZTogbnVtYmVyO1xuICAgIHJlcXVpc2l0b3NEb2N1bWVudG9zOiBudW1iZXI7XG4gICAgY2FtcG9zRGluYW1pY29zOiBudW1iZXI7XG4gIH0ge1xuICAgIHJldHVybiB7XG4gICAgICB2YWxvcjogdGhpcy5nZXRWYWxvckZvcm1hdGFkbygpLFxuICAgICAgcGVyaW9kaWNpZGFkZTogdGhpcy5nZXREZXNjcmljYW9QZXJpb2RpY2lkYWRlKCksXG4gICAgICBjb21wbGV4aWRhZGU6IHRoaXMuZ2V0Q29tcGxleGlkYWRlKCksXG4gICAgICBjcml0ZXJpb3NFbGVnaWJpbGlkYWRlOiB0aGlzLnRlbUNyaXRlcmlvc0VsZWdpYmlsaWRhZGUoKVxuICAgICAgICA/IE9iamVjdC5rZXlzKHRoaXMuY3JpdGVyaW9zX2VsZWdpYmlsaWRhZGUpLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICByZXF1aXNpdG9zRG9jdW1lbnRvczogdGhpcy50ZW1SZXF1aXNpdG9zRG9jdW1lbnRvcygpXG4gICAgICAgID8gdGhpcy5yZXF1aXNpdG9fZG9jdW1lbnRvLmxlbmd0aFxuICAgICAgICA6IDAsXG4gICAgICBjYW1wb3NEaW5hbWljb3M6IHRoaXMudGVtQ2FtcG9zRGluYW1pY29zKClcbiAgICAgICAgPyB0aGlzLmNhbXBvc19kaW5hbWljb3MubGVuZ3RoXG4gICAgICAgIDogMCxcbiAgICB9O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=