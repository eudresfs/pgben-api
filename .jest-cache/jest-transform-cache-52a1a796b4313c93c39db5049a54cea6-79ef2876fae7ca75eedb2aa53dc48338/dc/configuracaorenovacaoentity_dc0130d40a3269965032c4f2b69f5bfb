7dd58aa7983d70ebcd244c64ec1e2f82
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConfiguracaoRenovacao = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const tipo_beneficio_entity_1 = require("./tipo-beneficio.entity");
/**
 * Entidade de Configuração de Renovação Automática
 *
 * Armazena as configurações para renovação automática de benefícios,
 * permitindo definir regras específicas por tipo de benefício.
 */
let ConfiguracaoRenovacao = class ConfiguracaoRenovacao {
    id;
    tipo_beneficio_id;
    tipo_beneficio;
    renovacao_automatica;
    dias_antecedencia_renovacao;
    numero_maximo_renovacoes;
    requer_aprovacao_renovacao;
    ativo;
    usuario_id;
    observacoes;
    created_at;
    updated_at;
    // Getters e Setters
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se a configuração foi criada recentemente (últimas 24 horas)
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do registro em dias
     */
    getIdadeRegistroEmDias() {
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    /**
     * Verifica se a configuração está ativa
     */
    isAtivo() {
        return this.ativo;
    }
    /**
     * Verifica se a renovação automática está habilitada
     */
    isRenovacaoAutomaticaHabilitada() {
        return this.renovacao_automatica && this.ativo;
    }
    /**
     * Verifica se requer aprovação para renovação
     */
    requerAprovacaoRenovacao() {
        return this.requer_aprovacao_renovacao;
    }
    /**
     * Verifica se tem limite de renovações
     */
    temLimiteRenovacoes() {
        return this.numero_maximo_renovacoes !== null &&
            this.numero_maximo_renovacoes !== undefined &&
            this.numero_maximo_renovacoes > 0;
    }
    /**
     * Obtém o número máximo de renovações
     */
    getNumeroMaximoRenovacoes() {
        return this.numero_maximo_renovacoes || null;
    }
    /**
     * Obtém os dias de antecedência para renovação
     */
    getDiasAntecedenciaRenovacao() {
        return this.dias_antecedencia_renovacao;
    }
    /**
     * Calcula a data limite para iniciar o processo de renovação
     * baseado na data de vencimento do benefício
     */
    calcularDataInicioRenovacao(dataVencimento) {
        const dataInicio = new Date(dataVencimento);
        dataInicio.setDate(dataInicio.getDate() - this.dias_antecedencia_renovacao);
        return dataInicio;
    }
    /**
     * Verifica se é hora de iniciar o processo de renovação
     */
    isHoraDeRenovar(dataVencimento) {
        if (!this.isRenovacaoAutomaticaHabilitada())
            return false;
        const agora = new Date();
        const dataInicioRenovacao = this.calcularDataInicioRenovacao(dataVencimento);
        return agora >= dataInicioRenovacao;
    }
    /**
     * Verifica se ainda pode renovar baseado no limite
     */
    podeRenovar(numeroRenovacoesRealizadas) {
        if (!this.isRenovacaoAutomaticaHabilitada())
            return false;
        if (!this.temLimiteRenovacoes())
            return true;
        return this.numero_maximo_renovacoes !== undefined && numeroRenovacoesRealizadas < this.numero_maximo_renovacoes;
    }
    /**
     * Calcula quantas renovações ainda são possíveis
     */
    getRenovacoesRestantes(numeroRenovacoesRealizadas) {
        if (!this.temLimiteRenovacoes())
            return -1; // Ilimitado
        const restantes = (this.numero_maximo_renovacoes ?? 0) - numeroRenovacoesRealizadas;
        return Math.max(0, restantes);
    }
    /**
     * Verifica se pertence a um tipo de benefício
     */
    pertenceAoTipoBeneficio(tipoBeneficioId) {
        return this.tipo_beneficio_id === tipoBeneficioId;
    }
    /**
     * Verifica se foi configurado por um usuário
     */
    foiConfiguradoPorUsuario(usuarioId) {
        return this.usuario_id === usuarioId;
    }
    /**
     * Obtém um resumo da configuração
     */
    getSummary() {
        const renovacao = this.isRenovacaoAutomaticaHabilitada() ? 'Habilitada' : 'Desabilitada';
        const aprovacao = this.requerAprovacaoRenovacao() ? 'Requer aprovação' : 'Automática';
        const limite = this.temLimiteRenovacoes() ?
            `Máx: ${this.numero_maximo_renovacoes}` : 'Ilimitado';
        return `Renovação: ${renovacao} | ${aprovacao} | ${limite} | ${this.dias_antecedencia_renovacao} dias antecedência`;
    }
    /**
     * Gera uma chave única para a configuração
     */
    getUniqueKey() {
        return `config_renovacao_${this.tipo_beneficio_id}`;
    }
    /**
     * Verifica se a configuração é consistente
     */
    isConsistente() {
        // Verifica se tem tipo de benefício
        if (!this.tipo_beneficio_id)
            return false;
        // Verifica se tem usuário
        if (!this.usuario_id)
            return false;
        // Verifica se dias de antecedência é válido
        if (this.dias_antecedencia_renovacao < 1)
            return false;
        // Se tem limite, deve ser positivo
        if (this.temLimiteRenovacoes() && this.numero_maximo_renovacoes !== undefined && this.numero_maximo_renovacoes <= 0) {
            return false;
        }
        return true;
    }
    /**
     * Verifica se pode ser removida
     */
    podeSerRemovida() {
        // Pode implementar lógica adicional aqui
        // Por exemplo, verificar se tem benefícios ativos usando esta configuração
        return true;
    }
    /**
     * Clona a configuração (sem ID)
     */
    clone() {
        return {
            tipo_beneficio_id: this.tipo_beneficio_id,
            renovacao_automatica: this.renovacao_automatica,
            dias_antecedencia_renovacao: this.dias_antecedencia_renovacao,
            numero_maximo_renovacoes: this.numero_maximo_renovacoes,
            requer_aprovacao_renovacao: this.requer_aprovacao_renovacao,
            ativo: this.ativo,
            usuario_id: this.usuario_id,
            observacoes: this.observacoes,
        };
    }
    /**
     * Verifica se é uma configuração crítica
     */
    isCritica() {
        // Configurações com renovação automática sem aprovação são críticas
        return this.isRenovacaoAutomaticaHabilitada() && !this.requerAprovacaoRenovacao();
    }
    /**
     * Obtém o nível de automação
     */
    getNivelAutomacao() {
        if (!this.renovacao_automatica)
            return 'MANUAL';
        if (this.requer_aprovacao_renovacao)
            return 'SEMI_AUTOMATICO';
        return 'AUTOMATICO';
    }
    /**
     * Obtém a descrição do nível de automação
     */
    getDescricaoNivelAutomacao() {
        const descricoes = {
            'MANUAL': 'Renovação manual - requer intervenção do usuário',
            'SEMI_AUTOMATICO': 'Renovação semi-automática - processo automático com aprovação',
            'AUTOMATICO': 'Renovação totalmente automática - sem intervenção manual',
        };
        return descricoes[this.getNivelAutomacao()];
    }
    /**
     * Formata a data de criação
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de atualização
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleDateString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            tipo_beneficio_id: this.tipo_beneficio_id,
            renovacao_automatica: this.renovacao_automatica,
            dias_antecedencia_renovacao: this.dias_antecedencia_renovacao,
            numero_maximo_renovacoes: this.numero_maximo_renovacoes,
            requer_aprovacao_renovacao: this.requer_aprovacao_renovacao,
            ativo: this.ativo,
            created_at: this.created_at,
            updated_at: this.updated_at,
        };
    }
    /**
     * Obtém sugestões de melhoria para a configuração
     */
    getSugestoesMelhoria() {
        const sugestoes = [];
        if (!this.observacoes || this.observacoes.trim().length === 0) {
            sugestoes.push('Adicionar observações sobre a configuração');
        }
        if (this.isRenovacaoAutomaticaHabilitada() && !this.requerAprovacaoRenovacao()) {
            sugestoes.push('Considerar exigir aprovação para renovações automáticas');
        }
        if (!this.temLimiteRenovacoes()) {
            sugestoes.push('Considerar definir um limite máximo de renovações');
        }
        if (this.dias_antecedencia_renovacao < 7) {
            sugestoes.push('Considerar aumentar os dias de antecedência para pelo menos 7 dias');
        }
        if (!this.isConsistente()) {
            sugestoes.push('Verificar e corrigir inconsistências nos dados');
        }
        return sugestoes;
    }
    /**
     * Verifica se precisa de atualização (dados muito antigos)
     */
    precisaAtualizacao() {
        // Configurações com mais de 1 ano podem precisar de revisão
        const umAnoAtras = new Date();
        umAnoAtras.setFullYear(umAnoAtras.getFullYear() - 1);
        return this.updated_at < umAnoAtras;
    }
    /**
     * Obtém estatísticas da configuração
     */
    getEstatisticas() {
        return {
            nivelAutomacao: this.getNivelAutomacao(),
            diasAntecedencia: this.dias_antecedencia_renovacao,
            temLimite: this.temLimiteRenovacoes(),
            limiteRenovacoes: this.getNumeroMaximoRenovacoes(),
            requerAprovacao: this.requer_aprovacao_renovacao,
            ativo: this.ativo,
        };
    }
    /**
     * Simula o processo de renovação
     */
    simularRenovacao(dataVencimento, numeroRenovacoesRealizadas) {
        const podeRenovar = this.podeRenovar(numeroRenovacoesRealizadas);
        const dataInicioRenovacao = this.calcularDataInicioRenovacao(dataVencimento);
        const renovacoesRestantes = this.getRenovacoesRestantes(numeroRenovacoesRealizadas);
        let motivo;
        if (!podeRenovar) {
            if (!this.isRenovacaoAutomaticaHabilitada()) {
                motivo = 'Renovação automática não está habilitada';
            }
            else if (this.temLimiteRenovacoes() && this.numero_maximo_renovacoes !== undefined && numeroRenovacoesRealizadas >= this.numero_maximo_renovacoes) {
                motivo = 'Limite máximo de renovações atingido';
            }
        }
        return {
            podeRenovar,
            dataInicioRenovacao,
            renovacoesRestantes,
            requerAprovacao: this.requer_aprovacao_renovacao,
            motivo,
        };
    }
};
exports.ConfiguracaoRenovacao = ConfiguracaoRenovacao;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], ConfiguracaoRenovacao.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'tipo_beneficio_id', type: 'uuid' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do tipo de benefício é obrigatório' }),
    (0, class_validator_1.IsUUID)('4', { message: 'ID do tipo de benefício inválido' }),
    __metadata("design:type", String)
], ConfiguracaoRenovacao.prototype, "tipo_beneficio_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => tipo_beneficio_entity_1.TipoBeneficio, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'tipo_beneficio_id' }),
    __metadata("design:type", typeof (_a = typeof tipo_beneficio_entity_1.TipoBeneficio !== "undefined" && tipo_beneficio_entity_1.TipoBeneficio) === "function" ? _a : Object)
], ConfiguracaoRenovacao.prototype, "tipo_beneficio", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'renovacao_automatica', type: 'boolean', default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Renovação automática deve ser um booleano' }),
    __metadata("design:type", Boolean)
], ConfiguracaoRenovacao.prototype, "renovacao_automatica", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'dias_antecedencia_renovacao', type: 'integer', default: 7 }),
    (0, class_validator_1.IsNumber)({}, { message: 'Dias de antecedência deve ser um número' }),
    (0, class_validator_1.Min)(1, { message: 'Dias de antecedência deve ser no mínimo 1' }),
    __metadata("design:type", Number)
], ConfiguracaoRenovacao.prototype, "dias_antecedencia_renovacao", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'numero_maximo_renovacoes', type: 'integer', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Número máximo de renovações deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Número máximo de renovações não pode ser negativo' }),
    __metadata("design:type", Number)
], ConfiguracaoRenovacao.prototype, "numero_maximo_renovacoes", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'requer_aprovacao_renovacao', type: 'boolean', default: true }),
    (0, class_validator_1.IsBoolean)({ message: 'Requer aprovação de renovação deve ser um booleano' }),
    __metadata("design:type", Boolean)
], ConfiguracaoRenovacao.prototype, "requer_aprovacao_renovacao", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'ativo', type: 'boolean', default: true }),
    (0, class_validator_1.IsBoolean)({ message: 'Ativo deve ser um booleano' }),
    __metadata("design:type", Boolean)
], ConfiguracaoRenovacao.prototype, "ativo", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'usuario_id', type: 'uuid' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do usuário é obrigatório' }),
    (0, class_validator_1.IsUUID)('4', { message: 'ID do usuário inválido' }),
    __metadata("design:type", String)
], ConfiguracaoRenovacao.prototype, "usuario_id", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'observacoes', type: 'text', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ConfiguracaoRenovacao.prototype, "observacoes", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ name: 'created_at' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], ConfiguracaoRenovacao.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ name: 'updated_at' }),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], ConfiguracaoRenovacao.prototype, "updated_at", void 0);
exports.ConfiguracaoRenovacao = ConfiguracaoRenovacao = __decorate([
    (0, typeorm_1.Entity)('configuracao_renovacao'),
    (0, typeorm_1.Index)(['tipo_beneficio_id'])
], ConfiguracaoRenovacao);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxjb25maWd1cmFjYW8tcmVub3ZhY2FvLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBU2lCO0FBQ2pCLHFEQUEyRjtBQUMzRixtRUFBd0Q7QUFFeEQ7Ozs7O0dBS0c7QUFHSSxJQUFNLHFCQUFxQixHQUEzQixNQUFNLHFCQUFxQjtJQUVoQyxFQUFFLENBQVM7SUFLWCxpQkFBaUIsQ0FBUztJQUkxQixjQUFjLENBQWdCO0lBSTlCLG9CQUFvQixDQUFVO0lBSzlCLDJCQUEyQixDQUFTO0lBTXBDLHdCQUF3QixDQUFVO0lBSWxDLDBCQUEwQixDQUFVO0lBSXBDLEtBQUssQ0FBVTtJQUtmLFVBQVUsQ0FBUztJQUluQixXQUFXLENBQVU7SUFHckIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUVqQixvQkFBb0I7SUFDcEIsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELHNCQUFzQjtJQUV0Qjs7T0FFRztJQUNILG9CQUFvQjtRQUNsQixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3pCLE1BQU0sVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUNuRSxPQUFPLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO0lBQ3RDLENBQUM7SUFFRDs7T0FFRztJQUNILHNCQUFzQjtRQUNwQixNQUFNLEtBQUssR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ3pCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFH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O29EQUN0QztBQUtmO0lBSEMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLENBQUM7SUFDNUMsSUFBQSw0QkFBVSxFQUFDLEVBQUUsT0FBTyxFQUFFLDZCQUE2QixFQUFFLENBQUM7SUFDdEQsSUFBQSx3QkFBTSxFQUFDLEdBQUcsRUFBRSxFQUFFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxDQUFDOzt5REFDaEM7QUFJbkI7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQzdELElBQUEsNEJBQVUsR0FBRTs7MERBQ1E7QUFHckI7SUFEQyxJQUFBLDBCQUFnQixFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO2tEQUM3QixJQUFJLG9CQUFKLElBQUk7eURBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO2tEQUM3QixJQUFJLG9CQUFKLElBQUk7eURBQUM7Z0NBakROLHFCQUFxQjtJQUZqQyxJQUFBLGdCQUFNLEVBQUMsd0JBQXdCLENBQUM7SUFDaEMsSUFBQSxlQUFLLEVBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0dBQ2hCLHFCQUFxQixDQTZZakMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxjb25maWd1cmFjYW8tcmVub3ZhY2FvLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENvbHVtbixcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcbiAgVXBkYXRlRGF0ZUNvbHVtbixcbiAgTWFueVRvT25lLFxuICBKb2luQ29sdW1uLFxuICBJbmRleCxcbn0gZnJvbSAndHlwZW9ybSc7XG5pbXBvcnQgeyBJc05vdEVtcHR5LCBJc09wdGlvbmFsLCBJc0Jvb2xlYW4sIElzTnVtYmVyLCBNaW4sIElzVVVJRCB9IGZyb20gJ2NsYXNzLXZhbGlkYXRvcic7XG5pbXBvcnQgeyBUaXBvQmVuZWZpY2lvIH0gZnJvbSAnLi90aXBvLWJlbmVmaWNpby5lbnRpdHknO1xuXG4vKipcbiAqIEVudGlkYWRlIGRlIENvbmZpZ3VyYcOnw6NvIGRlIFJlbm92YcOnw6NvIEF1dG9tw6F0aWNhXG4gKlxuICogQXJtYXplbmEgYXMgY29uZmlndXJhw6fDtWVzIHBhcmEgcmVub3Zhw6fDo28gYXV0b23DoXRpY2EgZGUgYmVuZWbDrWNpb3MsXG4gKiBwZXJtaXRpbmRvIGRlZmluaXIgcmVncmFzIGVzcGVjw61maWNhcyBwb3IgdGlwbyBkZSBiZW5lZsOtY2lvLlxuICovXG5ARW50aXR5KCdjb25maWd1cmFjYW9fcmVub3ZhY2FvJylcbkBJbmRleChbJ3RpcG9fYmVuZWZpY2lvX2lkJ10pXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhY2FvUmVub3ZhY2FvIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAndGlwb19iZW5lZmljaW9faWQnLCB0eXBlOiAndXVpZCcgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSUQgZG8gdGlwbyBkZSBiZW5lZsOtY2lvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgQElzVVVJRCgnNCcsIHsgbWVzc2FnZTogJ0lEIGRvIHRpcG8gZGUgYmVuZWbDrWNpbyBpbnbDoWxpZG8nIH0pXG4gIHRpcG9fYmVuZWZpY2lvX2lkOiBzdHJpbmc7XG5cbiAgQE1hbnlUb09uZSgoKSA9PiBUaXBvQmVuZWZpY2lvLCB7IG9uRGVsZXRlOiAnQ0FTQ0FERScgfSlcbiAgQEpvaW5Db2x1bW4oeyBuYW1lOiAndGlwb19iZW5lZmljaW9faWQnIH0pXG4gIHRpcG9fYmVuZWZpY2lvOiBUaXBvQmVuZWZpY2lvO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAncmVub3ZhY2FvX2F1dG9tYXRpY2EnLCB0eXBlOiAnYm9vbGVhbicsIGRlZmF1bHQ6IGZhbHNlIH0pXG4gIEBJc0Jvb2xlYW4oeyBtZXNzYWdlOiAnUmVub3Zhw6fDo28gYXV0b23DoXRpY2EgZGV2ZSBzZXIgdW0gYm9vbGVhbm8nIH0pXG4gIHJlbm92YWNhb19hdXRvbWF0aWNhOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAnZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvJywgdHlwZTogJ2ludGVnZXInLCBkZWZhdWx0OiA3IH0pXG4gIEBJc051bWJlcih7fSwgeyBtZXNzYWdlOiAnRGlhcyBkZSBhbnRlY2Vkw6puY2lhIGRldmUgc2VyIHVtIG7Dum1lcm8nIH0pXG4gIEBNaW4oMSwgeyBtZXNzYWdlOiAnRGlhcyBkZSBhbnRlY2Vkw6puY2lhIGRldmUgc2VyIG5vIG3DrW5pbW8gMScgfSlcbiAgZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IG5hbWU6ICdudW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMnLCB0eXBlOiAnaW50ZWdlcicsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdOw7ptZXJvIG3DoXhpbW8gZGUgcmVub3Zhw6fDtWVzIGRldmUgc2VyIHVtIG7Dum1lcm8nIH0pXG4gIEBNaW4oMCwgeyBtZXNzYWdlOiAnTsO6bWVybyBtw6F4aW1vIGRlIHJlbm92YcOnw7VlcyBuw6NvIHBvZGUgc2VyIG5lZ2F0aXZvJyB9KVxuICBudW1lcm9fbWF4aW1vX3Jlbm92YWNvZXM/OiBudW1iZXI7XG5cbiAgQENvbHVtbih7IG5hbWU6ICdyZXF1ZXJfYXByb3ZhY2FvX3Jlbm92YWNhbycsIHR5cGU6ICdib29sZWFuJywgZGVmYXVsdDogdHJ1ZSB9KVxuICBASXNCb29sZWFuKHsgbWVzc2FnZTogJ1JlcXVlciBhcHJvdmHDp8OjbyBkZSByZW5vdmHDp8OjbyBkZXZlIHNlciB1bSBib29sZWFubycgfSlcbiAgcmVxdWVyX2Fwcm92YWNhb19yZW5vdmFjYW86IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IG5hbWU6ICdhdGl2bycsIHR5cGU6ICdib29sZWFuJywgZGVmYXVsdDogdHJ1ZSB9KVxuICBASXNCb29sZWFuKHsgbWVzc2FnZTogJ0F0aXZvIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICBhdGl2bzogYm9vbGVhbjtcblxuICBAQ29sdW1uKHsgbmFtZTogJ3VzdWFyaW9faWQnLCB0eXBlOiAndXVpZCcgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSUQgZG8gdXN1w6FyaW8gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBASXNVVUlEKCc0JywgeyBtZXNzYWdlOiAnSUQgZG8gdXN1w6FyaW8gaW52w6FsaWRvJyB9KVxuICB1c3VhcmlvX2lkOiBzdHJpbmc7XG5cbiAgQENvbHVtbih7IG5hbWU6ICdvYnNlcnZhY29lcycsIHR5cGU6ICd0ZXh0JywgbnVsbGFibGU6IHRydWUgfSlcbiAgQElzT3B0aW9uYWwoKVxuICBvYnNlcnZhY29lcz86IHN0cmluZztcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbih7IG5hbWU6ICdjcmVhdGVkX2F0JyB9KVxuICBjcmVhdGVkX2F0OiBEYXRlO1xuXG4gIEBVcGRhdGVEYXRlQ29sdW1uKHsgbmFtZTogJ3VwZGF0ZWRfYXQnIH0pXG4gIHVwZGF0ZWRfYXQ6IERhdGU7XG5cbiAgLy8gR2V0dGVycyBlIFNldHRlcnNcbiAgZ2V0IGNyZWF0ZWRBdCgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0O1xuICB9XG5cbiAgZ2V0IHVwZGF0ZWRBdCgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0O1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgVXRpbGl0w6FyaW9zXG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGEgY29uZmlndXJhw6fDo28gZm9pIGNyaWFkYSByZWNlbnRlbWVudGUgKMO6bHRpbWFzIDI0IGhvcmFzKVxuICAgKi9cbiAgaXNDcmlhZG9SZWNlbnRlbWVudGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWdvcmEgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHVtRGlhQXRyYXMgPSBuZXcgRGF0ZShhZ29yYS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0ID4gdW1EaWFBdHJhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIGEgaWRhZGUgZG8gcmVnaXN0cm8gZW0gZGlhc1xuICAgKi9cbiAgZ2V0SWRhZGVSZWdpc3Ryb0VtRGlhcygpOiBudW1iZXIge1xuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmVGltZSA9IE1hdGguYWJzKGFnb3JhLmdldFRpbWUoKSAtIHRoaXMuY3JlYXRlZF9hdC5nZXRUaW1lKCkpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGEgY29uZmlndXJhw6fDo28gZXN0w6EgYXRpdmFcbiAgICovXG4gIGlzQXRpdm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYXRpdm87XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgYSByZW5vdmHDp8OjbyBhdXRvbcOhdGljYSBlc3TDoSBoYWJpbGl0YWRhXG4gICAqL1xuICBpc1Jlbm92YWNhb0F1dG9tYXRpY2FIYWJpbGl0YWRhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlbm92YWNhb19hdXRvbWF0aWNhICYmIHRoaXMuYXRpdm87XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgcmVxdWVyIGFwcm92YcOnw6NvIHBhcmEgcmVub3Zhw6fDo29cbiAgICovXG4gIHJlcXVlckFwcm92YWNhb1Jlbm92YWNhbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXJfYXByb3ZhY2FvX3Jlbm92YWNhbztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gbGltaXRlIGRlIHJlbm92YcOnw7Vlc1xuICAgKi9cbiAgdGVtTGltaXRlUmVub3ZhY29lcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMgIT09IG51bGwgJiYgXG4gICAgICAgICAgIHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgdGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIG7Dum1lcm8gbcOheGltbyBkZSByZW5vdmHDp8O1ZXNcbiAgICovXG4gIGdldE51bWVyb01heGltb1Jlbm92YWNvZXMoKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzIHx8IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG9zIGRpYXMgZGUgYW50ZWNlZMOqbmNpYSBwYXJhIHJlbm92YcOnw6NvXG4gICAqL1xuICBnZXREaWFzQW50ZWNlZGVuY2lhUmVub3ZhY2FvKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGEgYSBkYXRhIGxpbWl0ZSBwYXJhIGluaWNpYXIgbyBwcm9jZXNzbyBkZSByZW5vdmHDp8Ojb1xuICAgKiBiYXNlYWRvIG5hIGRhdGEgZGUgdmVuY2ltZW50byBkbyBiZW5lZsOtY2lvXG4gICAqL1xuICBjYWxjdWxhckRhdGFJbmljaW9SZW5vdmFjYW8oZGF0YVZlbmNpbWVudG86IERhdGUpOiBEYXRlIHtcbiAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoZGF0YVZlbmNpbWVudG8pO1xuICAgIGRhdGFJbmljaW8uc2V0RGF0ZShkYXRhSW5pY2lvLmdldERhdGUoKSAtIHRoaXMuZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvKTtcbiAgICByZXR1cm4gZGF0YUluaWNpbztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBob3JhIGRlIGluaWNpYXIgbyBwcm9jZXNzbyBkZSByZW5vdmHDp8Ojb1xuICAgKi9cbiAgaXNIb3JhRGVSZW5vdmFyKGRhdGFWZW5jaW1lbnRvOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmlzUmVub3ZhY2FvQXV0b21hdGljYUhhYmlsaXRhZGEoKSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkYXRhSW5pY2lvUmVub3ZhY2FvID0gdGhpcy5jYWxjdWxhckRhdGFJbmljaW9SZW5vdmFjYW8oZGF0YVZlbmNpbWVudG8pO1xuICAgIFxuICAgIHJldHVybiBhZ29yYSA+PSBkYXRhSW5pY2lvUmVub3ZhY2FvO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGFpbmRhIHBvZGUgcmVub3ZhciBiYXNlYWRvIG5vIGxpbWl0ZVxuICAgKi9cbiAgcG9kZVJlbm92YXIobnVtZXJvUmVub3ZhY29lc1JlYWxpemFkYXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5pc1Jlbm92YWNhb0F1dG9tYXRpY2FIYWJpbGl0YWRhKCkpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICBpZiAoIXRoaXMudGVtTGltaXRlUmVub3ZhY29lcygpKSByZXR1cm4gdHJ1ZTtcbiAgICBcbiAgICByZXR1cm4gdGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMgIT09IHVuZGVmaW5lZCAmJiBudW1lcm9SZW5vdmFjb2VzUmVhbGl6YWRhcyA8IHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGEgcXVhbnRhcyByZW5vdmHDp8O1ZXMgYWluZGEgc8OjbyBwb3Nzw612ZWlzXG4gICAqL1xuICBnZXRSZW5vdmFjb2VzUmVzdGFudGVzKG51bWVyb1Jlbm92YWNvZXNSZWFsaXphZGFzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy50ZW1MaW1pdGVSZW5vdmFjb2VzKCkpIHJldHVybiAtMTsgLy8gSWxpbWl0YWRvXG4gICAgXG4gICAgY29uc3QgcmVzdGFudGVzID0gKHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzID8/IDApIC0gbnVtZXJvUmVub3ZhY29lc1JlYWxpemFkYXM7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHJlc3RhbnRlcyk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgcGVydGVuY2UgYSB1bSB0aXBvIGRlIGJlbmVmw61jaW9cbiAgICovXG4gIHBlcnRlbmNlQW9UaXBvQmVuZWZpY2lvKHRpcG9CZW5lZmljaW9JZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlwb19iZW5lZmljaW9faWQgPT09IHRpcG9CZW5lZmljaW9JZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBmb2kgY29uZmlndXJhZG8gcG9yIHVtIHVzdcOhcmlvXG4gICAqL1xuICBmb2lDb25maWd1cmFkb1BvclVzdWFyaW8odXN1YXJpb0lkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy51c3VhcmlvX2lkID09PSB1c3VhcmlvSWQ7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIHVtIHJlc3VtbyBkYSBjb25maWd1cmHDp8Ojb1xuICAgKi9cbiAgZ2V0U3VtbWFyeSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlbm92YWNhbyA9IHRoaXMuaXNSZW5vdmFjYW9BdXRvbWF0aWNhSGFiaWxpdGFkYSgpID8gJ0hhYmlsaXRhZGEnIDogJ0Rlc2FiaWxpdGFkYSc7XG4gICAgY29uc3QgYXByb3ZhY2FvID0gdGhpcy5yZXF1ZXJBcHJvdmFjYW9SZW5vdmFjYW8oKSA/ICdSZXF1ZXIgYXByb3Zhw6fDo28nIDogJ0F1dG9tw6F0aWNhJztcbiAgICBjb25zdCBsaW1pdGUgPSB0aGlzLnRlbUxpbWl0ZVJlbm92YWNvZXMoKSA/IFxuICAgICAgYE3DoXg6ICR7dGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXN9YCA6ICdJbGltaXRhZG8nO1xuICAgIFxuICAgIHJldHVybiBgUmVub3Zhw6fDo286ICR7cmVub3ZhY2FvfSB8ICR7YXByb3ZhY2FvfSB8ICR7bGltaXRlfSB8ICR7dGhpcy5kaWFzX2FudGVjZWRlbmNpYV9yZW5vdmFjYW99IGRpYXMgYW50ZWNlZMOqbmNpYWA7XG4gIH1cblxuICAvKipcbiAgICogR2VyYSB1bWEgY2hhdmUgw7puaWNhIHBhcmEgYSBjb25maWd1cmHDp8Ojb1xuICAgKi9cbiAgZ2V0VW5pcXVlS2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBjb25maWdfcmVub3ZhY2FvXyR7dGhpcy50aXBvX2JlbmVmaWNpb19pZH1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGEgY29uZmlndXJhw6fDo28gw6kgY29uc2lzdGVudGVcbiAgICovXG4gIGlzQ29uc2lzdGVudGUoKTogYm9vbGVhbiB7XG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIHRpcG8gZGUgYmVuZWbDrWNpb1xuICAgIGlmICghdGhpcy50aXBvX2JlbmVmaWNpb19pZCkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhIHNlIHRlbSB1c3XDoXJpb1xuICAgIGlmICghdGhpcy51c3VhcmlvX2lkKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gVmVyaWZpY2Egc2UgZGlhcyBkZSBhbnRlY2Vkw6puY2lhIMOpIHbDoWxpZG9cbiAgICBpZiAodGhpcy5kaWFzX2FudGVjZWRlbmNpYV9yZW5vdmFjYW8gPCAxKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gU2UgdGVtIGxpbWl0ZSwgZGV2ZSBzZXIgcG9zaXRpdm9cbiAgICBpZiAodGhpcy50ZW1MaW1pdGVSZW5vdmFjb2VzKCkgJiYgdGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm51bWVyb19tYXhpbW9fcmVub3ZhY29lcyA8PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHBvZGUgc2VyIHJlbW92aWRhXG4gICAqL1xuICBwb2RlU2VyUmVtb3ZpZGEoKTogYm9vbGVhbiB7XG4gICAgLy8gUG9kZSBpbXBsZW1lbnRhciBsw7NnaWNhIGFkaWNpb25hbCBhcXVpXG4gICAgLy8gUG9yIGV4ZW1wbG8sIHZlcmlmaWNhciBzZSB0ZW0gYmVuZWbDrWNpb3MgYXRpdm9zIHVzYW5kbyBlc3RhIGNvbmZpZ3VyYcOnw6NvXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2xvbmEgYSBjb25maWd1cmHDp8OjbyAoc2VtIElEKVxuICAgKi9cbiAgY2xvbmUoKTogUGFydGlhbDxDb25maWd1cmFjYW9SZW5vdmFjYW8+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdGlwb19iZW5lZmljaW9faWQ6IHRoaXMudGlwb19iZW5lZmljaW9faWQsXG4gICAgICByZW5vdmFjYW9fYXV0b21hdGljYTogdGhpcy5yZW5vdmFjYW9fYXV0b21hdGljYSxcbiAgICAgIGRpYXNfYW50ZWNlZGVuY2lhX3Jlbm92YWNhbzogdGhpcy5kaWFzX2FudGVjZWRlbmNpYV9yZW5vdmFjYW8sXG4gICAgICBudW1lcm9fbWF4aW1vX3Jlbm92YWNvZXM6IHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzLFxuICAgICAgcmVxdWVyX2Fwcm92YWNhb19yZW5vdmFjYW86IHRoaXMucmVxdWVyX2Fwcm92YWNhb19yZW5vdmFjYW8sXG4gICAgICBhdGl2bzogdGhpcy5hdGl2byxcbiAgICAgIHVzdWFyaW9faWQ6IHRoaXMudXN1YXJpb19pZCxcbiAgICAgIG9ic2VydmFjb2VzOiB0aGlzLm9ic2VydmFjb2VzLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgdW1hIGNvbmZpZ3VyYcOnw6NvIGNyw610aWNhXG4gICAqL1xuICBpc0NyaXRpY2EoKTogYm9vbGVhbiB7XG4gICAgLy8gQ29uZmlndXJhw6fDtWVzIGNvbSByZW5vdmHDp8OjbyBhdXRvbcOhdGljYSBzZW0gYXByb3Zhw6fDo28gc8OjbyBjcsOtdGljYXNcbiAgICByZXR1cm4gdGhpcy5pc1Jlbm92YWNhb0F1dG9tYXRpY2FIYWJpbGl0YWRhKCkgJiYgIXRoaXMucmVxdWVyQXByb3ZhY2FvUmVub3ZhY2FvKCk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIG8gbsOtdmVsIGRlIGF1dG9tYcOnw6NvXG4gICAqL1xuICBnZXROaXZlbEF1dG9tYWNhbygpOiAnTUFOVUFMJyB8ICdTRU1JX0FVVE9NQVRJQ08nIHwgJ0FVVE9NQVRJQ08nIHtcbiAgICBpZiAoIXRoaXMucmVub3ZhY2FvX2F1dG9tYXRpY2EpIHJldHVybiAnTUFOVUFMJztcbiAgICBpZiAodGhpcy5yZXF1ZXJfYXByb3ZhY2FvX3Jlbm92YWNhbykgcmV0dXJuICdTRU1JX0FVVE9NQVRJQ08nO1xuICAgIHJldHVybiAnQVVUT01BVElDTyc7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZGVzY3Jpw6fDo28gZG8gbsOtdmVsIGRlIGF1dG9tYcOnw6NvXG4gICAqL1xuICBnZXREZXNjcmljYW9OaXZlbEF1dG9tYWNhbygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRlc2NyaWNvZXMgPSB7XG4gICAgICAnTUFOVUFMJzogJ1Jlbm92YcOnw6NvIG1hbnVhbCAtIHJlcXVlciBpbnRlcnZlbsOnw6NvIGRvIHVzdcOhcmlvJyxcbiAgICAgICdTRU1JX0FVVE9NQVRJQ08nOiAnUmVub3Zhw6fDo28gc2VtaS1hdXRvbcOhdGljYSAtIHByb2Nlc3NvIGF1dG9tw6F0aWNvIGNvbSBhcHJvdmHDp8OjbycsXG4gICAgICAnQVVUT01BVElDTyc6ICdSZW5vdmHDp8OjbyB0b3RhbG1lbnRlIGF1dG9tw6F0aWNhIC0gc2VtIGludGVydmVuw6fDo28gbWFudWFsJyxcbiAgICB9O1xuICAgIHJldHVybiBkZXNjcmljb2VzW3RoaXMuZ2V0Tml2ZWxBdXRvbWFjYW8oKV07XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgY3JpYcOnw6NvXG4gICAqL1xuICBnZXRDcmlhY2FvRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdC50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgYXR1YWxpemHDp8Ojb1xuICAgKi9cbiAgZ2V0QXR1YWxpemFjYW9Gb3JtYXRhZGEoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0LnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgaW5mb3JtYcOnw7VlcyBzZW5zw612ZWlzIHBhcmEgbG9nc1xuICAgKi9cbiAgdG9TYWZlTG9nKCk6IFBhcnRpYWw8Q29uZmlndXJhY2FvUmVub3ZhY2FvPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdGlwb19iZW5lZmljaW9faWQ6IHRoaXMudGlwb19iZW5lZmljaW9faWQsXG4gICAgICByZW5vdmFjYW9fYXV0b21hdGljYTogdGhpcy5yZW5vdmFjYW9fYXV0b21hdGljYSxcbiAgICAgIGRpYXNfYW50ZWNlZGVuY2lhX3Jlbm92YWNhbzogdGhpcy5kaWFzX2FudGVjZWRlbmNpYV9yZW5vdmFjYW8sXG4gICAgICBudW1lcm9fbWF4aW1vX3Jlbm92YWNvZXM6IHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzLFxuICAgICAgcmVxdWVyX2Fwcm92YWNhb19yZW5vdmFjYW86IHRoaXMucmVxdWVyX2Fwcm92YWNhb19yZW5vdmFjYW8sXG4gICAgICBhdGl2bzogdGhpcy5hdGl2byxcbiAgICAgIGNyZWF0ZWRfYXQ6IHRoaXMuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHRoaXMudXBkYXRlZF9hdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBzdWdlc3TDtWVzIGRlIG1lbGhvcmlhIHBhcmEgYSBjb25maWd1cmHDp8Ojb1xuICAgKi9cbiAgZ2V0U3VnZXN0b2VzTWVsaG9yaWEoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN1Z2VzdG9lczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAoIXRoaXMub2JzZXJ2YWNvZXMgfHwgdGhpcy5vYnNlcnZhY29lcy50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnQWRpY2lvbmFyIG9ic2VydmHDp8O1ZXMgc29icmUgYSBjb25maWd1cmHDp8OjbycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5pc1Jlbm92YWNhb0F1dG9tYXRpY2FIYWJpbGl0YWRhKCkgJiYgIXRoaXMucmVxdWVyQXByb3ZhY2FvUmVub3ZhY2FvKCkpIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdDb25zaWRlcmFyIGV4aWdpciBhcHJvdmHDp8OjbyBwYXJhIHJlbm92YcOnw7VlcyBhdXRvbcOhdGljYXMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnRlbUxpbWl0ZVJlbm92YWNvZXMoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0NvbnNpZGVyYXIgZGVmaW5pciB1bSBsaW1pdGUgbcOheGltbyBkZSByZW5vdmHDp8O1ZXMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvIDwgNykge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0NvbnNpZGVyYXIgYXVtZW50YXIgb3MgZGlhcyBkZSBhbnRlY2Vkw6puY2lhIHBhcmEgcGVsbyBtZW5vcyA3IGRpYXMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLmlzQ29uc2lzdGVudGUoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ1ZlcmlmaWNhciBlIGNvcnJpZ2lyIGluY29uc2lzdMOqbmNpYXMgbm9zIGRhZG9zJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBzdWdlc3RvZXM7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgcHJlY2lzYSBkZSBhdHVhbGl6YcOnw6NvIChkYWRvcyBtdWl0byBhbnRpZ29zKVxuICAgKi9cbiAgcHJlY2lzYUF0dWFsaXphY2FvKCk6IGJvb2xlYW4ge1xuICAgIC8vIENvbmZpZ3VyYcOnw7VlcyBjb20gbWFpcyBkZSAxIGFubyBwb2RlbSBwcmVjaXNhciBkZSByZXZpc8Ojb1xuICAgIGNvbnN0IHVtQW5vQXRyYXMgPSBuZXcgRGF0ZSgpO1xuICAgIHVtQW5vQXRyYXMuc2V0RnVsbFllYXIodW1Bbm9BdHJhcy5nZXRGdWxsWWVhcigpIC0gMSk7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdCA8IHVtQW5vQXRyYXM7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGVzdGF0w61zdGljYXMgZGEgY29uZmlndXJhw6fDo29cbiAgICovXG4gIGdldEVzdGF0aXN0aWNhcygpOiB7XG4gICAgbml2ZWxBdXRvbWFjYW86IHN0cmluZztcbiAgICBkaWFzQW50ZWNlZGVuY2lhOiBudW1iZXI7XG4gICAgdGVtTGltaXRlOiBib29sZWFuO1xuICAgIGxpbWl0ZVJlbm92YWNvZXM6IG51bWJlciB8IG51bGw7XG4gICAgcmVxdWVyQXByb3ZhY2FvOiBib29sZWFuO1xuICAgIGF0aXZvOiBib29sZWFuO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgbml2ZWxBdXRvbWFjYW86IHRoaXMuZ2V0Tml2ZWxBdXRvbWFjYW8oKSxcbiAgICAgIGRpYXNBbnRlY2VkZW5jaWE6IHRoaXMuZGlhc19hbnRlY2VkZW5jaWFfcmVub3ZhY2FvLFxuICAgICAgdGVtTGltaXRlOiB0aGlzLnRlbUxpbWl0ZVJlbm92YWNvZXMoKSxcbiAgICAgIGxpbWl0ZVJlbm92YWNvZXM6IHRoaXMuZ2V0TnVtZXJvTWF4aW1vUmVub3ZhY29lcygpLFxuICAgICAgcmVxdWVyQXByb3ZhY2FvOiB0aGlzLnJlcXVlcl9hcHJvdmFjYW9fcmVub3ZhY2FvLFxuICAgICAgYXRpdm86IHRoaXMuYXRpdm8sXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW11bGEgbyBwcm9jZXNzbyBkZSByZW5vdmHDp8Ojb1xuICAgKi9cbiAgc2ltdWxhclJlbm92YWNhbyhkYXRhVmVuY2ltZW50bzogRGF0ZSwgbnVtZXJvUmVub3ZhY29lc1JlYWxpemFkYXM6IG51bWJlcik6IHtcbiAgICBwb2RlUmVub3ZhcjogYm9vbGVhbjtcbiAgICBkYXRhSW5pY2lvUmVub3ZhY2FvOiBEYXRlO1xuICAgIHJlbm92YWNvZXNSZXN0YW50ZXM6IG51bWJlcjtcbiAgICByZXF1ZXJBcHJvdmFjYW86IGJvb2xlYW47XG4gICAgbW90aXZvPzogc3RyaW5nO1xuICB9IHtcbiAgICBjb25zdCBwb2RlUmVub3ZhciA9IHRoaXMucG9kZVJlbm92YXIobnVtZXJvUmVub3ZhY29lc1JlYWxpemFkYXMpO1xuICAgIGNvbnN0IGRhdGFJbmljaW9SZW5vdmFjYW8gPSB0aGlzLmNhbGN1bGFyRGF0YUluaWNpb1Jlbm92YWNhbyhkYXRhVmVuY2ltZW50byk7XG4gICAgY29uc3QgcmVub3ZhY29lc1Jlc3RhbnRlcyA9IHRoaXMuZ2V0UmVub3ZhY29lc1Jlc3RhbnRlcyhudW1lcm9SZW5vdmFjb2VzUmVhbGl6YWRhcyk7XG4gICAgXG4gICAgbGV0IG1vdGl2bzogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICghcG9kZVJlbm92YXIpIHtcbiAgICAgIGlmICghdGhpcy5pc1Jlbm92YWNhb0F1dG9tYXRpY2FIYWJpbGl0YWRhKCkpIHtcbiAgICAgICAgbW90aXZvID0gJ1Jlbm92YcOnw6NvIGF1dG9tw6F0aWNhIG7Do28gZXN0w6EgaGFiaWxpdGFkYSc7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudGVtTGltaXRlUmVub3ZhY29lcygpICYmIHRoaXMubnVtZXJvX21heGltb19yZW5vdmFjb2VzICE9PSB1bmRlZmluZWQgJiYgbnVtZXJvUmVub3ZhY29lc1JlYWxpemFkYXMgPj0gdGhpcy5udW1lcm9fbWF4aW1vX3Jlbm92YWNvZXMpIHtcbiAgICAgICAgbW90aXZvID0gJ0xpbWl0ZSBtw6F4aW1vIGRlIHJlbm92YcOnw7VlcyBhdGluZ2lkbyc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwb2RlUmVub3ZhcixcbiAgICAgIGRhdGFJbmljaW9SZW5vdmFjYW8sXG4gICAgICByZW5vdmFjb2VzUmVzdGFudGVzLFxuICAgICAgcmVxdWVyQXByb3ZhY2FvOiB0aGlzLnJlcXVlcl9hcHJvdmFjYW9fcmVub3ZhY2FvLFxuICAgICAgbW90aXZvLFxuICAgIH07XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==