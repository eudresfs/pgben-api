b642f0341f33aaf75da0d2c4f9f75497
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var Cidadao_1;
var _a, _b, _c, _d, _e, _f, _g;
Object.defineProperty(exports, "__esModule", { value: true });
exports.Sexo = exports.Cidadao = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const cpf_validator_1 = require("../modules/cidadao/validators/cpf-validator");
const nis_validator_1 = require("../modules/cidadao/validators/nis-validator");
const telefone_validator_1 = require("../modules/cidadao/validators/telefone-validator");
const papel_cidadao_entity_1 = require("./papel-cidadao.entity");
const composicao_familiar_entity_1 = require("./composicao-familiar.entity");
const sexo_enum_1 = require("../enums/sexo.enum");
Object.defineProperty(exports, "Sexo", { enumerable: true, get: function () { return sexo_enum_1.Sexo; } });
const unidade_entity_1 = require("./unidade.entity");
const estado_civil_enum_1 = require("../enums/estado-civil.enum");
let Cidadao = Cidadao_1 = class Cidadao {
    id;
    nome;
    nome_social;
    cpf;
    rg;
    nis;
    nome_mae;
    naturalidade;
    prontuario_suas;
    data_nascimento;
    papeis;
    composicao_familiar;
    sexo;
    telefone;
    email;
    estado_civil;
    endereco;
    unidade_id;
    unidade;
    created_at;
    updated_at;
    removed_at;
    /**
     * Verifica se o cidadão foi criado recentemente (últimas 24 horas)
     * @returns true se foi criado nas últimas 24 horas
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do cidadão em anos
     * @returns idade em anos
     */
    getIdade() {
        const hoje = new Date();
        const nascimento = new Date(this.data_nascimento);
        let idade = hoje.getFullYear() - nascimento.getFullYear();
        const mesAtual = hoje.getMonth();
        const mesNascimento = nascimento.getMonth();
        if (mesAtual < mesNascimento || (mesAtual === mesNascimento && hoje.getDate() < nascimento.getDate())) {
            idade--;
        }
        return idade;
    }
    /**
     * Verifica se o cidadão é maior de idade
     * @returns true se é maior de idade
     */
    isMaiorIdade() {
        return this.getIdade() >= 18;
    }
    /**
     * Verifica se o cidadão é idoso (65+ anos)
     * @returns true se é idoso
     */
    isIdoso() {
        return this.getIdade() >= 65;
    }
    /**
     * Verifica se o cidadão é criança (0-12 anos)
     * @returns true se é criança
     */
    isCrianca() {
        return this.getIdade() <= 12;
    }
    /**
     * Verifica se o cidadão é adolescente (13-17 anos)
     * @returns true se é adolescente
     */
    isAdolescente() {
        const idade = this.getIdade();
        return idade >= 13 && idade <= 17;
    }
    /**
     * Verifica se tem nome social definido
     * @returns true se tem nome social
     */
    temNomeSocial() {
        return this.nome_social !== null && this.nome_social !== undefined && this.nome_social.trim() !== '';
    }
    /**
     * Obtém o nome preferencial (nome social se existir, senão nome civil)
     * @returns nome preferencial
     */
    getNomePreferencial() {
        return this.temNomeSocial() ? this.nome_social : this.nome;
    }
    /**
     * Verifica se tem email cadastrado
     * @returns true se tem email
     */
    temEmail() {
        return this.email !== null && this.email !== undefined && this.email.trim() !== '';
    }
    /**
     * Obtém o endereço completo formatado
     * @returns endereço formatado
     */
    getEnderecoCompleto() {
        if (!this.endereco)
            return 'Endereço não informado';
        const { logradouro, numero, complemento, bairro, cidade, estado, cep } = this.endereco;
        let endereco = `${logradouro}, ${numero}`;
        if (complemento) {
            endereco += `, ${complemento}`;
        }
        endereco += ` - ${bairro}, ${cidade}/${estado} - CEP: ${cep}`;
        return endereco;
    }
    /**
     * Verifica se o cidadão pertence a uma unidade específica
     * @param unidadeId ID da unidade
     * @returns true se pertence à unidade
     */
    pertenceAUnidade(unidadeId) {
        return this.unidade_id === unidadeId;
    }
    /**
     * Verifica se o cidadão foi removido (soft delete)
     * @returns true se foi removido
     */
    foiRemovido() {
        return this.removed_at !== null && this.removed_at !== undefined;
    }
    /**
     * Verifica se o cidadão está ativo
     * @returns true se está ativo
     */
    isAtivo() {
        return !this.foiRemovido();
    }
    /**
     * Obtém um resumo das informações do cidadão
     * @returns objeto com resumo das informações
     */
    getSummary() {
        return {
            id: this.id,
            nome: this.nome,
            nomePreferencial: this.getNomePreferencial(),
            cpf: this.cpf,
            idade: this.getIdade(),
            sexo: this.sexo,
            telefone: this.telefone,
            temEmail: this.temEmail(),
            unidadeId: this.unidade_id,
            ativo: this.isAtivo(),
            criadoEm: this.created_at
        };
    }
    /**
     * Gera uma chave única para o cidadão
     * @returns chave única
     */
    getUniqueKey() {
        return `cidadao_${this.cpf}`;
    }
    /**
     * Verifica se o estado do cidadão é consistente
     * @returns true se está consistente
     */
    isConsistente() {
        return (this.id !== null &&
            this.nome !== null &&
            this.cpf !== null &&
            this.nis !== null &&
            this.data_nascimento !== null &&
            this.unidade_id !== null &&
            this.created_at !== null &&
            this.updated_at !== null &&
            this.created_at <= this.updated_at);
    }
    /**
     * Verifica se o cidadão nasceu em uma cidade específica
     * @param cidade nome da cidade
     * @returns true se nasceu na cidade
     */
    nasceuEm(cidade) {
        return this.naturalidade.toLowerCase().includes(cidade.toLowerCase());
    }
    /**
     * Verifica se o cidadão mora em uma cidade específica
     * @param cidade nome da cidade
     * @returns true se mora na cidade
     */
    moraEm(cidade) {
        return this.endereco?.cidade?.toLowerCase() === cidade.toLowerCase();
    }
    /**
     * Verifica se o cidadão mora em um bairro específico
     * @param bairro nome do bairro
     * @returns true se mora no bairro
     */
    moraNoBairro(bairro) {
        return this.endereco?.bairro?.toLowerCase() === bairro.toLowerCase();
    }
    /**
     * Obtém a faixa etária do cidadão
     * @returns faixa etária
     */
    getFaixaEtaria() {
        const idade = this.getIdade();
        if (idade <= 12)
            return 'Criança';
        if (idade <= 17)
            return 'Adolescente';
        if (idade <= 29)
            return 'Jovem';
        if (idade <= 59)
            return 'Adulto';
        return 'Idoso';
    }
    /**
     * Verifica se o cidadão tem papéis ativos
     * @returns true se tem papéis ativos
     */
    temPapeisAtivos() {
        return this.papeis && this.papeis.some(papel => papel.ativo);
    }
    /**
     * Obtém o número de familiares cadastrados
     * @returns número de familiares
     */
    getNumeroFamiliares() {
        return this.composicao_familiar ? this.composicao_familiar.length : 0;
    }
    /**
     * Verifica se tem composição familiar cadastrada
     * @returns true se tem familiares
     */
    temComposicaoFamiliar() {
        return this.getNumeroFamiliares() > 0;
    }
    /**
     * Formata o CPF para exibição
     * @returns CPF formatado
     */
    getCpfFormatado() {
        const cpf = this.cpf.replace(/\D/g, '');
        return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }
    /**
     * Formata o telefone para exibição
     * @returns telefone formatado
     */
    getTelefoneFormatado() {
        const telefone = this.telefone.replace(/\D/g, '');
        if (telefone.length === 11) {
            return telefone.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
        }
        else if (telefone.length === 10) {
            return telefone.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
        }
        return this.telefone;
    }
    /**
     * Formata a data de nascimento
     * @returns data formatada
     */
    getDataNascimentoFormatada() {
        return new Date(this.data_nascimento).toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de criação
     * @returns data formatada
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleString('pt-BR');
    }
    /**
     * Formata a data de atualização
     * @returns data formatada
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     * @returns versão segura para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            nome: this.nome,
            idade: this.getIdade(),
            sexo: this.sexo,
            unidadeId: this.unidade_id,
            ativo: this.isAtivo(),
            criadoEm: this.created_at
        };
    }
    /**
     * Verifica se o cidadão pode ser removido
     * @returns true se pode ser removido
     */
    podeSerRemovido() {
        // Lógica básica - pode ser expandida conforme regras de negócio
        return this.isAtivo();
    }
    /**
     * Clona o cidadão (sem ID e datas)
     * @returns nova instância do cidadão
     */
    clone() {
        const novoCidadao = new Cidadao_1();
        novoCidadao.nome = this.nome;
        novoCidadao.nome_social = this.nome_social;
        novoCidadao.cpf = this.cpf;
        novoCidadao.rg = this.rg;
        novoCidadao.nis = this.nis;
        novoCidadao.nome_mae = this.nome_mae;
        novoCidadao.naturalidade = this.naturalidade;
        novoCidadao.prontuario_suas = this.prontuario_suas;
        novoCidadao.data_nascimento = this.data_nascimento;
        novoCidadao.sexo = this.sexo;
        novoCidadao.telefone = this.telefone;
        novoCidadao.email = this.email;
        novoCidadao.endereco = { ...this.endereco };
        novoCidadao.unidade_id = this.unidade_id;
        return novoCidadao;
    }
    /**
     * Verifica se é um caso prioritário (idoso, criança, etc.)
     * @returns true se é prioritário
     */
    isPrioritario() {
        return this.isIdoso() || this.isCrianca() || this.isAdolescente();
    }
    /**
     * Obtém sugestões de verificação de dados
     * @returns array de sugestões
     */
    getSugestoesVerificacao() {
        const sugestoes = [];
        if (!this.temEmail()) {
            sugestoes.push('Considere cadastrar um email para contato');
        }
        if (!this.temComposicaoFamiliar()) {
            sugestoes.push('Cadastre a composição familiar para análise completa');
        }
        if (!this.temPapeisAtivos()) {
            sugestoes.push('Defina papéis para o cidadão no sistema');
        }
        const idade = this.getIdade();
        if (idade < 0 || idade > 120) {
            sugestoes.push('Verifique a data de nascimento - idade calculada parece incorreta');
        }
        return sugestoes;
    }
};
exports.Cidadao = Cidadao;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], Cidadao.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome é obrigatório' }),
    (0, class_validator_1.IsString)({ message: 'Nome deve ser uma string' }),
    (0, class_validator_1.MinLength)(3, { message: 'Nome deve ter no mínimo 3 caracteres' }),
    (0, class_validator_1.MaxLength)(100, { message: 'Nome deve ter no máximo 100 caracteres' }),
    __metadata("design:type", String)
], Cidadao.prototype, "nome", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], Cidadao.prototype, "nome_social", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, class_validator_1.IsNotEmpty)({ message: 'CPF é obrigatório' }),
    (0, class_validator_1.Length)(11, 14, { message: 'CPF deve ter entre 11 e 14 caracteres' }),
    (0, class_validator_1.Validate)(cpf_validator_1.CPFValidator, { message: 'CPF inválido' }),
    __metadata("design:type", String)
], Cidadao.prototype, "cpf", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'RG é obrigatório' }),
    __metadata("design:type", String)
], Cidadao.prototype, "rg", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true, nullable: false }),
    (0, class_validator_1.Length)(11, 11, { message: 'NIS deve ter 11 caracteres' }),
    (0, class_validator_1.Validate)(nis_validator_1.NISValidator, { message: 'NIS inválido' }),
    __metadata("design:type", String)
], Cidadao.prototype, "nis", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome da mãe é obrigatório' }),
    (0, class_validator_1.IsString)({ message: 'Nome da mãe deve ser uma string' }),
    (0, class_validator_1.MinLength)(3, { message: 'Nome da mãe deve ter no mínimo 3 caracteres' }),
    (0, class_validator_1.MaxLength)(100, { message: 'Nome da mãe deve ter no máximo 100 caracteres' }),
    __metadata("design:type", String)
], Cidadao.prototype, "nome_mae", void 0);
__decorate([
    (0, typeorm_1.Column)({ unique: true }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Naturalidade é obrigatório' }),
    __metadata("design:type", String)
], Cidadao.prototype, "naturalidade", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: false }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Prontuario SUAS é obrigatório' }),
    __metadata("design:type", String)
], Cidadao.prototype, "prontuario_suas", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'date' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Data de nascimento é obrigatória' }),
    __metadata("design:type", typeof (_a = typeof Date !== "undefined" && Date) === "function" ? _a : Object)
], Cidadao.prototype, "data_nascimento", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => papel_cidadao_entity_1.PapelCidadao, (papelCidadao) => papelCidadao.cidadao),
    __metadata("design:type", Array)
], Cidadao.prototype, "papeis", void 0);
__decorate([
    (0, typeorm_1.OneToMany)(() => composicao_familiar_entity_1.ComposicaoFamiliar, (composicaoFamiliar) => composicaoFamiliar.cidadao),
    __metadata("design:type", Array)
], Cidadao.prototype, "composicao_familiar", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: sexo_enum_1.Sexo,
        enumName: 'sexo_enum',
    }),
    (0, class_validator_1.IsEnum)(sexo_enum_1.Sexo, { message: 'Sexo inválido' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Sexo é obrigatório' }),
    __metadata("design:type", typeof (_b = typeof sexo_enum_1.Sexo !== "undefined" && sexo_enum_1.Sexo) === "function" ? _b : Object)
], Cidadao.prototype, "sexo", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: false }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Telefone é obrigatório' }),
    (0, class_validator_1.Validate)(telefone_validator_1.TelefoneValidator, { message: 'Telefone inválido' }),
    __metadata("design:type", String)
], Cidadao.prototype, "telefone", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEmail)({}, { message: 'Email inválido' }),
    __metadata("design:type", String)
], Cidadao.prototype, "email", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: estado_civil_enum_1.EstadoCivil,
        enumName: 'estado_civil_enum',
    }),
    (0, class_validator_1.IsEnum)(sexo_enum_1.Sexo, { message: 'Estado civil inválido' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Estado Civil é obrigatório' }),
    __metadata("design:type", typeof (_c = typeof estado_civil_enum_1.EstadoCivil !== "undefined" && estado_civil_enum_1.EstadoCivil) === "function" ? _c : Object)
], Cidadao.prototype, "estado_civil", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb'),
    (0, class_validator_1.IsNotEmpty)({ message: 'Endereço é obrigatório' }),
    (0, typeorm_1.Index)(),
    __metadata("design:type", Object)
], Cidadao.prototype, "endereco", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'uuid', nullable: false }),
    __metadata("design:type", String)
], Cidadao.prototype, "unidade_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => unidade_entity_1.Unidade, { nullable: false }),
    (0, typeorm_1.JoinColumn)({ name: 'unidade_id' }),
    __metadata("design:type", typeof (_d = typeof unidade_entity_1.Unidade !== "undefined" && unidade_entity_1.Unidade) === "function" ? _d : Object)
], Cidadao.prototype, "unidade", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], Cidadao.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], Cidadao.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], Cidadao.prototype, "removed_at", void 0);
exports.Cidadao = Cidadao = Cidadao_1 = __decorate([
    (0, typeorm_1.Entity)('cidadao'),
    (0, typeorm_1.Index)(['cpf'], { unique: true }),
    (0, typeorm_1.Index)(['nis'], { unique: true, where: 'nis IS NOT NULL' }),
    (0, typeorm_1.Index)(['nome']),
    (0, typeorm_1.Index)(['telefone']),
    (0, typeorm_1.Index)(['created_at']),
    (0, typeorm_1.Index)(['unidade_id']),
    (0, typeorm_1.Index)('idx_cidadao_endereco_bairro'),
    (0, typeorm_1.Index)('idx_cidadao_endereco_cidade'),
    (0, typeorm_1.Index)('idx_cidadao_nome_trgm')
], Cidadao);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxjaWRhZGFvLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLHFDQVdpQjtBQUNqQixxREFVeUI7QUFDekIsK0VBQTJFO0FBQzNFLCtFQUEyRTtBQUMzRSx5RkFBcUY7QUFDckYsaUVBQXNEO0FBQ3RELDZFQUFrRTtBQUNsRSxrREFBMEM7QUFnZ0JqQyxxRkFoZ0JBLGdCQUFJLE9BZ2dCQTtBQS9mYixxREFBMkM7QUFDM0Msa0VBQXlEO0FBYWxELElBQU0sT0FBTyxlQUFiLE1BQU0sT0FBTztJQUVsQixFQUFFLENBQVM7SUFPWCxJQUFJLENBQVM7SUFJYixXQUFXLENBQVM7SUFNcEIsR0FBRyxDQUFTO0lBSVosRUFBRSxDQUFTO0lBS1gsR0FBRyxDQUFTO0lBT1osUUFBUSxDQUFTO0lBSWpCLFlBQVksQ0FBUztJQUlyQixlQUFlLENBQVM7SUFJeEIsZUFBZSxDQUFPO0lBR3RCLE1BQU0sQ0FBaUI7SUFHdkIsbUJBQW1CLENBQXVCO0lBUzFDLElBQUksQ0FBTztJQUtYLFFBQVEsQ0FBUztJQUtqQixLQUFLLENBQVM7SUFTZCxZQUFZLENBQWM7SUFNMUIsUUFBUSxDQVVOO0lBR0YsVUFBVSxDQUFTO0lBSW5CLE9BQU8sQ0FBVTtJQUdqQixVQUFVLENBQU87SUFHakIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUVqQjs7O09BR0c7SUFDSCxvQkFBb0I7UUFDbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixNQUFNLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDbkUsT0FBTyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUN0QyxDQUFDO0lB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LENBQUMsQ0FBQztJQUNyQixJQUFBLGVBQUssRUFBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3JCLElBQUEsZUFBSyxFQUFDLDZCQUE2QixDQUFDO0lBQ3BDLElBQUEsZUFBSyxFQUFDLDZCQUE2QixDQUFDO0lBQ3BDLElBQUEsZUFBSyxFQUFDLHVCQUF1QixDQUFDO0dBQ2xCLE9BQU8sQ0ErZW5CIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxlbnRpdGllc1xcY2lkYWRhby5lbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW50aXR5LFxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxuICBDb2x1bW4sXG4gIENyZWF0ZURhdGVDb2x1bW4sXG4gIFVwZGF0ZURhdGVDb2x1bW4sXG4gIERlbGV0ZURhdGVDb2x1bW4sXG4gIEluZGV4LFxuICBPbmVUb01hbnksXG4gIE1hbnlUb09uZSxcbiAgSm9pbkNvbHVtbixcbn0gZnJvbSAndHlwZW9ybSc7XG5pbXBvcnQge1xuICBJc0VtYWlsLFxuICBJc05vdEVtcHR5LFxuICBMZW5ndGgsXG4gIElzT3B0aW9uYWwsXG4gIElzRW51bSxcbiAgVmFsaWRhdGUsXG4gIElzU3RyaW5nLFxuICBNYXhMZW5ndGgsXG4gIE1pbkxlbmd0aCxcbn0gZnJvbSAnY2xhc3MtdmFsaWRhdG9yJztcbmltcG9ydCB7IENQRlZhbGlkYXRvciB9IGZyb20gJy4uL21vZHVsZXMvY2lkYWRhby92YWxpZGF0b3JzL2NwZi12YWxpZGF0b3InO1xuaW1wb3J0IHsgTklTVmFsaWRhdG9yIH0gZnJvbSAnLi4vbW9kdWxlcy9jaWRhZGFvL3ZhbGlkYXRvcnMvbmlzLXZhbGlkYXRvcic7XG5pbXBvcnQgeyBUZWxlZm9uZVZhbGlkYXRvciB9IGZyb20gJy4uL21vZHVsZXMvY2lkYWRhby92YWxpZGF0b3JzL3RlbGVmb25lLXZhbGlkYXRvcic7XG5pbXBvcnQgeyBQYXBlbENpZGFkYW8gfSBmcm9tICcuL3BhcGVsLWNpZGFkYW8uZW50aXR5JztcbmltcG9ydCB7IENvbXBvc2ljYW9GYW1pbGlhciB9IGZyb20gJy4vY29tcG9zaWNhby1mYW1pbGlhci5lbnRpdHknO1xuaW1wb3J0IHsgU2V4byB9IGZyb20gJy4uL2VudW1zL3NleG8uZW51bSc7XG5pbXBvcnQgeyBVbmlkYWRlIH0gZnJvbSAnLi91bmlkYWRlLmVudGl0eSc7XG5pbXBvcnQgeyBFc3RhZG9DaXZpbCB9IGZyb20gJy4uL2VudW1zL2VzdGFkby1jaXZpbC5lbnVtJztcblxuXG5ARW50aXR5KCdjaWRhZGFvJylcbkBJbmRleChbJ2NwZiddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuQEluZGV4KFsnbmlzJ10sIHsgdW5pcXVlOiB0cnVlLCB3aGVyZTogJ25pcyBJUyBOT1QgTlVMTCcgfSlcbkBJbmRleChbJ25vbWUnXSlcbkBJbmRleChbJ3RlbGVmb25lJ10pXG5ASW5kZXgoWydjcmVhdGVkX2F0J10pXG5ASW5kZXgoWyd1bmlkYWRlX2lkJ10pXG5ASW5kZXgoJ2lkeF9jaWRhZGFvX2VuZGVyZWNvX2JhaXJybycpIFxuQEluZGV4KCdpZHhfY2lkYWRhb19lbmRlcmVjb19jaWRhZGUnKSBcbkBJbmRleCgnaWR4X2NpZGFkYW9fbm9tZV90cmdtJylcbmV4cG9ydCBjbGFzcyBDaWRhZGFvIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oKVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdOb21lIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgQElzU3RyaW5nKHsgbWVzc2FnZTogJ05vbWUgZGV2ZSBzZXIgdW1hIHN0cmluZycgfSlcbiAgQE1pbkxlbmd0aCgzLCB7IG1lc3NhZ2U6ICdOb21lIGRldmUgdGVyIG5vIG3DrW5pbW8gMyBjYXJhY3RlcmVzJyB9KVxuICBATWF4TGVuZ3RoKDEwMCwgeyBtZXNzYWdlOiAnTm9tZSBkZXZlIHRlciBubyBtw6F4aW1vIDEwMCBjYXJhY3RlcmVzJyB9KVxuICBub21lOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIEBJc09wdGlvbmFsKClcbiAgbm9tZV9zb2NpYWw6IHN0cmluZztcblxuICBAQ29sdW1uKHsgdW5pcXVlOiB0cnVlIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0NQRiDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBMZW5ndGgoMTEsIDE0LCB7IG1lc3NhZ2U6ICdDUEYgZGV2ZSB0ZXIgZW50cmUgMTEgZSAxNCBjYXJhY3RlcmVzJyB9KVxuICBAVmFsaWRhdGUoQ1BGVmFsaWRhdG9yLCB7IG1lc3NhZ2U6ICdDUEYgaW52w6FsaWRvJyB9KVxuICBjcGY6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnUkcgw6kgb2JyaWdhdMOzcmlvJyB9KVxuICByZzogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUsIG51bGxhYmxlOiBmYWxzZSB9KVxuICBATGVuZ3RoKDExLCAxMSwgeyBtZXNzYWdlOiAnTklTIGRldmUgdGVyIDExIGNhcmFjdGVyZXMnIH0pXG4gIEBWYWxpZGF0ZShOSVNWYWxpZGF0b3IsIHsgbWVzc2FnZTogJ05JUyBpbnbDoWxpZG8nIH0pXG4gIG5pczogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnTm9tZSBkYSBtw6NlIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgQElzU3RyaW5nKHsgbWVzc2FnZTogJ05vbWUgZGEgbcOjZSBkZXZlIHNlciB1bWEgc3RyaW5nJyB9KVxuICBATWluTGVuZ3RoKDMsIHsgbWVzc2FnZTogJ05vbWUgZGEgbcOjZSBkZXZlIHRlciBubyBtw61uaW1vIDMgY2FyYWN0ZXJlcycgfSlcbiAgQE1heExlbmd0aCgxMDAsIHsgbWVzc2FnZTogJ05vbWUgZGEgbcOjZSBkZXZlIHRlciBubyBtw6F4aW1vIDEwMCBjYXJhY3RlcmVzJyB9KVxuICBub21lX21hZTogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB1bmlxdWU6IHRydWUgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnTmF0dXJhbGlkYWRlIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgbmF0dXJhbGlkYWRlOiBzdHJpbmc7XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiBmYWxzZSB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdQcm9udHVhcmlvIFNVQVMgw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBwcm9udHVhcmlvX3N1YXM6IHN0cmluZztcblxuICBAQ29sdW1uKHsgdHlwZTogJ2RhdGUnIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0RhdGEgZGUgbmFzY2ltZW50byDDqSBvYnJpZ2F0w7NyaWEnIH0pXG4gIGRhdGFfbmFzY2ltZW50bzogRGF0ZTtcblxuICBAT25lVG9NYW55KCgpID0+IFBhcGVsQ2lkYWRhbywgKHBhcGVsQ2lkYWRhbykgPT4gcGFwZWxDaWRhZGFvLmNpZGFkYW8pXG4gIHBhcGVpczogUGFwZWxDaWRhZGFvW107XG5cbiAgQE9uZVRvTWFueSgoKSA9PiBDb21wb3NpY2FvRmFtaWxpYXIsIChjb21wb3NpY2FvRmFtaWxpYXIpID0+IGNvbXBvc2ljYW9GYW1pbGlhci5jaWRhZGFvKVxuICBjb21wb3NpY2FvX2ZhbWlsaWFyOiBDb21wb3NpY2FvRmFtaWxpYXJbXTtcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogU2V4byxcbiAgICBlbnVtTmFtZTogJ3NleG9fZW51bScsXG4gIH0pXG4gIEBJc0VudW0oU2V4bywgeyBtZXNzYWdlOiAnU2V4byBpbnbDoWxpZG8nIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ1NleG8gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBzZXhvOiBTZXhvO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogZmFsc2UgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnVGVsZWZvbmUgw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBAVmFsaWRhdGUoVGVsZWZvbmVWYWxpZGF0b3IsIHsgbWVzc2FnZTogJ1RlbGVmb25lIGludsOhbGlkbycgfSlcbiAgdGVsZWZvbmU6IHN0cmluZztcblxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcbiAgQElzT3B0aW9uYWwoKVxuICBASXNFbWFpbCh7fSwgeyBtZXNzYWdlOiAnRW1haWwgaW52w6FsaWRvJyB9KVxuICBlbWFpbDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oe1xuICAgIHR5cGU6ICdlbnVtJyxcbiAgICBlbnVtOiBFc3RhZG9DaXZpbCxcbiAgICBlbnVtTmFtZTogJ2VzdGFkb19jaXZpbF9lbnVtJyxcbiAgfSlcbiAgQElzRW51bShTZXhvLCB7IG1lc3NhZ2U6ICdFc3RhZG8gY2l2aWwgaW52w6FsaWRvJyB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdFc3RhZG8gQ2l2aWwgw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBlc3RhZG9fY2l2aWw6IEVzdGFkb0NpdmlsO1xuICBcblxuICBAQ29sdW1uKCdqc29uYicpXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0VuZGVyZcOnbyDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBJbmRleCgpXG4gIGVuZGVyZWNvOiB7XG4gICAgbG9ncmFkb3Vybzogc3RyaW5nO1xuICAgIG51bWVybzogc3RyaW5nO1xuICAgIGNvbXBsZW1lbnRvPzogc3RyaW5nO1xuICAgIGJhaXJybzogc3RyaW5nO1xuICAgIGNpZGFkZTogc3RyaW5nO1xuICAgIGVzdGFkbzogc3RyaW5nO1xuICAgIGNlcDogc3RyaW5nO1xuICAgIHBvbnRvX3JlZmVyZW5jaWE/OiBzdHJpbmc7XG4gICAgdGVtcG9fZGVfcmVzaWRlbmNpYTogbnVtYmVyO1xuICB9O1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAndXVpZCcsIG51bGxhYmxlOiBmYWxzZSB9KVxuICB1bmlkYWRlX2lkOiBzdHJpbmc7XG5cbiAgQE1hbnlUb09uZSgoKSA9PiBVbmlkYWRlLCB7IG51bGxhYmxlOiBmYWxzZSB9KVxuICBASm9pbkNvbHVtbih7IG5hbWU6ICd1bmlkYWRlX2lkJyB9KVxuICB1bmlkYWRlOiBVbmlkYWRlO1xuXG4gIEBDcmVhdGVEYXRlQ29sdW1uKClcbiAgY3JlYXRlZF9hdDogRGF0ZTtcblxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXG4gIHVwZGF0ZWRfYXQ6IERhdGU7XG5cbiAgQERlbGV0ZURhdGVDb2x1bW4oKVxuICByZW1vdmVkX2F0OiBEYXRlO1xuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGNpZGFkw6NvIGZvaSBjcmlhZG8gcmVjZW50ZW1lbnRlICjDumx0aW1hcyAyNCBob3JhcylcbiAgICogQHJldHVybnMgdHJ1ZSBzZSBmb2kgY3JpYWRvIG5hcyDDumx0aW1hcyAyNCBob3Jhc1xuICAgKi9cbiAgaXNDcmlhZG9SZWNlbnRlbWVudGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWdvcmEgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHVtRGlhQXRyYXMgPSBuZXcgRGF0ZShhZ29yYS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0ID4gdW1EaWFBdHJhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIGEgaWRhZGUgZG8gY2lkYWTDo28gZW0gYW5vc1xuICAgKiBAcmV0dXJucyBpZGFkZSBlbSBhbm9zXG4gICAqL1xuICBnZXRJZGFkZSgpOiBudW1iZXIge1xuICAgIGNvbnN0IGhvamUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IG5hc2NpbWVudG8gPSBuZXcgRGF0ZSh0aGlzLmRhdGFfbmFzY2ltZW50byk7XG4gICAgbGV0IGlkYWRlID0gaG9qZS5nZXRGdWxsWWVhcigpIC0gbmFzY2ltZW50by5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1lc0F0dWFsID0gaG9qZS5nZXRNb250aCgpO1xuICAgIGNvbnN0IG1lc05hc2NpbWVudG8gPSBuYXNjaW1lbnRvLmdldE1vbnRoKCk7XG4gICAgXG4gICAgaWYgKG1lc0F0dWFsIDwgbWVzTmFzY2ltZW50byB8fCAobWVzQXR1YWwgPT09IG1lc05hc2NpbWVudG8gJiYgaG9qZS5nZXREYXRlKCkgPCBuYXNjaW1lbnRvLmdldERhdGUoKSkpIHtcbiAgICAgIGlkYWRlLS07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpZGFkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGNpZGFkw6NvIMOpIG1haW9yIGRlIGlkYWRlXG4gICAqIEByZXR1cm5zIHRydWUgc2Ugw6kgbWFpb3IgZGUgaWRhZGVcbiAgICovXG4gIGlzTWFpb3JJZGFkZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJZGFkZSgpID49IDE4O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gY2lkYWTDo28gw6kgaWRvc28gKDY1KyBhbm9zKVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIMOpIGlkb3NvXG4gICAqL1xuICBpc0lkb3NvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldElkYWRlKCkgPj0gNjU7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyDDqSBjcmlhbsOnYSAoMC0xMiBhbm9zKVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIMOpIGNyaWFuw6dhXG4gICAqL1xuICBpc0NyaWFuY2EoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SWRhZGUoKSA8PSAxMjtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGNpZGFkw6NvIMOpIGFkb2xlc2NlbnRlICgxMy0xNyBhbm9zKVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIMOpIGFkb2xlc2NlbnRlXG4gICAqL1xuICBpc0Fkb2xlc2NlbnRlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGlkYWRlID0gdGhpcy5nZXRJZGFkZSgpO1xuICAgIHJldHVybiBpZGFkZSA+PSAxMyAmJiBpZGFkZSA8PSAxNztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gbm9tZSBzb2NpYWwgZGVmaW5pZG9cbiAgICogQHJldHVybnMgdHJ1ZSBzZSB0ZW0gbm9tZSBzb2NpYWxcbiAgICovXG4gIHRlbU5vbWVTb2NpYWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubm9tZV9zb2NpYWwgIT09IG51bGwgJiYgdGhpcy5ub21lX3NvY2lhbCAhPT0gdW5kZWZpbmVkICYmIHRoaXMubm9tZV9zb2NpYWwudHJpbSgpICE9PSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyBub21lIHByZWZlcmVuY2lhbCAobm9tZSBzb2NpYWwgc2UgZXhpc3Rpciwgc2Vuw6NvIG5vbWUgY2l2aWwpXG4gICAqIEByZXR1cm5zIG5vbWUgcHJlZmVyZW5jaWFsXG4gICAqL1xuICBnZXROb21lUHJlZmVyZW5jaWFsKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudGVtTm9tZVNvY2lhbCgpID8gdGhpcy5ub21lX3NvY2lhbCA6IHRoaXMubm9tZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gZW1haWwgY2FkYXN0cmFkb1xuICAgKiBAcmV0dXJucyB0cnVlIHNlIHRlbSBlbWFpbFxuICAgKi9cbiAgdGVtRW1haWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZW1haWwgIT09IG51bGwgJiYgdGhpcy5lbWFpbCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuZW1haWwudHJpbSgpICE9PSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyBlbmRlcmXDp28gY29tcGxldG8gZm9ybWF0YWRvXG4gICAqIEByZXR1cm5zIGVuZGVyZcOnbyBmb3JtYXRhZG9cbiAgICovXG4gIGdldEVuZGVyZWNvQ29tcGxldG8oKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuZW5kZXJlY28pIHJldHVybiAnRW5kZXJlw6dvIG7Do28gaW5mb3JtYWRvJztcbiAgICBcbiAgICBjb25zdCB7IGxvZ3JhZG91cm8sIG51bWVybywgY29tcGxlbWVudG8sIGJhaXJybywgY2lkYWRlLCBlc3RhZG8sIGNlcCB9ID0gdGhpcy5lbmRlcmVjbztcbiAgICBsZXQgZW5kZXJlY28gPSBgJHtsb2dyYWRvdXJvfSwgJHtudW1lcm99YDtcbiAgICBcbiAgICBpZiAoY29tcGxlbWVudG8pIHtcbiAgICAgIGVuZGVyZWNvICs9IGAsICR7Y29tcGxlbWVudG99YDtcbiAgICB9XG4gICAgXG4gICAgZW5kZXJlY28gKz0gYCAtICR7YmFpcnJvfSwgJHtjaWRhZGV9LyR7ZXN0YWRvfSAtIENFUDogJHtjZXB9YDtcbiAgICByZXR1cm4gZW5kZXJlY287XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyBwZXJ0ZW5jZSBhIHVtYSB1bmlkYWRlIGVzcGVjw61maWNhXG4gICAqIEBwYXJhbSB1bmlkYWRlSWQgSUQgZGEgdW5pZGFkZVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIHBlcnRlbmNlIMOgIHVuaWRhZGVcbiAgICovXG4gIHBlcnRlbmNlQVVuaWRhZGUodW5pZGFkZUlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy51bmlkYWRlX2lkID09PSB1bmlkYWRlSWQ7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyBmb2kgcmVtb3ZpZG8gKHNvZnQgZGVsZXRlKVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIGZvaSByZW1vdmlkb1xuICAgKi9cbiAgZm9pUmVtb3ZpZG8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlZF9hdCAhPT0gbnVsbCAmJiB0aGlzLnJlbW92ZWRfYXQgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGNpZGFkw6NvIGVzdMOhIGF0aXZvXG4gICAqIEByZXR1cm5zIHRydWUgc2UgZXN0w6EgYXRpdm9cbiAgICovXG4gIGlzQXRpdm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLmZvaVJlbW92aWRvKCk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIHVtIHJlc3VtbyBkYXMgaW5mb3JtYcOnw7VlcyBkbyBjaWRhZMOjb1xuICAgKiBAcmV0dXJucyBvYmpldG8gY29tIHJlc3VtbyBkYXMgaW5mb3JtYcOnw7Vlc1xuICAgKi9cbiAgZ2V0U3VtbWFyeSgpOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBub21lOiBzdHJpbmc7XG4gICAgbm9tZVByZWZlcmVuY2lhbDogc3RyaW5nO1xuICAgIGNwZjogc3RyaW5nO1xuICAgIGlkYWRlOiBudW1iZXI7XG4gICAgc2V4bzogc3RyaW5nO1xuICAgIHRlbGVmb25lOiBzdHJpbmc7XG4gICAgdGVtRW1haWw6IGJvb2xlYW47XG4gICAgdW5pZGFkZUlkOiBzdHJpbmc7XG4gICAgYXRpdm86IGJvb2xlYW47XG4gICAgY3JpYWRvRW06IERhdGU7XG4gIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG5vbWU6IHRoaXMubm9tZSxcbiAgICAgIG5vbWVQcmVmZXJlbmNpYWw6IHRoaXMuZ2V0Tm9tZVByZWZlcmVuY2lhbCgpLFxuICAgICAgY3BmOiB0aGlzLmNwZixcbiAgICAgIGlkYWRlOiB0aGlzLmdldElkYWRlKCksXG4gICAgICBzZXhvOiB0aGlzLnNleG8sXG4gICAgICB0ZWxlZm9uZTogdGhpcy50ZWxlZm9uZSxcbiAgICAgIHRlbUVtYWlsOiB0aGlzLnRlbUVtYWlsKCksXG4gICAgICB1bmlkYWRlSWQ6IHRoaXMudW5pZGFkZV9pZCxcbiAgICAgIGF0aXZvOiB0aGlzLmlzQXRpdm8oKSxcbiAgICAgIGNyaWFkb0VtOiB0aGlzLmNyZWF0ZWRfYXRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdlcmEgdW1hIGNoYXZlIMO6bmljYSBwYXJhIG8gY2lkYWTDo29cbiAgICogQHJldHVybnMgY2hhdmUgw7puaWNhXG4gICAqL1xuICBnZXRVbmlxdWVLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYGNpZGFkYW9fJHt0aGlzLmNwZn1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gZXN0YWRvIGRvIGNpZGFkw6NvIMOpIGNvbnNpc3RlbnRlXG4gICAqIEByZXR1cm5zIHRydWUgc2UgZXN0w6EgY29uc2lzdGVudGVcbiAgICovXG4gIGlzQ29uc2lzdGVudGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaWQgIT09IG51bGwgJiZcbiAgICAgIHRoaXMubm9tZSAhPT0gbnVsbCAmJlxuICAgICAgdGhpcy5jcGYgIT09IG51bGwgJiZcbiAgICAgIHRoaXMubmlzICE9PSBudWxsICYmXG4gICAgICB0aGlzLmRhdGFfbmFzY2ltZW50byAhPT0gbnVsbCAmJlxuICAgICAgdGhpcy51bmlkYWRlX2lkICE9PSBudWxsICYmXG4gICAgICB0aGlzLmNyZWF0ZWRfYXQgIT09IG51bGwgJiZcbiAgICAgIHRoaXMudXBkYXRlZF9hdCAhPT0gbnVsbCAmJlxuICAgICAgdGhpcy5jcmVhdGVkX2F0IDw9IHRoaXMudXBkYXRlZF9hdFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyBuYXNjZXUgZW0gdW1hIGNpZGFkZSBlc3BlY8OtZmljYVxuICAgKiBAcGFyYW0gY2lkYWRlIG5vbWUgZGEgY2lkYWRlXG4gICAqIEByZXR1cm5zIHRydWUgc2UgbmFzY2V1IG5hIGNpZGFkZVxuICAgKi9cbiAgbmFzY2V1RW0oY2lkYWRlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uYXR1cmFsaWRhZGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhjaWRhZGUudG9Mb3dlckNhc2UoKSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyBtb3JhIGVtIHVtYSBjaWRhZGUgZXNwZWPDrWZpY2FcbiAgICogQHBhcmFtIGNpZGFkZSBub21lIGRhIGNpZGFkZVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIG1vcmEgbmEgY2lkYWRlXG4gICAqL1xuICBtb3JhRW0oY2lkYWRlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5lbmRlcmVjbz8uY2lkYWRlPy50b0xvd2VyQ2FzZSgpID09PSBjaWRhZGUudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIGNpZGFkw6NvIG1vcmEgZW0gdW0gYmFpcnJvIGVzcGVjw61maWNvXG4gICAqIEBwYXJhbSBiYWlycm8gbm9tZSBkbyBiYWlycm9cbiAgICogQHJldHVybnMgdHJ1ZSBzZSBtb3JhIG5vIGJhaXJyb1xuICAgKi9cbiAgbW9yYU5vQmFpcnJvKGJhaXJybzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZW5kZXJlY28/LmJhaXJybz8udG9Mb3dlckNhc2UoKSA9PT0gYmFpcnJvLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZmFpeGEgZXTDoXJpYSBkbyBjaWRhZMOjb1xuICAgKiBAcmV0dXJucyBmYWl4YSBldMOhcmlhXG4gICAqL1xuICBnZXRGYWl4YUV0YXJpYSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlkYWRlID0gdGhpcy5nZXRJZGFkZSgpO1xuICAgIFxuICAgIGlmIChpZGFkZSA8PSAxMikgcmV0dXJuICdDcmlhbsOnYSc7XG4gICAgaWYgKGlkYWRlIDw9IDE3KSByZXR1cm4gJ0Fkb2xlc2NlbnRlJztcbiAgICBpZiAoaWRhZGUgPD0gMjkpIHJldHVybiAnSm92ZW0nO1xuICAgIGlmIChpZGFkZSA8PSA1OSkgcmV0dXJuICdBZHVsdG8nO1xuICAgIHJldHVybiAnSWRvc28nO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gY2lkYWTDo28gdGVtIHBhcMOpaXMgYXRpdm9zXG4gICAqIEByZXR1cm5zIHRydWUgc2UgdGVtIHBhcMOpaXMgYXRpdm9zXG4gICAqL1xuICB0ZW1QYXBlaXNBdGl2b3MoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGFwZWlzICYmIHRoaXMucGFwZWlzLnNvbWUocGFwZWwgPT4gcGFwZWwuYXRpdm8pO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIG7Dum1lcm8gZGUgZmFtaWxpYXJlcyBjYWRhc3RyYWRvc1xuICAgKiBAcmV0dXJucyBuw7ptZXJvIGRlIGZhbWlsaWFyZXNcbiAgICovXG4gIGdldE51bWVyb0ZhbWlsaWFyZXMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb3NpY2FvX2ZhbWlsaWFyID8gdGhpcy5jb21wb3NpY2FvX2ZhbWlsaWFyLmxlbmd0aCA6IDA7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIGNvbXBvc2nDp8OjbyBmYW1pbGlhciBjYWRhc3RyYWRhXG4gICAqIEByZXR1cm5zIHRydWUgc2UgdGVtIGZhbWlsaWFyZXNcbiAgICovXG4gIHRlbUNvbXBvc2ljYW9GYW1pbGlhcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXROdW1lcm9GYW1pbGlhcmVzKCkgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgbyBDUEYgcGFyYSBleGliacOnw6NvXG4gICAqIEByZXR1cm5zIENQRiBmb3JtYXRhZG9cbiAgICovXG4gIGdldENwZkZvcm1hdGFkbygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNwZiA9IHRoaXMuY3BmLnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgcmV0dXJuIGNwZi5yZXBsYWNlKC8oXFxkezN9KShcXGR7M30pKFxcZHszfSkoXFxkezJ9KS8sICckMS4kMi4kMy0kNCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgbyB0ZWxlZm9uZSBwYXJhIGV4aWJpw6fDo29cbiAgICogQHJldHVybnMgdGVsZWZvbmUgZm9ybWF0YWRvXG4gICAqL1xuICBnZXRUZWxlZm9uZUZvcm1hdGFkbygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRlbGVmb25lID0gdGhpcy50ZWxlZm9uZS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgIGlmICh0ZWxlZm9uZS5sZW5ndGggPT09IDExKSB7XG4gICAgICByZXR1cm4gdGVsZWZvbmUucmVwbGFjZSgvKFxcZHsyfSkoXFxkezV9KShcXGR7NH0pLywgJygkMSkgJDItJDMnKTtcbiAgICB9IGVsc2UgaWYgKHRlbGVmb25lLmxlbmd0aCA9PT0gMTApIHtcbiAgICAgIHJldHVybiB0ZWxlZm9uZS5yZXBsYWNlKC8oXFxkezJ9KShcXGR7NH0pKFxcZHs0fSkvLCAnKCQxKSAkMi0kMycpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50ZWxlZm9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXRhIGEgZGF0YSBkZSBuYXNjaW1lbnRvXG4gICAqIEByZXR1cm5zIGRhdGEgZm9ybWF0YWRhXG4gICAqL1xuICBnZXREYXRhTmFzY2ltZW50b0Zvcm1hdGFkYSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmRhdGFfbmFzY2ltZW50bykudG9Mb2NhbGVEYXRlU3RyaW5nKCdwdC1CUicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgYSBkYXRhIGRlIGNyaWHDp8Ojb1xuICAgKiBAcmV0dXJucyBkYXRhIGZvcm1hdGFkYVxuICAgKi9cbiAgZ2V0Q3JpYWNhb0Zvcm1hdGFkYSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZWRfYXQudG9Mb2NhbGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgYXR1YWxpemHDp8Ojb1xuICAgKiBAcmV0dXJucyBkYXRhIGZvcm1hdGFkYVxuICAgKi9cbiAgZ2V0QXR1YWxpemFjYW9Gb3JtYXRhZGEoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0LnRvTG9jYWxlU3RyaW5nKCdwdC1CUicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbmZvcm1hw6fDtWVzIHNlbnPDrXZlaXMgcGFyYSBsb2dzXG4gICAqIEByZXR1cm5zIHZlcnPDo28gc2VndXJhIHBhcmEgbG9nc1xuICAgKi9cbiAgdG9TYWZlTG9nKCk6IG9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgbm9tZTogdGhpcy5ub21lLFxuICAgICAgaWRhZGU6IHRoaXMuZ2V0SWRhZGUoKSxcbiAgICAgIHNleG86IHRoaXMuc2V4byxcbiAgICAgIHVuaWRhZGVJZDogdGhpcy51bmlkYWRlX2lkLFxuICAgICAgYXRpdm86IHRoaXMuaXNBdGl2bygpLFxuICAgICAgY3JpYWRvRW06IHRoaXMuY3JlYXRlZF9hdFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyBjaWRhZMOjbyBwb2RlIHNlciByZW1vdmlkb1xuICAgKiBAcmV0dXJucyB0cnVlIHNlIHBvZGUgc2VyIHJlbW92aWRvXG4gICAqL1xuICBwb2RlU2VyUmVtb3ZpZG8oKTogYm9vbGVhbiB7XG4gICAgLy8gTMOzZ2ljYSBiw6FzaWNhIC0gcG9kZSBzZXIgZXhwYW5kaWRhIGNvbmZvcm1lIHJlZ3JhcyBkZSBuZWfDs2Npb1xuICAgIHJldHVybiB0aGlzLmlzQXRpdm8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9uYSBvIGNpZGFkw6NvIChzZW0gSUQgZSBkYXRhcylcbiAgICogQHJldHVybnMgbm92YSBpbnN0w6JuY2lhIGRvIGNpZGFkw6NvXG4gICAqL1xuICBjbG9uZSgpOiBDaWRhZGFvIHtcbiAgICBjb25zdCBub3ZvQ2lkYWRhbyA9IG5ldyBDaWRhZGFvKCk7XG4gICAgbm92b0NpZGFkYW8ubm9tZSA9IHRoaXMubm9tZTtcbiAgICBub3ZvQ2lkYWRhby5ub21lX3NvY2lhbCA9IHRoaXMubm9tZV9zb2NpYWw7XG4gICAgbm92b0NpZGFkYW8uY3BmID0gdGhpcy5jcGY7XG4gICAgbm92b0NpZGFkYW8ucmcgPSB0aGlzLnJnO1xuICAgIG5vdm9DaWRhZGFvLm5pcyA9IHRoaXMubmlzO1xuICAgIG5vdm9DaWRhZGFvLm5vbWVfbWFlID0gdGhpcy5ub21lX21hZTtcbiAgICBub3ZvQ2lkYWRhby5uYXR1cmFsaWRhZGUgPSB0aGlzLm5hdHVyYWxpZGFkZTtcbiAgICBub3ZvQ2lkYWRhby5wcm9udHVhcmlvX3N1YXMgPSB0aGlzLnByb250dWFyaW9fc3VhcztcbiAgICBub3ZvQ2lkYWRhby5kYXRhX25hc2NpbWVudG8gPSB0aGlzLmRhdGFfbmFzY2ltZW50bztcbiAgICBub3ZvQ2lkYWRhby5zZXhvID0gdGhpcy5zZXhvO1xuICAgIG5vdm9DaWRhZGFvLnRlbGVmb25lID0gdGhpcy50ZWxlZm9uZTtcbiAgICBub3ZvQ2lkYWRhby5lbWFpbCA9IHRoaXMuZW1haWw7XG4gICAgbm92b0NpZGFkYW8uZW5kZXJlY28gPSB7IC4uLnRoaXMuZW5kZXJlY28gfTtcbiAgICBub3ZvQ2lkYWRhby51bmlkYWRlX2lkID0gdGhpcy51bmlkYWRlX2lkO1xuICAgIHJldHVybiBub3ZvQ2lkYWRhbztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSB1bSBjYXNvIHByaW9yaXTDoXJpbyAoaWRvc28sIGNyaWFuw6dhLCBldGMuKVxuICAgKiBAcmV0dXJucyB0cnVlIHNlIMOpIHByaW9yaXTDoXJpb1xuICAgKi9cbiAgaXNQcmlvcml0YXJpbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc0lkb3NvKCkgfHwgdGhpcy5pc0NyaWFuY2EoKSB8fCB0aGlzLmlzQWRvbGVzY2VudGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gc3VnZXN0w7VlcyBkZSB2ZXJpZmljYcOnw6NvIGRlIGRhZG9zXG4gICAqIEByZXR1cm5zIGFycmF5IGRlIHN1Z2VzdMO1ZXNcbiAgICovXG4gIGdldFN1Z2VzdG9lc1ZlcmlmaWNhY2FvKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzdWdlc3RvZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgaWYgKCF0aGlzLnRlbUVtYWlsKCkpIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdDb25zaWRlcmUgY2FkYXN0cmFyIHVtIGVtYWlsIHBhcmEgY29udGF0bycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMudGVtQ29tcG9zaWNhb0ZhbWlsaWFyKCkpIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdDYWRhc3RyZSBhIGNvbXBvc2nDp8OjbyBmYW1pbGlhciBwYXJhIGFuw6FsaXNlIGNvbXBsZXRhJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy50ZW1QYXBlaXNBdGl2b3MoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0RlZmluYSBwYXDDqWlzIHBhcmEgbyBjaWRhZMOjbyBubyBzaXN0ZW1hJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGlkYWRlID0gdGhpcy5nZXRJZGFkZSgpO1xuICAgIGlmIChpZGFkZSA8IDAgfHwgaWRhZGUgPiAxMjApIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdWZXJpZmlxdWUgYSBkYXRhIGRlIG5hc2NpbWVudG8gLSBpZGFkZSBjYWxjdWxhZGEgcGFyZWNlIGluY29ycmV0YScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc3VnZXN0b2VzO1xuICB9XG59XG5cbmV4cG9ydCB7IFNleG8gfTtcbiJdLCJ2ZXJzaW9uIjozfQ==