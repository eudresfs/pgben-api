c94330949f47605595c32fdcd1458ed6
"use strict";
/**
 * Configuração consolidada para o módulo de documentos
 *
 * Este arquivo centraliza todas as configurações relacionadas a documentos,
 * incluindo tipos MIME permitidos e configurações de upload.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.UPLOAD_CONFIG = exports.SECURITY_CONFIG = exports.BLOCKED_MIME_TYPES = exports.BLOCKED_EXTENSIONS = exports.EXTENSOES_PERMITIDAS = exports.MIME_TYPES_POR_CATEGORIA = exports.TODOS_MIME_TYPES_PERMITIDOS = exports.MIME_TYPE_CONFIGS = void 0;
exports.getMimeTypeConfig = getMimeTypeConfig;
exports.isMimeTypePermitido = isMimeTypePermitido;
exports.getCategoriaMimeType = getCategoriaMimeType;
exports.getExtensoesParaMimeType = getExtensoesParaMimeType;
exports.requiresEncryption = requiresEncryption;
exports.allowsThumbnail = allowsThumbnail;
exports.getMaxFileSize = getMaxFileSize;
/**
 * Configuração detalhada de tipos MIME permitidos
 */
exports.MIME_TYPE_CONFIGS = {
    // Documentos PDF
    pdf: {
        extension: 'pdf',
        mimeTypes: ['application/pdf'],
        maxSize: 10 * 1024 * 1024, // 10MB
        description: 'Documento PDF',
        allowThumbnail: true,
        category: 'DOCUMENTOS',
    },
    // Documentos do Microsoft Office
    docx: {
        extension: 'docx',
        mimeTypes: [
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        ],
        maxSize: 5 * 1024 * 1024, // 5MB
        description: 'Documento Word',
        allowThumbnail: false,
        category: 'DOCUMENTOS',
    },
    // Imagens
    jpg: {
        extension: 'jpg',
        mimeTypes: ['image/jpeg'],
        maxSize: 5 * 1024 * 1024, // 5MB
        description: 'Imagem JPEG',
        allowThumbnail: true,
        category: 'IMAGENS',
    },
    png: {
        extension: 'png',
        mimeTypes: ['image/png'],
        maxSize: 5 * 1024 * 1024, // 5MB
        description: 'Imagem PNG',
        allowThumbnail: true,
        category: 'IMAGENS',
    },
    // Texto
    txt: {
        extension: 'txt',
        mimeTypes: ['text/plain'],
        maxSize: 1 * 1024 * 1024, // 1MB
        description: 'Arquivo de texto',
        allowThumbnail: false,
        category: 'TEXTO',
    },
};
/**
 * Lista de todos os tipos MIME permitidos (extraída das configurações)
 */
exports.TODOS_MIME_TYPES_PERMITIDOS = Object.values(exports.MIME_TYPE_CONFIGS)
    .flatMap(config => config.mimeTypes);
/**
 * Mapeamento de tipos MIME por categoria
 */
exports.MIME_TYPES_POR_CATEGORIA = {
    DOCUMENTOS: Object.values(exports.MIME_TYPE_CONFIGS)
        .filter(config => config.category === 'DOCUMENTOS')
        .flatMap(config => config.mimeTypes),
    IMAGENS: Object.values(exports.MIME_TYPE_CONFIGS)
        .filter(config => config.category === 'IMAGENS')
        .flatMap(config => config.mimeTypes),
    PLANILHAS: Object.values(exports.MIME_TYPE_CONFIGS)
        .filter(config => config.category === 'PLANILHAS')
        .flatMap(config => config.mimeTypes),
    // APRESENTACOES: Categoria não definida na interface MimeTypeConfig
    TEXTO: Object.values(exports.MIME_TYPE_CONFIGS)
        .filter(config => config.category === 'TEXTO')
        .flatMap(config => config.mimeTypes),
};
/**
 * Extensões de arquivo correspondentes aos tipos MIME
 */
exports.EXTENSOES_PERMITIDAS = Object.values(exports.MIME_TYPE_CONFIGS)
    .reduce((acc, config) => {
    config.mimeTypes.forEach(mimeType => {
        if (!acc[mimeType]) {
            acc[mimeType] = [];
        }
        acc[mimeType].push(`.${config.extension}`);
    });
    return acc;
}, {});
/**
 * Lista de extensões perigosas que devem ser sempre bloqueadas
 */
exports.BLOCKED_EXTENSIONS = [
    // Executáveis
    'exe', 'bat', 'cmd', 'com', 'scr', 'pif', 'msi', 'dll',
    // Scripts
    'js', 'vbs', 'ps1', 'sh', 'py', 'pl', 'php', 'asp', 'jsp',
    // Arquivos compactados (podem conter malware)
    'zip', 'rar', '7z', 'tar', 'gz',
    // Outros formatos perigosos
    'html', 'htm', 'xml', 'svg',
];
/**
 * Lista de tipos MIME perigosos que devem ser sempre bloqueados
 */
exports.BLOCKED_MIME_TYPES = [
    // Executáveis
    'application/x-msdownload',
    'application/x-executable',
    'application/x-dosexec',
    // Scripts
    'text/javascript',
    'application/javascript',
    'text/html',
    'application/x-httpd-php',
    // Arquivos compactados
    'application/zip',
    'application/x-rar-compressed',
    'application/x-7z-compressed',
    // XML/SVG (podem conter scripts)
    'image/svg+xml',
    'application/xml',
    'text/xml',
];
/**
 * Configurações de segurança para validação de arquivos
 */
exports.SECURITY_CONFIG = {
    // Tamanho máximo global para qualquer arquivo (20MB)
    MAX_FILE_SIZE: 20 * 1024 * 1024,
    // Número máximo de arquivos por upload
    MAX_FILES_PER_UPLOAD: 5,
    // Verificar magic numbers (assinatura do arquivo)
    VERIFY_MAGIC_NUMBERS: true,
    // Escanear conteúdo em busca de padrões suspeitos
    SCAN_CONTENT: true,
    // Verificar vírus/malware
    MALWARE_SCAN: true,
    // Criptografar documentos sensíveis
    ENCRYPT_SENSITIVE_DOCS: true,
    // Colocar arquivos suspeitos em quarentena
    QUARANTINE_SUSPICIOUS: true,
};
/**
 * Configurações de upload
 */
exports.UPLOAD_CONFIG = {
    // Diretório temporário para uploads
    TEMP_DIR: 'uploads/temp',
    // Diretório final para documentos
    DOCS_DIR: 'uploads/documentos',
    // Diretório para thumbnails
    THUMBNAILS_DIR: 'uploads/thumbnails',
    // Tempo limite para upload (em segundos)
    UPLOAD_TIMEOUT: 300,
    // Número máximo de tentativas de upload
    MAX_UPLOAD_RETRIES: 3,
};
/**
 * Funções utilitárias
 */
/**
 * Obtém a configuração de um tipo MIME
 */
function getMimeTypeConfig(mimeType) {
    return Object.values(exports.MIME_TYPE_CONFIGS).find(config => config.mimeTypes.includes(mimeType));
}
/**
 * Verifica se um tipo MIME é permitido
 */
function isMimeTypePermitido(mimeType) {
    return exports.TODOS_MIME_TYPES_PERMITIDOS.includes(mimeType);
}
/**
 * Obtém a categoria de um tipo MIME
 */
function getCategoriaMimeType(mimeType) {
    const config = getMimeTypeConfig(mimeType);
    return config?.category || 'DESCONHECIDO';
}
/**
 * Obtém as extensões permitidas para um tipo MIME
 */
function getExtensoesParaMimeType(mimeType) {
    return exports.EXTENSOES_PERMITIDAS[mimeType] || [];
}
/**
 * Verifica se um arquivo requer criptografia
 */
function requiresEncryption(mimeType) {
    // Funcionalidade de criptografia não implementada ainda
    return false;
}
/**
 * Verifica se um arquivo permite thumbnail
 */
function allowsThumbnail(mimeType) {
    const config = getMimeTypeConfig(mimeType);
    return config?.allowThumbnail || false;
}
/**
 * Obtém o tamanho máximo permitido para um tipo MIME
 */
function getMaxFileSize(mimeType) {
    const config = getMimeTypeConfig(mimeType);
    return config?.maxSize || exports.SECURITY_CONFIG.MAX_FILE_SIZE;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGRvY3VtZW50b1xcY29uZmlnXFxkb2N1bWVudG8uY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7O0FBb01ILDhDQUlDO0FBS0Qsa0RBRUM7QUFLRCxvREFHQztBQUtELDREQUVDO0FBS0QsZ0RBR0M7QUFLRCwwQ0FHQztBQUtELHdDQUdDO0FBM09EOztHQUVHO0FBQ1UsUUFBQSxpQkFBaUIsR0FBbUM7SUFDL0QsaUJBQWlCO0lBQ2pCLEdBQUcsRUFBRTtRQUNILFNBQVMsRUFBRSxLQUFLO1FBQ2hCLFNBQVMsRUFBRSxDQUFDLGlCQUFpQixDQUFDO1FBQzlCLE9BQU8sRUFBRSxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksRUFBRSxPQUFPO1FBQ2xDLFdBQVcsRUFBRSxlQUFlO1FBQzVCLGNBQWMsRUFBRSxJQUFJO1FBQ3BCLFFBQVEsRUFBRSxZQUFZO0tBQ3ZCO0lBRUQsaUNBQWlDO0lBQ2pDLElBQUksRUFBRTtRQUNKLFNBQVMsRUFBRSxNQUFNO1FBQ2pCLFNBQVMsRUFBRTtZQUNULHlFQUF5RTtTQUMxRTtRQUNELE9BQU8sRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksRUFBRSxNQUFNO1FBQ2hDLFdBQVcsRUFBRSxnQkFBZ0I7UUFDN0IsY0FBYyxFQUFFLEtBQUs7UUFDckIsUUFBUSxFQUFFLFlBQVk7S0FDdkI7SUFFRCxVQUFVO0lBQ1YsR0FBRyxFQUFFO1FBQ0gsU0FBUyxFQUFFLEtBQUs7UUFDaEIsU0FBUyxFQUFFLENBQUMsWUFBWSxDQUFDO1FBQ3pCLE9BQU8sRUFBRSxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksRUFBRSxNQUFNO1FBQ2hDLFdBQVcsRUFBRSxhQUFhO1FBQzFCLGNBQWMsRUFBRSxJQUFJO1FBQ3BCLFFBQVEsRUFBRSxTQUFTO0tBQ3BCO0lBRUQsR0FBRyxFQUFFO1FBQ0gsU0FBUyxF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QyxDQUFDO0lBQzNDLE9BQU8sTUFBTSxFQUFFLE9BQU8sSUFBSSx1QkFBZSxDQUFDLGFBQWEsQ0FBQztBQUMxRCxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxkb2N1bWVudG9cXGNvbmZpZ1xcZG9jdW1lbnRvLmNvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbmZpZ3VyYcOnw6NvIGNvbnNvbGlkYWRhIHBhcmEgbyBtw7NkdWxvIGRlIGRvY3VtZW50b3NcbiAqIFxuICogRXN0ZSBhcnF1aXZvIGNlbnRyYWxpemEgdG9kYXMgYXMgY29uZmlndXJhw6fDtWVzIHJlbGFjaW9uYWRhcyBhIGRvY3VtZW50b3MsXG4gKiBpbmNsdWluZG8gdGlwb3MgTUlNRSBwZXJtaXRpZG9zIGUgY29uZmlndXJhw6fDtWVzIGRlIHVwbG9hZC5cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIE1pbWVUeXBlQ29uZmlnIHtcbiAgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gIG1pbWVUeXBlczogc3RyaW5nW107XG4gIG1heFNpemU6IG51bWJlcjsgLy8gZW0gYnl0ZXNcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYWxsb3dUaHVtYm5haWw6IGJvb2xlYW47XG4gIGNhdGVnb3J5OiAnRE9DVU1FTlRPUycgfCAnSU1BR0VOUycgfCAnUExBTklMSEFTJyB8ICdURVhUTyc7XG59XG5cbi8qKlxuICogQ29uZmlndXJhw6fDo28gZGV0YWxoYWRhIGRlIHRpcG9zIE1JTUUgcGVybWl0aWRvc1xuICovXG5leHBvcnQgY29uc3QgTUlNRV9UWVBFX0NPTkZJR1M6IFJlY29yZDxzdHJpbmcsIE1pbWVUeXBlQ29uZmlnPiA9IHtcbiAgLy8gRG9jdW1lbnRvcyBQREZcbiAgcGRmOiB7XG4gICAgZXh0ZW5zaW9uOiAncGRmJyxcbiAgICBtaW1lVHlwZXM6IFsnYXBwbGljYXRpb24vcGRmJ10sXG4gICAgbWF4U2l6ZTogMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQlxuICAgIGRlc2NyaXB0aW9uOiAnRG9jdW1lbnRvIFBERicsXG4gICAgYWxsb3dUaHVtYm5haWw6IHRydWUsXG4gICAgY2F0ZWdvcnk6ICdET0NVTUVOVE9TJyxcbiAgfSxcblxuICAvLyBEb2N1bWVudG9zIGRvIE1pY3Jvc29mdCBPZmZpY2VcbiAgZG9jeDoge1xuICAgIGV4dGVuc2lvbjogJ2RvY3gnLFxuICAgIG1pbWVUeXBlczogW1xuICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyxcbiAgICBdLFxuICAgIG1heFNpemU6IDUgKiAxMDI0ICogMTAyNCwgLy8gNU1CXG4gICAgZGVzY3JpcHRpb246ICdEb2N1bWVudG8gV29yZCcsXG4gICAgYWxsb3dUaHVtYm5haWw6IGZhbHNlLFxuICAgIGNhdGVnb3J5OiAnRE9DVU1FTlRPUycsXG4gIH0sXG5cbiAgLy8gSW1hZ2Vuc1xuICBqcGc6IHtcbiAgICBleHRlbnNpb246ICdqcGcnLFxuICAgIG1pbWVUeXBlczogWydpbWFnZS9qcGVnJ10sXG4gICAgbWF4U2l6ZTogNSAqIDEwMjQgKiAxMDI0LCAvLyA1TUJcbiAgICBkZXNjcmlwdGlvbjogJ0ltYWdlbSBKUEVHJyxcbiAgICBhbGxvd1RodW1ibmFpbDogdHJ1ZSxcbiAgICBjYXRlZ29yeTogJ0lNQUdFTlMnLFxuICB9LFxuXG4gIHBuZzoge1xuICAgIGV4dGVuc2lvbjogJ3BuZycsXG4gICAgbWltZVR5cGVzOiBbJ2ltYWdlL3BuZyddLFxuICAgIG1heFNpemU6IDUgKiAxMDI0ICogMTAyNCwgLy8gNU1CXG4gICAgZGVzY3JpcHRpb246ICdJbWFnZW0gUE5HJyxcbiAgICBhbGxvd1RodW1ibmFpbDogdHJ1ZSxcbiAgICBjYXRlZ29yeTogJ0lNQUdFTlMnLFxuICB9LFxuXG4gIC8vIFRleHRvXG4gIHR4dDoge1xuICAgIGV4dGVuc2lvbjogJ3R4dCcsXG4gICAgbWltZVR5cGVzOiBbJ3RleHQvcGxhaW4nXSxcbiAgICBtYXhTaXplOiAxICogMTAyNCAqIDEwMjQsIC8vIDFNQlxuICAgIGRlc2NyaXB0aW9uOiAnQXJxdWl2byBkZSB0ZXh0bycsXG4gICAgYWxsb3dUaHVtYm5haWw6IGZhbHNlLFxuICAgIGNhdGVnb3J5OiAnVEVYVE8nLFxuICB9LFxufTtcblxuLyoqXG4gKiBMaXN0YSBkZSB0b2RvcyBvcyB0aXBvcyBNSU1FIHBlcm1pdGlkb3MgKGV4dHJhw61kYSBkYXMgY29uZmlndXJhw6fDtWVzKVxuICovXG5leHBvcnQgY29uc3QgVE9ET1NfTUlNRV9UWVBFU19QRVJNSVRJRE9TID0gT2JqZWN0LnZhbHVlcyhNSU1FX1RZUEVfQ09ORklHUylcbiAgLmZsYXRNYXAoY29uZmlnID0+IGNvbmZpZy5taW1lVHlwZXMpO1xuXG4vKipcbiAqIE1hcGVhbWVudG8gZGUgdGlwb3MgTUlNRSBwb3IgY2F0ZWdvcmlhXG4gKi9cbmV4cG9ydCBjb25zdCBNSU1FX1RZUEVTX1BPUl9DQVRFR09SSUEgPSB7XG4gIERPQ1VNRU5UT1M6IE9iamVjdC52YWx1ZXMoTUlNRV9UWVBFX0NPTkZJR1MpXG4gICAgLmZpbHRlcihjb25maWcgPT4gY29uZmlnLmNhdGVnb3J5ID09PSAnRE9DVU1FTlRPUycpXG4gICAgLmZsYXRNYXAoY29uZmlnID0+IGNvbmZpZy5taW1lVHlwZXMpLFxuICBJTUFHRU5TOiBPYmplY3QudmFsdWVzKE1JTUVfVFlQRV9DT05GSUdTKVxuICAgIC5maWx0ZXIoY29uZmlnID0+IGNvbmZpZy5jYXRlZ29yeSA9PT0gJ0lNQUdFTlMnKVxuICAgIC5mbGF0TWFwKGNvbmZpZyA9PiBjb25maWcubWltZVR5cGVzKSxcbiAgUExBTklMSEFTOiBPYmplY3QudmFsdWVzKE1JTUVfVFlQRV9DT05GSUdTKVxuICAgIC5maWx0ZXIoY29uZmlnID0+IGNvbmZpZy5jYXRlZ29yeSA9PT0gJ1BMQU5JTEhBUycpXG4gICAgLmZsYXRNYXAoY29uZmlnID0+IGNvbmZpZy5taW1lVHlwZXMpLFxuICAvLyBBUFJFU0VOVEFDT0VTOiBDYXRlZ29yaWEgbsOjbyBkZWZpbmlkYSBuYSBpbnRlcmZhY2UgTWltZVR5cGVDb25maWdcbiAgVEVYVE86IE9iamVjdC52YWx1ZXMoTUlNRV9UWVBFX0NPTkZJR1MpXG4gICAgLmZpbHRlcihjb25maWcgPT4gY29uZmlnLmNhdGVnb3J5ID09PSAnVEVYVE8nKVxuICAgIC5mbGF0TWFwKGNvbmZpZyA9PiBjb25maWcubWltZVR5cGVzKSxcbn07XG5cbi8qKlxuICogRXh0ZW5zw7VlcyBkZSBhcnF1aXZvIGNvcnJlc3BvbmRlbnRlcyBhb3MgdGlwb3MgTUlNRVxuICovXG5leHBvcnQgY29uc3QgRVhURU5TT0VTX1BFUk1JVElEQVMgPSBPYmplY3QudmFsdWVzKE1JTUVfVFlQRV9DT05GSUdTKVxuICAucmVkdWNlKChhY2MsIGNvbmZpZykgPT4ge1xuICAgIGNvbmZpZy5taW1lVHlwZXMuZm9yRWFjaChtaW1lVHlwZSA9PiB7XG4gICAgICBpZiAoIWFjY1ttaW1lVHlwZV0pIHtcbiAgICAgICAgYWNjW21pbWVUeXBlXSA9IFtdO1xuICAgICAgfVxuICAgICAgYWNjW21pbWVUeXBlXS5wdXNoKGAuJHtjb25maWcuZXh0ZW5zaW9ufWApO1xuICAgIH0pO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPik7XG5cbi8qKlxuICogTGlzdGEgZGUgZXh0ZW5zw7VlcyBwZXJpZ29zYXMgcXVlIGRldmVtIHNlciBzZW1wcmUgYmxvcXVlYWRhc1xuICovXG5leHBvcnQgY29uc3QgQkxPQ0tFRF9FWFRFTlNJT05TID0gW1xuICAvLyBFeGVjdXTDoXZlaXNcbiAgJ2V4ZScsICdiYXQnLCAnY21kJywgJ2NvbScsICdzY3InLCAncGlmJywgJ21zaScsICdkbGwnLFxuICAvLyBTY3JpcHRzXG4gICdqcycsICd2YnMnLCAncHMxJywgJ3NoJywgJ3B5JywgJ3BsJywgJ3BocCcsICdhc3AnLCAnanNwJyxcbiAgLy8gQXJxdWl2b3MgY29tcGFjdGFkb3MgKHBvZGVtIGNvbnRlciBtYWx3YXJlKVxuICAnemlwJywgJ3JhcicsICc3eicsICd0YXInLCAnZ3onLFxuICAvLyBPdXRyb3MgZm9ybWF0b3MgcGVyaWdvc29zXG4gICdodG1sJywgJ2h0bScsICd4bWwnLCAnc3ZnJyxcbl07XG5cbi8qKlxuICogTGlzdGEgZGUgdGlwb3MgTUlNRSBwZXJpZ29zb3MgcXVlIGRldmVtIHNlciBzZW1wcmUgYmxvcXVlYWRvc1xuICovXG5leHBvcnQgY29uc3QgQkxPQ0tFRF9NSU1FX1RZUEVTID0gW1xuICAvLyBFeGVjdXTDoXZlaXNcbiAgJ2FwcGxpY2F0aW9uL3gtbXNkb3dubG9hZCcsXG4gICdhcHBsaWNhdGlvbi94LWV4ZWN1dGFibGUnLFxuICAnYXBwbGljYXRpb24veC1kb3NleGVjJyxcbiAgLy8gU2NyaXB0c1xuICAndGV4dC9qYXZhc2NyaXB0JyxcbiAgJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLFxuICAndGV4dC9odG1sJyxcbiAgJ2FwcGxpY2F0aW9uL3gtaHR0cGQtcGhwJyxcbiAgLy8gQXJxdWl2b3MgY29tcGFjdGFkb3NcbiAgJ2FwcGxpY2F0aW9uL3ppcCcsXG4gICdhcHBsaWNhdGlvbi94LXJhci1jb21wcmVzc2VkJyxcbiAgJ2FwcGxpY2F0aW9uL3gtN3otY29tcHJlc3NlZCcsXG4gIC8vIFhNTC9TVkcgKHBvZGVtIGNvbnRlciBzY3JpcHRzKVxuICAnaW1hZ2Uvc3ZnK3htbCcsXG4gICdhcHBsaWNhdGlvbi94bWwnLFxuICAndGV4dC94bWwnLFxuXTtcblxuLyoqXG4gKiBDb25maWd1cmHDp8O1ZXMgZGUgc2VndXJhbsOnYSBwYXJhIHZhbGlkYcOnw6NvIGRlIGFycXVpdm9zXG4gKi9cbmV4cG9ydCBjb25zdCBTRUNVUklUWV9DT05GSUcgPSB7XG4gIC8vIFRhbWFuaG8gbcOheGltbyBnbG9iYWwgcGFyYSBxdWFscXVlciBhcnF1aXZvICgyME1CKVxuICBNQVhfRklMRV9TSVpFOiAyMCAqIDEwMjQgKiAxMDI0LFxuICBcbiAgLy8gTsO6bWVybyBtw6F4aW1vIGRlIGFycXVpdm9zIHBvciB1cGxvYWRcbiAgTUFYX0ZJTEVTX1BFUl9VUExPQUQ6IDUsXG4gIFxuICAvLyBWZXJpZmljYXIgbWFnaWMgbnVtYmVycyAoYXNzaW5hdHVyYSBkbyBhcnF1aXZvKVxuICBWRVJJRllfTUFHSUNfTlVNQkVSUzogdHJ1ZSxcbiAgXG4gIC8vIEVzY2FuZWFyIGNvbnRlw7pkbyBlbSBidXNjYSBkZSBwYWRyw7VlcyBzdXNwZWl0b3NcbiAgU0NBTl9DT05URU5UOiB0cnVlLFxuICBcbiAgLy8gVmVyaWZpY2FyIHbDrXJ1cy9tYWx3YXJlXG4gIE1BTFdBUkVfU0NBTjogdHJ1ZSxcbiAgXG4gIC8vIENyaXB0b2dyYWZhciBkb2N1bWVudG9zIHNlbnPDrXZlaXNcbiAgRU5DUllQVF9TRU5TSVRJVkVfRE9DUzogdHJ1ZSxcbiAgXG4gIC8vIENvbG9jYXIgYXJxdWl2b3Mgc3VzcGVpdG9zIGVtIHF1YXJlbnRlbmFcbiAgUVVBUkFOVElORV9TVVNQSUNJT1VTOiB0cnVlLFxufTtcblxuLyoqXG4gKiBDb25maWd1cmHDp8O1ZXMgZGUgdXBsb2FkXG4gKi9cbmV4cG9ydCBjb25zdCBVUExPQURfQ09ORklHID0ge1xuICAvLyBEaXJldMOzcmlvIHRlbXBvcsOhcmlvIHBhcmEgdXBsb2Fkc1xuICBURU1QX0RJUjogJ3VwbG9hZHMvdGVtcCcsXG4gIFxuICAvLyBEaXJldMOzcmlvIGZpbmFsIHBhcmEgZG9jdW1lbnRvc1xuICBET0NTX0RJUjogJ3VwbG9hZHMvZG9jdW1lbnRvcycsXG4gIFxuICAvLyBEaXJldMOzcmlvIHBhcmEgdGh1bWJuYWlsc1xuICBUSFVNQk5BSUxTX0RJUjogJ3VwbG9hZHMvdGh1bWJuYWlscycsXG4gIFxuICAvLyBUZW1wbyBsaW1pdGUgcGFyYSB1cGxvYWQgKGVtIHNlZ3VuZG9zKVxuICBVUExPQURfVElNRU9VVDogMzAwLFxuICBcbiAgLy8gTsO6bWVybyBtw6F4aW1vIGRlIHRlbnRhdGl2YXMgZGUgdXBsb2FkXG4gIE1BWF9VUExPQURfUkVUUklFUzogMyxcbn07XG5cbi8qKlxuICogRnVuw6fDtWVzIHV0aWxpdMOhcmlhc1xuICovXG5cbi8qKlxuICogT2J0w6ltIGEgY29uZmlndXJhw6fDo28gZGUgdW0gdGlwbyBNSU1FXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNaW1lVHlwZUNvbmZpZyhtaW1lVHlwZTogc3RyaW5nKTogTWltZVR5cGVDb25maWcgfCB1bmRlZmluZWQge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhNSU1FX1RZUEVfQ09ORklHUykuZmluZChjb25maWcgPT4gXG4gICAgY29uZmlnLm1pbWVUeXBlcy5pbmNsdWRlcyhtaW1lVHlwZSlcbiAgKTtcbn1cblxuLyoqXG4gKiBWZXJpZmljYSBzZSB1bSB0aXBvIE1JTUUgw6kgcGVybWl0aWRvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01pbWVUeXBlUGVybWl0aWRvKG1pbWVUeXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFRPRE9TX01JTUVfVFlQRVNfUEVSTUlUSURPUy5pbmNsdWRlcyhtaW1lVHlwZSk7XG59XG5cbi8qKlxuICogT2J0w6ltIGEgY2F0ZWdvcmlhIGRlIHVtIHRpcG8gTUlNRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2F0ZWdvcmlhTWltZVR5cGUobWltZVR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldE1pbWVUeXBlQ29uZmlnKG1pbWVUeXBlKTtcbiAgcmV0dXJuIGNvbmZpZz8uY2F0ZWdvcnkgfHwgJ0RFU0NPTkhFQ0lETyc7XG59XG5cbi8qKlxuICogT2J0w6ltIGFzIGV4dGVuc8O1ZXMgcGVybWl0aWRhcyBwYXJhIHVtIHRpcG8gTUlNRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXh0ZW5zb2VzUGFyYU1pbWVUeXBlKG1pbWVUeXBlOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBFWFRFTlNPRVNfUEVSTUlUSURBU1ttaW1lVHlwZV0gfHwgW107XG59XG5cbi8qKlxuICogVmVyaWZpY2Egc2UgdW0gYXJxdWl2byByZXF1ZXIgY3JpcHRvZ3JhZmlhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc0VuY3J5cHRpb24obWltZVR5cGU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBGdW5jaW9uYWxpZGFkZSBkZSBjcmlwdG9ncmFmaWEgbsOjbyBpbXBsZW1lbnRhZGEgYWluZGFcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFZlcmlmaWNhIHNlIHVtIGFycXVpdm8gcGVybWl0ZSB0aHVtYm5haWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbG93c1RodW1ibmFpbChtaW1lVHlwZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldE1pbWVUeXBlQ29uZmlnKG1pbWVUeXBlKTtcbiAgcmV0dXJuIGNvbmZpZz8uYWxsb3dUaHVtYm5haWwgfHwgZmFsc2U7XG59XG5cbi8qKlxuICogT2J0w6ltIG8gdGFtYW5obyBtw6F4aW1vIHBlcm1pdGlkbyBwYXJhIHVtIHRpcG8gTUlNRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWF4RmlsZVNpemUobWltZVR5cGU6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldE1pbWVUeXBlQ29uZmlnKG1pbWVUeXBlKTtcbiAgcmV0dXJuIGNvbmZpZz8ubWF4U2l6ZSB8fCBTRUNVUklUWV9DT05GSUcuTUFYX0ZJTEVfU0laRTtcbn0iXSwidmVyc2lvbiI6M30=