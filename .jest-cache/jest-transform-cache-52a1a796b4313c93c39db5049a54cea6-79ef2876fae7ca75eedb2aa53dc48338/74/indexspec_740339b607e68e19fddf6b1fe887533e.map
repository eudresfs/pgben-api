{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\shared\\request-context\\util\\index.spec.ts","mappings":";;AAEA,oFAAiF;AACjF,+CAGyB;AACzB,wBAAyC;AAEzC,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;IAC7C,MAAM,IAAI,GAAG,IAAI,6CAAqB,EAAE,CAAC;IACzC,MAAM,OAAO,GAAG;QACd,GAAG,EAAE,SAAS;QACd,EAAE,EAAE,QAAQ;QAEZ,IAAI;QACJ,MAAM,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC,kBAAkB,CAAC,CAAC,MAAM,EAAE,EAAE;YAC9C,QAAQ,MAAM,EAAE,CAAC;gBACf,KAAK,mCAAuB;oBAC1B,OAAO,KAAK,CAAC;gBACf,KAAK,sCAA0B;oBAC7B,OAAO,aAAa,CAAC;gBACvB;oBACE,MAAM;YACV,CAAC;QACH,CAAC,CAAC;KACmB,CAAC;IAExB,MAAM,cAAc,GAAG;QACrB,GAAG,EAAE,SAAS;QACd,EAAE,EAAE,aAAa;QACjB,SAAS,EAAE,KAAK;QAChB,IAAI;KACL,CAAC;IAEF,EAAE,CAAC,8BAA8B,EAAE,GAAG,EAAE;QACtC,MAAM,CAAC,IAAA,uBAAoB,EAAC,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;IAChE,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\shared\\request-context\\util\\index.spec.ts"],"sourcesContent":["import { Request } from 'express';\n\nimport { UserAccessTokenClaims } from '../../../auth/dtos/auth-token-output.dto';\nimport {\n  FORWARDED_FOR_TOKEN_HEADER,\n  REQUEST_ID_TOKEN_HEADER,\n} from '../../constants';\nimport { createRequestContext } from '.';\n\ndescribe('createRequestContext function', () => {\n  const user = new UserAccessTokenClaims();\n  const request = {\n    url: 'someUrl',\n    ip: 'someIP',\n\n    user,\n    header: jest.fn().mockImplementation((header) => {\n      switch (header) {\n        case REQUEST_ID_TOKEN_HEADER:\n          return '123';\n        case FORWARDED_FOR_TOKEN_HEADER:\n          return 'forwardedIP';\n        default:\n          break;\n      }\n    }),\n  } as unknown as Request;\n\n  const expectedOutput = {\n    url: 'someUrl',\n    ip: 'forwardedIP',\n    requestID: '123',\n    user,\n  };\n\n  it('should return RequestContext', () => {\n    expect(createRequestContext(request)).toEqual(expectedOutput);\n  });\n});\n"],"version":3}