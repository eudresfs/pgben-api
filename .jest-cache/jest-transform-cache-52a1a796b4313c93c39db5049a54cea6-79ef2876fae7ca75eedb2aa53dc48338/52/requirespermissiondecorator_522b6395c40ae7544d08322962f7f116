aeaec2f513dcb75df465deac312fb711
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequiresPermission = exports.PERMISSION_REQUIREMENTS_KEY = void 0;
const common_1 = require("@nestjs/common");
/**
 * Chave de metadados para requisitos de permissão.
 */
exports.PERMISSION_REQUIREMENTS_KEY = 'permission_requirements';
/**
 * Decorador para definir requisitos de permissão em controladores e métodos.
 *
 * Este decorador permite proteger endpoints com permissões granulares,
 * definindo quais permissões são necessárias para acessar o endpoint.
 *
 * @param requirements Requisitos de permissão
 * @returns Decorador de metadados
 *
 * @example
 * // Requer permissão global para listar cidadãos
 * @RequiresPermission({ permissionName: 'cidadao.listar' })
 *
 * @example
 * // Requer permissão para visualizar um cidadão específico na unidade
 * @RequiresPermission({
 *   permissionName: 'cidadao.visualizar',
 *   scopeType: TipoEscopo.UNIDADE, (GLOBAL, UNIDADE, PROPRIO)
 *   scopeIdExpression: 'params.unidadeId'
 * })
 */
const RequiresPermission = (...requirements) => (0, common_1.SetMetadata)(exports.PERMISSION_REQUIREMENTS_KEY, requirements);
exports.RequiresPermission = RequiresPermission;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGF1dGhcXGRlY29yYXRvcnNcXHJlcXVpcmVzLXBlcm1pc3Npb24uZGVjb3JhdG9yLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUE2QztBQTBCN0M7O0dBRUc7QUFDVSxRQUFBLDJCQUEyQixHQUFHLHlCQUF5QixDQUFDO0FBRXJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9CRztBQUNJLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLFlBQXFDLEVBQUUsRUFBRSxDQUM3RSxJQUFBLG9CQUFXLEVBQUMsbUNBQTJCLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFENUMsUUFBQSxrQkFBa0Isc0JBQzBCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxhdXRoXFxkZWNvcmF0b3JzXFxyZXF1aXJlcy1wZXJtaXNzaW9uLmRlY29yYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXRNZXRhZGF0YSB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFRpcG9Fc2NvcG8gfSBmcm9tICcuLi8uLi9lbnRpdGllcy91c2VyLXBlcm1pc3Npb24uZW50aXR5JztcblxuLyoqXG4gKiBJbnRlcmZhY2UgcGFyYSBkZWZpbmnDp8OjbyBkZSByZXF1aXNpdG9zIGRlIHBlcm1pc3PDo28uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGVybWlzc2lvblJlcXVpcmVtZW50IHtcbiAgLyoqXG4gICAqIE5vbWUgZGEgcGVybWlzc8OjbyBubyBmb3JtYXRvIGBtb2R1bG8ucmVjdXJzby5vcGVyYWNhb2BcbiAgICovXG4gIHBlcm1pc3Npb25OYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRpcG8gZGUgZXNjb3BvIChvcGNpb25hbCwgcGFkcsOjbyDDqSBHTE9CQUwpXG4gICAqL1xuICBzY29wZVR5cGU/OiBUaXBvRXNjb3BvO1xuXG4gIC8qKlxuICAgKiBFeHByZXNzw6NvIHBhcmEgb2J0ZXIgbyBJRCBkbyBlc2NvcG8gYSBwYXJ0aXIgZG9zIHBhcsOibWV0cm9zIGRhIHJlcXVpc2nDp8Ojb1xuICAgKiAob3BjaW9uYWwsIG5lY2Vzc8OhcmlvIGFwZW5hcyBwYXJhIHNjb3BlVHlwZSBVTklUKVxuICAgKlxuICAgKiBFeGVtcGxvOiAncGFyYW1zLnVuaWRhZGVJZCcgcGFyYSBvYnRlciBvIElEIGRhIHVuaWRhZGUgZG9zIHBhcsOibWV0cm9zIGRhIHJvdGFcbiAgICovXG4gIHNjb3BlSWRFeHByZXNzaW9uPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIENoYXZlIGRlIG1ldGFkYWRvcyBwYXJhIHJlcXVpc2l0b3MgZGUgcGVybWlzc8Ojby5cbiAqL1xuZXhwb3J0IGNvbnN0IFBFUk1JU1NJT05fUkVRVUlSRU1FTlRTX0tFWSA9ICdwZXJtaXNzaW9uX3JlcXVpcmVtZW50cyc7XG5cbi8qKlxuICogRGVjb3JhZG9yIHBhcmEgZGVmaW5pciByZXF1aXNpdG9zIGRlIHBlcm1pc3PDo28gZW0gY29udHJvbGFkb3JlcyBlIG3DqXRvZG9zLlxuICpcbiAqIEVzdGUgZGVjb3JhZG9yIHBlcm1pdGUgcHJvdGVnZXIgZW5kcG9pbnRzIGNvbSBwZXJtaXNzw7VlcyBncmFudWxhcmVzLFxuICogZGVmaW5pbmRvIHF1YWlzIHBlcm1pc3PDtWVzIHPDo28gbmVjZXNzw6FyaWFzIHBhcmEgYWNlc3NhciBvIGVuZHBvaW50LlxuICpcbiAqIEBwYXJhbSByZXF1aXJlbWVudHMgUmVxdWlzaXRvcyBkZSBwZXJtaXNzw6NvXG4gKiBAcmV0dXJucyBEZWNvcmFkb3IgZGUgbWV0YWRhZG9zXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFJlcXVlciBwZXJtaXNzw6NvIGdsb2JhbCBwYXJhIGxpc3RhciBjaWRhZMOjb3NcbiAqIEBSZXF1aXJlc1Blcm1pc3Npb24oeyBwZXJtaXNzaW9uTmFtZTogJ2NpZGFkYW8ubGlzdGFyJyB9KVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXF1ZXIgcGVybWlzc8OjbyBwYXJhIHZpc3VhbGl6YXIgdW0gY2lkYWTDo28gZXNwZWPDrWZpY28gbmEgdW5pZGFkZVxuICogQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gKiAgIHBlcm1pc3Npb25OYW1lOiAnY2lkYWRhby52aXN1YWxpemFyJyxcbiAqICAgc2NvcGVUeXBlOiBUaXBvRXNjb3BvLlVOSURBREUsIChHTE9CQUwsIFVOSURBREUsIFBST1BSSU8pXG4gKiAgIHNjb3BlSWRFeHByZXNzaW9uOiAncGFyYW1zLnVuaWRhZGVJZCdcbiAqIH0pXG4gKi9cbmV4cG9ydCBjb25zdCBSZXF1aXJlc1Blcm1pc3Npb24gPSAoLi4ucmVxdWlyZW1lbnRzOiBQZXJtaXNzaW9uUmVxdWlyZW1lbnRbXSkgPT5cbiAgU2V0TWV0YWRhdGEoUEVSTUlTU0lPTl9SRVFVSVJFTUVOVFNfS0VZLCByZXF1aXJlbWVudHMpO1xuIl0sInZlcnNpb24iOjN9