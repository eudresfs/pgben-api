213faf01d06144e8cbfc0df0d3cea488
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ResilienceModule = void 0;
const common_1 = require("@nestjs/common");
const config_1 = require("@nestjs/config");
const schedule_1 = require("@nestjs/schedule");
const resilient_auditoria_service_1 = require("../services/resilient-auditoria.service");
const hybrid_cache_service_1 = require("../services/hybrid-cache.service");
const health_check_service_1 = require("../services/health-check.service");
const cache_module_1 = require("../cache/cache.module");
/**
 * Módulo de Resiliência
 *
 * Centraliza todos os serviços relacionados à resiliência do sistema:
 * - Cache híbrido com múltiplas camadas
 * - Auditoria resiliente com fallbacks
 * - Health checks e monitoramento
 * - Configurações de resiliência
 *
 * Este módulo é global para estar disponível em toda a aplicação
 */
let ResilienceModule = class ResilienceModule {
};
exports.ResilienceModule = ResilienceModule;
exports.ResilienceModule = ResilienceModule = __decorate([
    (0, common_1.Global)(),
    (0, common_1.Module)({
        imports: [
            config_1.ConfigModule,
            schedule_1.ScheduleModule.forRoot(), // Para jobs de recuperação e cache warming
            cache_module_1.CacheModule,
        ],
        providers: [
            health_check_service_1.HealthCheckService,
            hybrid_cache_service_1.HybridCacheService,
            resilient_auditoria_service_1.ResilientAuditoriaService,
            {
                provide: 'RESILIENCE_CONFIG',
                useFactory: () => ({
                    // Configurações de Cache
                    cache: {
                        l1MaxSize: parseInt(process.env.CACHE_L1_MAX_SIZE || '1000'),
                        defaultTtl: parseInt(process.env.CACHE_DEFAULT_TTL || '300000'), // 5 minutos
                        enableL2: process.env.CACHE_ENABLE_L2 !== 'false',
                        enableWarming: process.env.CACHE_ENABLE_WARMING !== 'false',
                        warmingInterval: parseInt(process.env.CACHE_WARMING_INTERVAL || '60000'), // 1 minuto
                    },
                    // Configurações de Auditoria
                    auditoria: {
                        enableSyncFallback: process.env.AUDITORIA_ENABLE_SYNC_FALLBACK !== 'false',
                        enableFileBackup: process.env.AUDITORIA_ENABLE_FILE_BACKUP !== 'false',
                        backupPath: process.env.AUDITORIA_BACKUP_PATH || './logs/audit-backup',
                        maxRetries: parseInt(process.env.AUDITORIA_MAX_RETRIES || '3'),
                        retryDelay: parseInt(process.env.AUDITORIA_RETRY_DELAY || '1000'),
                        recoveryInterval: process.env.AUDITORIA_RECOVERY_INTERVAL || '0 */5 * * * *', // A cada 5 minutos
                    },
                    // Configurações de Health Check
                    healthCheck: {
                        redisTimeout: parseInt(process.env.HEALTH_REDIS_TIMEOUT || '5000'),
                        dbTimeout: parseInt(process.env.HEALTH_DB_TIMEOUT || '10000'),
                        checkInterval: parseInt(process.env.HEALTH_CHECK_INTERVAL || '30000'), // 30 segundos
                        enableDetailedChecks: process.env.HEALTH_ENABLE_DETAILED_CHECKS !== 'false',
                    },
                    // Configurações de Circuit Breaker
                    circuitBreaker: {
                        failureThreshold: parseInt(process.env.CIRCUIT_BREAKER_FAILURE_THRESHOLD || '5'),
                        recoveryTimeout: parseInt(process.env.CIRCUIT_BREAKER_RECOVERY_TIMEOUT || '60000'), // 1 minuto
                        monitoringPeriod: parseInt(process.env.CIRCUIT_BREAKER_MONITORING_PERIOD || '10000'), // 10 segundos
                    },
                    // Configurações de Monitoramento
                    monitoring: {
                        enableMetrics: process.env.MONITORING_ENABLE_METRICS !== 'false',
                        metricsInterval: parseInt(process.env.MONITORING_METRICS_INTERVAL || '60000'), // 1 minuto
                        enableAlerts: process.env.MONITORING_ENABLE_ALERTS !== 'false',
                        alertThresholds: {
                            cacheHitRate: parseFloat(process.env.ALERT_CACHE_HIT_RATE_THRESHOLD || '0.8'), // 80%
                            auditoriaFailureRate: parseFloat(process.env.ALERT_AUDITORIA_FAILURE_RATE_THRESHOLD || '0.1'), // 10%
                            redisAvailability: parseFloat(process.env.ALERT_REDIS_AVAILABILITY_THRESHOLD || '0.95'), // 95%
                        },
                    },
                }),
            },
        ],
        exports: [
            health_check_service_1.HealthCheckService,
            hybrid_cache_service_1.HybridCacheService,
            resilient_auditoria_service_1.ResilientAuditoriaService,
            'RESILIENCE_CONFIG',
        ],
    })
], ResilienceModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcbW9kdWxlc1xccmVzaWxpZW5jZS5tb2R1bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkNBQTREO0FBQzVELDJDQUE4QztBQUM5QywrQ0FBa0Q7QUFDbEQseUZBQW9GO0FBQ3BGLDJFQUFzRTtBQUN0RSwyRUFBc0U7QUFDdEUsd0RBQW9EO0FBQ3BEOzs7Ozs7Ozs7O0dBVUc7QUEyRkksSUFBTSxnQkFBZ0IsR0FBdEIsTUFBTSxnQkFBZ0I7Q0FBRyxDQUFBO0FBQW5CLDRDQUFnQjsyQkFBaEIsZ0JBQWdCO0lBMUY1QixJQUFBLGVBQU0sR0FBRTtJQUNSLElBQUEsZUFBTSxFQUFDO1FBQ04sT0FBTyxFQUFFO1lBQ1AscUJBQVk7WUFDWix5QkFBYyxDQUFDLE9BQU8sRUFBRSxFQUFFLDJDQUEyQztZQUNyRSwwQkFBVztTQUNaO1FBQ0QsU0FBUyxFQUFFO1lBQ1QseUNBQWtCO1lBQ2xCLHlDQUFrQjtZQUNsQix1REFBeUI7WUFDekI7Z0JBQ0UsT0FBTyxFQUFFLG1CQUFtQjtnQkFDNUIsVUFBVSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7b0JBQ2pCLHlCQUF5QjtvQkFDekIsS0FBSyxFQUFFO3dCQUNMLFNBQVMsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsSUFBSSxNQUFNLENBQUM7d0JBQzVELFVBQVUsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsSUFBSSxRQUFRLENBQUMsRUFBRSxZQUFZO3dCQUM3RSxRQUFRLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxlQUFlLEtBQUssT0FBTzt3QkFDakQsYUFBYSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEtBQUssT0FBTzt3QkFDM0QsZUFBZSxFQUFFLFFBQVEsQ0FDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsSUFBSSxPQUFPLENBQzlDLEVBQUUsV0FBVztxQkFDZjtvQkFFRCw2QkFBNkI7b0JBQzdCLFNBQVMsRUFBRTt3QkFDVCxrQkFBa0IsRUFDaEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsS0FBSyxPQUFPO3dCQUN4RCxnQkFBZ0IsRUFDZCxPQUFPLENBQUMsR0FBRyxDQUFDLDRCQUE0QixLQUFLLE9BQU87d0JBQ3RELFVBQVUsRUFDUixPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixJQUFJLHFCQUFxQjt3QkFDNUQsVUFBVSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixJQUFJLEdBQUcsQ0FBQzt3QkFDOUQsVUFBVSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixJQUFJLE1BQU0sQ0FBQzt3QkFDakUsZ0JBQWdCLEVBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsSUFBSSxlQUFlLEVBQUUsbUJBQW1CO3FCQUNsRjtvQkFFRCxnQ0FBZ0M7b0JBQ2hDLFdBQVcsRUFBRTt3QkFDWCxZQUFZLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLElBQUksTUFBTSxDQUFDO3dCQUNsRSxTQUFTLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLElBQUksT0FBTyxDQUFDO3dCQUM3RCxhQUFhLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMscUJBQXFCLElBQUksT0FBTyxDQUFDLEVBQUUsY0FBYzt3QkFDckYsb0JBQW9CLEVBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEtBQUssT0FBTztxQkFDeEQ7b0JBRUQsbUNBQW1DO29CQUNuQyxjQUFjLEVBQUU7d0JBQ2QsZ0JBQWdCLEVBQUUsUUFBUSxDQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLGlDQUFpQyxJQUFJLEdBQUcsQ0FDckQ7d0JBQ0QsZUFBZSxFQUFFLFFBQVEsQ0FDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsSUFBSSxPQUFPLENBQ3hELEVBQUUsV0FBVzt3QkFDZCxnQkFBZ0IsRUFBRSxRQUFRLENBQ3hCLE9BQU8sQ0FBQyxHQUFHLENBQUMsaUNBQWlDLElBQUksT0FBTyxDQUN6RCxFQUFFLGNBQWM7cUJBQ2xCO29CQUVELGlDQUFpQztvQkFDakMsVUFBVSxFQUFFO3dCQUNWLGFBQWEsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLHlCQUF5QixLQUFLLE9BQU87d0JBQ2hFLGVBQWUsRUFBRSxRQUFRLENBQ3ZCLE9BQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLElBQUksT0FBTyxDQUNuRCxFQUFFLFdBQVc7d0JBQ2QsWUFBWSxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLEtBQUssT0FBTzt3QkFDOUQsZUFBZSxFQUFFOzRCQUNmLFlBQVksRUFBRSxVQUFVLENBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsOEJBQThCLElBQUksS0FBSyxDQUNwRCxFQUFFLE1BQU07NEJBQ1Qsb0JBQW9CLEVBQUUsVUFBVSxDQUM5QixPQUFPLENBQUMsR0FBRyxDQUFDLHNDQUFzQyxJQUFJLEtBQUssQ0FDNUQsRUFBRSxNQUFNOzRCQUNULGlCQUFpQixFQUFFLFVBQVUsQ0FDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsSUFBSSxNQUFNLENBQ3pELEVBQUUsTUFBTTt5QkFDVjtxQkFDRjtpQkFDRixDQUFDO2FBQ0g7U0FDRjtRQUNELE9BQU8sRUFBRTtZQUNQLHlDQUFrQjtZQUNsQix5Q0FBa0I7WUFDbEIsdURBQXlCO1lBQ3pCLG1CQUFtQjtTQUNwQjtLQUNGLENBQUM7R0FDVyxnQkFBZ0IsQ0FBRyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcc2hhcmVkXFxtb2R1bGVzXFxyZXNpbGllbmNlLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHbG9iYWwsIE1vZHVsZSwgZm9yd2FyZFJlZiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IENvbmZpZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJztcbmltcG9ydCB7IFNjaGVkdWxlTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9zY2hlZHVsZSc7XG5pbXBvcnQgeyBSZXNpbGllbnRBdWRpdG9yaWFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvcmVzaWxpZW50LWF1ZGl0b3JpYS5zZXJ2aWNlJztcbmltcG9ydCB7IEh5YnJpZENhY2hlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2h5YnJpZC1jYWNoZS5zZXJ2aWNlJztcbmltcG9ydCB7IEhlYWx0aENoZWNrU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2hlYWx0aC1jaGVjay5zZXJ2aWNlJztcbmltcG9ydCB7IENhY2hlTW9kdWxlIH0gZnJvbSAnLi4vY2FjaGUvY2FjaGUubW9kdWxlJztcbi8qKlxuICogTcOzZHVsbyBkZSBSZXNpbGnDqm5jaWFcbiAqXG4gKiBDZW50cmFsaXphIHRvZG9zIG9zIHNlcnZpw6dvcyByZWxhY2lvbmFkb3Mgw6AgcmVzaWxpw6puY2lhIGRvIHNpc3RlbWE6XG4gKiAtIENhY2hlIGjDrWJyaWRvIGNvbSBtw7psdGlwbGFzIGNhbWFkYXNcbiAqIC0gQXVkaXRvcmlhIHJlc2lsaWVudGUgY29tIGZhbGxiYWNrc1xuICogLSBIZWFsdGggY2hlY2tzIGUgbW9uaXRvcmFtZW50b1xuICogLSBDb25maWd1cmHDp8O1ZXMgZGUgcmVzaWxpw6puY2lhXG4gKlxuICogRXN0ZSBtw7NkdWxvIMOpIGdsb2JhbCBwYXJhIGVzdGFyIGRpc3BvbsOtdmVsIGVtIHRvZGEgYSBhcGxpY2HDp8Ojb1xuICovXG5AR2xvYmFsKClcbkBNb2R1bGUoe1xuICBpbXBvcnRzOiBbXG4gICAgQ29uZmlnTW9kdWxlLFxuICAgIFNjaGVkdWxlTW9kdWxlLmZvclJvb3QoKSwgLy8gUGFyYSBqb2JzIGRlIHJlY3VwZXJhw6fDo28gZSBjYWNoZSB3YXJtaW5nXG4gICAgQ2FjaGVNb2R1bGUsXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIEhlYWx0aENoZWNrU2VydmljZSxcbiAgICBIeWJyaWRDYWNoZVNlcnZpY2UsXG4gICAgUmVzaWxpZW50QXVkaXRvcmlhU2VydmljZSxcbiAgICB7XG4gICAgICBwcm92aWRlOiAnUkVTSUxJRU5DRV9DT05GSUcnLFxuICAgICAgdXNlRmFjdG9yeTogKCkgPT4gKHtcbiAgICAgICAgLy8gQ29uZmlndXJhw6fDtWVzIGRlIENhY2hlXG4gICAgICAgIGNhY2hlOiB7XG4gICAgICAgICAgbDFNYXhTaXplOiBwYXJzZUludChwcm9jZXNzLmVudi5DQUNIRV9MMV9NQVhfU0laRSB8fCAnMTAwMCcpLFxuICAgICAgICAgIGRlZmF1bHRUdGw6IHBhcnNlSW50KHByb2Nlc3MuZW52LkNBQ0hFX0RFRkFVTFRfVFRMIHx8ICczMDAwMDAnKSwgLy8gNSBtaW51dG9zXG4gICAgICAgICAgZW5hYmxlTDI6IHByb2Nlc3MuZW52LkNBQ0hFX0VOQUJMRV9MMiAhPT0gJ2ZhbHNlJyxcbiAgICAgICAgICBlbmFibGVXYXJtaW5nOiBwcm9jZXNzLmVudi5DQUNIRV9FTkFCTEVfV0FSTUlORyAhPT0gJ2ZhbHNlJyxcbiAgICAgICAgICB3YXJtaW5nSW50ZXJ2YWw6IHBhcnNlSW50KFxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQ0FDSEVfV0FSTUlOR19JTlRFUlZBTCB8fCAnNjAwMDAnLFxuICAgICAgICAgICksIC8vIDEgbWludXRvXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ29uZmlndXJhw6fDtWVzIGRlIEF1ZGl0b3JpYVxuICAgICAgICBhdWRpdG9yaWE6IHtcbiAgICAgICAgICBlbmFibGVTeW5jRmFsbGJhY2s6XG4gICAgICAgICAgICBwcm9jZXNzLmVudi5BVURJVE9SSUFfRU5BQkxFX1NZTkNfRkFMTEJBQ0sgIT09ICdmYWxzZScsXG4gICAgICAgICAgZW5hYmxlRmlsZUJhY2t1cDpcbiAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVRElUT1JJQV9FTkFCTEVfRklMRV9CQUNLVVAgIT09ICdmYWxzZScsXG4gICAgICAgICAgYmFja3VwUGF0aDpcbiAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVRElUT1JJQV9CQUNLVVBfUEFUSCB8fCAnLi9sb2dzL2F1ZGl0LWJhY2t1cCcsXG4gICAgICAgICAgbWF4UmV0cmllczogcGFyc2VJbnQocHJvY2Vzcy5lbnYuQVVESVRPUklBX01BWF9SRVRSSUVTIHx8ICczJyksXG4gICAgICAgICAgcmV0cnlEZWxheTogcGFyc2VJbnQocHJvY2Vzcy5lbnYuQVVESVRPUklBX1JFVFJZX0RFTEFZIHx8ICcxMDAwJyksXG4gICAgICAgICAgcmVjb3ZlcnlJbnRlcnZhbDpcbiAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVRElUT1JJQV9SRUNPVkVSWV9JTlRFUlZBTCB8fCAnMCAqLzUgKiAqICogKicsIC8vIEEgY2FkYSA1IG1pbnV0b3NcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBDb25maWd1cmHDp8O1ZXMgZGUgSGVhbHRoIENoZWNrXG4gICAgICAgIGhlYWx0aENoZWNrOiB7XG4gICAgICAgICAgcmVkaXNUaW1lb3V0OiBwYXJzZUludChwcm9jZXNzLmVudi5IRUFMVEhfUkVESVNfVElNRU9VVCB8fCAnNTAwMCcpLFxuICAgICAgICAgIGRiVGltZW91dDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuSEVBTFRIX0RCX1RJTUVPVVQgfHwgJzEwMDAwJyksXG4gICAgICAgICAgY2hlY2tJbnRlcnZhbDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuSEVBTFRIX0NIRUNLX0lOVEVSVkFMIHx8ICczMDAwMCcpLCAvLyAzMCBzZWd1bmRvc1xuICAgICAgICAgIGVuYWJsZURldGFpbGVkQ2hlY2tzOlxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSEVBTFRIX0VOQUJMRV9ERVRBSUxFRF9DSEVDS1MgIT09ICdmYWxzZScsXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ29uZmlndXJhw6fDtWVzIGRlIENpcmN1aXQgQnJlYWtlclxuICAgICAgICBjaXJjdWl0QnJlYWtlcjoge1xuICAgICAgICAgIGZhaWx1cmVUaHJlc2hvbGQ6IHBhcnNlSW50KFxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQ0lSQ1VJVF9CUkVBS0VSX0ZBSUxVUkVfVEhSRVNIT0xEIHx8ICc1JyxcbiAgICAgICAgICApLFxuICAgICAgICAgIHJlY292ZXJ5VGltZW91dDogcGFyc2VJbnQoXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5DSVJDVUlUX0JSRUFLRVJfUkVDT1ZFUllfVElNRU9VVCB8fCAnNjAwMDAnLFxuICAgICAgICAgICksIC8vIDEgbWludXRvXG4gICAgICAgICAgbW9uaXRvcmluZ1BlcmlvZDogcGFyc2VJbnQoXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5DSVJDVUlUX0JSRUFLRVJfTU9OSVRPUklOR19QRVJJT0QgfHwgJzEwMDAwJyxcbiAgICAgICAgICApLCAvLyAxMCBzZWd1bmRvc1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIENvbmZpZ3VyYcOnw7VlcyBkZSBNb25pdG9yYW1lbnRvXG4gICAgICAgIG1vbml0b3Jpbmc6IHtcbiAgICAgICAgICBlbmFibGVNZXRyaWNzOiBwcm9jZXNzLmVudi5NT05JVE9SSU5HX0VOQUJMRV9NRVRSSUNTICE9PSAnZmFsc2UnLFxuICAgICAgICAgIG1ldHJpY3NJbnRlcnZhbDogcGFyc2VJbnQoXG4gICAgICAgICAgICBwcm9jZXNzLmVudi5NT05JVE9SSU5HX01FVFJJQ1NfSU5URVJWQUwgfHwgJzYwMDAwJyxcbiAgICAgICAgICApLCAvLyAxIG1pbnV0b1xuICAgICAgICAgIGVuYWJsZUFsZXJ0czogcHJvY2Vzcy5lbnYuTU9OSVRPUklOR19FTkFCTEVfQUxFUlRTICE9PSAnZmFsc2UnLFxuICAgICAgICAgIGFsZXJ0VGhyZXNob2xkczoge1xuICAgICAgICAgICAgY2FjaGVIaXRSYXRlOiBwYXJzZUZsb2F0KFxuICAgICAgICAgICAgICBwcm9jZXNzLmVudi5BTEVSVF9DQUNIRV9ISVRfUkFURV9USFJFU0hPTEQgfHwgJzAuOCcsXG4gICAgICAgICAgICApLCAvLyA4MCVcbiAgICAgICAgICAgIGF1ZGl0b3JpYUZhaWx1cmVSYXRlOiBwYXJzZUZsb2F0KFxuICAgICAgICAgICAgICBwcm9jZXNzLmVudi5BTEVSVF9BVURJVE9SSUFfRkFJTFVSRV9SQVRFX1RIUkVTSE9MRCB8fCAnMC4xJyxcbiAgICAgICAgICAgICksIC8vIDEwJVxuICAgICAgICAgICAgcmVkaXNBdmFpbGFiaWxpdHk6IHBhcnNlRmxvYXQoXG4gICAgICAgICAgICAgIHByb2Nlc3MuZW52LkFMRVJUX1JFRElTX0FWQUlMQUJJTElUWV9USFJFU0hPTEQgfHwgJzAuOTUnLFxuICAgICAgICAgICAgKSwgLy8gOTUlXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0sXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBIZWFsdGhDaGVja1NlcnZpY2UsXG4gICAgSHlicmlkQ2FjaGVTZXJ2aWNlLFxuICAgIFJlc2lsaWVudEF1ZGl0b3JpYVNlcnZpY2UsXG4gICAgJ1JFU0lMSUVOQ0VfQ09ORklHJyxcbiAgXSxcbn0pXG5leHBvcnQgY2xhc3MgUmVzaWxpZW5jZU1vZHVsZSB7fVxuIl0sInZlcnNpb24iOjN9