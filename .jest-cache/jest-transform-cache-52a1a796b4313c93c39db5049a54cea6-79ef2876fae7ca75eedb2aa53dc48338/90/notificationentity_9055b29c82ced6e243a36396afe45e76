07c72cc22918fb8f7f9722dc09690f13
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;
Object.defineProperty(exports, "__esModule", { value: true });
exports.NotificacaoSistema = exports.StatusNotificacaoProcessamento = exports.TipoNotificacao = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const notification_template_entity_1 = require("./notification-template.entity");
/**
 * Enum para os tipos de notificação
 */
var TipoNotificacao;
(function (TipoNotificacao) {
    TipoNotificacao["SISTEMA"] = "sistema";
    TipoNotificacao["SOLICITACAO"] = "solicitacao";
    TipoNotificacao["PENDENCIA"] = "pendencia";
    TipoNotificacao["APROVACAO"] = "aprovacao";
    TipoNotificacao["LIBERACAO"] = "liberacao";
    TipoNotificacao["ALERTA"] = "alerta";
})(TipoNotificacao || (exports.TipoNotificacao = TipoNotificacao = {}));
/**
 * Enum para os possíveis estados de uma notificação do sistema
 */
var StatusNotificacaoProcessamento;
(function (StatusNotificacaoProcessamento) {
    StatusNotificacaoProcessamento["PENDENTE"] = "pendente";
    StatusNotificacaoProcessamento["EM_PROCESSAMENTO"] = "em_processamento";
    StatusNotificacaoProcessamento["ENVIADA"] = "enviada";
    StatusNotificacaoProcessamento["FALHA"] = "falha";
    StatusNotificacaoProcessamento["CANCELADA"] = "cancelada";
    StatusNotificacaoProcessamento["NAO_LIDA"] = "nao_lida";
    StatusNotificacaoProcessamento["LIDA"] = "lida";
    StatusNotificacaoProcessamento["ARQUIVADA"] = "arquivada";
})(StatusNotificacaoProcessamento || (exports.StatusNotificacaoProcessamento = StatusNotificacaoProcessamento = {}));
/**
 * Entidade que representa uma notificação para um destinatário específico
 */
let NotificacaoSistema = class NotificacaoSistema {
    id;
    destinatario_id;
    template;
    template_id;
    dados_contexto;
    status;
    tentativas_entrega;
    dados_envio;
    ultima_tentativa;
    tentativas_envio;
    proxima_tentativa;
    numero_tentativas;
    data_entrega;
    data_envio;
    data_agendamento;
    data_leitura;
    created_at;
    updated_at;
};
exports.NotificacaoSistema = NotificacaoSistema;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], NotificacaoSistema.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'destinatario_id' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do destinatário é obrigatório' }),
    (0, class_validator_1.IsUUID)('4', { message: 'ID do destinatário inválido' }),
    __metadata("design:type", String)
], NotificacaoSistema.prototype, "destinatario_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => notification_template_entity_1.NotificationTemplate),
    (0, typeorm_1.JoinColumn)({ name: 'template_id' }),
    __metadata("design:type", typeof (_a = typeof notification_template_entity_1.NotificationTemplate !== "undefined" && notification_template_entity_1.NotificationTemplate) === "function" ? _a : Object)
], NotificacaoSistema.prototype, "template", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'template_id' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do template é obrigatório' }),
    (0, class_validator_1.IsUUID)('4', { message: 'ID do template inválido' }),
    __metadata("design:type", String)
], NotificacaoSistema.prototype, "template_id", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', name: 'dados_contexto' }),
    __metadata("design:type", typeof (_b = typeof Record !== "undefined" && Record) === "function" ? _b : Object)
], NotificacaoSistema.prototype, "dados_contexto", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: StatusNotificacaoProcessamento,
        enumName: 'status_notificacao_processamento',
        default: StatusNotificacaoProcessamento.PENDENTE,
    }),
    (0, class_validator_1.IsEnum)(StatusNotificacaoProcessamento, { message: 'Status inválido' }),
    __metadata("design:type", String)
], NotificacaoSistema.prototype, "status", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', name: 'tentativas_entrega', nullable: true }),
    __metadata("design:type", Array)
], NotificacaoSistema.prototype, "tentativas_entrega", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', name: 'dados_envio', nullable: true }),
    __metadata("design:type", typeof (_c = typeof Record !== "undefined" && Record) === "function" ? _c : Object)
], NotificacaoSistema.prototype, "dados_envio", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'ultima_tentativa', nullable: true }),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], NotificacaoSistema.prototype, "ultima_tentativa", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'tentativas_envio', default: 0 }),
    (0, class_validator_1.IsNumber)({}, { message: 'Tentativas de envio deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Tentativas de envio não pode ser negativo' }),
    __metadata("design:type", Number)
], NotificacaoSistema.prototype, "tentativas_envio", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'proxima_tentativa', nullable: true }),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], NotificacaoSistema.prototype, "proxima_tentativa", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'numero_tentativas', default: 0 }),
    (0, class_validator_1.IsNumber)({}, { message: 'Número de tentativas deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Número de tentativas não pode ser negativo' }),
    __metadata("design:type", Number)
], NotificacaoSistema.prototype, "numero_tentativas", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'data_entrega', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], NotificacaoSistema.prototype, "data_entrega", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'data_envio', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_g = typeof Date !== "undefined" && Date) === "function" ? _g : Object)
], NotificacaoSistema.prototype, "data_envio", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'data_agendamento', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_h = typeof Date !== "undefined" && Date) === "function" ? _h : Object)
], NotificacaoSistema.prototype, "data_agendamento", void 0);
__decorate([
    (0, typeorm_1.Column)({ name: 'data_leitura', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", typeof (_j = typeof Date !== "undefined" && Date) === "function" ? _j : Object)
], NotificacaoSistema.prototype, "data_leitura", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)({ name: 'created_at' }),
    __metadata("design:type", typeof (_k = typeof Date !== "undefined" && Date) === "function" ? _k : Object)
], NotificacaoSistema.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)({ name: 'updated_at' }),
    __metadata("design:type", typeof (_l = typeof Date !== "undefined" && Date) === "function" ? _l : Object)
], NotificacaoSistema.prototype, "updated_at", void 0);
exports.NotificacaoSistema = NotificacaoSistema = __decorate([
    (0, typeorm_1.Entity)('notificacoes_sistema')
    // Nome da classe alterado para evitar conflitos com a entidade Notificacao
    ,
    (0, typeorm_1.Index)(['destinatario_id', 'created_at']),
    (0, typeorm_1.Index)(['status', 'created_at'])
], NotificacaoSistema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxub3RpZmljYXRpb24uZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FTaUI7QUFDakIscURBQXdGO0FBQ3hGLGlGQUFzRTtBQUV0RTs7R0FFRztBQUNILElBQVksZUFPWDtBQVBELFdBQVksZUFBZTtJQUN6QixzQ0FBbUIsQ0FBQTtJQUNuQiw4Q0FBMkIsQ0FBQTtJQUMzQiwwQ0FBdUIsQ0FBQTtJQUN2QiwwQ0FBdUIsQ0FBQTtJQUN2QiwwQ0FBdUIsQ0FBQTtJQUN2QixvQ0FBaUIsQ0FBQTtBQUNuQixDQUFDLEVBUFcsZUFBZSwrQkFBZixlQUFlLFFBTzFCO0FBRUQ7O0dBRUc7QUFDSCxJQUFZLDhCQVNYO0FBVEQsV0FBWSw4QkFBOEI7SUFDeEMsdURBQXFCLENBQUE7SUFDckIsdUVBQXFDLENBQUE7SUFDckMscURBQW1CLENBQUE7SUFDbkIsaURBQWUsQ0FBQTtJQUNmLHlEQUF1QixDQUFBO0lBQ3ZCLHVEQUFxQixDQUFBO0lBQ3JCLCtDQUFhLENBQUE7SUFDYix5REFBdUIsQ0FBQTtBQUN6QixDQUFDLEVBVFcsOEJBQThCLDhDQUE5Qiw4QkFBOEIsUUFTekM7QUFhRDs7R0FFRztBQUtJLElBQU0sa0JBQWtCLEdBQXhCLE1BQU0sa0JBQWtCO0lBRTdCLEVBQUUsQ0FBUztJQUtYLGVBQWUsQ0FBUztJQUl4QixRQUFRLENBQXVCO0lBSy9CLFdBQVcsQ0FBUztJQUdwQixjQUFjLENBQXNCO0lBU3BDLE1BQU0sQ0FBaUM7SUFHdkMsa0JBQWtCLENBQXFCO0lBR3ZDLFdBQVcsQ0FBc0I7SUFHakMsZ0JBQWdCLENBQU87SUFLdkIsZ0JBQWdCLENBQVM7SUFHekIsaUJBQWlCLENBQU87SUFLeEIsaUJBQWlCLENBQVM7SUFJMUIsWUFBWSxDQUFPO0lBSW5CLFVBQVUsQ0FBTztJQUlqQixnQkFBZ0IsQ0FBTztJQUl2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c291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcZW50aXRpZXNcXG5vdGlmaWNhdGlvbi5lbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW50aXR5LFxuICBDb2x1bW4sXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENyZWF0ZURhdGVDb2x1bW4sXG4gIFVwZGF0ZURhdGVDb2x1bW4sXG4gIE1hbnlUb09uZSxcbiAgSm9pbkNvbHVtbixcbiAgSW5kZXgsXG59IGZyb20gJ3R5cGVvcm0nO1xuaW1wb3J0IHsgSXNOb3RFbXB0eSwgSXNVVUlELCBJc09wdGlvbmFsLCBJc0VudW0sIElzTnVtYmVyLCBNaW4gfSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uVGVtcGxhdGUgfSBmcm9tICcuL25vdGlmaWNhdGlvbi10ZW1wbGF0ZS5lbnRpdHknO1xuXG4vKipcbiAqIEVudW0gcGFyYSBvcyB0aXBvcyBkZSBub3RpZmljYcOnw6NvXG4gKi9cbmV4cG9ydCBlbnVtIFRpcG9Ob3RpZmljYWNhbyB7XG4gIFNJU1RFTUEgPSAnc2lzdGVtYScsXG4gIFNPTElDSVRBQ0FPID0gJ3NvbGljaXRhY2FvJyxcbiAgUEVOREVOQ0lBID0gJ3BlbmRlbmNpYScsXG4gIEFQUk9WQUNBTyA9ICdhcHJvdmFjYW8nLFxuICBMSUJFUkFDQU8gPSAnbGliZXJhY2FvJyxcbiAgQUxFUlRBID0gJ2FsZXJ0YScsXG59XG5cbi8qKlxuICogRW51bSBwYXJhIG9zIHBvc3PDrXZlaXMgZXN0YWRvcyBkZSB1bWEgbm90aWZpY2HDp8OjbyBkbyBzaXN0ZW1hXG4gKi9cbmV4cG9ydCBlbnVtIFN0YXR1c05vdGlmaWNhY2FvUHJvY2Vzc2FtZW50byB7XG4gIFBFTkRFTlRFID0gJ3BlbmRlbnRlJyxcbiAgRU1fUFJPQ0VTU0FNRU5UTyA9ICdlbV9wcm9jZXNzYW1lbnRvJyxcbiAgRU5WSUFEQSA9ICdlbnZpYWRhJyxcbiAgRkFMSEEgPSAnZmFsaGEnLFxuICBDQU5DRUxBREEgPSAnY2FuY2VsYWRhJyxcbiAgTkFPX0xJREEgPSAnbmFvX2xpZGEnLFxuICBMSURBID0gJ2xpZGEnLFxuICBBUlFVSVZBREEgPSAnYXJxdWl2YWRhJyxcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgcGFyYSByZWdpc3RyYXIgdGVudGF0aXZhcyBkZSBlbnRyZWdhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGVudGF0aXZhRW50cmVnYSB7XG4gIGRhdGFfdGVudGF0aXZhOiBEYXRlO1xuICBjYW5hbDogc3RyaW5nO1xuICBzdWNlc3NvOiBib29sZWFuO1xuICBtZW5zYWdlbV9lcnJvPzogc3RyaW5nO1xuICBkYWRvc19yZXNwb3N0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8qKlxuICogRW50aWRhZGUgcXVlIHJlcHJlc2VudGEgdW1hIG5vdGlmaWNhw6fDo28gcGFyYSB1bSBkZXN0aW5hdMOhcmlvIGVzcGVjw61maWNvXG4gKi9cbkBFbnRpdHkoJ25vdGlmaWNhY29lc19zaXN0ZW1hJylcbi8vIE5vbWUgZGEgY2xhc3NlIGFsdGVyYWRvIHBhcmEgZXZpdGFyIGNvbmZsaXRvcyBjb20gYSBlbnRpZGFkZSBOb3RpZmljYWNhb1xuQEluZGV4KFsnZGVzdGluYXRhcmlvX2lkJywgJ2NyZWF0ZWRfYXQnXSlcbkBJbmRleChbJ3N0YXR1cycsICdjcmVhdGVkX2F0J10pXG5leHBvcnQgY2xhc3MgTm90aWZpY2FjYW9TaXN0ZW1hIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAnZGVzdGluYXRhcmlvX2lkJyB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdJRCBkbyBkZXN0aW5hdMOhcmlvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgQElzVVVJRCgnNCcsIHsgbWVzc2FnZTogJ0lEIGRvIGRlc3RpbmF0w6FyaW8gaW52w6FsaWRvJyB9KVxuICBkZXN0aW5hdGFyaW9faWQ6IHN0cmluZztcblxuICBATWFueVRvT25lKCgpID0+IE5vdGlmaWNhdGlvblRlbXBsYXRlKVxuICBASm9pbkNvbHVtbih7IG5hbWU6ICd0ZW1wbGF0ZV9pZCcgfSlcbiAgdGVtcGxhdGU6IE5vdGlmaWNhdGlvblRlbXBsYXRlO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAndGVtcGxhdGVfaWQnIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0lEIGRvIHRlbXBsYXRlIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgQElzVVVJRCgnNCcsIHsgbWVzc2FnZTogJ0lEIGRvIHRlbXBsYXRlIGludsOhbGlkbycgfSlcbiAgdGVtcGxhdGVfaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKHsgdHlwZTogJ2pzb25iJywgbmFtZTogJ2RhZG9zX2NvbnRleHRvJyB9KVxuICBkYWRvc19jb250ZXh0bzogUmVjb3JkPHN0cmluZywgYW55PjtcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogU3RhdHVzTm90aWZpY2FjYW9Qcm9jZXNzYW1lbnRvLFxuICAgIGVudW1OYW1lOiAnc3RhdHVzX25vdGlmaWNhY2FvX3Byb2Nlc3NhbWVudG8nLFxuICAgIGRlZmF1bHQ6IFN0YXR1c05vdGlmaWNhY2FvUHJvY2Vzc2FtZW50by5QRU5ERU5URSxcbiAgfSlcbiAgQElzRW51bShTdGF0dXNOb3RpZmljYWNhb1Byb2Nlc3NhbWVudG8sIHsgbWVzc2FnZTogJ1N0YXR1cyBpbnbDoWxpZG8nIH0pXG4gIHN0YXR1czogU3RhdHVzTm90aWZpY2FjYW9Qcm9jZXNzYW1lbnRvO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAnanNvbmInLCBuYW1lOiAndGVudGF0aXZhc19lbnRyZWdhJywgbnVsbGFibGU6IHRydWUgfSlcbiAgdGVudGF0aXZhc19lbnRyZWdhOiBUZW50YXRpdmFFbnRyZWdhW107XG5cbiAgQENvbHVtbih7IHR5cGU6ICdqc29uYicsIG5hbWU6ICdkYWRvc19lbnZpbycsIG51bGxhYmxlOiB0cnVlIH0pXG4gIGRhZG9zX2VudmlvOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAndWx0aW1hX3RlbnRhdGl2YScsIG51bGxhYmxlOiB0cnVlIH0pXG4gIHVsdGltYV90ZW50YXRpdmE6IERhdGU7XG5cbiAgQENvbHVtbih7IG5hbWU6ICd0ZW50YXRpdmFzX2VudmlvJywgZGVmYXVsdDogMCB9KVxuICBASXNOdW1iZXIoe30sIHsgbWVzc2FnZTogJ1RlbnRhdGl2YXMgZGUgZW52aW8gZGV2ZSBzZXIgdW0gbsO6bWVybycgfSlcbiAgQE1pbigwLCB7IG1lc3NhZ2U6ICdUZW50YXRpdmFzIGRlIGVudmlvIG7Do28gcG9kZSBzZXIgbmVnYXRpdm8nIH0pXG4gIHRlbnRhdGl2YXNfZW52aW86IG51bWJlcjtcblxuICBAQ29sdW1uKHsgbmFtZTogJ3Byb3hpbWFfdGVudGF0aXZhJywgbnVsbGFibGU6IHRydWUgfSlcbiAgcHJveGltYV90ZW50YXRpdmE6IERhdGU7XG5cbiAgQENvbHVtbih7IG5hbWU6ICdudW1lcm9fdGVudGF0aXZhcycsIGRlZmF1bHQ6IDAgfSlcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdOw7ptZXJvIGRlIHRlbnRhdGl2YXMgZGV2ZSBzZXIgdW0gbsO6bWVybycgfSlcbiAgQE1pbigwLCB7IG1lc3NhZ2U6ICdOw7ptZXJvIGRlIHRlbnRhdGl2YXMgbsOjbyBwb2RlIHNlciBuZWdhdGl2bycgfSlcbiAgbnVtZXJvX3RlbnRhdGl2YXM6IG51bWJlcjtcblxuICBAQ29sdW1uKHsgbmFtZTogJ2RhdGFfZW50cmVnYScsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgZGF0YV9lbnRyZWdhOiBEYXRlO1xuXG4gIEBDb2x1bW4oeyBuYW1lOiAnZGF0YV9lbnZpbycsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgZGF0YV9lbnZpbzogRGF0ZTtcblxuICBAQ29sdW1uKHsgbmFtZTogJ2RhdGFfYWdlbmRhbWVudG8nLCBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIGRhdGFfYWdlbmRhbWVudG86IERhdGU7XG5cbiAgQENvbHVtbih7IG5hbWU6ICdkYXRhX2xlaXR1cmEnLCBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIGRhdGFfbGVpdHVyYTogRGF0ZTtcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbih7IG5hbWU6ICdjcmVhdGVkX2F0JyB9KVxuICBjcmVhdGVkX2F0OiBEYXRlO1xuXG4gIEBVcGRhdGVEYXRlQ29sdW1uKHsgbmFtZTogJ3VwZGF0ZWRfYXQnIH0pXG4gIHVwZGF0ZWRfYXQ6IERhdGU7XG59XG4iXSwidmVyc2lvbiI6M30=