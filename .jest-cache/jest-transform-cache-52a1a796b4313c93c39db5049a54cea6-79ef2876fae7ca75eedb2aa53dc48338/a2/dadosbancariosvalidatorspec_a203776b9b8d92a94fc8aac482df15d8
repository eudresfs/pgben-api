4c5d2be7d91b2fdcdb61c18799404362
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const dados_bancarios_validator_1 = require("../../validators/dados-bancarios-validator");
/**
 * Testes unitários para o validador de dados bancários
 *
 * Verifica o funcionamento correto das validações para informações bancárias,
 * incluindo códigos de banco, agências, contas e dígitos verificadores.
 *
 * @author Equipe PGBen
 */
describe('DadosBancariosValidator', () => {
    let validator;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [dados_bancarios_validator_1.DadosBancariosValidator],
        }).compile();
        validator = module.get(dados_bancarios_validator_1.DadosBancariosValidator);
    });
    describe('validarCodigoBanco', () => {
        it('deve validar códigos de bancos conhecidos', () => {
            expect(validator.validarCodigoBanco('001')).toBe(true); // Banco do Brasil
            expect(validator.validarCodigoBanco('104')).toBe(true); // Caixa
            expect(validator.validarCodigoBanco('341')).toBe(true); // Itaú
            expect(validator.validarCodigoBanco('033')).toBe(true); // Santander
            expect(validator.validarCodigoBanco('237')).toBe(true); // Bradesco
        });
        it('deve rejeitar códigos de bancos inválidos', () => {
            expect(validator.validarCodigoBanco('000')).toBe(false);
            expect(validator.validarCodigoBanco('999')).toBe(false);
            expect(validator.validarCodigoBanco('ABC')).toBe(false);
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarCodigoBanco('')).toBe(false);
            expect(validator.validarCodigoBanco(null)).toBe(false);
            expect(validator.validarCodigoBanco(undefined)).toBe(false);
        });
        it('deve rejeitar códigos com formato incorreto', () => {
            expect(validator.validarCodigoBanco('01')).toBe(false); // muito curto
            expect(validator.validarCodigoBanco('0001')).toBe(false); // muito longo
            expect(validator.validarCodigoBanco('001a')).toBe(false); // caracteres não numéricos
        });
    });
    describe('obterNomeBanco', () => {
        it('deve retornar o nome correto para códigos de bancos conhecidos', () => {
            expect(validator.obterNomeBanco('001')).toBe('Banco do Brasil');
            expect(validator.obterNomeBanco('104')).toBe('Caixa Econômica Federal');
            expect(validator.obterNomeBanco('341')).toBe('Itaú');
            expect(validator.obterNomeBanco('033')).toBe('Santander');
            expect(validator.obterNomeBanco('237')).toBe('Bradesco');
        });
        it('deve retornar "Banco não cadastrado" para códigos desconhecidos', () => {
            expect(validator.obterNomeBanco('999')).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco('')).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco(null)).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco(undefined)).toBe('Banco não cadastrado');
        });
    });
    describe('validarAgencia', () => {
        it('deve validar agências com formato correto', () => {
            expect(validator.validarAgencia('1234')).toBe(true);
            expect(validator.validarAgencia('0001')).toBe(true);
            expect(validator.validarAgencia('12345')).toBe(true); // alguns bancos usam 5 dígitos
        });
        it('deve validar agências com formatação', () => {
            expect(validator.validarAgencia('1234-5')).toBe(true);
            expect(validator.validarAgencia('1.234')).toBe(true);
        });
        it('deve rejeitar agências com formato incorreto', () => {
            expect(validator.validarAgencia('1')).toBe(false); // muito curto
            expect(validator.validarAgencia('123456')).toBe(false); // muito longo
            expect(validator.validarAgencia('123A')).toBe(false); // caracteres não numéricos
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarAgencia('')).toBe(false);
            expect(validator.validarAgencia(null)).toBe(false);
            expect(validator.validarAgencia(undefined)).toBe(false);
        });
        it('deve aplicar validações específicas por banco', () => {
            // Banco do Brasil (4 ou 5 dígitos)
            expect(validator.validarAgencia('1234', '001')).toBe(true);
            expect(validator.validarAgencia('12345', '001')).toBe(true);
            // Caixa (4 dígitos)
            expect(validator.validarAgencia('1234', '104')).toBe(true);
            expect(validator.validarAgencia('12345', '104')).toBe(false);
            // Itaú (4 dígitos)
            expect(validator.validarAgencia('1234', '341')).toBe(true);
            expect(validator.validarAgencia('12345', '341')).toBe(false);
        });
    });
    describe('validarConta', () => {
        it('deve validar contas com formato correto', () => {
            expect(validator.validarConta('12345-6')).toBe(true);
            expect(validator.validarConta('123456')).toBe(true);
            expect(validator.validarConta('00001-X')).toBe(true); // com dígito X
        });
        it('deve validar contas com formatação', () => {
            expect(validator.validarConta('12345-6')).toBe(true);
            expect(validator.validarConta('12.345-6')).toBe(true);
        });
        it('deve rejeitar contas com formato incorreto', () => {
            expect(validator.validarConta('12')).toBe(false); // muito curto
            expect(validator.validarConta('12345678901234')).toBe(false); // muito longo
            expect(validator.validarConta('123A56')).toBe(false); // caracteres não numéricos (exceto X)
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarConta('')).toBe(false);
            expect(validator.validarConta(null)).toBe(false);
            expect(validator.validarConta(undefined)).toBe(false);
        });
        it('deve aplicar validações específicas por banco', () => {
            // Banco do Brasil
            expect(validator.validarConta('12345-6', '001')).toBe(true);
            expect(validator.validarConta('123456X', '001')).toBe(true);
            // Caixa
            expect(validator.validarConta('123456-7', '104')).toBe(true);
            // Itaú
            expect(validator.validarConta('12345-6', '341')).toBe(true);
            expect(validator.validarConta('1234-5', '341')).toBe(true);
        });
    });
    describe('mascaraAgencia', () => {
        it('deve mascarar corretamente agências', () => {
            const mascarado = validator.mascaraAgencia('1234');
            expect(mascarado).toBe('1**4');
        });
        it('deve retornar asteriscos para agências muito curtas', () => {
            const mascarado = validator.mascaraAgencia('12');
            expect(mascarado).toBe('****');
        });
        it('deve manter o primeiro e último dígito visíveis', () => {
            const mascarado = validator.mascaraAgencia('12345');
            expect(mascarado.charAt(0)).toBe('1');
            expect(mascarado.charAt(mascarado.length - 1)).toBe('5');
            expect(mascarado.substring(1, mascarado.length - 1)).not.toContain(/[0-9]/);
        });
    });
    describe('mascaraConta', () => {
        it('deve mascarar corretamente contas', () => {
            const mascarado = validator.mascaraConta('123456');
            expect(mascarado).toBe('12**56');
        });
        it('deve retornar asteriscos para contas muito curtas', () => {
            const mascarado = validator.mascaraConta('123');
            expect(mascarado).toBe('****');
        });
        it('deve manter os dois primeiros e dois últimos dígitos visíveis', () => {
            const mascarado = validator.mascaraConta('1234567890');
            expect(mascarado.substring(0, 2)).toBe('12');
            expect(mascarado.substring(mascarado.length - 2)).toBe('90');
            expect(mascarado.substring(2, mascarado.length - 2)).not.toContain(/[0-9]/);
        });
    });
    describe('formatarAgencia', () => {
        it('deve formatar corretamente agências', () => {
            expect(validator.formatarAgencia('1234')).toBe('1234');
            expect(validator.formatarAgencia('12-34')).toBe('1234');
            expect(validator.formatarAgencia('12.34')).toBe('1234');
        });
    });
    describe('formatarConta', () => {
        it('deve formatar corretamente contas', () => {
            expect(validator.formatarConta('12345X')).toBe('12345-X');
            expect(validator.formatarConta('123456')).toBe('12345-6');
            expect(validator.formatarConta('12345-6')).toBe('12345-6');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHZhbGlkYXRvcnNcXGRhZG9zLWJhbmNhcmlvcy12YWxpZGF0b3Iuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwwRkFBcUY7QUFFckY7Ozs7Ozs7R0FPRztBQUNILFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7SUFDdkMsSUFBSSxTQUFrQyxDQUFDO0lBRXZDLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLE1BQU0sR0FBa0IsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDM0QsU0FBUyxFQUFFLENBQUMsbURBQXVCLENBQUM7U0FDckMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsU0FBUyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQTBCLG1EQUF1QixDQUFDLENBQUM7SUFDM0UsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGtCQUFrQjtZQUMxRSxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUTtZQUNoRSxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTztZQUMvRCxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENB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ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccGFnYW1lbnRvXFx0ZXN0c1xcdmFsaWRhdG9yc1xcZGFkb3MtYmFuY2FyaW9zLXZhbGlkYXRvci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgRGFkb3NCYW5jYXJpb3NWYWxpZGF0b3IgfSBmcm9tICcuLi8uLi92YWxpZGF0b3JzL2RhZG9zLWJhbmNhcmlvcy12YWxpZGF0b3InO1xuXG4vKipcbiAqIFRlc3RlcyB1bml0w6FyaW9zIHBhcmEgbyB2YWxpZGFkb3IgZGUgZGFkb3MgYmFuY8Ohcmlvc1xuICpcbiAqIFZlcmlmaWNhIG8gZnVuY2lvbmFtZW50byBjb3JyZXRvIGRhcyB2YWxpZGHDp8O1ZXMgcGFyYSBpbmZvcm1hw6fDtWVzIGJhbmPDoXJpYXMsXG4gKiBpbmNsdWluZG8gY8OzZGlnb3MgZGUgYmFuY28sIGFnw6puY2lhcywgY29udGFzIGUgZMOtZ2l0b3MgdmVyaWZpY2Fkb3Jlcy5cbiAqXG4gKiBAYXV0aG9yIEVxdWlwZSBQR0JlblxuICovXG5kZXNjcmliZSgnRGFkb3NCYW5jYXJpb3NWYWxpZGF0b3InLCAoKSA9PiB7XG4gIGxldCB2YWxpZGF0b3I6IERhZG9zQmFuY2FyaW9zVmFsaWRhdG9yO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBwcm92aWRlcnM6IFtEYWRvc0JhbmNhcmlvc1ZhbGlkYXRvcl0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgdmFsaWRhdG9yID0gbW9kdWxlLmdldDxEYWRvc0JhbmNhcmlvc1ZhbGlkYXRvcj4oRGFkb3NCYW5jYXJpb3NWYWxpZGF0b3IpO1xuICB9KTtcblxuICBkZXNjcmliZSgndmFsaWRhckNvZGlnb0JhbmNvJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHZhbGlkYXIgY8OzZGlnb3MgZGUgYmFuY29zIGNvbmhlY2lkb3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMDAxJykpLnRvQmUodHJ1ZSk7IC8vIEJhbmNvIGRvIEJyYXNpbFxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzEwNCcpKS50b0JlKHRydWUpOyAvLyBDYWl4YVxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzM0MScpKS50b0JlKHRydWUpOyAvLyBJdGHDulxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzAzMycpKS50b0JlKHRydWUpOyAvLyBTYW50YW5kZXJcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcyMzcnKSkudG9CZSh0cnVlKTsgLy8gQnJhZGVzY29cbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIGPDs2RpZ29zIGRlIGJhbmNvcyBpbnbDoWxpZG9zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzAwMCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCc5OTknKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnQUJDJykpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgdmFsb3JlcyB2YXppb3Mgb3UgbnVsb3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28obnVsbCkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28odW5kZWZpbmVkKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZWplaXRhciBjw7NkaWdvcyBjb20gZm9ybWF0byBpbmNvcnJldG8nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMDEnKSkudG9CZShmYWxzZSk7IC8vIG11aXRvIGN1cnRvXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMDAwMScpKS50b0JlKGZhbHNlKTsgLy8gbXVpdG8gbG9uZ29cbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcwMDFhJykpLnRvQmUoZmFsc2UpOyAvLyBjYXJhY3RlcmVzIG7Do28gbnVtw6lyaWNvc1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnb2J0ZXJOb21lQmFuY28nLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgbyBub21lIGNvcnJldG8gcGFyYSBjw7NkaWdvcyBkZSBiYW5jb3MgY29uaGVjaWRvcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28oJzAwMScpKS50b0JlKCdCYW5jbyBkbyBCcmFzaWwnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28oJzEwNCcpKS50b0JlKCdDYWl4YSBFY29uw7RtaWNhIEZlZGVyYWwnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28oJzM0MScpKS50b0JlKCdJdGHDuicpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnMDMzJykpLnRvQmUoJ1NhbnRhbmRlcicpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnMjM3JykpLnRvQmUoJ0JyYWRlc2NvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBcIkJhbmNvIG7Do28gY2FkYXN0cmFkb1wiIHBhcmEgY8OzZGlnb3MgZGVzY29uaGVjaWRvcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28oJzk5OScpKS50b0JlKCdCYW5jbyBuw6NvIGNhZGFzdHJhZG8nKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28oJycpKS50b0JlKCdCYW5jbyBuw6NvIGNhZGFzdHJhZG8nKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3Iub2J0ZXJOb21lQmFuY28obnVsbCkpLnRvQmUoJ0JhbmNvIG7Do28gY2FkYXN0cmFkbycpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbyh1bmRlZmluZWQpKS50b0JlKCdCYW5jbyBuw6NvIGNhZGFzdHJhZG8nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXJBZ2VuY2lhJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHZhbGlkYXIgYWfDqm5jaWFzIGNvbSBmb3JtYXRvIGNvcnJldG8nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcwMDAxJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0NScpKS50b0JlKHRydWUpOyAvLyBhbGd1bnMgYmFuY29zIHVzYW0gNSBkw61naXRvc1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgdmFsaWRhciBhZ8OqbmNpYXMgY29tIGZvcm1hdGHDp8OjbycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQtNScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMS4yMzQnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIGFnw6puY2lhcyBjb20gZm9ybWF0byBpbmNvcnJldG8nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxJykpLnRvQmUoZmFsc2UpOyAvLyBtdWl0byBjdXJ0b1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNDU2JykpLnRvQmUoZmFsc2UpOyAvLyBtdWl0byBsb25nb1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzQScpKS50b0JlKGZhbHNlKTsgLy8gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3NcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHZhbG9yZXMgdmF6aW9zIG91IG51bG9zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYShudWxsKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKHVuZGVmaW5lZCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgYXBsaWNhciB2YWxpZGHDp8O1ZXMgZXNwZWPDrWZpY2FzIHBvciBiYW5jbycsICgpID0+IHtcbiAgICAgIC8vIEJhbmNvIGRvIEJyYXNpbCAoNCBvdSA1IGTDrWdpdG9zKVxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNCcsICcwMDEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQ1JywgJzAwMScpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBDYWl4YSAoNCBkw61naXRvcylcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQnLCAnMTA0JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0NScsICcxMDQnKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIC8vIEl0YcO6ICg0IGTDrWdpdG9zKVxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNCcsICczNDEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQ1JywgJzM0MScpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3ZhbGlkYXJDb250YScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSB2YWxpZGFyIGNvbnRhcyBjb20gZm9ybWF0byBjb3JyZXRvJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1LTYnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcxMjM0NTYnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcwMDAwMS1YJykpLnRvQmUodHJ1ZSk7IC8vIGNvbSBkw61naXRvIFhcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHZhbGlkYXIgY29udGFzIGNvbSBmb3JtYXRhw6fDo28nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDUtNicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyLjM0NS02JykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZWplaXRhciBjb250YXMgY29tIGZvcm1hdG8gaW5jb3JyZXRvJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyJykpLnRvQmUoZmFsc2UpOyAvLyBtdWl0byBjdXJ0b1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1Njc4OTAxMjM0JykpLnRvQmUoZmFsc2UpOyAvLyBtdWl0byBsb25nb1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyM0E1NicpKS50b0JlKGZhbHNlKTsgLy8gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3MgKGV4Y2V0byBYKVxuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgdmFsb3JlcyB2YXppb3Mgb3UgbnVsb3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEobnVsbCkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEodW5kZWZpbmVkKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBhcGxpY2FyIHZhbGlkYcOnw7VlcyBlc3BlY8OtZmljYXMgcG9yIGJhbmNvJywgKCkgPT4ge1xuICAgICAgLy8gQmFuY28gZG8gQnJhc2lsXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDUtNicsICcwMDEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcxMjM0NTZYJywgJzAwMScpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBDYWl4YVxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1Ni03JywgJzEwNCcpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBJdGHDulxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1LTYnLCAnMzQxJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNC01JywgJzM0MScpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbWFzY2FyYUFnZW5jaWEnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgbWFzY2FyYXIgY29ycmV0YW1lbnRlIGFnw6puY2lhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hc2NhcmFkbyA9IHZhbGlkYXRvci5tYXNjYXJhQWdlbmNpYSgnMTIzNCcpO1xuICAgICAgZXhwZWN0KG1hc2NhcmFkbykudG9CZSgnMSoqNCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgYXN0ZXJpc2NvcyBwYXJhIGFnw6puY2lhcyBtdWl0byBjdXJ0YXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXNjYXJhZG8gPSB2YWxpZGF0b3IubWFzY2FyYUFnZW5jaWEoJzEyJyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvKS50b0JlKCcqKioqJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBtYW50ZXIgbyBwcmltZWlybyBlIMO6bHRpbW8gZMOtZ2l0byB2aXPDrXZlaXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXNjYXJhZG8gPSB2YWxpZGF0b3IubWFzY2FyYUFnZW5jaWEoJzEyMzQ1Jyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvLmNoYXJBdCgwKSkudG9CZSgnMScpO1xuICAgICAgZXhwZWN0KG1hc2NhcmFkby5jaGFyQXQobWFzY2FyYWRvLmxlbmd0aCAtIDEpKS50b0JlKCc1Jyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvLnN1YnN0cmluZygxLCBtYXNjYXJhZG8ubGVuZ3RoIC0gMSkpLm5vdC50b0NvbnRhaW4oXG4gICAgICAgIC9bMC05XS8sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbWFzY2FyYUNvbnRhJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIG1hc2NhcmFyIGNvcnJldGFtZW50ZSBjb250YXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXNjYXJhZG8gPSB2YWxpZGF0b3IubWFzY2FyYUNvbnRhKCcxMjM0NTYnKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8pLnRvQmUoJzEyKio1NicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgYXN0ZXJpc2NvcyBwYXJhIGNvbnRhcyBtdWl0byBjdXJ0YXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtYXNjYXJhZG8gPSB2YWxpZGF0b3IubWFzY2FyYUNvbnRhKCcxMjMnKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8pLnRvQmUoJyoqKionKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIG1hbnRlciBvcyBkb2lzIHByaW1laXJvcyBlIGRvaXMgw7psdGltb3MgZMOtZ2l0b3Mgdmlzw612ZWlzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFzY2FyYWRvID0gdmFsaWRhdG9yLm1hc2NhcmFDb250YSgnMTIzNDU2Nzg5MCcpO1xuICAgICAgZXhwZWN0KG1hc2NhcmFkby5zdWJzdHJpbmcoMCwgMikpLnRvQmUoJzEyJyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvLnN1YnN0cmluZyhtYXNjYXJhZG8ubGVuZ3RoIC0gMikpLnRvQmUoJzkwJyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvLnN1YnN0cmluZygyLCBtYXNjYXJhZG8ubGVuZ3RoIC0gMikpLm5vdC50b0NvbnRhaW4oXG4gICAgICAgIC9bMC05XS8sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZm9ybWF0YXJBZ2VuY2lhJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGZvcm1hdGFyIGNvcnJldGFtZW50ZSBhZ8OqbmNpYXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLmZvcm1hdGFyQWdlbmNpYSgnMTIzNCcpKS50b0JlKCcxMjM0Jyk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLmZvcm1hdGFyQWdlbmNpYSgnMTItMzQnKSkudG9CZSgnMTIzNCcpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5mb3JtYXRhckFnZW5jaWEoJzEyLjM0JykpLnRvQmUoJzEyMzQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Zvcm1hdGFyQ29udGEnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZm9ybWF0YXIgY29ycmV0YW1lbnRlIGNvbnRhcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDVYJykpLnRvQmUoJzEyMzQ1LVgnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDU2JykpLnRvQmUoJzEyMzQ1LTYnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDUtNicpKS50b0JlKCcxMjM0NS02Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=