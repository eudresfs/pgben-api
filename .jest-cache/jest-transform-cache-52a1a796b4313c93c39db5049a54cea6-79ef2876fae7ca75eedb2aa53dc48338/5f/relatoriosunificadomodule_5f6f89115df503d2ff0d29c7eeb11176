3f9572368c815a197399915dcab15a69
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RelatoriosUnificadoModule = void 0;
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const cache_manager_1 = require("@nestjs/cache-manager");
const core_1 = require("@nestjs/core");
const auth_module_1 = require("../../auth/auth.module");
// Entidades
const entities_1 = require("../../entities");
// Componentes do módulo usando os arquivos de índice
const controllers_1 = require("./controllers");
const services_1 = require("./services");
const strategies_1 = require("./strategies");
const interceptors_1 = require("./interceptors");
/**
 * Módulo de Relatórios Unificado
 *
 * Este módulo é responsável pela geração de relatórios em diversos formatos (PDF, Excel, CSV)
 * no Sistema de Gestão de Benefícios Eventuais. Consolida as funcionalidades dos antigos
 * módulos 'relatorio' e 'relatorios'.
 */
let RelatoriosUnificadoModule = class RelatoriosUnificadoModule {
};
exports.RelatoriosUnificadoModule = RelatoriosUnificadoModule;
exports.RelatoriosUnificadoModule = RelatoriosUnificadoModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.Solicitacao, entities_1.Unidade, entities_1.TipoBeneficio]),
            cache_manager_1.CacheModule.register({
                ttl: 300, // 5 minutos de cache
                max: 100, // máximo de 100 itens em cache
            }),
            // Importa o módulo compartilhado de autenticação
            auth_module_1.AuthModule,
        ],
        controllers: [controllers_1.RelatoriosController],
        providers: [
            services_1.RelatoriosService,
            services_1.TempFilesService,
            strategies_1.PdfStrategy,
            strategies_1.ExcelStrategy,
            strategies_1.CsvStrategy,
            {
                provide: core_1.APP_INTERCEPTOR,
                useClass: interceptors_1.RelatoriosAuditInterceptor,
            },
        ],
        exports: [services_1.RelatoriosService, services_1.TempFilesService],
    })
], RelatoriosUnificadoModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHJlbGF0b3Jpb3MtdW5pZmljYWRvXFxyZWxhdG9yaW9zLXVuaWZpY2Fkby5tb2R1bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkNBQXdDO0FBQ3hDLDZDQUFnRDtBQUNoRCx5REFBb0Q7QUFDcEQsdUNBQStDO0FBQy9DLHdEQUFvRDtBQUVwRCxZQUFZO0FBQ1osNkNBQXFFO0FBRXJFLHFEQUFxRDtBQUNyRCwrQ0FBcUQ7QUFDckQseUNBQWlFO0FBQ2pFLDZDQUF1RTtBQUN2RSxpREFBNEQ7QUFFNUQ7Ozs7OztHQU1HO0FBeUJJLElBQU0seUJBQXlCLEdBQS9CLE1BQU0seUJBQXlCO0NBQUcsQ0FBQTtBQUE1Qiw4REFBeUI7b0NBQXpCLHlCQUF5QjtJQXhCckMsSUFBQSxlQUFNLEVBQUM7UUFDTixPQUFPLEVBQUU7WUFDUCx1QkFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLHNCQUFXLEVBQUUsa0JBQU8sRUFBRSx3QkFBYSxDQUFDLENBQUM7WUFDL0QsMkJBQVcsQ0FBQyxRQUFRLENBQUM7Z0JBQ25CLEdBQUcsRUFBRSxHQUFHLEVBQUUscUJBQXFCO2dCQUMvQixHQUFHLEVBQUUsR0FBRyxFQUFFLCtCQUErQjthQUMxQyxDQUFDO1lBQ0YsaURBQWlEO1lBQ2pELHdCQUFVO1NBQ1g7UUFDRCxXQUFXLEVBQUUsQ0FBQyxrQ0FBb0IsQ0FBQztRQUNuQyxTQUFTLEVBQUU7WUFDVCw0QkFBaUI7WUFDakIsMkJBQWdCO1lBQ2hCLHdCQUFXO1lBQ1gsMEJBQWE7WUFDYix3QkFBVztZQUNYO2dCQUNFLE9BQU8sRUFBRSxzQkFBZTtnQkFDeEIsUUFBUSxFQUFFLHlDQUEwQjthQUNyQztTQUNGO1FBQ0QsT0FBTyxFQUFFLENBQUMsNEJBQWlCLEVBQUUsMkJBQWdCLENBQUM7S0FDL0MsQ0FBQztHQUNXLHlCQUF5QixDQUFHIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxyZWxhdG9yaW9zLXVuaWZpY2Fkb1xccmVsYXRvcmlvcy11bmlmaWNhZG8ubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vZHVsZSB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFR5cGVPcm1Nb2R1bGUgfSBmcm9tICdAbmVzdGpzL3R5cGVvcm0nO1xuaW1wb3J0IHsgQ2FjaGVNb2R1bGUgfSBmcm9tICdAbmVzdGpzL2NhY2hlLW1hbmFnZXInO1xuaW1wb3J0IHsgQVBQX0lOVEVSQ0VQVE9SIH0gZnJvbSAnQG5lc3Rqcy9jb3JlJztcbmltcG9ydCB7IEF1dGhNb2R1bGUgfSBmcm9tICcuLi8uLi9hdXRoL2F1dGgubW9kdWxlJztcblxuLy8gRW50aWRhZGVzXG5pbXBvcnQgeyBTb2xpY2l0YWNhbywgVW5pZGFkZSwgVGlwb0JlbmVmaWNpbyB9IGZyb20gJy4uLy4uL2VudGl0aWVzJztcblxuLy8gQ29tcG9uZW50ZXMgZG8gbcOzZHVsbyB1c2FuZG8gb3MgYXJxdWl2b3MgZGUgw61uZGljZVxuaW1wb3J0IHsgUmVsYXRvcmlvc0NvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXJzJztcbmltcG9ydCB7IFJlbGF0b3Jpb3NTZXJ2aWNlLCBUZW1wRmlsZXNTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5pbXBvcnQgeyBQZGZTdHJhdGVneSwgRXhjZWxTdHJhdGVneSwgQ3N2U3RyYXRlZ3kgfSBmcm9tICcuL3N0cmF0ZWdpZXMnO1xuaW1wb3J0IHsgUmVsYXRvcmlvc0F1ZGl0SW50ZXJjZXB0b3IgfSBmcm9tICcuL2ludGVyY2VwdG9ycyc7XG5cbi8qKlxuICogTcOzZHVsbyBkZSBSZWxhdMOzcmlvcyBVbmlmaWNhZG9cbiAqXG4gKiBFc3RlIG3Ds2R1bG8gw6kgcmVzcG9uc8OhdmVsIHBlbGEgZ2VyYcOnw6NvIGRlIHJlbGF0w7NyaW9zIGVtIGRpdmVyc29zIGZvcm1hdG9zIChQREYsIEV4Y2VsLCBDU1YpXG4gKiBubyBTaXN0ZW1hIGRlIEdlc3TDo28gZGUgQmVuZWbDrWNpb3MgRXZlbnR1YWlzLiBDb25zb2xpZGEgYXMgZnVuY2lvbmFsaWRhZGVzIGRvcyBhbnRpZ29zXG4gKiBtw7NkdWxvcyAncmVsYXRvcmlvJyBlICdyZWxhdG9yaW9zJy5cbiAqL1xuQE1vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBUeXBlT3JtTW9kdWxlLmZvckZlYXR1cmUoW1NvbGljaXRhY2FvLCBVbmlkYWRlLCBUaXBvQmVuZWZpY2lvXSksXG4gICAgQ2FjaGVNb2R1bGUucmVnaXN0ZXIoe1xuICAgICAgdHRsOiAzMDAsIC8vIDUgbWludXRvcyBkZSBjYWNoZVxuICAgICAgbWF4OiAxMDAsIC8vIG3DoXhpbW8gZGUgMTAwIGl0ZW5zIGVtIGNhY2hlXG4gICAgfSksXG4gICAgLy8gSW1wb3J0YSBvIG3Ds2R1bG8gY29tcGFydGlsaGFkbyBkZSBhdXRlbnRpY2HDp8Ojb1xuICAgIEF1dGhNb2R1bGUsXG4gIF0sXG4gIGNvbnRyb2xsZXJzOiBbUmVsYXRvcmlvc0NvbnRyb2xsZXJdLFxuICBwcm92aWRlcnM6IFtcbiAgICBSZWxhdG9yaW9zU2VydmljZSxcbiAgICBUZW1wRmlsZXNTZXJ2aWNlLFxuICAgIFBkZlN0cmF0ZWd5LFxuICAgIEV4Y2VsU3RyYXRlZ3ksXG4gICAgQ3N2U3RyYXRlZ3ksXG4gICAge1xuICAgICAgcHJvdmlkZTogQVBQX0lOVEVSQ0VQVE9SLFxuICAgICAgdXNlQ2xhc3M6IFJlbGF0b3Jpb3NBdWRpdEludGVyY2VwdG9yLFxuICAgIH0sXG4gIF0sXG4gIGV4cG9ydHM6IFtSZWxhdG9yaW9zU2VydmljZSwgVGVtcEZpbGVzU2VydmljZV0sXG59KVxuZXhwb3J0IGNsYXNzIFJlbGF0b3Jpb3NVbmlmaWNhZG9Nb2R1bGUge31cbiJdLCJ2ZXJzaW9uIjozfQ==