7d09d5f5ae9403d5204fa72cc87d04b0
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c;
Object.defineProperty(exports, "__esModule", { value: true });
exports.CampoDinamicoController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const campo_dinamico_service_1 = require("../services/campo-dinamico.service");
const create_campo_dinamico_dto_1 = require("../dto/create-campo-dinamico.dto");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const roles_guard_1 = require("../../../auth/guards/roles.guard");
const role_decorator_1 = require("../../../auth/decorators/role.decorator");
const roles_constants_1 = require("../../../shared/constants/roles.constants");
/**
 * Controlador de campos dinâmicos de benefícios
 *
 * Responsável por gerenciar as rotas relacionadas a campos dinâmicos
 * específicos para cada tipo de benefício.
 */
let CampoDinamicoController = class CampoDinamicoController {
    campoDinamicoService;
    constructor(campoDinamicoService) {
        this.campoDinamicoService = campoDinamicoService;
    }
    /**
     * Lista todos os campos dinâmicos de um tipo de benefício
     */
    async findAll(tipoBeneficioId) {
        return this.campoDinamicoService.findByTipoBeneficio(tipoBeneficioId);
    }
    /**
     * Cria um novo campo dinâmico para um tipo de benefício
     */
    async create(tipoBeneficioId, createCampoDinamicoDto) {
        return this.campoDinamicoService.create(tipoBeneficioId, createCampoDinamicoDto);
    }
    /**
     * Atualiza um campo dinâmico existente
     */
    async update(id, updateCampoDinamicoDto) {
        return this.campoDinamicoService.update(id, updateCampoDinamicoDto);
    }
    /**
     * Remove um campo dinâmico
     */
    async remove(id) {
        return this.campoDinamicoService.remove(id);
    }
    /**
     * Obtém o schema ativo de um tipo de benefício
     */
    async getSchemaAtivo(tipoBeneficioId) {
        return this.campoDinamicoService.getSchemaAtivo(tipoBeneficioId);
    }
    /**
     * Obtém o histórico de versões do schema de um tipo de benefício
     */
    async getHistoricoVersoes(tipoBeneficioId) {
        return this.campoDinamicoService.getHistoricoVersoes(tipoBeneficioId);
    }
};
exports.CampoDinamicoController = CampoDinamicoController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'Listar campos dinâmicos de um benefício' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de campos dinâmicos retornada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Tipo de benefício não encontrado' }),
    __param(0, (0, common_1.Param)('tipoBeneficioId', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "findAll", null);
__decorate([
    (0, common_1.Post)(),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Criar novo campo dinâmico' }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Campo dinâmico criado com sucesso',
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Dados inválidos' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Tipo de benefício não encontrado' }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Nome já em uso' }),
    __param(0, (0, common_1.Param)('tipoBeneficioId', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_b = typeof create_campo_dinamico_dto_1.CreateCampoDinamicoDto !== "undefined" && create_campo_dinamico_dto_1.CreateCampoDinamicoDto) === "function" ? _b : Object]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "create", null);
__decorate([
    (0, common_1.Put)(':id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Atualizar campo dinâmico existente' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Campo dinâmico atualizado com sucesso',
    }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Dados inválidos' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Campo dinâmico não encontrado' }),
    (0, swagger_1.ApiResponse)({ status: 409, description: 'Nome já em uso' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_c = typeof Partial !== "undefined" && Partial) === "function" ? _c : Object]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "update", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Remover campo dinâmico' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Campo dinâmico removido com sucesso',
    }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Campo dinâmico não encontrado' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "remove", null);
__decorate([
    (0, common_1.Get)('schema'),
    (0, swagger_1.ApiOperation)({ summary: 'Obter schema ativo de um benefício' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Schema retornado com sucesso' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Tipo de benefício não encontrado' }),
    __param(0, (0, common_1.Param)('tipoBeneficioId', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "getSchemaAtivo", null);
__decorate([
    (0, common_1.Get)('schema/historico'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Obter histórico de versões do schema' }),
    (0, swagger_1.ApiResponse)({ status: 200, description: 'Histórico retornado com sucesso' }),
    (0, swagger_1.ApiResponse)({ status: 404, description: 'Tipo de benefício não encontrado' }),
    __param(0, (0, common_1.Param)('tipoBeneficioId', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], CampoDinamicoController.prototype, "getHistoricoVersoes", null);
exports.CampoDinamicoController = CampoDinamicoController = __decorate([
    (0, swagger_1.ApiTags)('Benefícios'),
    (0, common_1.Controller)('beneficio/:tipoBeneficioId/campos-dinamicos'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, roles_guard_1.RolesGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof campo_dinamico_service_1.CampoDinamicoService !== "undefined" && campo_dinamico_service_1.CampoDinamicoService) === "function" ? _a : Object])
], CampoDinamicoController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGJlbmVmaWNpb1xcY29udHJvbGxlcnNcXGNhbXBvLWRpbmFtaWNvLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQVV3QjtBQUN4Qiw2Q0FLeUI7QUFDekIsK0VBQTBFO0FBQzFFLGdGQUEwRTtBQUMxRSx3RUFBbUU7QUFDbkUsa0VBQThEO0FBQzlELDRFQUFnRTtBQUVoRSwrRUFBa0U7QUFFbEU7Ozs7O0dBS0c7QUFLSSxJQUFNLHVCQUF1QixHQUE3QixNQUFNLHVCQUF1QjtJQUNMO0lBQTdCLFlBQTZCLG9CQUEwQztRQUExQyx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXNCO0lBQUcsQ0FBQztJQUUzRTs7T0FFRztJQVFHLEFBQU4sS0FBSyxDQUFDLE9BQU8sQ0FDOEIsZUFBdUI7UUFFaEUsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUVEOztPQUVHO0lBV0csQUFBTixLQUFLLENBQUMsTUFBTSxDQUMrQixlQUF1QixFQUN4RCxzQkFBOEM7UUFFdEQsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUNyQyxlQUFlLEVBQ2Ysc0JBQXNCLENBQ3ZCLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFXRyxBQUFOLEtBQUssQ0FBQyxNQUFNLENBQ0csRUFBVSxFQUNmLHNCQUF1RDtRQUUvRCxPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLHNCQUFzQixDQUFDLENBQUM7SUFDdEUsQ0FBQztJQUVEOztPQUVHO0lBU0csQUFBTixLQUFLLENBQUMsTUFBTSxDQUFjLEVBQVU7UUFDbEMsT0FBTyxJQUFJLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lB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QXVCO0lBSm5DLElBQUEsaUJBQU8sRUFBQyxZQUFZLENBQUM7SUFDckIsSUFBQSxtQkFBVSxFQUFDLDZDQUE2QyxDQUFDO0lBQ3pELElBQUEsa0JBQVMsRUFBQyw2QkFBWSxFQUFFLHdCQUFVLENBQUM7SUFDbkMsSUFBQSx1QkFBYSxHQUFFO3lEQUVxQyw2Q0FBb0Isb0JBQXBCLDZDQUFvQjtHQUQ1RCx1QkFBdUIsQ0F1R25DIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxiZW5lZmljaW9cXGNvbnRyb2xsZXJzXFxjYW1wby1kaW5hbWljby5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbnRyb2xsZXIsXG4gIEdldCxcbiAgUG9zdCxcbiAgQm9keSxcbiAgUHV0LFxuICBQYXJhbSxcbiAgRGVsZXRlLFxuICBVc2VHdWFyZHMsXG4gIFBhcnNlVVVJRFBpcGUsXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaUJlYXJlckF1dGgsXG59IGZyb20gJ0BuZXN0anMvc3dhZ2dlcic7XG5pbXBvcnQgeyBDYW1wb0RpbmFtaWNvU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NhbXBvLWRpbmFtaWNvLnNlcnZpY2UnO1xuaW1wb3J0IHsgQ3JlYXRlQ2FtcG9EaW5hbWljb0R0byB9IGZyb20gJy4uL2R0by9jcmVhdGUtY2FtcG8tZGluYW1pY28uZHRvJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFJvbGVzR3VhcmQgfSBmcm9tICcuLi8uLi8uLi9hdXRoL2d1YXJkcy9yb2xlcy5ndWFyZCc7XG5pbXBvcnQgeyBSb2xlcyB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZGVjb3JhdG9ycy9yb2xlLmRlY29yYXRvcic7XG5pbXBvcnQgeyBSb2xlIH0gZnJvbSAnLi4vLi4vLi4vZW51bXMvcm9sZS5lbnVtJztcbmltcG9ydCB7IFJPTEVTIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2NvbnN0YW50cy9yb2xlcy5jb25zdGFudHMnO1xuXG4vKipcbiAqIENvbnRyb2xhZG9yIGRlIGNhbXBvcyBkaW7Dom1pY29zIGRlIGJlbmVmw61jaW9zXG4gKlxuICogUmVzcG9uc8OhdmVsIHBvciBnZXJlbmNpYXIgYXMgcm90YXMgcmVsYWNpb25hZGFzIGEgY2FtcG9zIGRpbsOibWljb3NcbiAqIGVzcGVjw61maWNvcyBwYXJhIGNhZGEgdGlwbyBkZSBiZW5lZsOtY2lvLlxuICovXG5AQXBpVGFncygnQmVuZWbDrWNpb3MnKVxuQENvbnRyb2xsZXIoJ2JlbmVmaWNpby86dGlwb0JlbmVmaWNpb0lkL2NhbXBvcy1kaW5hbWljb3MnKVxuQFVzZUd1YXJkcyhKd3RBdXRoR3VhcmQsIFJvbGVzR3VhcmQpXG5AQXBpQmVhcmVyQXV0aCgpXG5leHBvcnQgY2xhc3MgQ2FtcG9EaW5hbWljb0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGNhbXBvRGluYW1pY29TZXJ2aWNlOiBDYW1wb0RpbmFtaWNvU2VydmljZSkge31cblxuICAvKipcbiAgICogTGlzdGEgdG9kb3Mgb3MgY2FtcG9zIGRpbsOibWljb3MgZGUgdW0gdGlwbyBkZSBiZW5lZsOtY2lvXG4gICAqL1xuICBAR2V0KClcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdMaXN0YXIgY2FtcG9zIGRpbsOibWljb3MgZGUgdW0gYmVuZWbDrWNpbycgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0xpc3RhIGRlIGNhbXBvcyBkaW7Dom1pY29zIHJldG9ybmFkYSBjb20gc3VjZXNzbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDA0LCBkZXNjcmlwdGlvbjogJ1RpcG8gZGUgYmVuZWbDrWNpbyBuw6NvIGVuY29udHJhZG8nIH0pXG4gIGFzeW5jIGZpbmRBbGwoXG4gICAgQFBhcmFtKCd0aXBvQmVuZWZpY2lvSWQnLCBQYXJzZVVVSURQaXBlKSB0aXBvQmVuZWZpY2lvSWQ6IHN0cmluZyxcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FtcG9EaW5hbWljb1NlcnZpY2UuZmluZEJ5VGlwb0JlbmVmaWNpbyh0aXBvQmVuZWZpY2lvSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyaWEgdW0gbm92byBjYW1wbyBkaW7Dom1pY28gcGFyYSB1bSB0aXBvIGRlIGJlbmVmw61jaW9cbiAgICovXG4gIEBQb3N0KClcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ3JpYXIgbm92byBjYW1wbyBkaW7Dom1pY28nIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDEsXG4gICAgZGVzY3JpcHRpb246ICdDYW1wbyBkaW7Dom1pY28gY3JpYWRvIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDAsIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDQsIGRlc2NyaXB0aW9uOiAnVGlwbyBkZSBiZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDksIGRlc2NyaXB0aW9uOiAnTm9tZSBqw6EgZW0gdXNvJyB9KVxuICBhc3luYyBjcmVhdGUoXG4gICAgQFBhcmFtKCd0aXBvQmVuZWZpY2lvSWQnLCBQYXJzZVVVSURQaXBlKSB0aXBvQmVuZWZpY2lvSWQ6IHN0cmluZyxcbiAgICBAQm9keSgpIGNyZWF0ZUNhbXBvRGluYW1pY29EdG86IENyZWF0ZUNhbXBvRGluYW1pY29EdG8sXG4gICkge1xuICAgIHJldHVybiB0aGlzLmNhbXBvRGluYW1pY29TZXJ2aWNlLmNyZWF0ZShcbiAgICAgIHRpcG9CZW5lZmljaW9JZCxcbiAgICAgIGNyZWF0ZUNhbXBvRGluYW1pY29EdG8sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSB1bSBjYW1wbyBkaW7Dom1pY28gZXhpc3RlbnRlXG4gICAqL1xuICBAUHV0KCc6aWQnKVxuICBAUm9sZXMoUk9MRVMuQURNSU4sIFJPTEVTLkdFU1RPUilcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdBdHVhbGl6YXIgY2FtcG8gZGluw6JtaWNvIGV4aXN0ZW50ZScgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0NhbXBvIGRpbsOibWljbyBhdHVhbGl6YWRvIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDAsIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDQsIGRlc2NyaXB0aW9uOiAnQ2FtcG8gZGluw6JtaWNvIG7Do28gZW5jb250cmFkbycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDksIGRlc2NyaXB0aW9uOiAnTm9tZSBqw6EgZW0gdXNvJyB9KVxuICBhc3luYyB1cGRhdGUoXG4gICAgQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcsXG4gICAgQEJvZHkoKSB1cGRhdGVDYW1wb0RpbmFtaWNvRHRvOiBQYXJ0aWFsPENyZWF0ZUNhbXBvRGluYW1pY29EdG8+LFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5jYW1wb0RpbmFtaWNvU2VydmljZS51cGRhdGUoaWQsIHVwZGF0ZUNhbXBvRGluYW1pY29EdG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB1bSBjYW1wbyBkaW7Dom1pY29cbiAgICovXG4gIEBEZWxldGUoJzppZCcpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ1JlbW92ZXIgY2FtcG8gZGluw6JtaWNvJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnQ2FtcG8gZGluw6JtaWNvIHJlbW92aWRvIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDQsIGRlc2NyaXB0aW9uOiAnQ2FtcG8gZGluw6JtaWNvIG7Do28gZW5jb250cmFkbycgfSlcbiAgYXN5bmMgcmVtb3ZlKEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FtcG9EaW5hbWljb1NlcnZpY2UucmVtb3ZlKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyBzY2hlbWEgYXRpdm8gZGUgdW0gdGlwbyBkZSBiZW5lZsOtY2lvXG4gICAqL1xuICBAR2V0KCdzY2hlbWEnKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ09idGVyIHNjaGVtYSBhdGl2byBkZSB1bSBiZW5lZsOtY2lvJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDIwMCwgZGVzY3JpcHRpb246ICdTY2hlbWEgcmV0b3JuYWRvIGNvbSBzdWNlc3NvJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwNCwgZGVzY3JpcHRpb246ICdUaXBvIGRlIGJlbmVmw61jaW8gbsOjbyBlbmNvbnRyYWRvJyB9KVxuICBhc3luYyBnZXRTY2hlbWFBdGl2byhcbiAgICBAUGFyYW0oJ3RpcG9CZW5lZmljaW9JZCcsIFBhcnNlVVVJRFBpcGUpIHRpcG9CZW5lZmljaW9JZDogc3RyaW5nLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5jYW1wb0RpbmFtaWNvU2VydmljZS5nZXRTY2hlbWFBdGl2byh0aXBvQmVuZWZpY2lvSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIGhpc3TDs3JpY28gZGUgdmVyc8O1ZXMgZG8gc2NoZW1hIGRlIHVtIHRpcG8gZGUgYmVuZWbDrWNpb1xuICAgKi9cbiAgQEdldCgnc2NoZW1hL2hpc3RvcmljbycpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ09idGVyIGhpc3TDs3JpY28gZGUgdmVyc8O1ZXMgZG8gc2NoZW1hJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDIwMCwgZGVzY3JpcHRpb246ICdIaXN0w7NyaWNvIHJldG9ybmFkbyBjb20gc3VjZXNzbycgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDQsIGRlc2NyaXB0aW9uOiAnVGlwbyBkZSBiZW5lZsOtY2lvIG7Do28gZW5jb250cmFkbycgfSlcbiAgYXN5bmMgZ2V0SGlzdG9yaWNvVmVyc29lcyhcbiAgICBAUGFyYW0oJ3RpcG9CZW5lZmljaW9JZCcsIFBhcnNlVVVJRFBpcGUpIHRpcG9CZW5lZmljaW9JZDogc3RyaW5nLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5jYW1wb0RpbmFtaWNvU2VydmljZS5nZXRIaXN0b3JpY29WZXJzb2VzKHRpcG9CZW5lZmljaW9JZCk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==