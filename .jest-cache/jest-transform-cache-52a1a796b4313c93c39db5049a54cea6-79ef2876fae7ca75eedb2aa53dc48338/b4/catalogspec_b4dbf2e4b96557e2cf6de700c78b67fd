ace3d40a1dc5eeb40133af2b3e97b8e1
"use strict";
/**
 * Testes para o catálogo de erros
 *
 * Valida a estrutura e funcionalidade do sistema
 * de catálogo de erros padronizado.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const catalog_1 = require("./catalog");
describe('Error Catalog', () => {
    describe('ERROR_CATALOG', () => {
        it('should have all required error definitions', () => {
            // Verificar se existem erros para cada categoria
            const categories = Object.values(catalog_1.ErrorCategory);
            categories.forEach(category => {
                const errorsInCategory = Object.values(catalog_1.ERROR_CATALOG)
                    .filter(error => error.category === category);
                expect(errorsInCategory.length).toBeGreaterThan(0);
            });
        });
        it('should have unique error codes', () => {
            const codes = Object.keys(catalog_1.ERROR_CATALOG);
            const uniqueCodes = new Set(codes);
            expect(codes.length).toBe(uniqueCodes.size);
        });
        it('should follow naming convention for error codes', () => {
            const codes = Object.keys(catalog_1.ERROR_CATALOG);
            const validPattern = /^(VAL|BEN|INT|FLO|SYS)_[A-Z]+_\d{3}$/;
            codes.forEach(code => {
                expect(code).toMatch(validPattern);
            });
        });
        it('should have valid HTTP status codes', () => {
            const validStatusCodes = [400, 401, 403, 404, 409, 422, 429, 500, 502, 503];
            Object.values(catalog_1.ERROR_CATALOG).forEach(error => {
                expect(validStatusCodes).toContain(error.httpStatus);
            });
        });
        it('should have non-empty messages', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach(error => {
                expect(error.message).toBeTruthy();
                expect(error.message.length).toBeGreaterThan(0);
            });
        });
        it('should have valid categories', () => {
            const validCategories = Object.values(catalog_1.ErrorCategory);
            Object.values(catalog_1.ERROR_CATALOG).forEach(error => {
                expect(validCategories).toContain(error.category);
            });
        });
        it('should have valid severities', () => {
            const validSeverities = Object.values(catalog_1.ErrorSeverity);
            Object.values(catalog_1.ERROR_CATALOG).forEach(error => {
                expect(validSeverities).toContain(error.severity);
            });
        });
    });
    describe('POSTGRES_ERROR_MAP', () => {
        it('should map common PostgreSQL error codes', () => {
            const expectedMappings = {
                '23503': 'SYS_FK_001',
                '23505': 'SYS_UNIQUE_001',
            };
            Object.entries(expectedMappings).forEach(([pgCode, catalogCode]) => {
                expect(catalog_1.POSTGRES_ERROR_MAP[pgCode]).toBe(catalogCode);
            });
        });
        it('should only map to existing catalog codes', () => {
            const catalogCodes = Object.keys(catalog_1.ERROR_CATALOG);
            Object.values(catalog_1.POSTGRES_ERROR_MAP).forEach(catalogCode => {
                expect(catalogCodes).toContain(catalogCode);
            });
        });
    });
    describe('Error Definition Structure', () => {
        it('should have required fields for each error', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(error).toHaveProperty('message');
                expect(error).toHaveProperty('httpStatus');
                expect(error).toHaveProperty('category');
                expect(error).toHaveProperty('severity');
            });
        });
        it('should have consistent severity mapping to HTTP status', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach(error => {
                switch (error.severity) {
                    case catalog_1.ErrorSeverity.CRITICAL:
                        expect([500, 503]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.HIGH:
                        expect([400, 403, 409, 422]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.MEDIUM:
                        expect([400, 404, 409, 429, 502]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.LOW:
                        expect([400, 404]).toContain(error.httpStatus);
                        break;
                }
            });
        });
    });
    describe('Validation Errors', () => {
        it('should have CPF validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_CPF_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_CPF_002']).toBeDefined();
        });
        it('should have NIS validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_NIS_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_NIS_002']).toBeDefined();
        });
        it('should have income validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_INCOME_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_INCOME_002']).toBeDefined();
        });
    });
    describe('Benefit Errors', () => {
        it('should have natalidade benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_NAT_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_NAT_002']).toBeDefined();
        });
        it('should have aluguel social benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_ALU_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_ALU_002']).toBeDefined();
        });
        it('should have generic benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_GEN_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_WF_001']).toBeDefined();
        });
    });
    describe('Integration Errors', () => {
        it('should have Azure integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_AZURE_001']).toBeDefined();
        });
        it('should have email integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_EMAIL_001']).toBeDefined();
        });
        it('should have database integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_DB_001']).toBeDefined();
        });
    });
    describe('Operational Flow Errors', () => {
        it('should have permission errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_PERM_001']).toBeDefined();
        });
        it('should have document errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_DOC_001']).toBeDefined();
        });
        it('should have deadline errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_DEADLINE_001']).toBeDefined();
        });
    });
    describe('System Errors', () => {
        it('should have database constraint errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_FK_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['SYS_UNIQUE_001']).toBeDefined();
        });
        it('should have rate limiting errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_RATE_001']).toBeDefined();
        });
        it('should have maintenance errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_MAINT_001']).toBeDefined();
        });
    });
    describe('Message Interpolation Support', () => {
        it('should have placeholder patterns in messages', () => {
            const messagesWithPlaceholders = [
                'VAL_CPF_002',
                'VAL_NIS_002',
                'VAL_AGE_001',
                'VAL_INCOME_002',
                'BEN_NAT_001',
                'BEN_NAT_002',
                'BEN_GEN_001',
                'BEN_WF_001',
                'INT_AZURE_001',
                'INT_EMAIL_001',
                'FLO_DOC_001',
                'FLO_DEADLINE_001',
                'SYS_RATE_001',
                'SYS_MAINT_001',
            ];
            messagesWithPlaceholders.forEach(code => {
                const error = catalog_1.ERROR_CATALOG[code];
                expect(error.message).toMatch(/\{\w+\}/);
            });
        });
    });
    describe('Legal References', () => {
        it('should have legal references for benefit errors', () => {
            const benefitErrors = Object.entries(catalog_1.ERROR_CATALOG)
                .filter(([code]) => code.startsWith('BEN_'))
                .map(([, error]) => error);
            benefitErrors.forEach(error => {
                if (error.legalReference) {
                    expect(error.legalReference).toBeTruthy();
                    expect(error.legalReference.length).toBeGreaterThan(0);
                }
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcZXhjZXB0aW9uc1xcZXJyb3ItY2F0YWxvZ1xcY2F0YWxvZy5zcGVjLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCx1Q0FNbUI7QUFFbkIsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDN0IsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDN0IsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxpREFBaUQ7WUFDakQsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyx1QkFBYSxDQUFDLENBQUM7WUFFaEQsVUFBVSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDNUIsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLHVCQUFhLENBQUM7cUJBQ2xELE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUFDLENBQUM7Z0JBRWhELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDeEMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyx1QkFBYSxDQUFDLENBQUM7WUFDekMsTUFBTSxXQUFXLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGlEQUFpRCxFQUFF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RUFBRTtRQUNoQyxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3pELE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsdUJBQWEsQ0FBQztpQkFDaEQsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDM0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU3QixhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUM1QixJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztvQkFDekIsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztvQkFDMUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6RCxDQUFDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcZXhjZXB0aW9uc1xcZXJyb3ItY2F0YWxvZ1xcY2F0YWxvZy5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGVzdGVzIHBhcmEgbyBjYXTDoWxvZ28gZGUgZXJyb3NcbiAqIFxuICogVmFsaWRhIGEgZXN0cnV0dXJhIGUgZnVuY2lvbmFsaWRhZGUgZG8gc2lzdGVtYVxuICogZGUgY2F0w6Fsb2dvIGRlIGVycm9zIHBhZHJvbml6YWRvLlxuICovXG5cbmltcG9ydCB7XG4gIEVSUk9SX0NBVEFMT0csXG4gIFBPU1RHUkVTX0VSUk9SX01BUCxcbiAgRXJyb3JDYXRlZ29yeSxcbiAgRXJyb3JTZXZlcml0eSxcbiAgRXJyb3JEZWZpbml0aW9uLFxufSBmcm9tICcuL2NhdGFsb2cnO1xuXG5kZXNjcmliZSgnRXJyb3IgQ2F0YWxvZycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ0VSUk9SX0NBVEFMT0cnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGFsbCByZXF1aXJlZCBlcnJvciBkZWZpbml0aW9ucycsICgpID0+IHtcbiAgICAgIC8vIFZlcmlmaWNhciBzZSBleGlzdGVtIGVycm9zIHBhcmEgY2FkYSBjYXRlZ29yaWFcbiAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBPYmplY3QudmFsdWVzKEVycm9yQ2F0ZWdvcnkpO1xuICAgICAgXG4gICAgICBjYXRlZ29yaWVzLmZvckVhY2goY2F0ZWdvcnkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvcnNJbkNhdGVnb3J5ID0gT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKVxuICAgICAgICAgIC5maWx0ZXIoZXJyb3IgPT4gZXJyb3IuY2F0ZWdvcnkgPT09IGNhdGVnb3J5KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChlcnJvcnNJbkNhdGVnb3J5Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgdW5pcXVlIGVycm9yIGNvZGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29kZXMgPSBPYmplY3Qua2V5cyhFUlJPUl9DQVRBTE9HKTtcbiAgICAgIGNvbnN0IHVuaXF1ZUNvZGVzID0gbmV3IFNldChjb2Rlcyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjb2Rlcy5sZW5ndGgpLnRvQmUodW5pcXVlQ29kZXMuc2l6ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZvbGxvdyBuYW1pbmcgY29udmVudGlvbiBmb3IgZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlcyA9IE9iamVjdC5rZXlzKEVSUk9SX0NBVEFMT0cpO1xuICAgICAgY29uc3QgdmFsaWRQYXR0ZXJuID0gL14oVkFMfEJFTnxJTlR8RkxPfFNZUylfW0EtWl0rX1xcZHszfSQvO1xuICAgICAgXG4gICAgICBjb2Rlcy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgICBleHBlY3QoY29kZSkudG9NYXRjaCh2YWxpZFBhdHRlcm4pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgdmFsaWQgSFRUUCBzdGF0dXMgY29kZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFN0YXR1c0NvZGVzID0gWzQwMCwgNDAxLCA0MDMsIDQwNCwgNDA5LCA0MjIsIDQyOSwgNTAwLCA1MDIsIDUwM107XG4gICAgICBcbiAgICAgIE9iamVjdC52YWx1ZXMoRVJST1JfQ0FUQUxPRykuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgIGV4cGVjdCh2YWxpZFN0YXR1c0NvZGVzKS50b0NvbnRhaW4oZXJyb3IuaHR0cFN0YXR1cyk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBub24tZW1wdHkgbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgICBPYmplY3QudmFsdWVzKEVSUk9SX0NBVEFMT0cpLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZhbGlkIGNhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZENhdGVnb3JpZXMgPSBPYmplY3QudmFsdWVzKEVycm9yQ2F0ZWdvcnkpO1xuICAgICAgXG4gICAgICBPYmplY3QudmFsdWVzKEVSUk9SX0NBVEFMT0cpLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICBleHBlY3QodmFsaWRDYXRlZ29yaWVzKS50b0NvbnRhaW4oZXJyb3IuY2F0ZWdvcnkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgdmFsaWQgc2V2ZXJpdGllcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkU2V2ZXJpdGllcyA9IE9iamVjdC52YWx1ZXMoRXJyb3JTZXZlcml0eSk7XG4gICAgICBcbiAgICAgIE9iamVjdC52YWx1ZXMoRVJST1JfQ0FUQUxPRykuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgIGV4cGVjdCh2YWxpZFNldmVyaXRpZXMpLnRvQ29udGFpbihlcnJvci5zZXZlcml0eSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BPU1RHUkVTX0VSUk9SX01BUCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1hcCBjb21tb24gUG9zdGdyZVNRTCBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGV4cGVjdGVkTWFwcGluZ3MgPSB7XG4gICAgICAgICcyMzUwMyc6ICdTWVNfRktfMDAxJyxcbiAgICAgICAgJzIzNTA1JzogJ1NZU19VTklRVUVfMDAxJyxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIE9iamVjdC5lbnRyaWVzKGV4cGVjdGVkTWFwcGluZ3MpLmZvckVhY2goKFtwZ0NvZGUsIGNhdGFsb2dDb2RlXSkgPT4ge1xuICAgICAgICBleHBlY3QoUE9TVEdSRVNfRVJST1JfTUFQW3BnQ29kZV0pLnRvQmUoY2F0YWxvZ0NvZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9ubHkgbWFwIHRvIGV4aXN0aW5nIGNhdGFsb2cgY29kZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYXRhbG9nQ29kZXMgPSBPYmplY3Qua2V5cyhFUlJPUl9DQVRBTE9HKTtcbiAgICAgIFxuICAgICAgT2JqZWN0LnZhbHVlcyhQT1NUR1JFU19FUlJPUl9NQVApLmZvckVhY2goY2F0YWxvZ0NvZGUgPT4ge1xuICAgICAgICBleHBlY3QoY2F0YWxvZ0NvZGVzKS50b0NvbnRhaW4oY2F0YWxvZ0NvZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBEZWZpbml0aW9uIFN0cnVjdHVyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcmVxdWlyZWQgZmllbGRzIGZvciBlYWNoIGVycm9yJywgKCkgPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcjogRXJyb3JEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0hhdmVQcm9wZXJ0eSgnaHR0cFN0YXR1cycpO1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvSGF2ZVByb3BlcnR5KCdjYXRlZ29yeScpO1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvSGF2ZVByb3BlcnR5KCdzZXZlcml0eScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgY29uc2lzdGVudCBzZXZlcml0eSBtYXBwaW5nIHRvIEhUVFAgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgICAgc3dpdGNoIChlcnJvci5zZXZlcml0eSkge1xuICAgICAgICAgIGNhc2UgRXJyb3JTZXZlcml0eS5DUklUSUNBTDpcbiAgICAgICAgICAgIGV4cGVjdChbNTAwLCA1MDNdKS50b0NvbnRhaW4oZXJyb3IuaHR0cFN0YXR1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEVycm9yU2V2ZXJpdHkuSElHSDpcbiAgICAgICAgICAgIGV4cGVjdChbNDAwLCA0MDMsIDQwOSwgNDIyXSkudG9Db250YWluKGVycm9yLmh0dHBTdGF0dXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBFcnJvclNldmVyaXR5Lk1FRElVTTpcbiAgICAgICAgICAgIGV4cGVjdChbNDAwLCA0MDQsIDQwOSwgNDI5LCA1MDJdKS50b0NvbnRhaW4oZXJyb3IuaHR0cFN0YXR1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEVycm9yU2V2ZXJpdHkuTE9XOlxuICAgICAgICAgICAgZXhwZWN0KFs0MDAsIDQwNF0pLnRvQ29udGFpbihlcnJvci5odHRwU3RhdHVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1ZhbGlkYXRpb24gRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBDUEYgdmFsaWRhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snVkFMX0NQRl8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydWQUxfQ1BGXzAwMiddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIE5JUyB2YWxpZGF0aW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydWQUxfTklTXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1ZBTF9OSVNfMDAyJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgaW5jb21lIHZhbGlkYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1ZBTF9JTkNPTUVfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snVkFMX0lOQ09NRV8wMDInXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0JlbmVmaXQgRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBuYXRhbGlkYWRlIGJlbmVmaXQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0JFTl9OQVRfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snQkVOX05BVF8wMDInXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBhbHVndWVsIHNvY2lhbCBiZW5lZml0IGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydCRU5fQUxVXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0JFTl9BTFVfMDAyJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZ2VuZXJpYyBiZW5lZml0IGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydCRU5fR0VOXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0JFTl9XRl8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ludGVncmF0aW9uIEVycm9ycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgQXp1cmUgaW50ZWdyYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0lOVF9BWlVSRV8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBlbWFpbCBpbnRlZ3JhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snSU5UX0VNQUlMXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGRhdGFiYXNlIGludGVncmF0aW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydJTlRfREJfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPcGVyYXRpb25hbCBGbG93IEVycm9ycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcGVybWlzc2lvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snRkxPX1BFUk1fMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZG9jdW1lbnQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0ZMT19ET0NfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZGVhZGxpbmUgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0ZMT19ERUFETElORV8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N5c3RlbSBFcnJvcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGRhdGFiYXNlIGNvbnN0cmFpbnQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1NZU19GS18wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydTWVNfVU5JUVVFXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHJhdGUgbGltaXRpbmcgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1NZU19SQVRFXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIG1haW50ZW5hbmNlIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydTWVNfTUFJTlRfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNZXNzYWdlIEludGVycG9sYXRpb24gU3VwcG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcGxhY2Vob2xkZXIgcGF0dGVybnMgaW4gbWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlc1dpdGhQbGFjZWhvbGRlcnMgPSBbXG4gICAgICAgICdWQUxfQ1BGXzAwMicsXG4gICAgICAgICdWQUxfTklTXzAwMicsXG4gICAgICAgICdWQUxfQUdFXzAwMScsXG4gICAgICAgICdWQUxfSU5DT01FXzAwMicsXG4gICAgICAgICdCRU5fTkFUXzAwMScsXG4gICAgICAgICdCRU5fTkFUXzAwMicsXG4gICAgICAgICdCRU5fR0VOXzAwMScsXG4gICAgICAgICdCRU5fV0ZfMDAxJyxcbiAgICAgICAgJ0lOVF9BWlVSRV8wMDEnLFxuICAgICAgICAnSU5UX0VNQUlMXzAwMScsXG4gICAgICAgICdGTE9fRE9DXzAwMScsXG4gICAgICAgICdGTE9fREVBRExJTkVfMDAxJyxcbiAgICAgICAgJ1NZU19SQVRFXzAwMScsXG4gICAgICAgICdTWVNfTUFJTlRfMDAxJyxcbiAgICAgIF07XG4gICAgICBcbiAgICAgIG1lc3NhZ2VzV2l0aFBsYWNlaG9sZGVycy5mb3JFYWNoKGNvZGUgPT4ge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVSUk9SX0NBVEFMT0dbY29kZV07XG4gICAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b01hdGNoKC9cXHtcXHcrXFx9Lyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0xlZ2FsIFJlZmVyZW5jZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIGxlZ2FsIHJlZmVyZW5jZXMgZm9yIGJlbmVmaXQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgY29uc3QgYmVuZWZpdEVycm9ycyA9IE9iamVjdC5lbnRyaWVzKEVSUk9SX0NBVEFMT0cpXG4gICAgICAgIC5maWx0ZXIoKFtjb2RlXSkgPT4gY29kZS5zdGFydHNXaXRoKCdCRU5fJykpXG4gICAgICAgIC5tYXAoKFssIGVycm9yXSkgPT4gZXJyb3IpO1xuICAgICAgXG4gICAgICBiZW5lZml0RXJyb3JzLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgICBpZiAoZXJyb3IubGVnYWxSZWZlcmVuY2UpIHtcbiAgICAgICAgICBleHBlY3QoZXJyb3IubGVnYWxSZWZlcmVuY2UpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgICBleHBlY3QoZXJyb3IubGVnYWxSZWZlcmVuY2UubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==