f929909129adbdf70e0a269333333e85
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AuditorOuAdmin = exports.OperadorOuAdmin = exports.ApenasAdmin = exports.VerificarUnidade = exports.PerfisPermitidos = void 0;
const common_1 = require("@nestjs/common");
const pagamento_access_guard_1 = require("../guards/pagamento-access.guard");
/**
 * Decorador para definir perfis permitidos para acessar um endpoint
 *
 * @param perfis Lista de perfis permitidos
 * @returns Decorador para aplicar em controllers ou métodos
 *
 * @example
 * @PerfisPermitidos('admin', 'operador')
 * async findAll() { ... }
 */
const PerfisPermitidos = (...perfis) => (0, common_1.SetMetadata)(pagamento_access_guard_1.PERFIS_KEY, perfis);
exports.PerfisPermitidos = PerfisPermitidos;
/**
 * Decorador para definir se deve verificar a unidade do usuário
 *
 * @param verificar Se deve verificar a unidade
 * @returns Decorador para aplicar em controllers ou métodos
 *
 * @example
 * @VerificarUnidade(true)
 * async findOne(@Param('id') id: string) { ... }
 */
const VerificarUnidade = (verificar = true) => (0, common_1.SetMetadata)(pagamento_access_guard_1.UNIDADES_KEY, verificar);
exports.VerificarUnidade = VerificarUnidade;
/**
 * Decorador para definir acesso apenas para administradores
 *
 * @returns Decorador para aplicar em controllers ou métodos
 *
 * @example
 * @ApenasAdmin()
 * async remove(@Param('id') id: string) { ... }
 */
const ApenasAdmin = () => (0, exports.PerfisPermitidos)('admin', 'super_admin');
exports.ApenasAdmin = ApenasAdmin;
/**
 * Decorador para definir acesso apenas para operadores e administradores
 *
 * @returns Decorador para aplicar em controllers ou métodos
 *
 * @example
 * @OperadorOuAdmin()
 * async update(@Param('id') id: string, @Body() updateDto: UpdateDto) { ... }
 */
const OperadorOuAdmin = () => (0, exports.PerfisPermitidos)('operador', 'admin', 'super_admin');
exports.OperadorOuAdmin = OperadorOuAdmin;
/**
 * Decorador para definir acesso apenas para auditores e administradores
 *
 * @returns Decorador para aplicar em controllers ou métodos
 *
 * @example
 * @AuditorOuAdmin()
 * async getLogs() { ... }
 */
const AuditorOuAdmin = () => (0, exports.PerfisPermitidos)('auditor', 'admin', 'super_admin');
exports.AuditorOuAdmin = AuditorOuAdmin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcZGVjb3JhdG9yc1xccGFnYW1lbnRvLWFjY2Vzcy5kZWNvcmF0b3IudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQTZDO0FBQzdDLDZFQUE0RTtBQUU1RTs7Ozs7Ozs7O0dBU0c7QUFDSSxNQUFNLGdCQUFnQixHQUFHLENBQUMsR0FBRyxNQUFnQixFQUFFLEVBQUUsQ0FDdEQsSUFBQSxvQkFBVyxFQUFDLG1DQUFVLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFEckIsUUFBQSxnQkFBZ0Isb0JBQ0s7QUFFbEM7Ozs7Ozs7OztHQVNHO0FBQ0ksTUFBTSxnQkFBZ0IsR0FBRyxDQUFDLFlBQXFCLElBQUksRUFBRSxFQUFFLENBQzVELElBQUEsb0JBQVcsRUFBQyxxQ0FBWSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBRDFCLFFBQUEsZ0JBQWdCLG9CQUNVO0FBRXZDOzs7Ozs7OztHQVFHO0FBQ0ksTUFBTSxXQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBQSx3QkFBZ0IsRUFBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFBN0QsUUFBQSxXQUFXLGVBQWtEO0FBRTFFOzs7Ozs7OztHQVFHO0FBQ0ksTUFBTSxlQUFlLEdBQUcsR0FBRyxFQUFFLENBQ2xDLElBQUEsd0JBQWdCLEVBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztBQUQxQyxRQUFBLGVBQWUsbUJBQzJCO0FBRXZEOzs7Ozs7OztHQVFHO0FBQ0ksTUFBTSxjQUFjLEdBQUcsR0FBRyxFQUFFLENBQ2pDLElBQUEsd0JBQWdCLEVBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxhQUFhLENBQUMsQ0FBQztBQUR6QyxRQUFBLGNBQWMsa0JBQzJCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxwYWdhbWVudG9cXGRlY29yYXRvcnNcXHBhZ2FtZW50by1hY2Nlc3MuZGVjb3JhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNldE1ldGFkYXRhIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgUEVSRklTX0tFWSwgVU5JREFERVNfS0VZIH0gZnJvbSAnLi4vZ3VhcmRzL3BhZ2FtZW50by1hY2Nlc3MuZ3VhcmQnO1xuXG4vKipcbiAqIERlY29yYWRvciBwYXJhIGRlZmluaXIgcGVyZmlzIHBlcm1pdGlkb3MgcGFyYSBhY2Vzc2FyIHVtIGVuZHBvaW50XG4gKlxuICogQHBhcmFtIHBlcmZpcyBMaXN0YSBkZSBwZXJmaXMgcGVybWl0aWRvc1xuICogQHJldHVybnMgRGVjb3JhZG9yIHBhcmEgYXBsaWNhciBlbSBjb250cm9sbGVycyBvdSBtw6l0b2Rvc1xuICpcbiAqIEBleGFtcGxlXG4gKiBAUGVyZmlzUGVybWl0aWRvcygnYWRtaW4nLCAnb3BlcmFkb3InKVxuICogYXN5bmMgZmluZEFsbCgpIHsgLi4uIH1cbiAqL1xuZXhwb3J0IGNvbnN0IFBlcmZpc1Blcm1pdGlkb3MgPSAoLi4ucGVyZmlzOiBzdHJpbmdbXSkgPT5cbiAgU2V0TWV0YWRhdGEoUEVSRklTX0tFWSwgcGVyZmlzKTtcblxuLyoqXG4gKiBEZWNvcmFkb3IgcGFyYSBkZWZpbmlyIHNlIGRldmUgdmVyaWZpY2FyIGEgdW5pZGFkZSBkbyB1c3XDoXJpb1xuICpcbiAqIEBwYXJhbSB2ZXJpZmljYXIgU2UgZGV2ZSB2ZXJpZmljYXIgYSB1bmlkYWRlXG4gKiBAcmV0dXJucyBEZWNvcmFkb3IgcGFyYSBhcGxpY2FyIGVtIGNvbnRyb2xsZXJzIG91IG3DqXRvZG9zXG4gKlxuICogQGV4YW1wbGVcbiAqIEBWZXJpZmljYXJVbmlkYWRlKHRydWUpXG4gKiBhc3luYyBmaW5kT25lKEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nKSB7IC4uLiB9XG4gKi9cbmV4cG9ydCBjb25zdCBWZXJpZmljYXJVbmlkYWRlID0gKHZlcmlmaWNhcjogYm9vbGVhbiA9IHRydWUpID0+XG4gIFNldE1ldGFkYXRhKFVOSURBREVTX0tFWSwgdmVyaWZpY2FyKTtcblxuLyoqXG4gKiBEZWNvcmFkb3IgcGFyYSBkZWZpbmlyIGFjZXNzbyBhcGVuYXMgcGFyYSBhZG1pbmlzdHJhZG9yZXNcbiAqXG4gKiBAcmV0dXJucyBEZWNvcmFkb3IgcGFyYSBhcGxpY2FyIGVtIGNvbnRyb2xsZXJzIG91IG3DqXRvZG9zXG4gKlxuICogQGV4YW1wbGVcbiAqIEBBcGVuYXNBZG1pbigpXG4gKiBhc3luYyByZW1vdmUoQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcpIHsgLi4uIH1cbiAqL1xuZXhwb3J0IGNvbnN0IEFwZW5hc0FkbWluID0gKCkgPT4gUGVyZmlzUGVybWl0aWRvcygnYWRtaW4nLCAnc3VwZXJfYWRtaW4nKTtcblxuLyoqXG4gKiBEZWNvcmFkb3IgcGFyYSBkZWZpbmlyIGFjZXNzbyBhcGVuYXMgcGFyYSBvcGVyYWRvcmVzIGUgYWRtaW5pc3RyYWRvcmVzXG4gKlxuICogQHJldHVybnMgRGVjb3JhZG9yIHBhcmEgYXBsaWNhciBlbSBjb250cm9sbGVycyBvdSBtw6l0b2Rvc1xuICpcbiAqIEBleGFtcGxlXG4gKiBAT3BlcmFkb3JPdUFkbWluKClcbiAqIGFzeW5jIHVwZGF0ZShAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZywgQEJvZHkoKSB1cGRhdGVEdG86IFVwZGF0ZUR0bykgeyAuLi4gfVxuICovXG5leHBvcnQgY29uc3QgT3BlcmFkb3JPdUFkbWluID0gKCkgPT5cbiAgUGVyZmlzUGVybWl0aWRvcygnb3BlcmFkb3InLCAnYWRtaW4nLCAnc3VwZXJfYWRtaW4nKTtcblxuLyoqXG4gKiBEZWNvcmFkb3IgcGFyYSBkZWZpbmlyIGFjZXNzbyBhcGVuYXMgcGFyYSBhdWRpdG9yZXMgZSBhZG1pbmlzdHJhZG9yZXNcbiAqXG4gKiBAcmV0dXJucyBEZWNvcmFkb3IgcGFyYSBhcGxpY2FyIGVtIGNvbnRyb2xsZXJzIG91IG3DqXRvZG9zXG4gKlxuICogQGV4YW1wbGVcbiAqIEBBdWRpdG9yT3VBZG1pbigpXG4gKiBhc3luYyBnZXRMb2dzKCkgeyAuLi4gfVxuICovXG5leHBvcnQgY29uc3QgQXVkaXRvck91QWRtaW4gPSAoKSA9PlxuICBQZXJmaXNQZXJtaXRpZG9zKCdhdWRpdG9yJywgJ2FkbWluJywgJ3N1cGVyX2FkbWluJyk7XG4iXSwidmVyc2lvbiI6M30=