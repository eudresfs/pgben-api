1d754965925112cb52be444f9041b800
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeterminacaoJudicialController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const permission_guard_1 = require("../../../auth/guards/permission.guard");
const requires_permission_decorator_1 = require("../../../auth/decorators/requires-permission.decorator");
const determinacao_judicial_consolidado_service_1 = require("../services/determinacao-judicial-consolidado.service");
const determinacao_judicial_entity_1 = require("../../../entities/determinacao-judicial.entity");
const determinacao_judicial_dto_1 = require("../dtos/determinacao-judicial.dto");
/**
 * DTO para marcar determinação como cumprida
 */
class CumprimentoDeterminacaoDto {
    observacao;
}
/**
 * Controller de Determinações Judiciais
 *
 * Responsável por expor os endpoints de gerenciamento das determinações judiciais
 * relacionadas a processos e solicitações de benefício.
 */
let DeterminacaoJudicialController = class DeterminacaoJudicialController {
    determinacaoJudicialService;
    constructor(determinacaoJudicialService) {
        this.determinacaoJudicialService = determinacaoJudicialService;
    }
    /**
     * Cria uma nova determinação judicial
     * @param createDeterminacaoDto Dados da determinação
     * @param req Requisição
     * @returns Determinação criada
     */
    async create(createDeterminacaoDto, req) {
        return this.determinacaoJudicialService.create(createDeterminacaoDto, req.user.id);
    }
    /**
     * Busca todas as determinações judiciais
     * @param includeInactive Se deve incluir determinações inativas
     * @returns Lista de determinações
     */
    async findAll(page, limit, processoJudicialId, solicitacaoId, cidadaoId, tipo, cumprida, termo) {
        return this.determinacaoJudicialService.findAll({
            page,
            limit,
            processoJudicialId,
            solicitacaoId,
            cidadaoId,
            tipo: tipo,
            cumprida,
            termo,
        });
    }
    /**
     * Busca uma determinação pelo ID
     * @param id ID da determinação
     * @returns Determinação
     */
    async findById(id) {
        return this.determinacaoJudicialService.findById(id);
    }
    /**
     * Busca determinações por processo judicial
     * @param processoId ID do processo judicial
     * @param includeInactive Se deve incluir determinações inativas
     * @returns Lista de determinações
     */
    async findByProcesso(processoId) {
        return this.determinacaoJudicialService.findByProcessoJudicial(processoId);
    }
    /**
     * Busca determinações por cidadão
     * @param cidadaoId ID do cidadão
     * @param includeInactive Se deve incluir determinações inativas
     * @returns Lista de determinações
     */
    async findByCidadao(cidadaoId) {
        return this.determinacaoJudicialService.findByCidadao(cidadaoId);
    }
    /**
     * Busca determinações por solicitação
     * @param solicitacaoId ID da solicitação
     * @param includeInactive Se deve incluir determinações inativas
     * @returns Lista de determinações
     */
    async findBySolicitacao(solicitacaoId) {
        return this.determinacaoJudicialService.findBySolicitacao(solicitacaoId);
    }
    async findPendentes() {
        return this.determinacaoJudicialService.findPendentes();
    }
    /**
     * Atualiza uma determinação
     * @param id ID da determinação
     * @param updateDeterminacaoDto Dados para atualização
     * @param req Requisição
     * @returns Determinação atualizada
     */
    async update(id, updateDeterminacaoDto, req) {
        return this.determinacaoJudicialService.update(id, updateDeterminacaoDto, req.user.id);
    }
    /**
     * Marca uma determinação como cumprida
     * @param id ID da determinação
     * @param cumprimentoDto Dados do cumprimento
     * @param req Requisição
     * @returns Determinação atualizada
     */
    async marcarComoCumprida(id, body, req) {
        return this.determinacaoJudicialService.marcarComoCumprida(id, body.observacao, req.user.id);
    }
    async toggleAtivo(id, req) {
        return this.determinacaoJudicialService.toggleAtivo(id, req.user.id);
    }
    /**
     * Remove uma determinação
     * @param id ID da determinação
     * @returns void
     */
    async remove(id) {
        return this.determinacaoJudicialService.remove(id);
    }
};
exports.DeterminacaoJudicialController = DeterminacaoJudicialController;
__decorate([
    (0, common_1.Post)(),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.criar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Cria uma nova determinação judicial',
        description: 'Cria uma determinação judicial relacionada a um processo judicial.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Determinação criada com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof determinacao_judicial_dto_1.CreateDeterminacaoJudicialDto !== "undefined" && determinacao_judicial_dto_1.CreateDeterminacaoJudicialDto) === "function" ? _b : Object, Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], DeterminacaoJudicialController.prototype, "create", null);
__decorate([
    (0, common_1.Get)(),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.listar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca todas as determinações judiciais',
        description: 'Retorna a lista de todas as determinações judiciais.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações retornada com sucesso',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __param(0, (0, common_1.Query)('page')),
    __param(1, (0, common_1.Query)('limit')),
    __param(2, (0, common_1.Query)('processoJudicialId')),
    __param(3, (0, common_1.Query)('solicitacaoId')),
    __param(4, (0, common_1.Query)('cidadaoId')),
    __param(5, (0, common_1.Query)('tipo')),
    __param(6, (0, common_1.Query)('cumprida')),
    __param(7, (0, common_1.Query)('termo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Number, Number, String, String, String, String, Boolean, String]),
    __metadata("design:returntype", Promise)
], DeterminacaoJudicialController.prototype, "findAll", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.visualizar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca uma determinação pelo ID',
        description: 'Retorna os detalhes de uma determinação judicial específica.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação encontrada com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], DeterminacaoJudicialController.prototype, "findById", null);
__decorate([
    (0, common_1.Get)('processo/:processoId'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.listar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca determinações por processo judicial',
        description: 'Retorna a lista de determinações judiciais relacionadas a um processo específico.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações retornada com sucesso',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __param(0, (0, common_1.Param)('processoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], DeterminacaoJudicialController.prototype, "findByProcesso", null);
__decorate([
    (0, common_1.Get)('cidadao/:cidadaoId'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.listar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca determinações por cidadão',
        description: 'Retorna a lista de determinações judiciais relacionadas a um cidadão específico.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações retornada com sucesso',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __param(0, (0, common_1.Param)('cidadaoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], DeterminacaoJudicialController.prototype, "findByCidadao", null);
__decorate([
    (0, common_1.Get)('solicitacao/:solicitacaoId'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.listar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca determinações por solicitação',
        description: 'Retorna a lista de determinações judiciais relacionadas a uma solicitação específica.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações retornada com sucesso',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __param(0, (0, common_1.Param)('solicitacaoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], DeterminacaoJudicialController.prototype, "findBySolicitacao", null);
__decorate([
    (0, common_1.Get)('pendentes'),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar determinações pendentes de cumprimento' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações pendentes',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], DeterminacaoJudicialController.prototype, "findPendentes", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.atualizar-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Atualiza uma determinação',
        description: 'Atualiza os dados de uma determinação judicial existente.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação atualizada com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_j = typeof determinacao_judicial_dto_1.UpdateDeterminacaoJudicialDto !== "undefined" && determinacao_judicial_dto_1.UpdateDeterminacaoJudicialDto) === "function" ? _j : Object, Object]),
    __metadata("design:returntype", typeof (_k = typeof Promise !== "undefined" && Promise) === "function" ? _k : Object)
], DeterminacaoJudicialController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':id/cumprir'),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.cumprir-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Marca uma determinação como cumprida',
        description: 'Atualiza o status de uma determinação judicial para cumprida.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação marcada como cumprida com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, CumprimentoDeterminacaoDto, Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], DeterminacaoJudicialController.prototype, "marcarComoCumprida", null);
__decorate([
    (0, common_1.Patch)(':id/ativar'),
    (0, swagger_1.ApiOperation)({ summary: 'Ativar ou desativar uma determinação judicial' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ID da determinação judicial' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação judicial atualizada',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Determinação judicial não encontrada',
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], DeterminacaoJudicialController.prototype, "toggleAtivo", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, common_1.HttpCode)(common_1.HttpStatus.NO_CONTENT),
    (0, requires_permission_decorator_1.RequiresPermission)({ permissionName: 'judicial.remover-determinacao' }),
    (0, swagger_1.ApiOperation)({
        summary: 'Remove uma determinação',
        description: 'Remove permanentemente uma determinação judicial.',
    }),
    (0, swagger_1.ApiResponse)({
        status: 204,
        description: 'Determinação removida com sucesso',
    }),
    __param(0, (0, common_1.Param)('id', common_1.ParseUUIDPipe)),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_o = typeof Promise !== "undefined" && Promise) === "function" ? _o : Object)
], DeterminacaoJudicialController.prototype, "remove", null);
exports.DeterminacaoJudicialController = DeterminacaoJudicialController = __decorate([
    (0, swagger_1.ApiTags)('Solicitação'),
    (0, common_1.Controller)('judicial/determinacoes'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, permission_guard_1.PermissionGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof determinacao_judicial_consolidado_service_1.DeterminacaoJudicialConsolidadoService !== "undefined" && determinacao_judicial_consolidado_service_1.DeterminacaoJudicialConsolidadoService) === "function" ? _a : Object])
], DeterminacaoJudicialController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGp1ZGljaWFsXFxjb250cm9sbGVyc1xcZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQWN3QjtBQUN4Qiw2Q0FNeUI7QUFDekIsd0VBQW1FO0FBQ25FLDRFQUF3RTtBQUN4RSwwR0FBNEY7QUFDNUYscUhBQStHO0FBQy9HLGlHQUFzRjtBQUN0RixpRkFHMkM7QUFFM0M7O0dBRUc7QUFDSCxNQUFNLDBCQUEwQjtJQUM5QixVQUFVLENBQVM7Q0FDcEI7QUFFRDs7Ozs7R0FLRztBQUtJLElBQU0sOEJBQThCLEdBQXBDLE1BQU0sOEJBQThCO0lBRXRCO0lBRG5CLFlBQ21CLDJCQUFtRTtRQUFuRSxnQ0FBMkIsR0FBM0IsMkJBQTJCLENBQXdDO0lBQ25GLENBQUM7SUFFSjs7Ozs7T0FLRztJQWFHLEFBQU4sS0FBSyxDQUFDLE1BQU0sQ0FDRixxQkFBb0QsRUFDckQsR0FBUTtRQUVmLE9BQU8sSUFBSSxDQUFDLDJCQUEyQixDQUFDLE1BQU0sQ0FDNUMscUJBQXFCLEVBQ3JCLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUNaLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7T0FJRztJQVlHLEFBQU4sS0FBSyxDQUFDLE9BQU8sQ0FDSSxJQUFhLEVBQ1osS0FBYyxFQUNELGtCQUEyQixFQUNoQyxhQUFzQixFQUMxQixTQUFrQixFQUN2QixJQUFhLEVBQ1QsUUFBa0IsRUFDckIsS0FBYztRQUU5QixPQUFPLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxPQUFPLENBQUM7WUFDOUMsSUFBSTtZQUNKLEtBQUs7WUFDTCxrQkFBa0I7WUFDbEIsYUFBYTtZQUNiLFNBQVM7WUFDVCxJQUFJLEVBQUUsSUFBVztZQUNqQixRQUFRO1lBQ1IsS0FBSztTQUNOLENBQUMsQ0FBQztJQUNMLENB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RSxtQ0FBbUM7S0FDakQsQ0FBQztJQUNZLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxFQUFFLHNCQUFhLENBQUMsQ0FBQTs7O3dEQUFjLE9BQU8sb0JBQVAsT0FBTzs0REFFNUQ7eUNBbFJVLDhCQUE4QjtJQUoxQyxJQUFBLGlCQUFPLEVBQUMsYUFBYSxDQUFDO0lBQ3RCLElBQUEsbUJBQVUsRUFBQyx3QkFBd0IsQ0FBQztJQUNwQyxJQUFBLGtCQUFTLEVBQUMsNkJBQVksRUFBRSxrQ0FBZSxDQUFDO0lBQ3hDLElBQUEsdUJBQWEsR0FBRTt5REFHa0Msa0ZBQXNDLG9CQUF0QyxrRkFBc0M7R0FGM0UsOEJBQThCLENBbVIxQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcanVkaWNpYWxcXGNvbnRyb2xsZXJzXFxkZXRlcm1pbmFjYW8tanVkaWNpYWwuY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250cm9sbGVyLFxuICBHZXQsXG4gIFBvc3QsXG4gIEJvZHksXG4gIFBhcmFtLFxuICBQYXJzZVVVSURQaXBlLFxuICBQYXRjaCxcbiAgRGVsZXRlLFxuICBVc2VHdWFyZHMsXG4gIFJlcSxcbiAgSHR0cENvZGUsXG4gIEh0dHBTdGF0dXMsXG4gIFF1ZXJ5LFxufSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQge1xuICBBcGlCZWFyZXJBdXRoLFxuICBBcGlPcGVyYXRpb24sXG4gIEFwaVBhcmFtLFxuICBBcGlSZXNwb25zZSxcbiAgQXBpVGFncyxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFBlcm1pc3Npb25HdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL3Blcm1pc3Npb24uZ3VhcmQnO1xuaW1wb3J0IHsgUmVxdWlyZXNQZXJtaXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9kZWNvcmF0b3JzL3JlcXVpcmVzLXBlcm1pc3Npb24uZGVjb3JhdG9yJztcbmltcG9ydCB7IERldGVybWluYWNhb0p1ZGljaWFsQ29uc29saWRhZG9TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLWNvbnNvbGlkYWRvLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGV0ZXJtaW5hY2FvSnVkaWNpYWwgfSBmcm9tICcuLi8uLi8uLi9lbnRpdGllcy9kZXRlcm1pbmFjYW8tanVkaWNpYWwuZW50aXR5JztcbmltcG9ydCB7XG4gIENyZWF0ZURldGVybWluYWNhb0p1ZGljaWFsRHRvLFxuICBVcGRhdGVEZXRlcm1pbmFjYW9KdWRpY2lhbER0byxcbn0gZnJvbSAnLi4vZHRvcy9kZXRlcm1pbmFjYW8tanVkaWNpYWwuZHRvJztcblxuLyoqXG4gKiBEVE8gcGFyYSBtYXJjYXIgZGV0ZXJtaW5hw6fDo28gY29tbyBjdW1wcmlkYVxuICovXG5jbGFzcyBDdW1wcmltZW50b0RldGVybWluYWNhb0R0byB7XG4gIG9ic2VydmFjYW86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDb250cm9sbGVyIGRlIERldGVybWluYcOnw7VlcyBKdWRpY2lhaXNcbiAqXG4gKiBSZXNwb25zw6F2ZWwgcG9yIGV4cG9yIG9zIGVuZHBvaW50cyBkZSBnZXJlbmNpYW1lbnRvIGRhcyBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzXG4gKiByZWxhY2lvbmFkYXMgYSBwcm9jZXNzb3MgZSBzb2xpY2l0YcOnw7VlcyBkZSBiZW5lZsOtY2lvLlxuICovXG5AQXBpVGFncygnU29saWNpdGHDp8OjbycpXG5AQ29udHJvbGxlcignanVkaWNpYWwvZGV0ZXJtaW5hY29lcycpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZCwgUGVybWlzc2lvbkd1YXJkKVxuQEFwaUJlYXJlckF1dGgoKVxuZXhwb3J0IGNsYXNzIERldGVybWluYWNhb0p1ZGljaWFsQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbENvbnNvbGlkYWRvU2VydmljZSxcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBDcmlhIHVtYSBub3ZhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBjcmVhdGVEZXRlcm1pbmFjYW9EdG8gRGFkb3MgZGEgZGV0ZXJtaW5hw6fDo29cbiAgICogQHBhcmFtIHJlcSBSZXF1aXNpw6fDo29cbiAgICogQHJldHVybnMgRGV0ZXJtaW5hw6fDo28gY3JpYWRhXG4gICAqL1xuICBAUG9zdCgpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oeyBwZXJtaXNzaW9uTmFtZTogJ2p1ZGljaWFsLmNyaWFyLWRldGVybWluYWNhbycgfSlcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0NyaWEgdW1hIG5vdmEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ0NyaWEgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsIHJlbGFjaW9uYWRhIGEgdW0gcHJvY2Vzc28ganVkaWNpYWwuJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcbiAgICBkZXNjcmlwdGlvbjogJ0RldGVybWluYcOnw6NvIGNyaWFkYSBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogRGV0ZXJtaW5hY2FvSnVkaWNpYWwsXG4gIH0pXG4gIGFzeW5jIGNyZWF0ZShcbiAgICBAQm9keSgpIGNyZWF0ZURldGVybWluYWNhb0R0bzogQ3JlYXRlRGV0ZXJtaW5hY2FvSnVkaWNpYWxEdG8sXG4gICAgQFJlcSgpIHJlcTogYW55LFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlLmNyZWF0ZShcbiAgICAgIGNyZWF0ZURldGVybWluYWNhb0R0byxcbiAgICAgIHJlcS51c2VyLmlkLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQnVzY2EgdG9kYXMgYXMgZGV0ZXJtaW5hw6fDtWVzIGp1ZGljaWFpc1xuICAgKiBAcGFyYW0gaW5jbHVkZUluYWN0aXZlIFNlIGRldmUgaW5jbHVpciBkZXRlcm1pbmHDp8O1ZXMgaW5hdGl2YXNcbiAgICogQHJldHVybnMgTGlzdGEgZGUgZGV0ZXJtaW5hw6fDtWVzXG4gICAqL1xuICBAR2V0KClcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7IHBlcm1pc3Npb25OYW1lOiAnanVkaWNpYWwubGlzdGFyLWRldGVybWluYWNhbycgfSlcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0J1c2NhIHRvZGFzIGFzIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnUmV0b3JuYSBhIGxpc3RhIGRlIHRvZGFzIGFzIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMuJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0xpc3RhIGRlIGRldGVybWluYcOnw7VlcyByZXRvcm5hZGEgY29tIHN1Y2Vzc28nLFxuICAgIHR5cGU6IFtEZXRlcm1pbmFjYW9KdWRpY2lhbF0sXG4gIH0pXG4gIGFzeW5jIGZpbmRBbGwoXG4gICAgQFF1ZXJ5KCdwYWdlJykgcGFnZT86IG51bWJlcixcbiAgICBAUXVlcnkoJ2xpbWl0JykgbGltaXQ/OiBudW1iZXIsXG4gICAgQFF1ZXJ5KCdwcm9jZXNzb0p1ZGljaWFsSWQnKSBwcm9jZXNzb0p1ZGljaWFsSWQ/OiBzdHJpbmcsXG4gICAgQFF1ZXJ5KCdzb2xpY2l0YWNhb0lkJykgc29saWNpdGFjYW9JZD86IHN0cmluZyxcbiAgICBAUXVlcnkoJ2NpZGFkYW9JZCcpIGNpZGFkYW9JZD86IHN0cmluZyxcbiAgICBAUXVlcnkoJ3RpcG8nKSB0aXBvPzogc3RyaW5nLFxuICAgIEBRdWVyeSgnY3VtcHJpZGEnKSBjdW1wcmlkYT86IGJvb2xlYW4sXG4gICAgQFF1ZXJ5KCd0ZXJtbycpIHRlcm1vPzogc3RyaW5nLFxuICApIHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9KdWRpY2lhbFNlcnZpY2UuZmluZEFsbCh7XG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICBwcm9jZXNzb0p1ZGljaWFsSWQsXG4gICAgICBzb2xpY2l0YWNhb0lkLFxuICAgICAgY2lkYWRhb0lkLFxuICAgICAgdGlwbzogdGlwbyBhcyBhbnksXG4gICAgICBjdW1wcmlkYSxcbiAgICAgIHRlcm1vLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHVtYSBkZXRlcm1pbmHDp8OjbyBwZWxvIElEXG4gICAqIEBwYXJhbSBpZCBJRCBkYSBkZXRlcm1pbmHDp8Ojb1xuICAgKiBAcmV0dXJucyBEZXRlcm1pbmHDp8Ojb1xuICAgKi9cbiAgQEdldCgnOmlkJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7IHBlcm1pc3Npb25OYW1lOiAnanVkaWNpYWwudmlzdWFsaXphci1kZXRlcm1pbmFjYW8nIH0pXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdCdXNjYSB1bWEgZGV0ZXJtaW5hw6fDo28gcGVsbyBJRCcsXG4gICAgZGVzY3JpcHRpb246ICdSZXRvcm5hIG9zIGRldGFsaGVzIGRlIHVtYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBlc3BlY8OtZmljYS4nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGV0ZXJtaW5hw6fDo28gZW5jb250cmFkYSBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogRGV0ZXJtaW5hY2FvSnVkaWNpYWwsXG4gIH0pXG4gIGFzeW5jIGZpbmRCeUlkKFxuICAgIEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nLFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlLmZpbmRCeUlkKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdXNjYSBkZXRlcm1pbmHDp8O1ZXMgcG9yIHByb2Nlc3NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBwcm9jZXNzb0lkIElEIGRvIHByb2Nlc3NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBpbmNsdWRlSW5hY3RpdmUgU2UgZGV2ZSBpbmNsdWlyIGRldGVybWluYcOnw7VlcyBpbmF0aXZhc1xuICAgKiBAcmV0dXJucyBMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXNcbiAgICovXG4gIEBHZXQoJ3Byb2Nlc3NvLzpwcm9jZXNzb0lkJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7IHBlcm1pc3Npb25OYW1lOiAnanVkaWNpYWwubGlzdGFyLWRldGVybWluYWNhbycgfSlcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ0J1c2NhIGRldGVybWluYcOnw7VlcyBwb3IgcHJvY2Vzc28ganVkaWNpYWwnLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldG9ybmEgYSBsaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzIHJlbGFjaW9uYWRhcyBhIHVtIHByb2Nlc3NvIGVzcGVjw61maWNvLicsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMgcmV0b3JuYWRhIGNvbSBzdWNlc3NvJyxcbiAgICB0eXBlOiBbRGV0ZXJtaW5hY2FvSnVkaWNpYWxdLFxuICB9KVxuICBhc3luYyBmaW5kQnlQcm9jZXNzbyhcbiAgICBAUGFyYW0oJ3Byb2Nlc3NvSWQnKSBwcm9jZXNzb0lkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWxbXT4ge1xuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0p1ZGljaWFsU2VydmljZS5maW5kQnlQcm9jZXNzb0p1ZGljaWFsKHByb2Nlc3NvSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIGRldGVybWluYcOnw7VlcyBwb3IgY2lkYWTDo29cbiAgICogQHBhcmFtIGNpZGFkYW9JZCBJRCBkbyBjaWRhZMOjb1xuICAgKiBAcGFyYW0gaW5jbHVkZUluYWN0aXZlIFNlIGRldmUgaW5jbHVpciBkZXRlcm1pbmHDp8O1ZXMgaW5hdGl2YXNcbiAgICogQHJldHVybnMgTGlzdGEgZGUgZGV0ZXJtaW5hw6fDtWVzXG4gICAqL1xuICBAR2V0KCdjaWRhZGFvLzpjaWRhZGFvSWQnKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHsgcGVybWlzc2lvbk5hbWU6ICdqdWRpY2lhbC5saXN0YXItZGV0ZXJtaW5hY2FvJyB9KVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnQnVzY2EgZGV0ZXJtaW5hw6fDtWVzIHBvciBjaWRhZMOjbycsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnUmV0b3JuYSBhIGxpc3RhIGRlIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMgcmVsYWNpb25hZGFzIGEgdW0gY2lkYWTDo28gZXNwZWPDrWZpY28uJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0xpc3RhIGRlIGRldGVybWluYcOnw7VlcyByZXRvcm5hZGEgY29tIHN1Y2Vzc28nLFxuICAgIHR5cGU6IFtEZXRlcm1pbmFjYW9KdWRpY2lhbF0sXG4gIH0pXG4gIGFzeW5jIGZpbmRCeUNpZGFkYW8oXG4gICAgQFBhcmFtKCdjaWRhZGFvSWQnKSBjaWRhZGFvSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxEZXRlcm1pbmFjYW9KdWRpY2lhbFtdPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlLmZpbmRCeUNpZGFkYW8oY2lkYWRhb0lkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdXNjYSBkZXRlcm1pbmHDp8O1ZXMgcG9yIHNvbGljaXRhw6fDo29cbiAgICogQHBhcmFtIHNvbGljaXRhY2FvSWQgSUQgZGEgc29saWNpdGHDp8Ojb1xuICAgKiBAcGFyYW0gaW5jbHVkZUluYWN0aXZlIFNlIGRldmUgaW5jbHVpciBkZXRlcm1pbmHDp8O1ZXMgaW5hdGl2YXNcbiAgICogQHJldHVybnMgTGlzdGEgZGUgZGV0ZXJtaW5hw6fDtWVzXG4gICAqL1xuICBAR2V0KCdzb2xpY2l0YWNhby86c29saWNpdGFjYW9JZCcpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oeyBwZXJtaXNzaW9uTmFtZTogJ2p1ZGljaWFsLmxpc3Rhci1kZXRlcm1pbmFjYW8nIH0pXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdCdXNjYSBkZXRlcm1pbmHDp8O1ZXMgcG9yIHNvbGljaXRhw6fDo28nLFxuICAgIGRlc2NyaXB0aW9uOlxuICAgICAgJ1JldG9ybmEgYSBsaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzIHJlbGFjaW9uYWRhcyBhIHVtYSBzb2xpY2l0YcOnw6NvIGVzcGVjw61maWNhLicsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMgcmV0b3JuYWRhIGNvbSBzdWNlc3NvJyxcbiAgICB0eXBlOiBbRGV0ZXJtaW5hY2FvSnVkaWNpYWxdLFxuICB9KVxuICBhc3luYyBmaW5kQnlTb2xpY2l0YWNhbyhcbiAgICBAUGFyYW0oJ3NvbGljaXRhY2FvSWQnKSBzb2xpY2l0YWNhb0lkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWxbXT4ge1xuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0p1ZGljaWFsU2VydmljZS5maW5kQnlTb2xpY2l0YWNhbyhzb2xpY2l0YWNhb0lkKTtcbiAgfVxuXG4gIEBHZXQoJ3BlbmRlbnRlcycpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQnVzY2FyIGRldGVybWluYcOnw7VlcyBwZW5kZW50ZXMgZGUgY3VtcHJpbWVudG8nIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMgcGVuZGVudGVzJyxcbiAgICB0eXBlOiBbRGV0ZXJtaW5hY2FvSnVkaWNpYWxdLFxuICB9KVxuICBhc3luYyBmaW5kUGVuZGVudGVzKCk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWxbXT4ge1xuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0p1ZGljaWFsU2VydmljZS5maW5kUGVuZGVudGVzKCk7XG4gIH1cblxuICAvKipcbiAgICogQXR1YWxpemEgdW1hIGRldGVybWluYcOnw6NvXG4gICAqIEBwYXJhbSBpZCBJRCBkYSBkZXRlcm1pbmHDp8Ojb1xuICAgKiBAcGFyYW0gdXBkYXRlRGV0ZXJtaW5hY2FvRHRvIERhZG9zIHBhcmEgYXR1YWxpemHDp8Ojb1xuICAgKiBAcGFyYW0gcmVxIFJlcXVpc2nDp8Ojb1xuICAgKiBAcmV0dXJucyBEZXRlcm1pbmHDp8OjbyBhdHVhbGl6YWRhXG4gICAqL1xuICBAUGF0Y2goJzppZCcpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oeyBwZXJtaXNzaW9uTmFtZTogJ2p1ZGljaWFsLmF0dWFsaXphci1kZXRlcm1pbmFjYW8nIH0pXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdBdHVhbGl6YSB1bWEgZGV0ZXJtaW5hw6fDo28nLFxuICAgIGRlc2NyaXB0aW9uOiAnQXR1YWxpemEgb3MgZGFkb3MgZGUgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsIGV4aXN0ZW50ZS4nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGV0ZXJtaW5hw6fDo28gYXR1YWxpemFkYSBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogRGV0ZXJtaW5hY2FvSnVkaWNpYWwsXG4gIH0pXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBAUGFyYW0oJ2lkJywgUGFyc2VVVUlEUGlwZSkgaWQ6IHN0cmluZyxcbiAgICBAQm9keSgpIHVwZGF0ZURldGVybWluYWNhb0R0bzogVXBkYXRlRGV0ZXJtaW5hY2FvSnVkaWNpYWxEdG8sXG4gICAgQFJlcSgpIHJlcTogYW55LFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlLnVwZGF0ZShcbiAgICAgIGlkLFxuICAgICAgdXBkYXRlRGV0ZXJtaW5hY2FvRHRvLFxuICAgICAgcmVxLnVzZXIuaWQsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJjYSB1bWEgZGV0ZXJtaW5hw6fDo28gY29tbyBjdW1wcmlkYVxuICAgKiBAcGFyYW0gaWQgSUQgZGEgZGV0ZXJtaW5hw6fDo29cbiAgICogQHBhcmFtIGN1bXByaW1lbnRvRHRvIERhZG9zIGRvIGN1bXByaW1lbnRvXG4gICAqIEBwYXJhbSByZXEgUmVxdWlzacOnw6NvXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGF0dWFsaXphZGFcbiAgICovXG4gIEBQYXRjaCgnOmlkL2N1bXByaXInKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHsgcGVybWlzc2lvbk5hbWU6ICdqdWRpY2lhbC5jdW1wcmlyLWRldGVybWluYWNhbycgfSlcbiAgQEFwaU9wZXJhdGlvbih7XG4gICAgc3VtbWFyeTogJ01hcmNhIHVtYSBkZXRlcm1pbmHDp8OjbyBjb21vIGN1bXByaWRhJyxcbiAgICBkZXNjcmlwdGlvbjpcbiAgICAgICdBdHVhbGl6YSBvIHN0YXR1cyBkZSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgcGFyYSBjdW1wcmlkYS4nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGV0ZXJtaW5hw6fDo28gbWFyY2FkYSBjb21vIGN1bXByaWRhIGNvbSBzdWNlc3NvJyxcbiAgICB0eXBlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbCxcbiAgfSlcbiAgYXN5bmMgbWFyY2FyQ29tb0N1bXByaWRhKFxuICAgIEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nLFxuICAgIEBCb2R5KCkgYm9keTogQ3VtcHJpbWVudG9EZXRlcm1pbmFjYW9EdG8sXG4gICAgQFJlcSgpIHJlcTogYW55LFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvSnVkaWNpYWxTZXJ2aWNlLm1hcmNhckNvbW9DdW1wcmlkYShcbiAgICAgIGlkLFxuICAgICAgYm9keS5vYnNlcnZhY2FvLFxuICAgICAgcmVxLnVzZXIuaWQsXG4gICAgKTtcbiAgfVxuXG4gIEBQYXRjaCgnOmlkL2F0aXZhcicpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQXRpdmFyIG91IGRlc2F0aXZhciB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwnIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnSUQgZGEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBhdHVhbGl6YWRhJyxcbiAgICB0eXBlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbCxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBkZXNjcmlwdGlvbjogJ0RldGVybWluYcOnw6NvIGp1ZGljaWFsIG7Do28gZW5jb250cmFkYScsXG4gIH0pXG4gIGFzeW5jIHRvZ2dsZUF0aXZvKFxuICAgIEBQYXJhbSgnaWQnLCBQYXJzZVVVSURQaXBlKSBpZDogc3RyaW5nLFxuICAgIEBSZXEoKSByZXE6IGFueSxcbiAgKTogUHJvbWlzZTxEZXRlcm1pbmFjYW9KdWRpY2lhbD4ge1xuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0p1ZGljaWFsU2VydmljZS50b2dnbGVBdGl2byhpZCwgcmVxLnVzZXIuaWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB1bWEgZGV0ZXJtaW5hw6fDo29cbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIEBEZWxldGUoJzppZCcpXG4gIEBIdHRwQ29kZShIdHRwU3RhdHVzLk5PX0NPTlRFTlQpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oeyBwZXJtaXNzaW9uTmFtZTogJ2p1ZGljaWFsLnJlbW92ZXItZGV0ZXJtaW5hY2FvJyB9KVxuICBAQXBpT3BlcmF0aW9uKHtcbiAgICBzdW1tYXJ5OiAnUmVtb3ZlIHVtYSBkZXRlcm1pbmHDp8OjbycsXG4gICAgZGVzY3JpcHRpb246ICdSZW1vdmUgcGVybWFuZW50ZW1lbnRlIHVtYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbC4nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjA0LFxuICAgIGRlc2NyaXB0aW9uOiAnRGV0ZXJtaW5hw6fDo28gcmVtb3ZpZGEgY29tIHN1Y2Vzc28nLFxuICB9KVxuICBhc3luYyByZW1vdmUoQFBhcmFtKCdpZCcsIFBhcnNlVVVJRFBpcGUpIGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9KdWRpY2lhbFNlcnZpY2UucmVtb3ZlKGlkKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9