ec2c0a0ab33351b6eb65f53a0c31d3a0
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const template_service_1 = require("../services/template.service");
const template_repository_1 = require("../repositories/template.repository");
const template_tipo_enum_1 = require("../enums/template-tipo.enum");
const common_1 = require("@nestjs/common");
// Mock do Repositório
const mockTemplateRepository = {
    findByCodigo: jest.fn(),
    findAll: jest.fn(),
    findByTipo: jest.fn(),
    save: jest.fn(),
    remove: jest.fn(),
};
describe('TemplateService', () => {
    let service;
    let repository;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                template_service_1.TemplateService,
                {
                    provide: template_repository_1.TemplateRepository,
                    useValue: mockTemplateRepository,
                },
            ],
        }).compile();
        service = module.get(template_service_1.TemplateService);
        repository = module.get(template_repository_1.TemplateRepository);
        // Limpar todos os mocks antes de cada teste
        jest.clearAllMocks();
    });
    it('deve ser definido', () => {
        expect(service).toBeDefined();
        expect(repository).toBeDefined();
    });
    describe('buscarPorCodigo', () => {
        it('deve retornar um template quando encontrado', async () => {
            // Arrange
            const templateMock = {
                id: '1',
                codigo: 'email-bem-vindo',
                nome: 'E-mail de Boas-vindas',
                descricao: 'Template para e-mail de boas-vindas',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.buscarPorCodigo('email-bem-vindo');
            // Assert
            expect(resultado).toEqual(templateMock);
            expect(repository.findByCodigo).toHaveBeenCalledWith('email-bem-vindo');
        });
        it('deve lançar NotFoundException quando o template não for encontrado', async () => {
            // Arrange
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.buscarPorCodigo('template-inexistente'))
                .rejects
                .toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-inexistente');
        });
    });
    describe('buscarTodos', () => {
        it('deve retornar todos os templates quando não for especificado um tipo', async () => {
            // Arrange
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
                {
                    id: '2',
                    codigo: 'notificacao-solicitacao',
                    nome: 'Notificação de Solicitação',
                    descricao: 'Template para notificação de solicitação',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.NOTIFICACAO,
                    conteudo: 'Sua solicitação {{protocolo}} foi recebida',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findAll').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarTodos();
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findAll).toHaveBeenCalled();
            expect(repository.findByTipo).not.toHaveBeenCalled();
        });
        it('deve retornar templates filtrados por tipo quando especificado', async () => {
            // Arrange
            const tipo = template_tipo_enum_1.TemplateTipoEnum.EMAIL;
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findByTipo').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarTodos(tipo);
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findByTipo).toHaveBeenCalledWith(tipo);
            expect(repository.findAll).not.toHaveBeenCalled();
        });
    });
    describe('buscarPorTipo', () => {
        it('deve retornar templates filtrados por tipo', async () => {
            // Arrange
            const tipo = template_tipo_enum_1.TemplateTipoEnum.EMAIL;
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findByTipo').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarPorTipo(tipo);
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findByTipo).toHaveBeenCalledWith(tipo);
        });
    });
    describe('criar', () => {
        it('deve criar um novo template com sucesso', async () => {
            // Arrange
            const dto = {
                codigo: 'novo-template',
                nome: 'Novo Template',
                descricao: 'Descrição do novo template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo do template: {{variavel}}</body></html>',
            };
            const templateMock = {
                id: '3',
                ...dto,
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            jest.spyOn(repository, 'save').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.criar(dto);
            // Assert
            expect(resultado).toEqual(templateMock);
            expect(repository.findByCodigo).toHaveBeenCalledWith('novo-template');
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...dto,
                ativo: true,
            }));
        });
        it('deve lançar BadRequestException ao tentar criar um template com código já existente', async () => {
            // Arrange
            const dto = {
                codigo: 'template-existente',
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
            };
            const templateExistente = {
                id: '4',
                ...dto,
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateExistente);
            // Act & Assert
            await expect(service.criar(dto))
                .rejects
                .toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-existente');
            expect(repository.save).not.toHaveBeenCalled();
        });
        it('deve lançar BadRequestException quando o conteúdo do template for inválido', async () => {
            // Arrange
            const dto = {
                codigo: 'template-invalido',
                nome: 'Template Inválido',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>{{#each items}}</body></html>', // Template inválido (tag não fechada)
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.criar(dto))
                .rejects
                .toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-invalido');
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('atualizar', () => {
        it('deve atualizar um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'template-existente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>Conteúdo atualizado: {{variavel}}</body></html>',
            };
            const templateExistente = {
                id: '5',
                codigo,
                nome: 'Nome Antigo',
                descricao: 'Descrição antiga',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo antigo</body></html>',
                ativo: true,
            };
            const templateAtualizado = {
                ...templateExistente,
                ...dto,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'save').mockResolvedValue(templateAtualizado);
            // Act
            const resultado = await service.atualizar(codigo, dto);
            // Assert
            expect(resultado).toEqual(templateAtualizado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...templateExistente,
                ...dto,
            }));
        });
        it('deve lançar NotFoundException ao tentar atualizar um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>Conteúdo atualizado</body></html>',
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.atualizar(codigo, dto))
                .rejects
                .toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
        it('deve lançar BadRequestException quando o conteúdo atualizado for inválido', async () => {
            // Arrange
            const codigo = 'template-existente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>{{#if invalido}</body></html>', // Template inválido (tag não fechada)
            };
            const templateExistente = {
                id: '6',
                codigo,
                nome: 'Nome Antigo',
                descricao: 'Descrição antiga',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo antigo</body></html>',
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateExistente);
            // Act & Assert
            await expect(service.atualizar(codigo, dto))
                .rejects
                .toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('remover', () => {
        it('deve remover um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'template-existente';
            const templateExistente = {
                id: '7',
                codigo,
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'remove').mockResolvedValue(undefined);
            // Act
            await service.remover(codigo);
            // Assert
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.remove).toHaveBeenCalledWith(templateExistente);
        });
        it('deve lançar NotFoundException ao tentar remover um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.remover(codigo))
                .rejects
                .toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.remove).not.toHaveBeenCalled();
        });
    });
    describe('alterarStatus', () => {
        it('deve alterar o status do template para ativo', async () => {
            // Arrange
            const codigo = 'template-existente';
            const ativo = true;
            const templateExistente = {
                id: '8',
                codigo,
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: false,
            };
            const templateAtualizado = {
                ...templateExistente,
                ativo,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'save').mockResolvedValue(templateAtualizado);
            // Act
            const resultado = await service.alterarStatus(codigo, ativo);
            // Assert
            expect(resultado).toEqual(templateAtualizado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...templateExistente,
                ativo,
            }));
        });
        it('deve lançar NotFoundException ao tentar alterar o status de um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const ativo = true;
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.alterarStatus(codigo, ativo))
                .rejects
                .toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('testar', () => {
        it('deve renderizar um template com sucesso', async () => {
            // Arrange
            const dto = {
                conteudo: '<html><body>Olá, {{nome}}!</body></html>',
                dados: { nome: 'João' },
            };
            const conteudoEsperado = '<html><body>Olá, João!</body></html>';
            // Act
            const resultado = await service.testar(dto);
            // Assert
            expect(resultado).toEqual({ conteudo: conteudoEsperado });
        });
        it('deve lançar BadRequestException quando o template for inválido', async () => {
            // Arrange
            const dto = {
                conteudo: '<html><body>{{#each items}}</body></html>', // Template inválido (tag não fechada)
                dados: { items: ['item1', 'item2'] },
            };
            // Act & Assert
            await expect(service.testar(dto))
                .rejects
                .toThrow(common_1.BadRequestException);
        });
        it('deve renderizar um template com dados complexos', async () => {
            // Arrange
            const dto = {
                conteudo: `
          <html>
            <body>
              <h1>Lista de Itens</h1>
              <ul>
                {{#each items}}
                  <li>{{nome}} - R$ {{preco}}</li>
                {{/each}}
              </ul>
              <p>Total: R$ {{total}}</p>
            </body>
          </html>
        `,
                dados: {
                    items: [
                        { nome: 'Item 1', preco: 10.5 },
                        { nome: 'Item 2', preco: 20.75 },
                    ],
                    total: 31.25,
                },
            };
            // Act
            const resultado = await service.testar(dto);
            // Assert
            expect(resultado).toHaveProperty('conteudo');
            expect(resultado.conteudo).toContain('<li>Item 1 - R$ 10.5</li>');
            expect(resultado.conteudo).toContain('<li>Item 2 - R$ 20.75</li>');
            expect(resultado.conteudo).toContain('<p>Total: R$ 31.25</p>');
        });
    });
    describe('renderizar', () => {
        it('deve renderizar um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'email-bem-vindo';
            const dados = { nome: 'João', link: 'https://exemplo.com' };
            const templateMock = {
                id: '9',
                codigo,
                nome: 'E-mail de Boas-vindas',
                descricao: 'Template para e-mail de boas-vindas',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Bem-vindo, {{nome}}! <a href="{{link}}">Acesse aqui</a></body></html>',
                ativo: true,
            };
            const conteudoEsperado = '<html><body>Bem-vindo, João! <a href="https://exemplo.com">Acesse aqui</a></body></html>';
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.renderizar(codigo, dados);
            // Assert
            expect(resultado).toBe(conteudoEsperado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
        it('deve lançar NotFoundException ao tentar renderizar um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const dados = { nome: 'João' };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.renderizar(codigo, dados))
                .rejects
                .toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
        it('deve lançar BadRequestException quando o template não estiver ativo', async () => {
            // Arrange
            const codigo = 'template-inativo';
            const dados = { nome: 'João' };
            const templateMock = {
                id: '10',
                codigo,
                nome: 'Template Inativo',
                descricao: 'Template inativo para teste',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: false,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act & Assert
            await expect(service.renderizar(codigo, dados))
                .rejects
                .toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcdGVzdHNcXHRlbXBsYXRlLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCxtRUFBK0Q7QUFDL0QsNkVBQXlFO0FBSXpFLG9FQUErRDtBQUMvRCwyQ0FBd0U7QUFFeEUsc0JBQXNCO0FBQ3RCLE1BQU0sc0JBQXNCLEdBQUc7SUFDN0IsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdkIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDckIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNsQixDQUFDO0FBRUYsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLE9BQXdCLENBQUM7SUFDN0IsSUFBSSxVQUE4QixDQUFDO0lBRW5DLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLE1BQU0sR0FBa0IsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDM0QsU0FBUyxFQUFFO2dCQUNULGtDQUFlO2dCQUNmO29CQUNFLE9BQU8sRUFBRSx3Q0FBa0I7b0JBQzNCLFFBQVEsRUFBRSxzQkFBc0I7aUJBQ2pDO2FBQ0Y7U0FDRixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFYixPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBa0Isa0NBQWUsQ0FBQyxDQUFDO1FBQ3ZELFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFxQix3Q0FBa0IsQ0FBQyxDQUFDO1FBRWhFLDRDQUE0QztRQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFF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LCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcdGVzdHNcXHRlbXBsYXRlLnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IFRlbXBsYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3RlbXBsYXRlLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGVtcGxhdGVSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzL3RlbXBsYXRlLnJlcG9zaXRvcnknO1xuaW1wb3J0IHsgVGVtcGxhdGVDcmVhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLWNyZWF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVVcGRhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLXVwZGF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVUZXN0RHRvIH0gZnJvbSAnLi4vZHRvcy90ZW1wbGF0ZS90ZW1wbGF0ZS10ZXN0LmR0byc7XG5pbXBvcnQgeyBUZW1wbGF0ZVRpcG9FbnVtIH0gZnJvbSAnLi4vZW51bXMvdGVtcGxhdGUtdGlwby5lbnVtJztcbmltcG9ydCB7IE5vdEZvdW5kRXhjZXB0aW9uLCBCYWRSZXF1ZXN0RXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuXG4vLyBNb2NrIGRvIFJlcG9zaXTDs3Jpb1xuY29uc3QgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeSA9IHtcbiAgZmluZEJ5Q29kaWdvOiBqZXN0LmZuKCksXG4gIGZpbmRBbGw6IGplc3QuZm4oKSxcbiAgZmluZEJ5VGlwbzogamVzdC5mbigpLFxuICBzYXZlOiBqZXN0LmZuKCksXG4gIHJlbW92ZTogamVzdC5mbigpLFxufTtcblxuZGVzY3JpYmUoJ1RlbXBsYXRlU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IFRlbXBsYXRlU2VydmljZTtcbiAgbGV0IHJlcG9zaXRvcnk6IFRlbXBsYXRlUmVwb3NpdG9yeTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIFRlbXBsYXRlU2VydmljZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFRlbXBsYXRlUmVwb3NpdG9yeSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1RlbXBsYXRlUmVwb3NpdG9yeSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8VGVtcGxhdGVTZXJ2aWNlPihUZW1wbGF0ZVNlcnZpY2UpO1xuICAgIHJlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0PFRlbXBsYXRlUmVwb3NpdG9yeT4oVGVtcGxhdGVSZXBvc2l0b3J5KTtcblxuICAgIC8vIExpbXBhciB0b2RvcyBvcyBtb2NrcyBhbnRlcyBkZSBjYWRhIHRlc3RlXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdkZXZlIHNlciBkZWZpbmlkbycsICgpID0+IHtcbiAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocmVwb3NpdG9yeSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1c2NhclBvckNvZGlnbycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciB1bSB0ZW1wbGF0ZSBxdWFuZG8gZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlbXBsYXRlTW9jayA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgbm9tZTogJ0UtbWFpbCBkZSBCb2FzLXZpbmRhcycsXG4gICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIHBhcmEgZS1tYWlsIGRlIGJvYXMtdmluZGFzJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZU1vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyUG9yQ29kaWdvKCdlbWFpbC1iZW0tdmluZG8nKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlTW9jayk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdlbWFpbC1iZW0tdmluZG8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIG8gdGVtcGxhdGUgbsOjbyBmb3IgZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmJ1c2NhclBvckNvZGlnbygndGVtcGxhdGUtaW5leGlzdGVudGUnKSlcbiAgICAgICAgLnJlamVjdHNcbiAgICAgICAgLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZW1wbGF0ZS1pbmV4aXN0ZW50ZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYnVzY2FyVG9kb3MnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdG9kb3Mgb3MgdGVtcGxhdGVzIHF1YW5kbyBuw6NvIGZvciBlc3BlY2lmaWNhZG8gdW0gdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlbXBsYXRlc01vY2sgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgIGNvZGlnbzogJ2VtYWlsLWJlbS12aW5kbycsXG4gICAgICAgICAgbm9tZTogJ0UtbWFpbCBkZSBCb2FzLXZpbmRhcycsXG4gICAgICAgICAgZGVzY3JpY2FvOiAnVGVtcGxhdGUgcGFyYSBlLW1haWwgZGUgYm9hcy12aW5kYXMnLFxuICAgICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMicsXG4gICAgICAgICAgY29kaWdvOiAnbm90aWZpY2FjYW8tc29saWNpdGFjYW8nLFxuICAgICAgICAgIG5vbWU6ICdOb3RpZmljYcOnw6NvIGRlIFNvbGljaXRhw6fDo28nLFxuICAgICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIHBhcmEgbm90aWZpY2HDp8OjbyBkZSBzb2xpY2l0YcOnw6NvJyxcbiAgICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLk5PVElGSUNBQ0FPLFxuICAgICAgICAgIGNvbnRldWRvOiAnU3VhIHNvbGljaXRhw6fDo28ge3twcm90b2NvbG99fSBmb2kgcmVjZWJpZGEnLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEFsbCcpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyVG9kb3MoKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlc01vY2spO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEFsbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5VGlwbykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIHRlbXBsYXRlcyBmaWx0cmFkb3MgcG9yIHRpcG8gcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRpcG8gPSBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMO1xuICAgICAgY29uc3QgdGVtcGxhdGVzTW9jayA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgICBub21lOiAnRS1tYWlsIGRlIEJvYXMtdmluZGFzJyxcbiAgICAgICAgICBkZXNjcmljYW86ICdUZW1wbGF0ZSBwYXJhIGUtbWFpbCBkZSBib2FzLXZpbmRhcycsXG4gICAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkJlbS12aW5kbywge3tub21lfX0hPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5VGlwbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyVG9kb3ModGlwbyk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbCh0ZW1wbGF0ZXNNb2NrKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeVRpcG8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRpcG8pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEFsbCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1c2NhclBvclRpcG8nLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdGVtcGxhdGVzIGZpbHRyYWRvcyBwb3IgdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRpcG8gPSBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMO1xuICAgICAgY29uc3QgdGVtcGxhdGVzTW9jayA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgICBub21lOiAnRS1tYWlsIGRlIEJvYXMtdmluZGFzJyxcbiAgICAgICAgICBkZXNjcmljYW86ICdUZW1wbGF0ZSBwYXJhIGUtbWFpbCBkZSBib2FzLXZpbmRhcycsXG4gICAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkJlbS12aW5kbywge3tub21lfX0hPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5VGlwbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyUG9yVGlwbyh0aXBvKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlc01vY2spO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5VGlwbykudG9IYXZlQmVlbkNhbGxlZFdpdGgodGlwbyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmlhcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBjcmlhciB1bSBub3ZvIHRlbXBsYXRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZUNyZWF0ZUR0byA9IHtcbiAgICAgICAgY29kaWdvOiAnbm92by10ZW1wbGF0ZScsXG4gICAgICAgIG5vbWU6ICdOb3ZvIFRlbXBsYXRlJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gZG8gbm92byB0ZW1wbGF0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvIGRvIHRlbXBsYXRlOiB7e3ZhcmlhdmVsfX08L2JvZHk+PC9odG1sPicsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCB0ZW1wbGF0ZU1vY2sgPSB7XG4gICAgICAgIGlkOiAnMycsXG4gICAgICAgIC4uLmR0byxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ3NhdmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZU1vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuY3JpYXIoZHRvKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlTW9jayk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdub3ZvLXRlbXBsYXRlJyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIC4uLmR0byxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gYW8gdGVudGFyIGNyaWFyIHVtIHRlbXBsYXRlIGNvbSBjw7NkaWdvIGrDoSBleGlzdGVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlQ3JlYXRlRHRvID0ge1xuICAgICAgICBjb2RpZ286ICd0ZW1wbGF0ZS1leGlzdGVudGUnLFxuICAgICAgICBub21lOiAnVGVtcGxhdGUgRXhpc3RlbnRlJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gZG8gdGVtcGxhdGUnLFxuICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkNvbnRlw7pkbzwvYm9keT48L2h0bWw+JyxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzQnLFxuICAgICAgICAuLi5kdG8sXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUodGVtcGxhdGVFeGlzdGVudGUpO1xuICAgICAgXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNyaWFyKGR0bykpXG4gICAgICAgIC5yZWplY3RzXG4gICAgICAgIC50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZW1wbGF0ZS1leGlzdGVudGUnKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIG8gY29udGXDumRvIGRvIHRlbXBsYXRlIGZvciBpbnbDoWxpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlQ3JlYXRlRHRvID0ge1xuICAgICAgICBjb2RpZ286ICd0ZW1wbGF0ZS1pbnZhbGlkbycsXG4gICAgICAgIG5vbWU6ICdUZW1wbGF0ZSBJbnbDoWxpZG8nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBkbyB0ZW1wbGF0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+e3sjZWFjaCBpdGVtc319PC9ib2R5PjwvaHRtbD4nLCAvLyBUZW1wbGF0ZSBpbnbDoWxpZG8gKHRhZyBuw6NvIGZlY2hhZGEpXG4gICAgICB9O1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIFxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jcmlhcihkdG8pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5Q29kaWdvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVtcGxhdGUtaW52YWxpZG8nKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhdHVhbGl6YXInLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgYXR1YWxpemFyIHVtIHRlbXBsYXRlIGV4aXN0ZW50ZSBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1leGlzdGVudGUnO1xuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZVVwZGF0ZUR0byA9IHtcbiAgICAgICAgbm9tZTogJ05vbWUgQXR1YWxpemFkbycsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGF0dWFsaXphZGEnLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkNvbnRlw7pkbyBhdHVhbGl6YWRvOiB7e3ZhcmlhdmVsfX08L2JvZHk+PC9odG1sPicsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCB0ZW1wbGF0ZUV4aXN0ZW50ZSA9IHtcbiAgICAgICAgaWQ6ICc1JyxcbiAgICAgICAgY29kaWdvLFxuICAgICAgICBub21lOiAnTm9tZSBBbnRpZ28nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBhbnRpZ2EnLFxuICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkNvbnRlw7pkbyBhbnRpZ288L2JvZHk+PC9odG1sPicsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgdGVtcGxhdGVBdHVhbGl6YWRvID0ge1xuICAgICAgICAuLi50ZW1wbGF0ZUV4aXN0ZW50ZSxcbiAgICAgICAgLi4uZHRvLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUodGVtcGxhdGVFeGlzdGVudGUpO1xuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnc2F2ZScpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlQXR1YWxpemFkbyk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5hdHVhbGl6YXIoY29kaWdvLCBkdG8pO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwodGVtcGxhdGVBdHVhbGl6YWRvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgLi4udGVtcGxhdGVFeGlzdGVudGUsXG4gICAgICAgIC4uLmR0byxcbiAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gYW8gdGVudGFyIGF0dWFsaXphciB1bSB0ZW1wbGF0ZSBpbmV4aXN0ZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1pbmV4aXN0ZW50ZSc7XG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlVXBkYXRlRHRvID0ge1xuICAgICAgICBub21lOiAnTm9tZSBBdHVhbGl6YWRvJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gYXR1YWxpemFkYScsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvIGF0dWFsaXphZG88L2JvZHk+PC9odG1sPicsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIFxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5hdHVhbGl6YXIoY29kaWdvLCBkdG8pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIG8gY29udGXDumRvIGF0dWFsaXphZG8gZm9yIGludsOhbGlkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1leGlzdGVudGUnO1xuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZVVwZGF0ZUR0byA9IHtcbiAgICAgICAgbm9tZTogJ05vbWUgQXR1YWxpemFkbycsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGF0dWFsaXphZGEnLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5Pnt7I2lmIGludmFsaWRvfTwvYm9keT48L2h0bWw+JywgLy8gVGVtcGxhdGUgaW52w6FsaWRvICh0YWcgbsOjbyBmZWNoYWRhKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgdGVtcGxhdGVFeGlzdGVudGUgPSB7XG4gICAgICAgIGlkOiAnNicsXG4gICAgICAgIGNvZGlnbyxcbiAgICAgICAgbm9tZTogJ05vbWUgQW50aWdvJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gYW50aWdhJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5Db250ZcO6ZG8gYW50aWdvPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlRXhpc3RlbnRlKTtcbiAgICAgIFxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5hdHVhbGl6YXIoY29kaWdvLCBkdG8pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5Q29kaWdvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb2RpZ28pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuc2F2ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3JlbW92ZXInLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmVtb3ZlciB1bSB0ZW1wbGF0ZSBleGlzdGVudGUgY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb2RpZ28gPSAndGVtcGxhdGUtZXhpc3RlbnRlJztcbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzcnLFxuICAgICAgICBjb2RpZ28sXG4gICAgICAgIG5vbWU6ICdUZW1wbGF0ZSBFeGlzdGVudGUnLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBkbyB0ZW1wbGF0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlRXhpc3RlbnRlKTtcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ3JlbW92ZScpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgc2VydmljZS5yZW1vdmVyKGNvZGlnbyk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5Q29kaWdvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb2RpZ28pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkucmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh0ZW1wbGF0ZUV4aXN0ZW50ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIE5vdEZvdW5kRXhjZXB0aW9uIGFvIHRlbnRhciByZW1vdmVyIHVtIHRlbXBsYXRlIGluZXhpc3RlbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWluZXhpc3RlbnRlJztcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVtb3Zlcihjb2RpZ28pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnJlbW92ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FsdGVyYXJTdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgYWx0ZXJhciBvIHN0YXR1cyBkbyB0ZW1wbGF0ZSBwYXJhIGF0aXZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWV4aXN0ZW50ZSc7XG4gICAgICBjb25zdCBhdGl2byA9IHRydWU7XG4gICAgICBcbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzgnLFxuICAgICAgICBjb2RpZ28sXG4gICAgICAgIG5vbWU6ICdUZW1wbGF0ZSBFeGlzdGVudGUnLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBkbyB0ZW1wbGF0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogZmFsc2UsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCB0ZW1wbGF0ZUF0dWFsaXphZG8gPSB7XG4gICAgICAgIC4uLnRlbXBsYXRlRXhpc3RlbnRlLFxuICAgICAgICBhdGl2byxcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlRXhpc3RlbnRlKTtcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ3NhdmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZUF0dWFsaXphZG8pO1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYWx0ZXJhclN0YXR1cyhjb2RpZ28sIGF0aXZvKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlQXR1YWxpemFkbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIC4uLnRlbXBsYXRlRXhpc3RlbnRlLFxuICAgICAgICBhdGl2byxcbiAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gYW8gdGVudGFyIGFsdGVyYXIgbyBzdGF0dXMgZGUgdW0gdGVtcGxhdGUgaW5leGlzdGVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb2RpZ28gPSAndGVtcGxhdGUtaW5leGlzdGVudGUnO1xuICAgICAgY29uc3QgYXRpdm8gPSB0cnVlO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIFxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5hbHRlcmFyU3RhdHVzKGNvZGlnbywgYXRpdm8pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd0ZXN0YXInLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmVuZGVyaXphciB1bSB0ZW1wbGF0ZSBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGR0bzogVGVtcGxhdGVUZXN0RHRvID0ge1xuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5Pk9sw6EsIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgZGFkb3M6IHsgbm9tZTogJ0pvw6NvJyB9LFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgY29udGV1ZG9Fc3BlcmFkbyA9ICc8aHRtbD48Ym9keT5PbMOhLCBKb8OjbyE8L2JvZHk+PC9odG1sPic7XG4gICAgICBcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS50ZXN0YXIoZHRvKTtcbiAgICAgIFxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHsgY29udGV1ZG86IGNvbnRldWRvRXNwZXJhZG8gfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIG8gdGVtcGxhdGUgZm9yIGludsOhbGlkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGR0bzogVGVtcGxhdGVUZXN0RHRvID0ge1xuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5Pnt7I2VhY2ggaXRlbXN9fTwvYm9keT48L2h0bWw+JywgLy8gVGVtcGxhdGUgaW52w6FsaWRvICh0YWcgbsOjbyBmZWNoYWRhKVxuICAgICAgICBkYWRvczogeyBpdGVtczogWydpdGVtMScsICdpdGVtMiddIH0sXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnRlc3RhcihkdG8pKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlbmRlcml6YXIgdW0gdGVtcGxhdGUgY29tIGRhZG9zIGNvbXBsZXhvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGR0bzogVGVtcGxhdGVUZXN0RHRvID0ge1xuICAgICAgICBjb250ZXVkbzogYFxuICAgICAgICAgIDxodG1sPlxuICAgICAgICAgICAgPGJvZHk+XG4gICAgICAgICAgICAgIDxoMT5MaXN0YSBkZSBJdGVuczwvaDE+XG4gICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICB7eyNlYWNoIGl0ZW1zfX1cbiAgICAgICAgICAgICAgICAgIDxsaT57e25vbWV9fSAtIFIkIHt7cHJlY299fTwvbGk+XG4gICAgICAgICAgICAgICAge3svZWFjaH19XG4gICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDxwPlRvdGFsOiBSJCB7e3RvdGFsfX08L3A+XG4gICAgICAgICAgICA8L2JvZHk+XG4gICAgICAgICAgPC9odG1sPlxuICAgICAgICBgLFxuICAgICAgICBkYWRvczoge1xuICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICB7IG5vbWU6ICdJdGVtIDEnLCBwcmVjbzogMTAuNSB9LFxuICAgICAgICAgICAgeyBub21lOiAnSXRlbSAyJywgcHJlY286IDIwLjc1IH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICB0b3RhbDogMzEuMjUsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UudGVzdGFyKGR0byk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9IYXZlUHJvcGVydHkoJ2NvbnRldWRvJyk7XG4gICAgICBleHBlY3QocmVzdWx0YWRvLmNvbnRldWRvKS50b0NvbnRhaW4oJzxsaT5JdGVtIDEgLSBSJCAxMC41PC9saT4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8uY29udGV1ZG8pLnRvQ29udGFpbignPGxpPkl0ZW0gMiAtIFIkIDIwLjc1PC9saT4nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8uY29udGV1ZG8pLnRvQ29udGFpbignPHA+VG90YWw6IFIkIDMxLjI1PC9wPicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVuZGVyaXphcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZW5kZXJpemFyIHVtIHRlbXBsYXRlIGV4aXN0ZW50ZSBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICdlbWFpbC1iZW0tdmluZG8nO1xuICAgICAgY29uc3QgZGFkb3MgPSB7IG5vbWU6ICdKb8OjbycsIGxpbms6ICdodHRwczovL2V4ZW1wbG8uY29tJyB9O1xuICAgICAgXG4gICAgICBjb25zdCB0ZW1wbGF0ZU1vY2sgPSB7XG4gICAgICAgIGlkOiAnOScsXG4gICAgICAgIGNvZGlnbyxcbiAgICAgICAgbm9tZTogJ0UtbWFpbCBkZSBCb2FzLXZpbmRhcycsXG4gICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIHBhcmEgZS1tYWlsIGRlIGJvYXMtdmluZGFzJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIHt7bm9tZX19ISA8YSBocmVmPVwie3tsaW5rfX1cIj5BY2Vzc2UgYXF1aTwvYT48L2JvZHk+PC9odG1sPicsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgY29udGV1ZG9Fc3BlcmFkbyA9ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIEpvw6NvISA8YSBocmVmPVwiaHR0cHM6Ly9leGVtcGxvLmNvbVwiPkFjZXNzZSBhcXVpPC9hPjwvYm9keT48L2h0bWw+JztcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUodGVtcGxhdGVNb2NrKTtcbiAgICAgIFxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLnJlbmRlcml6YXIoY29kaWdvLCBkYWRvcyk7XG4gICAgICBcbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9CZShjb250ZXVkb0VzcGVyYWRvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gYW8gdGVudGFyIHJlbmRlcml6YXIgdW0gdGVtcGxhdGUgaW5leGlzdGVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb2RpZ28gPSAndGVtcGxhdGUtaW5leGlzdGVudGUnO1xuICAgICAgY29uc3QgZGFkb3MgPSB7IG5vbWU6ICdKb8OjbycgfTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVuZGVyaXphcihjb2RpZ28sIGRhZG9zKSlcbiAgICAgICAgLnJlamVjdHNcbiAgICAgICAgLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIG8gdGVtcGxhdGUgbsOjbyBlc3RpdmVyIGF0aXZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWluYXRpdm8nO1xuICAgICAgY29uc3QgZGFkb3MgPSB7IG5vbWU6ICdKb8OjbycgfTtcbiAgICAgIFxuICAgICAgY29uc3QgdGVtcGxhdGVNb2NrID0ge1xuICAgICAgICBpZDogJzEwJyxcbiAgICAgICAgY29kaWdvLFxuICAgICAgICBub21lOiAnVGVtcGxhdGUgSW5hdGl2bycsXG4gICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIGluYXRpdm8gcGFyYSB0ZXN0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogZmFsc2UsXG4gICAgICB9O1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZU1vY2spO1xuICAgICAgXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbmRlcml6YXIoY29kaWdvLCBkYWRvcykpXG4gICAgICAgIC5yZWplY3RzXG4gICAgICAgIC50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgICAgXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=