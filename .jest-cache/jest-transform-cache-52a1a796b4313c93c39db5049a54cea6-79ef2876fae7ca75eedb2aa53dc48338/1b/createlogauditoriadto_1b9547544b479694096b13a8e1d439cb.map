{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\auditoria\\dto\\create-log-auditoria.dto.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\auditoria\\dto\\create-log-auditoria.dto.ts"],"sourcesContent":["import {\n  IsEnum,\n  IsNotEmpty,\n  IsOptional,\n  IsString,\n  IsUUID,\n  MaxLength,\n  IsIP,\n  IsUrl,\n  IsArray,\n  IsObject,\n  IsDateString,\n  ValidateIf,\n  IsDate,\n} from 'class-validator';\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { TipoOperacao } from '../../../enums/tipo-operacao.enum';\nimport { BaseDto } from '../../../shared/dtos/base.dto';\nimport {\n  CREATE,\n  UPDATE,\n  SECURITY,\n  LGPD,\n} from '../../../shared/validators/validation-groups';\n\n/**\n * DTO para criação de log de auditoria - Versão MVP\n *\n * Define a estrutura simplificada de dados necessária para registrar um log de auditoria\n * no sistema, contendo apenas os campos essenciais para a rastreabilidade básica.\n * Campos avançados de compliance com LGPD e detalhamento completo foram adiados para versões futuras.\n */\nexport class CreateLogAuditoriaDto extends BaseDto {\n  @ApiProperty({\n    description: 'Tipo de operação realizada',\n    enum: TipoOperacao,\n    example: TipoOperacao.CREATE,\n  })\n  @IsNotEmpty({\n    message: 'O tipo de operação é obrigatório',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @IsEnum(TipoOperacao, {\n    message: 'Tipo de operação inválido',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  tipo_operacao: TipoOperacao;\n\n  @ApiProperty({\n    description: 'Nome da entidade afetada pela operação',\n    example: 'Usuario',\n  })\n  @IsNotEmpty({\n    message: 'A entidade afetada é obrigatória',\n    groups: [CREATE, SECURITY],\n  })\n  @IsString({\n    message: 'A entidade afetada deve ser uma string',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @MaxLength(100, {\n    message: 'A entidade afetada deve ter no máximo 100 caracteres',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  entidade_afetada: string;\n\n  @ApiPropertyOptional({\n    description: 'ID da entidade afetada',\n    example: '123e4567-e89b-12d3-a456-426614174000',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsUUID('4', {\n    message: 'O ID da entidade deve ser um UUID válido',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  entidade_id?: string;\n\n  @ApiPropertyOptional({\n    description: 'ID do usuário que realizou a operação',\n    example: '123e4567-e89b-12d3-a456-426614174000',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsUUID('4', {\n    message: 'O ID do usuário deve ser um UUID válido',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  usuario_id?: string;\n\n  @ApiPropertyOptional({\n    description: 'Endpoint acessado',\n    example: '/api/v1/usuarios',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsString({\n    message: 'O endpoint deve ser uma string',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @MaxLength(255, {\n    message: 'O endpoint deve ter no máximo 255 caracteres',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  endpoint?: string;\n\n  @ApiPropertyOptional({\n    description: 'Método HTTP utilizado',\n    example: 'POST',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsString({\n    message: 'O método HTTP deve ser uma string',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @MaxLength(10, {\n    message: 'O método HTTP deve ter no máximo 10 caracteres',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  metodo_http?: string;\n\n  @ApiPropertyOptional({\n    description: 'Endereço IP de origem da requisição',\n    example: '192.168.1.1',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsIP(undefined, {\n    message: 'O IP de origem deve ser um endereço IP válido',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  ip_origem?: string;\n\n  @ApiPropertyOptional({\n    description: 'User-Agent do navegador ou cliente',\n    example: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsString({\n    message: 'O User-Agent deve ser uma string',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @MaxLength(500, {\n    message: 'O User-Agent deve ter no máximo 500 caracteres',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  user_agent?: string;\n\n  @ApiPropertyOptional({\n    description: 'Descrição da operação realizada',\n    example: 'Atualização de dados do usuário',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsString({\n    message: 'A descrição deve ser uma string',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  @MaxLength(500, {\n    message: 'A descrição deve ter no máximo 500 caracteres',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  descricao?: string;\n\n  @ApiPropertyOptional({\n    description: 'Dados anteriores à operação',\n    example: { nome: 'Nome Antigo', email: 'email@antigo.com' },\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY, LGPD] })\n  @IsObject({\n    message: 'Os dados anteriores devem ser um objeto',\n    groups: [CREATE, UPDATE, SECURITY, LGPD],\n  })\n  dados_anteriores?: Record<string, any>;\n\n  @ApiPropertyOptional({\n    description: 'Novos dados após a operação',\n    example: { nome: 'Nome Novo', email: 'email@novo.com' },\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY, LGPD] })\n  @IsObject({\n    message: 'Os novos dados devem ser um objeto',\n    groups: [CREATE, UPDATE, SECURITY, LGPD],\n  })\n  dados_novos?: Record<string, any>;\n\n  @ApiPropertyOptional({\n    description: 'Data e hora da operação',\n    example: '2023-01-01T12:00:00Z',\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY] })\n  @IsDateString({}, {\n    message: 'A data e hora deve estar em formato ISO',\n    groups: [CREATE, UPDATE, SECURITY],\n  })\n  data_hora?: Date;\n\n  @ApiPropertyOptional({\n    description: 'Dados sensíveis que foram acessados (LGPD)',\n    example: ['cpf', 'data_nascimento', 'endereco'],\n    type: [String],\n  })\n  @IsOptional({ groups: [CREATE, UPDATE, SECURITY, LGPD] })\n  @IsArray({\n    message: 'Os dados sensíveis acessados devem ser um array',\n    groups: [CREATE, UPDATE, SECURITY, LGPD],\n  })\n  dados_sensiveis_acessados?: string[];\n\n  /**\n   * Retorna uma representação textual do log de auditoria\n   *\n   * @returns Descrição resumida do log\n   */\n  toString(): string {\n    return `[${this.tipo_operacao}] ${this.entidade_afetada}${this.entidade_id ? ` (${this.entidade_id})` : ''} - ${this.metodo_http || ''} ${this.endpoint || ''}`;\n  }\n}\n"],"version":3}