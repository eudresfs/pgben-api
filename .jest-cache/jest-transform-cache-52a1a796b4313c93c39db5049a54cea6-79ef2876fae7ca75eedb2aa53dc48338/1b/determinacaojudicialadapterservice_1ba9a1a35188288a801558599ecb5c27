5664cd8d7b491d07c0380082eab87833
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var DeterminacaoJudicialAdapterService_1;
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeterminacaoJudicialAdapterService = void 0;
const common_1 = require("@nestjs/common");
const determinacao_judicial_consolidado_service_1 = require("../../judicial/services/determinacao-judicial-consolidado.service");
/**
 * Adaptador para o serviço de determinação judicial no contexto de solicitações
 *
 * Este serviço atua como uma camada de adaptação entre o módulo de solicitação
 * e o serviço consolidado de determinação judicial, mantendo a interface
 * específica do contexto de solicitações.
 *
 * Responsabilidades:
 * - Adaptar chamadas do contexto de solicitação para o serviço consolidado
 * - Manter compatibilidade com a interface existente
 * - Fornecer métodos específicos para o contexto de solicitações
 * - Centralizar logs e tratamento de erros específicos do contexto
 */
let DeterminacaoJudicialAdapterService = DeterminacaoJudicialAdapterService_1 = class DeterminacaoJudicialAdapterService {
    determinacaoConsolidadoService;
    logger = new common_1.Logger(DeterminacaoJudicialAdapterService_1.name);
    constructor(determinacaoConsolidadoService) {
        this.determinacaoConsolidadoService = determinacaoConsolidadoService;
    }
    /**
     * Cria uma nova determinação judicial para uma solicitação
     *
     * @param createDeterminacaoDto Dados da determinação judicial
     * @param usuarioId ID do usuário que está criando a determinação
     * @returns Determinação judicial criada
     */
    async create(createDeterminacaoDto, usuarioId) {
        this.logger.log(`Criando determinação judicial para solicitação ${createDeterminacaoDto.solicitacao_id}`);
        return this.determinacaoConsolidadoService.createForSolicitacao(createDeterminacaoDto, usuarioId);
    }
    /**
     * Busca uma determinação judicial pelo ID
     *
     * @param id ID da determinação judicial
     * @returns Determinação judicial encontrada
     */
    async findById(id) {
        return this.determinacaoConsolidadoService.findById(id, ['solicitacao']);
    }
    /**
     * Busca todas as determinações judiciais de uma solicitação
     *
     * @param solicitacaoId ID da solicitação
     * @returns Lista de determinações judiciais
     */
    async findBySolicitacaoId(solicitacaoId) {
        this.logger.log(`Buscando determinações judiciais para solicitação ${solicitacaoId}`);
        return this.determinacaoConsolidadoService.findBySolicitacaoId(solicitacaoId);
    }
    /**
     * Atualiza uma determinação judicial
     *
     * @param id ID da determinação judicial
     * @param updateDeterminacaoDto Dados para atualização
     * @returns Determinação judicial atualizada
     */
    async update(id, updateDeterminacaoDto) {
        this.logger.log(`Atualizando determinação judicial ${id}`);
        return this.determinacaoConsolidadoService.updateForSolicitacao(id, updateDeterminacaoDto);
    }
    /**
     * Registra o cumprimento de uma determinação judicial
     *
     * @param id ID da determinação judicial
     * @param observacoes Observações sobre o cumprimento
     * @returns Determinação judicial atualizada
     */
    async registrarCumprimento(id, observacoes) {
        this.logger.log(`Registrando cumprimento da determinação judicial ${id}`);
        return this.determinacaoConsolidadoService.registrarCumprimento(id, observacoes);
    }
    /**
     * Remove uma determinação judicial
     *
     * @param id ID da determinação judicial
     * @returns Void
     */
    async remove(id) {
        this.logger.log(`Removendo determinação judicial ${id}`);
        return this.determinacaoConsolidadoService.removeFromSolicitacao(id);
    }
    // ========================================
    // MÉTODOS DE COMPATIBILIDADE
    // ========================================
    /**
     * Busca determinações por solicitação (alias para findBySolicitacaoId)
     * Mantém compatibilidade com interface existente
     *
     * @param solicitacaoId ID da solicitação
     * @returns Lista de determinações judiciais
     */
    async findBySolicitacao(solicitacaoId) {
        return this.findBySolicitacaoId(solicitacaoId);
    }
    /**
     * Marca determinação como cumprida (alias para registrarCumprimento)
     * Mantém compatibilidade com interface existente
     *
     * @param id ID da determinação judicial
     * @param observacoes Observações sobre o cumprimento
     * @returns Determinação judicial atualizada
     */
    async marcarComoCumprida(id, observacoes) {
        return this.registrarCumprimento(id, observacoes);
    }
};
exports.DeterminacaoJudicialAdapterService = DeterminacaoJudicialAdapterService;
exports.DeterminacaoJudicialAdapterService = DeterminacaoJudicialAdapterService = DeterminacaoJudicialAdapterService_1 = __decorate([
    (0, common_1.Injectable)(),
    __metadata("design:paramtypes", [typeof (_a = typeof determinacao_judicial_consolidado_service_1.DeterminacaoJudicialConsolidadoService !== "undefined" && determinacao_judicial_consolidado_service_1.DeterminacaoJudicialConsolidadoService) === "function" ? _a : Object])
], DeterminacaoJudicialAdapterService);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHNvbGljaXRhY2FvXFxzZXJ2aWNlc1xcZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLWFkYXB0ZXIuc2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLDJDQUFvRDtBQUNwRCxpSUFBMkg7QUFLM0g7Ozs7Ozs7Ozs7OztHQVlHO0FBRUksSUFBTSxrQ0FBa0MsMENBQXhDLE1BQU0sa0NBQWtDO0lBSTFCO0lBSEYsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLG9DQUFrQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRTlFLFlBQ21CLDhCQUFzRTtRQUF0RSxtQ0FBOEIsR0FBOUIsOEJBQThCLENBQXdDO0lBQ3RGLENBQUM7SUFFSjs7Ozs7O09BTUc7SUFDSCxLQUFLLENBQUMsTUFBTSxDQUNWLHFCQUErRCxFQUMvRCxTQUFpQjtRQUVqQixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FDYixrREFBa0QscUJBQXFCLENBQUMsY0FBYyxFQUFFLENBQ3pGLENBQUM7UUFFRixPQUFPLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxvQkFBb0IsQ0FDN0QscUJBQXFCLEVBQ3JCLFNBQVMsQ0FDVixDQUFDO0lBQ0osQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFVO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLDhCQUE4QixDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO0lBQzNFLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILEtBQUssQ0FBQyxtQkFBbUIsQ0FDdkIsYUFBcUI7UUFFckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQ2IscURBQXFELGFBQWEsRUFBRSxDQUNyRSxDQUFDO1FBRUYsT0FBTyxJQUFJLENBQUMsOEJBQThCLENBQUMsbUJBQW1CLENBQzVELGFBQWEsQ0FDZCxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILEtBQUssQ0FBQyxNQUFNLENBQ1YsRUFBVSxFQUNWLHFCQUErRDtRQUUvRCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQ0FBcUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUUzRCxPQUFPLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxvQkFBb0IsQ0FDN0QsRUFBRSxFQUNGLHFCQUFxQixDQUN0QixDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILEtBQUssQ0FBQyxvQkFBb0IsQ0FDeEIsRUFBVSxFQUNWLFdBQW9CO1FBRXBCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLG9EQUFvRCxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBRTFFLE9BQU8sSUFBSSxDQUFDLDhCQUE4QixDQUFDLG9CQUFvQixDQUM3RCxFQUFFLEVBQ0YsV0FBVyxDQUNaLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQVU7UUFDckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFekQsT0FBTyxJQUFJLENBQUMsOEJBQThCLENBQUMscUJBQXFCLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVELDJDQUEyQztJQUMzQyw2QkFBNkI7SUFDN0IsMkNBQTJDO0lBRTNDOzs7Ozs7T0FNRztJQUNILEtBQUssQ0FBQyxpQkFBaUIsQ0FDckIsYUFBcUI7UUFFckIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxLQUFLLENBQUMsa0JBQWtCLENBQ3RCLEVBQVUsRUFDVixXQUFvQjtRQUVwQixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDcEQsQ0FBQztDQUNGLENBQUE7QUF6SVksZ0ZBQWtDOzZDQUFsQyxrQ0FBa0M7SUFEOUMsSUFBQSxtQkFBVSxHQUFFO3lEQUt3QyxrRkFBc0Msb0JBQXRDLGtGQUFzQztHQUo5RSxrQ0FBa0MsQ0F5STlDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxzb2xpY2l0YWNhb1xcc2VydmljZXNcXGRldGVybWluYWNhby1qdWRpY2lhbC1hZGFwdGVyLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgTG9nZ2VyIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgRGV0ZXJtaW5hY2FvSnVkaWNpYWxDb25zb2xpZGFkb1NlcnZpY2UgfSBmcm9tICcuLi8uLi9qdWRpY2lhbC9zZXJ2aWNlcy9kZXRlcm1pbmFjYW8tanVkaWNpYWwtY29uc29saWRhZG8uc2VydmljZSc7XG5pbXBvcnQgeyBEZXRlcm1pbmFjYW9KdWRpY2lhbCB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL2RldGVybWluYWNhby1qdWRpY2lhbC5lbnRpdHknO1xuaW1wb3J0IHsgU29saWNpdGFjYW9DcmVhdGVEZXRlcm1pbmFjYW9KdWRpY2lhbER0byB9IGZyb20gJy4uL2R0by9jcmVhdGUtZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLmR0byc7XG5pbXBvcnQgeyBTb2xpY2l0YWNhb1VwZGF0ZURldGVybWluYWNhb0p1ZGljaWFsRHRvIH0gZnJvbSAnLi4vZHRvL3VwZGF0ZS1kZXRlcm1pbmFjYW8tanVkaWNpYWwuZHRvJztcblxuLyoqXG4gKiBBZGFwdGFkb3IgcGFyYSBvIHNlcnZpw6dvIGRlIGRldGVybWluYcOnw6NvIGp1ZGljaWFsIG5vIGNvbnRleHRvIGRlIHNvbGljaXRhw6fDtWVzXG4gKlxuICogRXN0ZSBzZXJ2acOnbyBhdHVhIGNvbW8gdW1hIGNhbWFkYSBkZSBhZGFwdGHDp8OjbyBlbnRyZSBvIG3Ds2R1bG8gZGUgc29saWNpdGHDp8Ojb1xuICogZSBvIHNlcnZpw6dvIGNvbnNvbGlkYWRvIGRlIGRldGVybWluYcOnw6NvIGp1ZGljaWFsLCBtYW50ZW5kbyBhIGludGVyZmFjZVxuICogZXNwZWPDrWZpY2EgZG8gY29udGV4dG8gZGUgc29saWNpdGHDp8O1ZXMuXG4gKlxuICogUmVzcG9uc2FiaWxpZGFkZXM6XG4gKiAtIEFkYXB0YXIgY2hhbWFkYXMgZG8gY29udGV4dG8gZGUgc29saWNpdGHDp8OjbyBwYXJhIG8gc2VydmnDp28gY29uc29saWRhZG9cbiAqIC0gTWFudGVyIGNvbXBhdGliaWxpZGFkZSBjb20gYSBpbnRlcmZhY2UgZXhpc3RlbnRlXG4gKiAtIEZvcm5lY2VyIG3DqXRvZG9zIGVzcGVjw61maWNvcyBwYXJhIG8gY29udGV4dG8gZGUgc29saWNpdGHDp8O1ZXNcbiAqIC0gQ2VudHJhbGl6YXIgbG9ncyBlIHRyYXRhbWVudG8gZGUgZXJyb3MgZXNwZWPDrWZpY29zIGRvIGNvbnRleHRvXG4gKi9cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBEZXRlcm1pbmFjYW9KdWRpY2lhbEFkYXB0ZXJTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXIgPSBuZXcgTG9nZ2VyKERldGVybWluYWNhb0p1ZGljaWFsQWRhcHRlclNlcnZpY2UubmFtZSk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBkZXRlcm1pbmFjYW9Db25zb2xpZGFkb1NlcnZpY2U6IERldGVybWluYWNhb0p1ZGljaWFsQ29uc29saWRhZG9TZXJ2aWNlLFxuICApIHt9XG5cbiAgLyoqXG4gICAqIENyaWEgdW1hIG5vdmEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgcGFyYSB1bWEgc29saWNpdGHDp8Ojb1xuICAgKlxuICAgKiBAcGFyYW0gY3JlYXRlRGV0ZXJtaW5hY2FvRHRvIERhZG9zIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSB1c3VhcmlvSWQgSUQgZG8gdXN1w6FyaW8gcXVlIGVzdMOhIGNyaWFuZG8gYSBkZXRlcm1pbmHDp8Ojb1xuICAgKiBAcmV0dXJucyBEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBjcmlhZGFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZShcbiAgICBjcmVhdGVEZXRlcm1pbmFjYW9EdG86IFNvbGljaXRhY2FvQ3JlYXRlRGV0ZXJtaW5hY2FvSnVkaWNpYWxEdG8sXG4gICAgdXN1YXJpb0lkOiBzdHJpbmcsXG4gICk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWw+IHtcbiAgICB0aGlzLmxvZ2dlci5sb2coXG4gICAgICBgQ3JpYW5kbyBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBwYXJhIHNvbGljaXRhw6fDo28gJHtjcmVhdGVEZXRlcm1pbmFjYW9EdG8uc29saWNpdGFjYW9faWR9YCxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvQ29uc29saWRhZG9TZXJ2aWNlLmNyZWF0ZUZvclNvbGljaXRhY2FvKFxuICAgICAgY3JlYXRlRGV0ZXJtaW5hY2FvRHRvLFxuICAgICAgdXN1YXJpb0lkLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQnVzY2EgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsIHBlbG8gSURcbiAgICpcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGp1ZGljaWFsIGVuY29udHJhZGFcbiAgICovXG4gIGFzeW5jIGZpbmRCeUlkKGlkOiBzdHJpbmcpOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvQ29uc29saWRhZG9TZXJ2aWNlLmZpbmRCeUlkKGlkLCBbJ3NvbGljaXRhY2FvJ10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHRvZGFzIGFzIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMgZGUgdW1hIHNvbGljaXRhw6fDo29cbiAgICpcbiAgICogQHBhcmFtIHNvbGljaXRhY2FvSWQgSUQgZGEgc29saWNpdGHDp8Ojb1xuICAgKiBAcmV0dXJucyBMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzXG4gICAqL1xuICBhc3luYyBmaW5kQnlTb2xpY2l0YWNhb0lkKFxuICAgIHNvbGljaXRhY2FvSWQ6IHN0cmluZyxcbiAgKTogUHJvbWlzZTxEZXRlcm1pbmFjYW9KdWRpY2lhbFtdPiB7XG4gICAgdGhpcy5sb2dnZXIubG9nKFxuICAgICAgYEJ1c2NhbmRvIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMgcGFyYSBzb2xpY2l0YcOnw6NvICR7c29saWNpdGFjYW9JZH1gLFxuICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9Db25zb2xpZGFkb1NlcnZpY2UuZmluZEJ5U29saWNpdGFjYW9JZChcbiAgICAgIHNvbGljaXRhY2FvSWQsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWxcbiAgICpcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSB1cGRhdGVEZXRlcm1pbmFjYW9EdG8gRGFkb3MgcGFyYSBhdHVhbGl6YcOnw6NvXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGp1ZGljaWFsIGF0dWFsaXphZGFcbiAgICovXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIHVwZGF0ZURldGVybWluYWNhb0R0bzogU29saWNpdGFjYW9VcGRhdGVEZXRlcm1pbmFjYW9KdWRpY2lhbER0byxcbiAgKTogUHJvbWlzZTxEZXRlcm1pbmFjYW9KdWRpY2lhbD4ge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgQXR1YWxpemFuZG8gZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgJHtpZH1gKTtcblxuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0NvbnNvbGlkYWRvU2VydmljZS51cGRhdGVGb3JTb2xpY2l0YWNhbyhcbiAgICAgIGlkLFxuICAgICAgdXBkYXRlRGV0ZXJtaW5hY2FvRHRvLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgbyBjdW1wcmltZW50byBkZSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWxcbiAgICpcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBvYnNlcnZhY29lcyBPYnNlcnZhw6fDtWVzIHNvYnJlIG8gY3VtcHJpbWVudG9cbiAgICogQHJldHVybnMgRGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgYXR1YWxpemFkYVxuICAgKi9cbiAgYXN5bmMgcmVnaXN0cmFyQ3VtcHJpbWVudG8oXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvYnNlcnZhY29lcz86IHN0cmluZyxcbiAgKTogUHJvbWlzZTxEZXRlcm1pbmFjYW9KdWRpY2lhbD4ge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgUmVnaXN0cmFuZG8gY3VtcHJpbWVudG8gZGEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgJHtpZH1gKTtcblxuICAgIHJldHVybiB0aGlzLmRldGVybWluYWNhb0NvbnNvbGlkYWRvU2VydmljZS5yZWdpc3RyYXJDdW1wcmltZW50byhcbiAgICAgIGlkLFxuICAgICAgb2JzZXJ2YWNvZXMsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqXG4gICAqIEBwYXJhbSBpZCBJRCBkYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbFxuICAgKiBAcmV0dXJucyBWb2lkXG4gICAqL1xuICBhc3luYyByZW1vdmUoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMubG9nZ2VyLmxvZyhgUmVtb3ZlbmRvIGRldGVybWluYcOnw6NvIGp1ZGljaWFsICR7aWR9YCk7XG5cbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9Db25zb2xpZGFkb1NlcnZpY2UucmVtb3ZlRnJvbVNvbGljaXRhY2FvKGlkKTtcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gTcOJVE9ET1MgREUgQ09NUEFUSUJJTElEQURFXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICogQnVzY2EgZGV0ZXJtaW5hw6fDtWVzIHBvciBzb2xpY2l0YcOnw6NvIChhbGlhcyBwYXJhIGZpbmRCeVNvbGljaXRhY2FvSWQpXG4gICAqIE1hbnTDqW0gY29tcGF0aWJpbGlkYWRlIGNvbSBpbnRlcmZhY2UgZXhpc3RlbnRlXG4gICAqXG4gICAqIEBwYXJhbSBzb2xpY2l0YWNhb0lkIElEIGRhIHNvbGljaXRhw6fDo29cbiAgICogQHJldHVybnMgTGlzdGEgZGUgZGV0ZXJtaW5hw6fDtWVzIGp1ZGljaWFpc1xuICAgKi9cbiAgYXN5bmMgZmluZEJ5U29saWNpdGFjYW8oXG4gICAgc29saWNpdGFjYW9JZDogc3RyaW5nLFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsW10+IHtcbiAgICByZXR1cm4gdGhpcy5maW5kQnlTb2xpY2l0YWNhb0lkKHNvbGljaXRhY2FvSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmNhIGRldGVybWluYcOnw6NvIGNvbW8gY3VtcHJpZGEgKGFsaWFzIHBhcmEgcmVnaXN0cmFyQ3VtcHJpbWVudG8pXG4gICAqIE1hbnTDqW0gY29tcGF0aWJpbGlkYWRlIGNvbSBpbnRlcmZhY2UgZXhpc3RlbnRlXG4gICAqXG4gICAqIEBwYXJhbSBpZCBJRCBkYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbFxuICAgKiBAcGFyYW0gb2JzZXJ2YWNvZXMgT2JzZXJ2YcOnw7VlcyBzb2JyZSBvIGN1bXByaW1lbnRvXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGp1ZGljaWFsIGF0dWFsaXphZGFcbiAgICovXG4gIGFzeW5jIG1hcmNhckNvbW9DdW1wcmlkYShcbiAgICBpZDogc3RyaW5nLFxuICAgIG9ic2VydmFjb2VzPzogc3RyaW5nLFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0cmFyQ3VtcHJpbWVudG8oaWQsIG9ic2VydmFjb2VzKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9