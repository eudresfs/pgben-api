{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\metricas\\dto\\metrica-configuracao.dto.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\metricas\\dto\\metrica-configuracao.dto.ts"],"sourcesContent":["import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport {\n  IsString,\n  IsEnum,\n  IsNotEmpty,\n  IsOptional,\n  IsNumber,\n  IsBoolean,\n  IsArray,\n  IsUUID,\n  ValidateNested,\n} from 'class-validator';\nimport { Type } from 'class-transformer';\nimport { TipoAgendamento, EstrategiaAmostragem } from '../../../entities';\n\n/**\n * DTO para criar configuração de uma métrica\n */\nexport class CriarMetricaConfiguracaoDto {\n  @ApiProperty({\n    description: 'ID da métrica para a qual a configuração será criada',\n    example: '123e4567-e89b-12d3-a456-426614174000',\n  })\n  @IsUUID()\n  @IsNotEmpty()\n  metrica_id: string;\n\n  @ApiPropertyOptional({\n    description: 'Habilita ou desabilita a coleta automática',\n    example: true,\n    default: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  coleta_automatica?: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Tipo de agendamento para coleta automática',\n    enum: TipoAgendamento,\n    example: TipoAgendamento.INTERVALO,\n    default: TipoAgendamento.INTERVALO,\n  })\n  @IsEnum(TipoAgendamento)\n  @IsOptional()\n  tipo_agendamento?: TipoAgendamento;\n\n  @ApiPropertyOptional({\n    description:\n      'Valor do intervalo de coleta em segundos (para tipo INTERVALO)',\n    example: 86400, // 1 dia\n    default: 86400,\n  })\n  @IsNumber()\n  @IsOptional()\n  intervalo_segundos?: number;\n\n  @ApiPropertyOptional({\n    description: 'Expressão cron para agendamento complexo (para tipo CRON)',\n    example: '0 0 * * *', // Diariamente à meia-noite\n  })\n  @IsString()\n  @IsOptional()\n  expressao_cron?: string;\n\n  @ApiPropertyOptional({\n    description: 'Nome do evento que dispara a coleta (para tipo EVENTO)',\n    example: 'beneficio_aprovado',\n  })\n  @IsString()\n  @IsOptional()\n  nome_evento?: string;\n\n  @ApiPropertyOptional({\n    description: 'Número máximo de snapshots a serem mantidos (0 = sem limite)',\n    example: 365,\n    default: 0,\n  })\n  @IsNumber()\n  @IsOptional()\n  max_snapshots?: number;\n\n  @ApiPropertyOptional({\n    description: 'Período máximo de retenção em dias (0 = sem limite)',\n    example: 365,\n    default: 365,\n  })\n  @IsNumber()\n  @IsOptional()\n  periodo_retencao_dias?: number;\n\n  @ApiPropertyOptional({\n    description: 'Estratégia de amostragem para coleta de dados',\n    enum: EstrategiaAmostragem,\n    example: EstrategiaAmostragem.COMPLETA,\n    default: EstrategiaAmostragem.COMPLETA,\n  })\n  @IsEnum(EstrategiaAmostragem)\n  @IsOptional()\n  estrategia_amostragem?: EstrategiaAmostragem;\n\n  @ApiPropertyOptional({\n    description: 'Tamanho da amostra (quando aplicável)',\n    example: 1000,\n    default: 0,\n  })\n  @IsNumber()\n  @IsOptional()\n  tamanho_amostra?: number;\n\n  @ApiPropertyOptional({\n    description: 'Habilita ou desabilita o cacheamento dos valores',\n    example: true,\n    default: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  cacheamento_habilitado?: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Tempo de vida do cache em segundos',\n    example: 300, // 5 minutos\n    default: 300,\n  })\n  @IsNumber()\n  @IsOptional()\n  cache_ttl?: number;\n\n  @ApiPropertyOptional({\n    description: 'Configurações de alertas baseados no valor da métrica',\n    example: [\n      {\n        tipo: 'valor_maximo',\n        valor: 100,\n        mensagem: 'Valor excedeu o limite',\n        severidade: 'alta',\n      },\n      {\n        tipo: 'valor_minimo',\n        valor: 10,\n        mensagem: 'Valor abaixo do mínimo',\n        severidade: 'media',\n      },\n    ],\n  })\n  @IsArray()\n  @IsOptional()\n  alertas?: any[];\n\n  @ApiPropertyOptional({\n    description: 'Configurações de visualização',\n    example: { cor: '#FF5500', icone: 'chart-line', destaque: true },\n  })\n  @IsOptional()\n  visualizacao?: Record<string, any>;\n\n  @ApiPropertyOptional({\n    description: 'Flag que indica se a métrica deve ser exibida em dashboards',\n    example: true,\n    default: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  exibir_dashboard?: boolean;\n\n  @ApiPropertyOptional({\n    description:\n      'Prioridade de exibição (ordem) no dashboard (menor = mais importante)',\n    example: 100,\n    default: 100,\n  })\n  @IsNumber()\n  @IsOptional()\n  prioridade_dashboard?: number;\n}\n\n/**\n * DTO para atualizar configuração de uma métrica\n */\nexport class AtualizarMetricaConfiguracaoDto {\n  @ApiPropertyOptional({\n    description: 'Habilita ou desabilita a coleta automática',\n    example: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  coleta_automatica?: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Tipo de agendamento para coleta automática',\n    enum: TipoAgendamento,\n    example: TipoAgendamento.INTERVALO,\n  })\n  @IsEnum(TipoAgendamento)\n  @IsOptional()\n  tipo_agendamento?: TipoAgendamento;\n\n  @ApiPropertyOptional({\n    description:\n      'Valor do intervalo de coleta em segundos (para tipo INTERVALO)',\n    example: 86400, // 1 dia\n  })\n  @IsNumber()\n  @IsOptional()\n  intervalo_segundos?: number;\n\n  @ApiPropertyOptional({\n    description: 'Expressão cron para agendamento complexo (para tipo CRON)',\n    example: '0 0 * * *', // Diariamente à meia-noite\n  })\n  @IsString()\n  @IsOptional()\n  expressao_cron?: string;\n\n  @ApiPropertyOptional({\n    description: 'Nome do evento que dispara a coleta (para tipo EVENTO)',\n    example: 'beneficio_aprovado',\n  })\n  @IsString()\n  @IsOptional()\n  nome_evento?: string;\n\n  @ApiPropertyOptional({\n    description: 'Número máximo de snapshots a serem mantidos (0 = sem limite)',\n    example: 365,\n  })\n  @IsNumber()\n  @IsOptional()\n  max_snapshots?: number;\n\n  @ApiPropertyOptional({\n    description: 'Período máximo de retenção em dias (0 = sem limite)',\n    example: 365,\n  })\n  @IsNumber()\n  @IsOptional()\n  periodo_retencao_dias?: number;\n\n  @ApiPropertyOptional({\n    description: 'Estratégia de amostragem para coleta de dados',\n    enum: EstrategiaAmostragem,\n    example: EstrategiaAmostragem.COMPLETA,\n  })\n  @IsEnum(EstrategiaAmostragem)\n  @IsOptional()\n  estrategia_amostragem?: EstrategiaAmostragem;\n\n  @ApiPropertyOptional({\n    description: 'Tamanho da amostra (quando aplicável)',\n    example: 1000,\n  })\n  @IsNumber()\n  @IsOptional()\n  tamanho_amostra?: number;\n\n  @ApiPropertyOptional({\n    description: 'Habilita ou desabilita o cacheamento dos valores',\n    example: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  cacheamento_habilitado?: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Tempo de vida do cache em segundos',\n    example: 300, // 5 minutos\n  })\n  @IsNumber()\n  @IsOptional()\n  cache_ttl?: number;\n\n  @ApiPropertyOptional({\n    description: 'Configurações de alertas baseados no valor da métrica',\n    example: [\n      {\n        tipo: 'valor_maximo',\n        valor: 100,\n        mensagem: 'Valor excedeu o limite',\n        severidade: 'alta',\n      },\n    ],\n  })\n  @IsArray()\n  @IsOptional()\n  alertas?: any[];\n\n  @ApiPropertyOptional({\n    description: 'Configurações de visualização',\n    example: { cor: '#FF5500', icone: 'chart-line', destaque: true },\n  })\n  @IsOptional()\n  visualizacao?: Record<string, any>;\n\n  @ApiPropertyOptional({\n    description: 'Flag que indica se a métrica deve ser exibida em dashboards',\n    example: true,\n  })\n  @IsBoolean()\n  @IsOptional()\n  exibir_dashboard?: boolean;\n\n  @ApiPropertyOptional({\n    description:\n      'Prioridade de exibição (ordem) no dashboard (menor = mais importante)',\n    example: 100,\n  })\n  @IsNumber()\n  @IsOptional()\n  prioridade_dashboard?: number;\n}\n"],"version":3}