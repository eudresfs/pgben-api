{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\fluxo-beneficio.entity.ts","mappings":";;;;;;;;;;;;;AAAA,qCAUiB;AACjB,qDAAgF;AAChF,mEAAwD;AACxD,kDAA0C;AAE1C,IAAY,SAMX;AAND,WAAY,SAAS;IACnB,kCAAqB,CAAA;IACrB,sDAAyC,CAAA;IACzC,gDAAmC,CAAA;IACnC,oCAAuB,CAAA;IACvB,oCAAuB,CAAA;AACzB,CAAC,EANW,SAAS,yBAAT,SAAS,QAMpB;AAIM,IAAM,cAAc,GAApB,MAAM,cAAc;IAEzB,EAAE,CAAS;IAIX,iBAAiB,CAAS;IAM1B,cAAc,CAAgB;IAI9B,UAAU,CAAS;IASnB,UAAU,CAAY;IAKtB,KAAK,CAAS;IASd,kBAAkB,CAAO;IAIzB,QAAQ,CAAS;IAIjB,SAAS,CAAS;IAGlB,WAAW,CAAU;IAGrB,eAAe,CAAU;IAGzB,UAAU,CAAO;IAGjB,UAAU,CAAO;IAGjB,UAAU,CAAO;IAEjB,oBAAoB;IACpB,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAED,sBAAsB;IAEtB;;OAEG;IACH,oBAAoB;QAClB,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,UAAU,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QACnE,OAAO,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IACtC,CAAC;IAED;;OAEG;IACH,sBAAsB;QACpB,MAAM,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;QACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC,CAAC;QACvE,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;IACrD,CAAC;IAED;;OAEG;IACH,WAAW;QACT,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAED;;OAEG;IACH,OAAO;QACL,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,aAAa;QACX,OAAO,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,cAAc;QACZ,OAAO,IAAI,CAAC,eAAe,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,QAAQ;QACN,OAAO,CACL,IAAI,CAAC,QAAQ,KAAK,IAAI;YACtB,IAAI,CAAC,QAAQ,KAAK,SAAS;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,KAAK,EAAE,CAC5B,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,YAAY;QACV,OAAO,CACL,IAAI,CAAC,SAAS,KAAK,IAAI;YACvB,IAAI,CAAC,SAAS,KAAK,SAAS;YAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,EAAE,CAC7B,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,qBAAqB;QACnB,MAAM,UAAU,GAAG;YACjB,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,yBAAyB;YAC/C,CAAC,SAAS,CAAC,kBAAkB,CAAC,EAAE,uBAAuB;YACvD,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE,iBAAiB;YAC9C,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,WAAW;YAClC,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,wBAAwB;SAChD,CAAC;QACF,OAAO,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,4BAA4B,CAAC;IACrE,CAAC;IAED;;OAEG;IACH,6BAA6B;QAC3B,MAAM,UAAU,GAAG;YACjB,CAAC,gBAAI,CAAC,KAAK,CAAC,EAAE,eAAe;YAC7B,CAAC,gBAAI,CAAC,MAAM,CAAC,EAAE,QAAQ;YACvB,CAAC,gBAAI,CAAC,OAAO,CAAC,EAAE,SAAS;YACzB,CAAC,gBAAI,CAAC,WAAW,CAAC,EAAE,aAAa;YACjC,CAAC,gBAAI,CAAC,iBAAiB,CAAC,EAAE,mBAAmB;YAC7C,CAAC,gBAAI,CAAC,OAAO,CAAC,EAAE,SAAS;SAC1B,CAAC;QACF,OAAO,CACL,UAAU,CAAC,IAAI,CAAC,kBAA6C,CAAC;YAC9D,qBAAqB,CACtB,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,eAAe;QACb,OAAO,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,cAAc;QACZ,OAAO,CACL,IAAI,CAAC,UAAU,KAAK,SAAS,CAAC,kBAAkB;YAChD,IAAI,CAAC,UAAU,KAAK,SAAS,CAAC,eAAe,CAC9C,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,cAAc;QACZ,OAAO,IAAI,CAAC,UAAU,KAAK,SAAS,CAAC,SAAS,CAAC;IACjD,CAAC;IAED;;OAEG;IACH,YAAY;QACV,OAAO,IAAI,CAAC,UAAU,KAAK,SAAS,CAAC,SAAS,CAAC;IACjD,CAAC;IAED;;OAEG;IACH,cAAc;QACZ,OAAO,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;IACxD,CAAC;IAED;;OAEG;IACH,mBAAmB;QACjB,IAAI,MAAM,GAAG,CAAC,CAAC;QAEf,IAAI,IAAI,CAAC,aAAa,EAAE;YAAE,MAAM,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YAAE,MAAM,IAAI,CAAC,CAAC;QACxC,IAAI,IAAI,CAAC,cAAc,EAAE,IAAI,IAAI,CAAC,YAAY,EAAE;YAAE,MAAM,IAAI,CAAC,CAAC;QAE9D,IAAI,MAAM,IAAI,CAAC;YAAE,OAAO,OAAO,CAAC;QAChC,IAAI,MAAM,IAAI,CAAC;YAAE,OAAO,OAAO,CAAC;QAChC,OAAO,MAAM,CAAC;IAChB,CAAC;IAED;;OAEG;IACH,uBAAuB,CAAC,eAAuB;QAC7C,OAAO,IAAI,CAAC,iBAAiB,KAAK,eAAe,CAAC;IACpD,CAAC;IAED;;OAEG;IACH,UAAU;QACR,MAAM,WAAW,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC;QACtE,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE;YACnC,CAAC,CAAC,iBAAiB;YACnB,CAAC,CAAC,qBAAqB,CAAC;QAC1B,OAAO,GAAG,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,UAAU,KAAK,WAAW,KAAK,OAAO,GAAG,CAAC;IAC1E,CAAC;IAED;;OAEG;IACH,YAAY;QACV,OAAO,SAAS,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,KAAK,EAAE,CAAC;IACzD,CAAC;IAED;;OAEG;IACH,aAAa;QACX,oCAAoC;QACpC,IAAI,CAAC,IAAI,CAAC,iBAAiB;YAAE,OAAO,KAAK,CAAC;QAE1C,gCAAgC;QAChC,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE;YAAE,OAAO,KAAK,CAAC;QAEpE,6BAA6B;QAC7B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC;YAAE,OAAO,KAAK,CAAC;QAEjC,qCAAqC;QACrC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC;YAAE,OAAO,KAAK,CAAC;QAEtE,0CAA0C;QAC1C,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,gBAAI,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;YAAE,OAAO,KAAK,CAAC;QAEzE,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IACH,eAAe;QACb,sCAAsC;QACtC,IAAI,IAAI,CAAC,WAAW,EAAE;YAAE,OAAO,KAAK,CAAC;QAErC,kDAAkD;QAClD,IAAI,IAAI,CAAC,eAAe,EAAE;YAAE,OAAO,KAAK,CAAC;QAEzC,mDAAmD;QACnD,IAAI,IAAI,CAAC,aAAa,EAAE;YAAE,OAAO,KAAK,CAAC;QAEvC,OAAO,IAAI,CAAC;IACd,CAAC;IAED;;OAEG;IACH,KAAK;QACH,OAAO;YACL,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;YAC3C,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,eAAe,EAAE,IAAI,CAAC,eAAe;SACtC,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,UAAU;QACR,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,IAAI,CAAC,cAAc,EAAE,CAAC;IACxD,CAAC;IAED;;OAEG;IACH,mBAAmB;QACjB,OAAO,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC;IAED;;OAEG;IACH,uBAAuB;QACrB,OAAO,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC;IACrD,CAAC;IAED;;OAEG;IACH,SAAS;QACP,OAAO;YACL,EAAE,EAAE,IAAI,CAAC,EAAE;YACX,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,kBAAkB,EAAE,IAAI,CAAC,kBAAkB;YAC3C,WAAW,EAAE,IAAI,CAAC,WAAW;YAC7B,eAAe,EAAE,IAAI,CAAC,eAAe;YACrC,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;SAC5B,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,oBAAoB;QAClB,MAAM,SAAS,GAAa,EAAE,CAAC;QAE/B,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC;YACzB,SAAS,CAAC,IAAI,CAAC,wCAAwC,CAAC,CAAC;QAC3D,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC;YACrB,SAAS,CAAC,IAAI,CAAC,sCAAsC,CAAC,CAAC;QACzD,CAAC;QAED,IAAI,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC;YAClD,SAAS,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;QAC/D,CAAC;QAED,IAAI,IAAI,CAAC,cAAc,EAAE,IAAI,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC;YACnD,SAAS,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;QACzE,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;YAC1B,SAAS,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;QACnE,CAAC;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAED;;OAEG;IACH,kBAAkB;QAChB,uDAAuD;QACvD,MAAM,cAAc,GAAG,IAAI,IAAI,EAAE,CAAC;QAClC,cAAc,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;QACvD,OAAO,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;IAC1C,CAAC;IAED;;OAEG;IACH,eAAe;QAUb,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,SAAS,EAAE,IAAI,CAAC,qBAAqB,EAAE;YACvC,iBAAiB,EAAE,IAAI,CAAC,6BAA6B,EAAE;YACvD,WAAW,EAAE,IAAI,CAAC,aAAa,EAAE;YACjC,cAAc,EAAE,IAAI,CAAC,cAAc,EAAE;YACrC,gBAAgB,EAAE,IAAI,CAAC,mBAAmB,EAAE;YAC5C,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE;YACzB,YAAY,EAAE,IAAI,CAAC,YAAY,EAAE;SAClC,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,eAAe,CAAC,KAAqD;QAKnE,MAAM,OAAO,GAAa,EAAE,CAAC;QAC7B,MAAM,WAAW,GAAa,EAAE,CAAC;QAEjC,wDAAwD;QACxD,IAAI,KAAK,CAAC,aAAa,KAAK,IAAI,CAAC,kBAAkB,EAAE,CAAC;YACpD,OAAO,CAAC,IAAI,CACV,UAAU,KAAK,CAAC,aAAa,4BAA4B,IAAI,CAAC,kBAAkB,EAAE,CACnF,CAAC;QACJ,CAAC;QAED,2DAA2D;QAC3D,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,KAAK,CAAC,YAAY,KAAK,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC5D,OAAO,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;QACvE,CAAC;QAED,4BAA4B;QAC5B,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE,CAAC;YACzB,WAAW,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;QACnD,CAAC;QAED,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,CAAC;YAC3B,WAAW,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;QAC9D,CAAC;QAED,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC;YACxB,WAAW,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;QACvD,CAAC;QAED,OAAO;YACL,YAAY,EAAE,OAAO,CAAC,MAAM,KAAK,CAAC;YAClC,OAAO;YACP,WAAW;SACZ,CAAC;IACJ,CAAC;CACF,CAAA;AAzcY,wCAAc;AAEzB;IADC,IAAA,gCAAsB,EAAC,MAAM,CAAC;;0CACpB;AAIX;IAFC,IAAA,gBAAM,GAAE;IACR,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,iCAAiC,EAAE,CAAC;;yDACjC;AAM1B;IAJC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,qCAAa,EAAE,CAAC,aAAa,EAAE,EAAE,CAAC,aAAa,CAAC,EAAE,EAAE;QACnE,QAAQ,EAAE,SAAS;KACpB,CAAC;IACD,IAAA,oBAAU,EAAC,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC;kDAC1B,qCAAa,oBAAb,qCAAa;sDAAC;AAI9B;IAFC,IAAA,gBAAM,GAAE;IACR,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC;;kDACpC;AASnB;IAPC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,SAAS;QACf,QAAQ,EAAE,YAAY;KACvB,CAAC;IACD,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC;IACtD,IAAA,wBAAM,EAAC,SAAS,EAAE,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;;kDACnC;AAKtB;IAHC,IAAA,gBAAM,GAAE;IACR,IAAA,0BAAQ,EAAC,EAAE,EAAE,EAAE,OAAO,EAAE,0BAA0B,EAAE,CAAC;IACrD,IAAA,qBAAG,EAAC,CAAC,EAAE,EAAE,OAAO,EAAE,+BAA+B,EAAE,CAAC;;6CACvC;AASd;IAPC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,gBAAI;QACV,QAAQ,EAAE,oBAAoB;KAC/B,CAAC;IACD,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC;IAC3D,IAAA,wBAAM,EAAC,gBAAI,EAAE,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC;kDACrC,gBAAI,oBAAJ,gBAAI;0DAAC;AAIzB;IAFC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC1B,IAAA,4BAAU,GAAE;;gDACI;AAIjB;IAFC,IAAA,gBAAM,EAAC,MAAM,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAClC,IAAA,4BAAU,GAAE;;iDACK;AAGlB;IADC,IAAA,gBAAM,EAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;;mDACL;AAGrB;IADC,IAAA,gBAAM,EAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;;uDACF;AAGzB;IADC,IAAA,0BAAgB,GAAE;kDACP,IAAI,oBAAJ,IAAI;kDAAC;AAGjB;IADC,IAAA,0BAAgB,GAAE;kDACP,IAAI,oBAAJ,IAAI;kDAAC;AAGjB;IADC,IAAA,0BAAgB,GAAE;kDACP,IAAI,oBAAJ,IAAI;kDAAC;yBA9DN,cAAc;IAF1B,IAAA,gBAAM,EAAC,iBAAiB,CAAC;IACzB,IAAA,eAAK,EAAC,CAAC,mBAAmB,EAAE,OAAO,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;GAC3C,cAAc,CAyc1B","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\fluxo-beneficio.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n  DeleteDateColumn,\n  ManyToOne,\n  JoinColumn,\n  Index,\n} from 'typeorm';\nimport { IsNotEmpty, IsOptional, IsNumber, Min, IsEnum } from 'class-validator';\nimport { TipoBeneficio } from './tipo-beneficio.entity';\nimport { Role } from '../enums/role.enum';\n\nexport enum TipoEtapa {\n  ABERTURA = 'abertura',\n  ANALISE_DOCUMENTOS = 'analise_documentos',\n  ANALISE_TECNICA = 'analise_tecnica',\n  APROVACAO = 'aprovacao',\n  LIBERACAO = 'liberacao',\n}\n\n@Entity('fluxo_beneficio')\n@Index(['tipo_beneficio_id', 'ordem'], { unique: true })\nexport class FluxoBeneficio {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column()\n  @IsNotEmpty({ message: 'Tipo de benefício é obrigatório' })\n  tipo_beneficio_id: string;\n\n  @ManyToOne(() => TipoBeneficio, (tipoBeneficio) => tipoBeneficio.id, {\n    onDelete: 'CASCADE',\n  })\n  @JoinColumn({ name: 'tipo_beneficio_id' })\n  tipo_beneficio: TipoBeneficio;\n\n  @Column()\n  @IsNotEmpty({ message: 'Nome da etapa é obrigatório' })\n  nome_etapa: string;\n\n  @Column({\n    type: 'enum',\n    enum: TipoEtapa,\n    enumName: 'tipo_etapa',\n  })\n  @IsNotEmpty({ message: 'Tipo de etapa é obrigatório' })\n  @IsEnum(TipoEtapa, { message: 'Tipo de etapa inválido' })\n  tipo_etapa: TipoEtapa;\n\n  @Column()\n  @IsNumber({}, { message: 'Ordem deve ser um número' })\n  @Min(1, { message: 'Ordem deve ser maior que zero' })\n  ordem: number;\n\n  @Column({\n    type: 'enum',\n    enum: Role,\n    enumName: 'perfil_responsavel',\n  })\n  @IsNotEmpty({ message: 'Perfil responsável é obrigatório' })\n  @IsEnum(Role, { message: 'Perfil responsável inválido' })\n  perfil_responsavel: Role;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  setor_id: string;\n\n  @Column('text', { nullable: true })\n  @IsOptional()\n  descricao: string;\n\n  @Column({ default: true })\n  obrigatorio: boolean;\n\n  @Column({ default: false })\n  permite_retorno: boolean;\n\n  @CreateDateColumn()\n  created_at: Date;\n\n  @UpdateDateColumn()\n  updated_at: Date;\n\n  @DeleteDateColumn()\n  removed_at: Date;\n\n  // Getters e Setters\n  get createdAt(): Date {\n    return this.created_at;\n  }\n\n  get updatedAt(): Date {\n    return this.updated_at;\n  }\n\n  get removedAt(): Date {\n    return this.removed_at;\n  }\n\n  // Métodos Utilitários\n\n  /**\n   * Verifica se o fluxo foi criado recentemente (últimas 24 horas)\n   */\n  isCriadoRecentemente(): boolean {\n    const agora = new Date();\n    const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);\n    return this.created_at > umDiaAtras;\n  }\n\n  /**\n   * Calcula a idade do registro em dias\n   */\n  getIdadeRegistroEmDias(): number {\n    const agora = new Date();\n    const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());\n    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  }\n\n  /**\n   * Verifica se foi removido\n   */\n  foiRemovido(): boolean {\n    return !!this.removed_at;\n  }\n\n  /**\n   * Verifica se está ativo\n   */\n  isAtivo(): boolean {\n    return !this.removed_at;\n  }\n\n  /**\n   * Verifica se é obrigatório\n   */\n  isObrigatorio(): boolean {\n    return this.obrigatorio;\n  }\n\n  /**\n   * Verifica se permite retorno\n   */\n  permiteRetorno(): boolean {\n    return this.permite_retorno;\n  }\n\n  /**\n   * Verifica se tem setor definido\n   */\n  temSetor(): boolean {\n    return (\n      this.setor_id !== null &&\n      this.setor_id !== undefined &&\n      this.setor_id.trim() !== ''\n    );\n  }\n\n  /**\n   * Verifica se tem descrição\n   */\n  temDescricao(): boolean {\n    return (\n      this.descricao !== null &&\n      this.descricao !== undefined &&\n      this.descricao.trim() !== ''\n    );\n  }\n\n  /**\n   * Obtém a descrição do tipo de etapa\n   */\n  getDescricaoTipoEtapa(): string {\n    const descricoes = {\n      [TipoEtapa.ABERTURA]: 'Abertura da Solicitação',\n      [TipoEtapa.ANALISE_DOCUMENTOS]: 'Análise de Documentos',\n      [TipoEtapa.ANALISE_TECNICA]: 'Análise Técnica',\n      [TipoEtapa.APROVACAO]: 'Aprovação',\n      [TipoEtapa.LIBERACAO]: 'Liberação do Benefício',\n    };\n    return descricoes[this.tipo_etapa] || 'Tipo de etapa desconhecido';\n  }\n\n  /**\n   * Obtém a descrição do perfil responsável\n   */\n  getDescricaoPerfilResponsavel(): string {\n    const descricoes = {\n      [Role.ADMIN]: 'Administrador',\n      [Role.GESTOR]: 'Gestor',\n      [Role.TECNICO]: 'Técnico',\n      [Role.COORDENADOR]: 'Coordenador',\n      [Role.ASSISTENTE_SOCIAL]: 'Assistente Social',\n      [Role.AUDITOR]: 'Auditor',\n    };\n    return (\n      descricoes[this.perfil_responsavel as keyof typeof descricoes] ||\n      'Perfil desconhecido'\n    );\n  }\n\n  /**\n   * Verifica se é a primeira etapa do fluxo\n   */\n  isPrimeiraEtapa(): boolean {\n    return this.ordem === 1;\n  }\n\n  /**\n   * Verifica se é uma etapa de análise\n   */\n  isEtapaAnalise(): boolean {\n    return (\n      this.tipo_etapa === TipoEtapa.ANALISE_DOCUMENTOS ||\n      this.tipo_etapa === TipoEtapa.ANALISE_TECNICA\n    );\n  }\n\n  /**\n   * Verifica se é uma etapa de decisão\n   */\n  isEtapaDecisao(): boolean {\n    return this.tipo_etapa === TipoEtapa.APROVACAO;\n  }\n\n  /**\n   * Verifica se é a etapa final\n   */\n  isEtapaFinal(): boolean {\n    return this.tipo_etapa === TipoEtapa.LIBERACAO;\n  }\n\n  /**\n   * Verifica se é uma etapa crítica (obrigatória e não permite retorno)\n   */\n  isEtapaCritica(): boolean {\n    return this.isObrigatorio() && !this.permiteRetorno();\n  }\n\n  /**\n   * Obtém o nível de criticidade da etapa\n   */\n  getNivelCriticidade(): 'BAIXA' | 'MEDIA' | 'ALTA' {\n    let pontos = 0;\n\n    if (this.isObrigatorio()) pontos += 2;\n    if (!this.permiteRetorno()) pontos += 2;\n    if (this.isEtapaDecisao() || this.isEtapaFinal()) pontos += 1;\n\n    if (pontos <= 2) return 'BAIXA';\n    if (pontos <= 4) return 'MEDIA';\n    return 'ALTA';\n  }\n\n  /**\n   * Verifica se pertence a um tipo de benefício\n   */\n  pertenceAoTipoBeneficio(tipoBeneficioId: string): boolean {\n    return this.tipo_beneficio_id === tipoBeneficioId;\n  }\n\n  /**\n   * Obtém um resumo da etapa\n   */\n  getSummary(): string {\n    const obrigatorio = this.isObrigatorio() ? 'Obrigatória' : 'Opcional';\n    const retorno = this.permiteRetorno()\n      ? 'Permite retorno'\n      : 'Não permite retorno';\n    return `${this.ordem}. ${this.nome_etapa} (${obrigatorio}, ${retorno})`;\n  }\n\n  /**\n   * Gera uma chave única para a etapa\n   */\n  getUniqueKey(): string {\n    return `fluxo_${this.tipo_beneficio_id}_${this.ordem}`;\n  }\n\n  /**\n   * Verifica se a etapa é consistente\n   */\n  isConsistente(): boolean {\n    // Verifica se tem tipo de benefício\n    if (!this.tipo_beneficio_id) return false;\n\n    // Verifica se tem nome da etapa\n    if (!this.nome_etapa || this.nome_etapa.trim() === '') return false;\n\n    // Verifica se ordem é válida\n    if (this.ordem < 1) return false;\n\n    // Verifica se tipo de etapa é válido\n    if (!Object.values(TipoEtapa).includes(this.tipo_etapa)) return false;\n\n    // Verifica se perfil responsável é válido\n    if (!Object.values(Role).includes(this.perfil_responsavel)) return false;\n\n    return true;\n  }\n\n  /**\n   * Verifica se pode ser removida\n   */\n  podeSerRemovida(): boolean {\n    // Não pode remover se já foi removida\n    if (this.foiRemovido()) return false;\n\n    // Primeira etapa geralmente não pode ser removida\n    if (this.isPrimeiraEtapa()) return false;\n\n    // Etapas obrigatórias precisam de cuidado especial\n    if (this.isObrigatorio()) return false;\n\n    return true;\n  }\n\n  /**\n   * Clona a etapa (sem ID)\n   */\n  clone(): Partial<FluxoBeneficio> {\n    return {\n      tipo_beneficio_id: this.tipo_beneficio_id,\n      nome_etapa: this.nome_etapa,\n      tipo_etapa: this.tipo_etapa,\n      ordem: this.ordem,\n      perfil_responsavel: this.perfil_responsavel,\n      setor_id: this.setor_id,\n      descricao: this.descricao,\n      obrigatorio: this.obrigatorio,\n      permite_retorno: this.permite_retorno,\n    };\n  }\n\n  /**\n   * Verifica se é uma etapa flexível\n   */\n  isFlexivel(): boolean {\n    return !this.isObrigatorio() && this.permiteRetorno();\n  }\n\n  /**\n   * Formata a data de criação\n   */\n  getCriacaoFormatada(): string {\n    return this.created_at.toLocaleDateString('pt-BR');\n  }\n\n  /**\n   * Formata a data de atualização\n   */\n  getAtualizacaoFormatada(): string {\n    return this.updated_at.toLocaleDateString('pt-BR');\n  }\n\n  /**\n   * Remove informações sensíveis para logs\n   */\n  toSafeLog(): Partial<FluxoBeneficio> {\n    return {\n      id: this.id,\n      tipo_beneficio_id: this.tipo_beneficio_id,\n      nome_etapa: this.nome_etapa,\n      tipo_etapa: this.tipo_etapa,\n      ordem: this.ordem,\n      perfil_responsavel: this.perfil_responsavel,\n      obrigatorio: this.obrigatorio,\n      permite_retorno: this.permite_retorno,\n      created_at: this.created_at,\n      updated_at: this.updated_at,\n    };\n  }\n\n  /**\n   * Obtém sugestões de melhoria para a etapa\n   */\n  getSugestoesMelhoria(): string[] {\n    const sugestoes: string[] = [];\n\n    if (!this.temDescricao()) {\n      sugestoes.push('Adicionar descrição detalhada da etapa');\n    }\n\n    if (!this.temSetor()) {\n      sugestoes.push('Definir setor responsável pela etapa');\n    }\n\n    if (this.isEtapaCritica() && !this.temDescricao()) {\n      sugestoes.push('Etapa crítica deve ter descrição detalhada');\n    }\n\n    if (this.isEtapaAnalise() && this.permiteRetorno()) {\n      sugestoes.push('Considerar não permitir retorno em etapas de análise');\n    }\n\n    if (!this.isConsistente()) {\n      sugestoes.push('Verificar e corrigir inconsistências nos dados');\n    }\n\n    return sugestoes;\n  }\n\n  /**\n   * Verifica se precisa de atualização (dados muito antigos)\n   */\n  precisaAtualizacao(): boolean {\n    // Fluxos com mais de 6 meses podem precisar de revisão\n    const seisMesesAtras = new Date();\n    seisMesesAtras.setMonth(seisMesesAtras.getMonth() - 6);\n    return this.updated_at < seisMesesAtras;\n  }\n\n  /**\n   * Obtém estatísticas da etapa\n   */\n  getEstatisticas(): {\n    ordem: number;\n    tipoEtapa: string;\n    perfilResponsavel: string;\n    obrigatorio: boolean;\n    permiteRetorno: boolean;\n    nivelCriticidade: string;\n    temSetor: boolean;\n    temDescricao: boolean;\n  } {\n    return {\n      ordem: this.ordem,\n      tipoEtapa: this.getDescricaoTipoEtapa(),\n      perfilResponsavel: this.getDescricaoPerfilResponsavel(),\n      obrigatorio: this.isObrigatorio(),\n      permiteRetorno: this.permiteRetorno(),\n      nivelCriticidade: this.getNivelCriticidade(),\n      temSetor: this.temSetor(),\n      temDescricao: this.temDescricao(),\n    };\n  }\n\n  /**\n   * Simula a execução da etapa\n   */\n  simularExecucao(dados: { perfilUsuario: Role; setorUsuario?: string }): {\n    podeExecutar: boolean;\n    motivos: string[];\n    observacoes: string[];\n  } {\n    const motivos: string[] = [];\n    const observacoes: string[] = [];\n\n    // Verifica se o perfil do usuário pode executar a etapa\n    if (dados.perfilUsuario !== this.perfil_responsavel) {\n      motivos.push(\n        `Perfil ${dados.perfilUsuario} não autorizado. Requer: ${this.perfil_responsavel}`,\n      );\n    }\n\n    // Verifica se o setor do usuário corresponde (se definido)\n    if (this.temSetor() && dados.setorUsuario !== this.setor_id) {\n      motivos.push('Usuário não pertence ao setor responsável pela etapa');\n    }\n\n    // Observações sobre a etapa\n    if (this.isObrigatorio()) {\n      observacoes.push('Esta é uma etapa obrigatória');\n    }\n\n    if (!this.permiteRetorno()) {\n      observacoes.push('Atenção: Esta etapa não permite retorno');\n    }\n\n    if (this.isEtapaFinal()) {\n      observacoes.push('Esta é a etapa final do processo');\n    }\n\n    return {\n      podeExecutar: motivos.length === 0,\n      motivos,\n      observacoes,\n    };\n  }\n}\n"],"version":3}