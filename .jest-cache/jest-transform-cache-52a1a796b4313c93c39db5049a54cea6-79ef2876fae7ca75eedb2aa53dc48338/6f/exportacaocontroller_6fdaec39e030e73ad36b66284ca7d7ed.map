{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\solicitacao\\controllers\\exportacao.controller.ts","mappings":";;;;;;;;;;;;;;;;AAAA,2CAAwE;AACxE,6CAMyB;AACzB,qCAAmC;AACnC,wEAAmE;AACnE,kEAA8D;AAC9D,uEAAmE;AAEnE;;;;;GAKG;AAKI,IAAM,oBAAoB,GAA1B,MAAM,oBAAoB;IACF;IAA7B,YAA6B,iBAAoC;QAApC,sBAAiB,GAAjB,iBAAiB,CAAmB;IAAG,CAAC;IAErE;;OAEG;IAUG,AAAN,KAAK,CAAC,WAAW,CAAU,OAAY,EAAS,GAAa;QAC3D,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,iBAAiB,CAAC,uBAAuB,CAAC,OAAO,CAAC,CAAC;QAE1E,sCAAsC;QACtC,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;QAC1C,GAAG,CAAC,SAAS,CACX,qBAAqB,EACrB,uCAAuC,CACxC,CAAC;QAEF,2BAA2B;QAC3B,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACvB,CAAC;CACF,CAAA;AA5BY,oDAAoB;AAezB;IATL,IAAA,YAAG,EAAC,KAAK,CAAC;IACV,IAAA,sBAAY,EAAC,EAAE,OAAO,EAAE,2CAA2C,EAAE,CAAC;IACtE,IAAA,qBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,wBAAwB,EAAE,CAAC;IACnE,IAAA,qBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,mBAAmB,EAAE,CAAC;IAC9D,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC/D,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,mBAAmB,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IACtE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC3D,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,aAAa,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAChE,IAAA,kBAAQ,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC3C,WAAA,IAAA,cAAK,GAAE,CAAA;IAAgB,WAAA,IAAA,YAAG,GAAE,CAAA;;iEAAM,kBAAQ,oBAAR,kBAAQ;;uDAY5D;+BA3BU,oBAAoB;IAJhC,IAAA,iBAAO,EAAC,aAAa,CAAC;IACtB,IAAA,mBAAU,EAAC,wBAAwB,CAAC;IACpC,IAAA,kBAAS,EAAC,6BAAY,EAAE,wBAAU,CAAC;IACnC,IAAA,uBAAa,GAAE;yDAEkC,sCAAiB,oBAAjB,sCAAiB;GADtD,oBAAoB,CA4BhC","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\solicitacao\\controllers\\exportacao.controller.ts"],"sourcesContent":["import { Controller, Get, Query, Res, UseGuards } from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n  ApiQuery,\n} from '@nestjs/swagger';\nimport { Response } from 'express';\nimport { JwtAuthGuard } from '../../../auth/guards/jwt-auth.guard';\nimport { RolesGuard } from '../../../auth/guards/roles.guard';\nimport { ExportacaoService } from '../services/exportacao.service';\n\n/**\n * Controlador de Exportação de Dados\n *\n * Responsável por fornecer endpoints para exportação de dados de solicitações\n * de benefícios em diferentes formatos.\n */\n@ApiTags('Solicitação')\n@Controller('solicitacao/exportacao')\n@UseGuards(JwtAuthGuard, RolesGuard)\n@ApiBearerAuth()\nexport class ExportacaoController {\n  constructor(private readonly exportacaoService: ExportacaoService) {}\n\n  /**\n   * Exporta solicitações de benefício em formato CSV\n   */\n  @Get('csv')\n  @ApiOperation({ summary: 'Exportar solicitações de benefício em CSV' })\n  @ApiResponse({ status: 200, description: 'CSV gerado com sucesso' })\n  @ApiResponse({ status: 500, description: 'Erro ao gerar CSV' })\n  @ApiQuery({ name: 'cidadao_id', required: false, type: String })\n  @ApiQuery({ name: 'tipo_beneficio_id', required: false, type: String })\n  @ApiQuery({ name: 'status', required: false, type: String })\n  @ApiQuery({ name: 'data_inicio', required: false, type: String })\n  @ApiQuery({ name: 'data_fim', required: false, type: String })\n  async exportarCSV(@Query() filtros: any, @Res() res: Response) {\n    const csv = await this.exportacaoService.exportarSolicitacoesCSV(filtros);\n\n    // Configurar cabeçalhos para download\n    res.setHeader('Content-Type', 'text/csv');\n    res.setHeader(\n      'Content-Disposition',\n      'attachment; filename=solicitacoes.csv',\n    );\n\n    // Enviar CSV como resposta\n    return res.send(csv);\n  }\n}\n"],"version":3}