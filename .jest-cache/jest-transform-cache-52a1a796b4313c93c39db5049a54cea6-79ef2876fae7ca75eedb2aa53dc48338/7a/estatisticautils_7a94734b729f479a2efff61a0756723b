35f14c9b26a3f615b3076a8fa57a3e37
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.EstatisticaUtils = void 0;
/**
 * Funções utilitárias para cálculos estatísticos
 */
class EstatisticaUtils {
    /**
     * Calcula a média de um array de valores
     */
    static calcularMedia(valores) {
        if (valores.length === 0) {
            return 0;
        }
        const soma = valores.reduce((acc, val) => acc + val, 0);
        return soma / valores.length;
    }
    /**
     * Calcula o desvio padrão de um array de valores
     */
    static calcularDesvioPadrao(valores, media) {
        if (valores.length <= 1) {
            return 0;
        }
        const mediaValores = media !== undefined ? media : this.calcularMedia(valores);
        const somaDosQuadradosDasDiferencas = valores.reduce((acc, val) => acc + Math.pow(val - mediaValores, 2), 0);
        return Math.sqrt(somaDosQuadradosDasDiferencas / (valores.length - 1));
    }
    /**
     * Calcula a mediana de um array de valores
     * @param valores Array de valores (deve estar ordenado)
     */
    static calcularMediana(valores) {
        if (valores.length === 0) {
            return 0;
        }
        // Verificar se valores está ordenado
        const valoresOrdenados = [...valores].sort((a, b) => a - b);
        // Valores já devem estar ordenados
        const meio = Math.floor(valoresOrdenados.length / 2);
        if (valoresOrdenados.length % 2 === 0) {
            // Número par de elementos: média dos dois do meio
            return (valoresOrdenados[meio - 1] + valoresOrdenados[meio]) / 2;
        }
        else {
            // Número ímpar de elementos: elemento do meio
            return valoresOrdenados[meio];
        }
    }
    /**
     * Calcula regressão linear simples para um array de valores
     *
     * @param valores Array de valores ou array de pares [x, y]
     * @returns Coeficientes da regressão linear e R²
     */
    static calcularRegressaoLinear(valores) {
        const n = valores.length;
        if (n <= 1) {
            return { coeficienteAngular: 0, intercepto: 0, r2: 0 };
        }
        // Calcular médias
        let somaX = 0;
        let somaY = 0;
        let somaXY = 0;
        let somaXX = 0;
        let somaYY = 0;
        // Verificar se é array de pares [x, y] ou array simples
        const isPares = Array.isArray(valores[0]);
        for (let i = 0; i < n; i++) {
            let x;
            let y;
            if (isPares) {
                const par = valores[i];
                x = par[0];
                y = par[1];
            }
            else {
                x = i;
                y = valores[i];
            }
            somaX += x;
            somaY += y;
            somaXY += x * y;
            somaXX += x * x;
            somaYY += y * y;
        }
        const mediaX = somaX / n;
        const mediaY = somaY / n;
        // Calcular coeficientes
        const numerador = somaXY - n * mediaX * mediaY;
        const denominador = somaXX - n * mediaX * mediaX;
        if (denominador === 0) {
            return { coeficienteAngular: 0, intercepto: mediaY, r2: 0 };
        }
        const coeficienteAngular = numerador / denominador;
        const intercepto = mediaY - coeficienteAngular * mediaX;
        // Calcular R²
        let sqtotal = 0;
        let sqreg = 0;
        for (let i = 0; i < n; i++) {
            let x;
            let y;
            if (isPares) {
                const par = valores[i];
                x = par[0];
                y = par[1];
            }
            else {
                x = i;
                y = valores[i];
            }
            const yPrevisto = intercepto + coeficienteAngular * x;
            sqtotal += Math.pow(y - mediaY, 2);
            sqreg += Math.pow(yPrevisto - mediaY, 2);
        }
        const r2 = sqtotal === 0 ? 0 : sqreg / sqtotal;
        return { coeficienteAngular, intercepto, r2 };
    }
    /**
     * Gera hash para as dimensões
     */
    static gerarHashDimensoes(dimensoes) {
        return JSON.stringify(dimensoes || {});
    }
}
exports.EstatisticaUtils = EstatisticaUtils;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXG1ldHJpY2FzXFx1dGlsc1xcZXN0YXRpc3RpY2EudXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUE7O0dBRUc7QUFDSCxNQUFhLGdCQUFnQjtJQUMzQjs7T0FFRztJQUNILE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBaUI7UUFDcEMsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ3pCLE9BQU8sQ0FBQyxDQUFDO1FBQ1gsQ0FBQztRQUNELE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3hELE9BQU8sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ0gsTUFBTSxDQUFDLG9CQUFvQixDQUFDLE9BQWlCLEVBQUUsS0FBYztRQUMzRCxJQUFJLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUFFLENBQUM7WUFDeEIsT0FBTyxDQUFDLENBQUM7UUFDWCxDQUFDO1FBRUQsTUFBTSxZQUFZLEdBQ2hCLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUU1RCxNQUFNLDZCQUE2QixHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQ2xELENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLFlBQVksRUFBRSxDQUFDLENBQUMsRUFDbkQsQ0FBQyxDQUNGLENBQUM7UUFFRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsNkJBQTZCLEdBQUcsQ0FBQyxP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QUcsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNDLENBQUM7UUFFRCxNQUFNLEVBQUUsR0FBRyxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUM7UUFFL0MsT0FBTyxFQUFFLGtCQUFrQixFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxNQUFNLENBQUMsa0JBQWtCLENBQUMsU0FBOEI7UUFDdEQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUN6QyxDQUFDO0NBQ0Y7QUF0SkQsNENBc0pDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxtZXRyaWNhc1xcdXRpbHNcXGVzdGF0aXN0aWNhLnV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRnVuw6fDtWVzIHV0aWxpdMOhcmlhcyBwYXJhIGPDoWxjdWxvcyBlc3RhdMOtc3RpY29zXG4gKi9cbmV4cG9ydCBjbGFzcyBFc3RhdGlzdGljYVV0aWxzIHtcbiAgLyoqXG4gICAqIENhbGN1bGEgYSBtw6lkaWEgZGUgdW0gYXJyYXkgZGUgdmFsb3Jlc1xuICAgKi9cbiAgc3RhdGljIGNhbGN1bGFyTWVkaWEodmFsb3JlczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGlmICh2YWxvcmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGNvbnN0IHNvbWEgPSB2YWxvcmVzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYyArIHZhbCwgMCk7XG4gICAgcmV0dXJuIHNvbWEgLyB2YWxvcmVzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIG8gZGVzdmlvIHBhZHLDo28gZGUgdW0gYXJyYXkgZGUgdmFsb3Jlc1xuICAgKi9cbiAgc3RhdGljIGNhbGN1bGFyRGVzdmlvUGFkcmFvKHZhbG9yZXM6IG51bWJlcltdLCBtZWRpYT86IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHZhbG9yZXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGNvbnN0IG1lZGlhVmFsb3JlcyA9XG4gICAgICBtZWRpYSAhPT0gdW5kZWZpbmVkID8gbWVkaWEgOiB0aGlzLmNhbGN1bGFyTWVkaWEodmFsb3Jlcyk7XG5cbiAgICBjb25zdCBzb21hRG9zUXVhZHJhZG9zRGFzRGlmZXJlbmNhcyA9IHZhbG9yZXMucmVkdWNlKFxuICAgICAgKGFjYywgdmFsKSA9PiBhY2MgKyBNYXRoLnBvdyh2YWwgLSBtZWRpYVZhbG9yZXMsIDIpLFxuICAgICAgMCxcbiAgICApO1xuXG4gICAgcmV0dXJuIE1hdGguc3FydChzb21hRG9zUXVhZHJhZG9zRGFzRGlmZXJlbmNhcyAvICh2YWxvcmVzLmxlbmd0aCAtIDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIGEgbWVkaWFuYSBkZSB1bSBhcnJheSBkZSB2YWxvcmVzXG4gICAqIEBwYXJhbSB2YWxvcmVzIEFycmF5IGRlIHZhbG9yZXMgKGRldmUgZXN0YXIgb3JkZW5hZG8pXG4gICAqL1xuICBzdGF0aWMgY2FsY3VsYXJNZWRpYW5hKHZhbG9yZXM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICBpZiAodmFsb3Jlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBzZSB2YWxvcmVzIGVzdMOhIG9yZGVuYWRvXG4gICAgY29uc3QgdmFsb3Jlc09yZGVuYWRvcyA9IFsuLi52YWxvcmVzXS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbiAgICAvLyBWYWxvcmVzIGrDoSBkZXZlbSBlc3RhciBvcmRlbmFkb3NcbiAgICBjb25zdCBtZWlvID0gTWF0aC5mbG9vcih2YWxvcmVzT3JkZW5hZG9zLmxlbmd0aCAvIDIpO1xuXG4gICAgaWYgKHZhbG9yZXNPcmRlbmFkb3MubGVuZ3RoICUgMiA9PT0gMCkge1xuICAgICAgLy8gTsO6bWVybyBwYXIgZGUgZWxlbWVudG9zOiBtw6lkaWEgZG9zIGRvaXMgZG8gbWVpb1xuICAgICAgcmV0dXJuICh2YWxvcmVzT3JkZW5hZG9zW21laW8gLSAxXSArIHZhbG9yZXNPcmRlbmFkb3NbbWVpb10pIC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTsO6bWVybyDDrW1wYXIgZGUgZWxlbWVudG9zOiBlbGVtZW50byBkbyBtZWlvXG4gICAgICByZXR1cm4gdmFsb3Jlc09yZGVuYWRvc1ttZWlvXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYSByZWdyZXNzw6NvIGxpbmVhciBzaW1wbGVzIHBhcmEgdW0gYXJyYXkgZGUgdmFsb3Jlc1xuICAgKlxuICAgKiBAcGFyYW0gdmFsb3JlcyBBcnJheSBkZSB2YWxvcmVzIG91IGFycmF5IGRlIHBhcmVzIFt4LCB5XVxuICAgKiBAcmV0dXJucyBDb2VmaWNpZW50ZXMgZGEgcmVncmVzc8OjbyBsaW5lYXIgZSBSwrJcbiAgICovXG4gIHN0YXRpYyBjYWxjdWxhclJlZ3Jlc3Nhb0xpbmVhcih2YWxvcmVzOiBudW1iZXJbXSB8IEFycmF5PFtudW1iZXIsIG51bWJlcl0+KToge1xuICAgIGNvZWZpY2llbnRlQW5ndWxhcjogbnVtYmVyO1xuICAgIGludGVyY2VwdG86IG51bWJlcjtcbiAgICByMjogbnVtYmVyO1xuICB9IHtcbiAgICBjb25zdCBuID0gdmFsb3Jlcy5sZW5ndGg7XG5cbiAgICBpZiAobiA8PSAxKSB7XG4gICAgICByZXR1cm4geyBjb2VmaWNpZW50ZUFuZ3VsYXI6IDAsIGludGVyY2VwdG86IDAsIHIyOiAwIH07XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXIgbcOpZGlhc1xuICAgIGxldCBzb21hWCA9IDA7XG4gICAgbGV0IHNvbWFZID0gMDtcbiAgICBsZXQgc29tYVhZID0gMDtcbiAgICBsZXQgc29tYVhYID0gMDtcbiAgICBsZXQgc29tYVlZID0gMDtcblxuICAgIC8vIFZlcmlmaWNhciBzZSDDqSBhcnJheSBkZSBwYXJlcyBbeCwgeV0gb3UgYXJyYXkgc2ltcGxlc1xuICAgIGNvbnN0IGlzUGFyZXMgPSBBcnJheS5pc0FycmF5KHZhbG9yZXNbMF0pO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgIGxldCB4OiBudW1iZXI7XG4gICAgICBsZXQgeTogbnVtYmVyO1xuXG4gICAgICBpZiAoaXNQYXJlcykge1xuICAgICAgICBjb25zdCBwYXIgPSB2YWxvcmVzW2ldIGFzIFtudW1iZXIsIG51bWJlcl07XG4gICAgICAgIHggPSBwYXJbMF07XG4gICAgICAgIHkgPSBwYXJbMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gaTtcbiAgICAgICAgeSA9IHZhbG9yZXNbaV0gYXMgbnVtYmVyO1xuICAgICAgfVxuXG4gICAgICBzb21hWCArPSB4O1xuICAgICAgc29tYVkgKz0geTtcbiAgICAgIHNvbWFYWSArPSB4ICogeTtcbiAgICAgIHNvbWFYWCArPSB4ICogeDtcbiAgICAgIHNvbWFZWSArPSB5ICogeTtcbiAgICB9XG5cbiAgICBjb25zdCBtZWRpYVggPSBzb21hWCAvIG47XG4gICAgY29uc3QgbWVkaWFZID0gc29tYVkgLyBuO1xuXG4gICAgLy8gQ2FsY3VsYXIgY29lZmljaWVudGVzXG4gICAgY29uc3QgbnVtZXJhZG9yID0gc29tYVhZIC0gbiAqIG1lZGlhWCAqIG1lZGlhWTtcbiAgICBjb25zdCBkZW5vbWluYWRvciA9IHNvbWFYWCAtIG4gKiBtZWRpYVggKiBtZWRpYVg7XG5cbiAgICBpZiAoZGVub21pbmFkb3IgPT09IDApIHtcbiAgICAgIHJldHVybiB7IGNvZWZpY2llbnRlQW5ndWxhcjogMCwgaW50ZXJjZXB0bzogbWVkaWFZLCByMjogMCB9O1xuICAgIH1cblxuICAgIGNvbnN0IGNvZWZpY2llbnRlQW5ndWxhciA9IG51bWVyYWRvciAvIGRlbm9taW5hZG9yO1xuICAgIGNvbnN0IGludGVyY2VwdG8gPSBtZWRpYVkgLSBjb2VmaWNpZW50ZUFuZ3VsYXIgKiBtZWRpYVg7XG5cbiAgICAvLyBDYWxjdWxhciBSwrJcbiAgICBsZXQgc3F0b3RhbCA9IDA7XG4gICAgbGV0IHNxcmVnID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICBsZXQgeDogbnVtYmVyO1xuICAgICAgbGV0IHk6IG51bWJlcjtcblxuICAgICAgaWYgKGlzUGFyZXMpIHtcbiAgICAgICAgY29uc3QgcGFyID0gdmFsb3Jlc1tpXSBhcyBbbnVtYmVyLCBudW1iZXJdO1xuICAgICAgICB4ID0gcGFyWzBdO1xuICAgICAgICB5ID0gcGFyWzFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgeCA9IGk7XG4gICAgICAgIHkgPSB2YWxvcmVzW2ldIGFzIG51bWJlcjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgeVByZXZpc3RvID0gaW50ZXJjZXB0byArIGNvZWZpY2llbnRlQW5ndWxhciAqIHg7XG5cbiAgICAgIHNxdG90YWwgKz0gTWF0aC5wb3coeSAtIG1lZGlhWSwgMik7XG4gICAgICBzcXJlZyArPSBNYXRoLnBvdyh5UHJldmlzdG8gLSBtZWRpYVksIDIpO1xuICAgIH1cblxuICAgIGNvbnN0IHIyID0gc3F0b3RhbCA9PT0gMCA/IDAgOiBzcXJlZyAvIHNxdG90YWw7XG5cbiAgICByZXR1cm4geyBjb2VmaWNpZW50ZUFuZ3VsYXIsIGludGVyY2VwdG8sIHIyIH07XG4gIH1cblxuICAvKipcbiAgICogR2VyYSBoYXNoIHBhcmEgYXMgZGltZW5zw7Vlc1xuICAgKi9cbiAgc3RhdGljIGdlcmFySGFzaERpbWVuc29lcyhkaW1lbnNvZXM6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkaW1lbnNvZXMgfHwge30pO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=