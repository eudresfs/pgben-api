{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\documento.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\documento.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n  DeleteDateColumn,\n  ManyToOne,\n  JoinColumn,\n  Index,\n} from 'typeorm';\nimport {\n  IsNotEmpty,\n  IsNumber,\n  Min,\n  IsOptional,\n  IsBoolean,\n  IsUUID,\n  IsString,\n  IsDate,\n} from 'class-validator';\nimport { Solicitacao } from './solicitacao.entity';\nimport { Usuario } from './usuario.entity';\nimport { Cidadao } from './cidadao.entity';\nimport { TipoDocumentoEnum } from '../enums';\n\n/**\n * Entidade Documento\n *\n * Representa documentos anexados pelos cidadãos, podendo estar vinculados\n * a uma solicitação específica ou serem documentos gerais reutilizáveis.\n * Todos os documentos são sempre vinculados a um cidadão.\n */\n@Entity('documentos')\n@Index(['cidadao_id'])\n@Index(['solicitacao_id'])\n@Index(['tipo'])\n@Index(['usuario_upload_id'])\n@Index(['data_upload'])\n@Index(['verificado'])\n@Index(['reutilizavel'])\nexport class Documento {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  @IsUUID('4', { message: 'ID da solicitação deve ser um UUID válido' })\n  solicitacao_id?: string;\n\n  @ManyToOne(() => Solicitacao, (solicitacao) => solicitacao.documentos, {\n    nullable: true,\n  })\n  @JoinColumn({ name: 'solicitacao_id' })\n  solicitacao?: Solicitacao;\n\n  @Column()\n  @IsNotEmpty({ message: 'Cidadão é obrigatório' })\n  @IsUUID('4', { message: 'ID do cidadão deve ser um UUID válido' })\n  cidadao_id: string;\n\n  @ManyToOne(() => Cidadao, { nullable: false })\n  @JoinColumn({ name: 'cidadao_id' })\n  cidadao: Cidadao;\n\n  @Column({\n    type: 'enum',\n    enum: TipoDocumentoEnum,\n    enumName: 'tipo_documento_enum',\n  })\n  @IsNotEmpty({ message: 'Tipo de documento é obrigatório' })\n  tipo: TipoDocumentoEnum;\n\n  @Column()\n  @IsNotEmpty({ message: 'Nome do arquivo é obrigatório' })\n  nome_arquivo: string;\n\n  @Column()\n  @IsNotEmpty({ message: 'Nome original do arquivo é obrigatório' })\n  nome_original: string;\n\n  @Column()\n  @IsNotEmpty({ message: 'Caminho do arquivo é obrigatório' })\n  caminho: string;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  thumbnail?: string;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  descricao?: string;\n\n  @Column()\n  @IsNumber({}, { message: 'Tamanho deve ser um número' })\n  @Min(0, { message: 'Tamanho não pode ser negativo' })\n  tamanho: number;\n\n  @Column()\n  @IsNotEmpty({ message: 'Tipo MIME é obrigatório' })\n  mimetype: string;\n\n  @Column({ type: 'timestamp' })\n  @IsNotEmpty({ message: 'Data de upload é obrigatória' })\n  data_upload: Date;\n\n  @Column()\n  @IsNotEmpty({ message: 'Usuário que fez upload é obrigatório' })\n  @IsUUID('4', { message: 'ID do usuário deve ser um UUID válido' })\n  usuario_upload_id: string;\n\n  @ManyToOne(() => Usuario, { nullable: false })\n  @JoinColumn({ name: 'usuario_upload_id' })\n  usuario_upload: Usuario;\n\n  @Column({ default: false })\n  @IsBoolean()\n  verificado: boolean;\n\n  @Column({ nullable: true, type: 'timestamp' })\n  @IsOptional()\n  @IsDate()\n  data_verificacao: Date;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  @IsUUID('4', {\n    message: 'ID do usuário de verificação deve ser um UUID válido',\n  })\n  usuario_verificacao_id?: string;\n\n  @ManyToOne(() => Usuario, { nullable: true })\n  @JoinColumn({ name: 'usuario_verificacao_id' })\n  usuario_verificacao?: Usuario;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  @IsString()\n  observacoes_verificacao?: string;\n\n  @Column({ default: false })\n  @IsBoolean()\n  reutilizavel: boolean;\n\n  @Column({ nullable: true })\n  @IsOptional()\n  @IsString()\n  hash_arquivo?: string;\n\n  @Column({ nullable: true, type: 'date' })\n  @IsOptional()\n  @IsDate()\n  data_validade?: Date;\n\n  @Column('jsonb', { nullable: true })\n  metadados?: {\n    deteccao_mime?: {\n      mime_declarado: string;\n      mime_detectado: string;\n      extensao_detectada: string;\n    };\n    upload_info?: {\n      ip: string;\n      user_agent: string;\n    };\n  };\n\n  @CreateDateColumn()\n  created_at: Date;\n\n  @UpdateDateColumn()\n  updated_at: Date;\n\n  @DeleteDateColumn()\n  removed_at: Date;\n}\n"],"version":3}