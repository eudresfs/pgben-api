290477cd00fd6e8c6789fa4d8fe10571
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequiresPermission = exports.PERMISSION_REQUIREMENTS_KEY = void 0;
const common_1 = require("@nestjs/common");
/**
 * Chave de metadados para requisitos de permissão.
 */
exports.PERMISSION_REQUIREMENTS_KEY = 'permission_requirements';
/**
 * Decorador para definir requisitos de permissão em controladores e métodos.
 *
 * Este decorador permite proteger endpoints com permissões granulares,
 * definindo quais permissões são necessárias para acessar o endpoint.
 *
 * @param requirements Requisitos de permissão
 * @returns Decorador de metadados
 *
 * @example
 * // Requer permissão global para listar cidadãos
 * @RequiresPermission({ permissionName: 'cidadao.listar' })
 *
 * @example
 * // Requer permissão para visualizar um cidadão específico na unidade
 * @RequiresPermission({
 *   permissionName: 'cidadao.visualizar',
 *   scopeType: TipoEscopo.UNIDADE, (GLOBAL, UNIDADE, PROPRIO)
 *   scopeIdExpression: 'params.unidadeId'
 * })
 */
const RequiresPermission = (...requirements) => (0, common_1.SetMetadata)(exports.PERMISSION_REQUIREMENTS_KEY, requirements);
exports.RequiresPermission = RequiresPermission;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGF1dGhcXGRlY29yYXRvcnNcXHJlcXVpcmVzLXBlcm1pc3Npb24uZGVjb3JhdG9yLnRzIiwibWFwcGluZ3MiOiI7OztBQUFBLDJDQUE2QztBQTBCN0M7O0dBRUc7QUFDVSxRQUFBLDJCQUEyQixHQUFHLHlCQUF5QixDQUFDO0FBRXJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9CRztBQUNJLE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLFlBQXFDLEVBQUUsRUFBRSxDQUM3RSxJQUFBLG9CQUFXLEVBQUMsbUNBQTJCLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFENUMsUUFBQSxrQkFBa0Isc0JBQzBCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxhdXRoXFxkZWNvcmF0b3JzXFxyZXF1aXJlcy1wZXJtaXNzaW9uLmRlY29yYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXRNZXRhZGF0YSB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IFRpcG9Fc2NvcG8gfSBmcm9tICcuLi8uLi9lbnRpdGllcy91c2VyLXBlcm1pc3Npb24uZW50aXR5JztcblxuLyoqXG4gKiBJbnRlcmZhY2UgcGFyYSBkZWZpbmnDp8OjbyBkZSByZXF1aXNpdG9zIGRlIHBlcm1pc3PDo28uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGVybWlzc2lvblJlcXVpcmVtZW50IHtcbiAgLyoqXG4gICAqIE5vbWUgZGEgcGVybWlzc8OjbyBubyBmb3JtYXRvIGBtb2R1bG8ucmVjdXJzby5vcGVyYWNhb2BcbiAgICovXG4gIHBlcm1pc3Npb25OYW1lOiBzdHJpbmc7XG4gIFxuICAvKipcbiAgICogVGlwbyBkZSBlc2NvcG8gKG9wY2lvbmFsLCBwYWRyw6NvIMOpIEdMT0JBTClcbiAgICovXG4gIHNjb3BlVHlwZT86IFRpcG9Fc2NvcG87XG4gIFxuICAvKipcbiAgICogRXhwcmVzc8OjbyBwYXJhIG9idGVyIG8gSUQgZG8gZXNjb3BvIGEgcGFydGlyIGRvcyBwYXLDom1ldHJvcyBkYSByZXF1aXNpw6fDo29cbiAgICogKG9wY2lvbmFsLCBuZWNlc3PDoXJpbyBhcGVuYXMgcGFyYSBzY29wZVR5cGUgVU5JVClcbiAgICogXG4gICAqIEV4ZW1wbG86ICdwYXJhbXMudW5pZGFkZUlkJyBwYXJhIG9idGVyIG8gSUQgZGEgdW5pZGFkZSBkb3MgcGFyw6JtZXRyb3MgZGEgcm90YVxuICAgKi9cbiAgc2NvcGVJZEV4cHJlc3Npb24/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogQ2hhdmUgZGUgbWV0YWRhZG9zIHBhcmEgcmVxdWlzaXRvcyBkZSBwZXJtaXNzw6NvLlxuICovXG5leHBvcnQgY29uc3QgUEVSTUlTU0lPTl9SRVFVSVJFTUVOVFNfS0VZID0gJ3Blcm1pc3Npb25fcmVxdWlyZW1lbnRzJztcblxuLyoqXG4gKiBEZWNvcmFkb3IgcGFyYSBkZWZpbmlyIHJlcXVpc2l0b3MgZGUgcGVybWlzc8OjbyBlbSBjb250cm9sYWRvcmVzIGUgbcOpdG9kb3MuXG4gKiBcbiAqIEVzdGUgZGVjb3JhZG9yIHBlcm1pdGUgcHJvdGVnZXIgZW5kcG9pbnRzIGNvbSBwZXJtaXNzw7VlcyBncmFudWxhcmVzLFxuICogZGVmaW5pbmRvIHF1YWlzIHBlcm1pc3PDtWVzIHPDo28gbmVjZXNzw6FyaWFzIHBhcmEgYWNlc3NhciBvIGVuZHBvaW50LlxuICogXG4gKiBAcGFyYW0gcmVxdWlyZW1lbnRzIFJlcXVpc2l0b3MgZGUgcGVybWlzc8Ojb1xuICogQHJldHVybnMgRGVjb3JhZG9yIGRlIG1ldGFkYWRvc1xuICogXG4gKiBAZXhhbXBsZVxuICogLy8gUmVxdWVyIHBlcm1pc3PDo28gZ2xvYmFsIHBhcmEgbGlzdGFyIGNpZGFkw6Nvc1xuICogQFJlcXVpcmVzUGVybWlzc2lvbih7IHBlcm1pc3Npb25OYW1lOiAnY2lkYWRhby5saXN0YXInIH0pXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBSZXF1ZXIgcGVybWlzc8OjbyBwYXJhIHZpc3VhbGl6YXIgdW0gY2lkYWTDo28gZXNwZWPDrWZpY28gbmEgdW5pZGFkZVxuICogQFJlcXVpcmVzUGVybWlzc2lvbih7IFxuICogICBwZXJtaXNzaW9uTmFtZTogJ2NpZGFkYW8udmlzdWFsaXphcicsXG4gKiAgIHNjb3BlVHlwZTogVGlwb0VzY29wby5VTklEQURFLCAoR0xPQkFMLCBVTklEQURFLCBQUk9QUklPKVxuICogICBzY29wZUlkRXhwcmVzc2lvbjogJ3BhcmFtcy51bmlkYWRlSWQnXG4gKiB9KVxuICovXG5leHBvcnQgY29uc3QgUmVxdWlyZXNQZXJtaXNzaW9uID0gKC4uLnJlcXVpcmVtZW50czogUGVybWlzc2lvblJlcXVpcmVtZW50W10pID0+XG4gIFNldE1ldGFkYXRhKFBFUk1JU1NJT05fUkVRVUlSRU1FTlRTX0tFWSwgcmVxdWlyZW1lbnRzKTtcbiJdLCJ2ZXJzaW9uIjozfQ==