5c47592a3832932d4515514fb832f249
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const typeorm_1 = require("@nestjs/typeorm");
const relatorio_pagamento_service_1 = require("../../../services/relatorio-pagamento.service");
const pagamento_entity_1 = require("../../../entities/pagamento.entity");
const status_pagamento_enum_1 = require("../../../enums/status-pagamento.enum");
const metodo_pagamento_enum_1 = require("../../../enums/metodo-pagamento.enum");
/**
 * Testes unitários para RelatorioPagamentoService
 *
 * Garante que os métodos de geração de relatórios e estatísticas
 * sobre pagamentos funcionem corretamente.
 *
 * @author Equipe PGBen
 */
describe('RelatorioPagamentoService', () => {
    let service;
    let pagamentoRepository;
    // Dados de exemplo para testes
    const pagamentosMock = [
        {
            id: 'pagamento-id-1',
            solicitacaoId: 'solicitacao-id-1',
            valor: 500,
            status: status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PIX,
            infoBancariaId: 'info-bancaria-id-1',
            dataLiberacao: new Date('2025-01-15'),
            dataCriacao: new Date('2025-01-10'),
            dataAtualizacao: new Date('2025-01-20'),
            liberadoPor: 'usuario-id-1',
            unidadeId: 'unidade-id-1',
            observacoes: 'Pagamento de benefício eventual',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Moradia',
                valorAprovado: 500,
            },
        },
        {
            id: 'pagamento-id-2',
            solicitacaoId: 'solicitacao-id-2',
            valor: 300,
            status: status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PRESENCIAL,
            dataLiberacao: new Date('2025-02-10'),
            dataCriacao: new Date('2025-02-05'),
            dataAtualizacao: new Date('2025-02-15'),
            liberadoPor: 'usuario-id-2',
            unidadeId: 'unidade-id-1',
            observacoes: 'Pagamento de benefício alimentação',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Alimentação',
                valorAprovado: 300,
            },
        },
        {
            id: 'pagamento-id-3',
            solicitacaoId: 'solicitacao-id-3',
            valor: 1000,
            status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.TRANSFERENCIA,
            infoBancariaId: 'info-bancaria-id-3',
            dataLiberacao: new Date('2025-03-05'),
            dataCriacao: new Date('2025-03-01'),
            dataAtualizacao: new Date('2025-03-05'),
            liberadoPor: 'usuario-id-1',
            unidadeId: 'unidade-id-2',
            observacoes: 'Pagamento de benefício funeral',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Funeral',
                valorAprovado: 1000,
            },
        },
        {
            id: 'pagamento-id-4',
            solicitacaoId: 'solicitacao-id-4',
            valor: 500,
            status: status_pagamento_enum_1.StatusPagamentoEnum.CANCELADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PIX,
            infoBancariaId: 'info-bancaria-id-4',
            dataLiberacao: new Date('2025-01-20'),
            dataCriacao: new Date('2025-01-15'),
            dataAtualizacao: new Date('2025-01-22'),
            liberadoPor: 'usuario-id-2',
            unidadeId: 'unidade-id-1',
            observacoes: 'CANCELADO: Dados bancários incorretos',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Moradia',
                valorAprovado: 500,
            },
        },
    ];
    const mockQueryBuilder = {
        select: jest.fn().mockReturnThis(),
        addSelect: jest.fn().mockReturnThis(),
        from: jest.fn().mockReturnThis(),
        where: jest.fn().mockReturnThis(),
        andWhere: jest.fn().mockReturnThis(),
        groupBy: jest.fn().mockReturnThis(),
        orderBy: jest.fn().mockReturnThis(),
        getRawMany: jest.fn().mockResolvedValue([]),
        getRawOne: jest.fn().mockResolvedValue({}),
        execute: jest.fn().mockResolvedValue([]),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                relatorio_pagamento_service_1.RelatorioPagamentoService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento),
                    useValue: {
                        createQueryBuilder: jest.fn().mockReturnValue(mockQueryBuilder),
                        find: jest.fn().mockResolvedValue(pagamentosMock),
                        findAndCount: jest
                            .fn()
                            .mockResolvedValue([pagamentosMock, pagamentosMock.length]),
                        manager: {
                            query: jest.fn().mockResolvedValue([]),
                        },
                    },
                },
            ],
        }).compile();
        service = module.get(relatorio_pagamento_service_1.RelatorioPagamentoService);
        pagamentoRepository = module.get((0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento));
    });
    it('deve estar definido', () => {
        expect(service).toBeDefined();
    });
    describe('gerarRelatorioMensal', () => {
        it('deve gerar relatório mensal por período', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { mes: '2025-01', total: 1000, quantidade: 2 },
                { mes: '2025-02', total: 300, quantidade: 1 },
                { mes: '2025-03', total: 1000, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const unidadeId = 'unidade-id-1';
            const mockResultado = [
                { mes: '2025-01', total: 500, quantidade: 1 },
                { mes: '2025-02', total: 300, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim, unidadeId);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.unidadeId = :unidadeId', { unidadeId });
        });
        it('deve filtrar apenas pagamentos finalizados/pagos quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const unidadeId = null;
            const apenasFinalizados = true;
            const mockResultado = [
                { mes: '2025-01', total: 500, quantidade: 1 },
                { mes: '2025-02', total: 300, quantidade: 1 },
                { mes: '2025-03', total: 1000, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim, unidadeId, apenasFinalizados);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.status IN (:...statusFinalizado)', {
                statusFinalizado: [
                    status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO,
                    status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
                ],
            });
        });
    });
    describe('gerarRelatorioPorMetodo', () => {
        it('deve gerar relatório por método de pagamento', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { metodoPagamento: 'pix', total: 1000, quantidade: 2 },
                { metodoPagamento: 'presencial', total: 300, quantidade: 1 },
                { metodoPagamento: 'transferencia', total: 1000, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorMetodo(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar apenas pagamentos não cancelados', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { metodoPagamento: 'pix', total: 500, quantidade: 1 },
                { metodoPagamento: 'presencial', total: 300, quantidade: 1 },
                { metodoPagamento: 'transferencia', total: 1000, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorMetodo(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.status != :statusCancelado', { statusCancelado: status_pagamento_enum_1.StatusPagamentoEnum.CANCELADO });
        });
    });
    describe('gerarRelatorioPorStatus', () => {
        it('deve gerar relatório por status de pagamento', async () => {
            // Arrange
            const mockResultado = [
                { status: 'finalizado', total: 800, quantidade: 2 },
                { status: 'pago', total: 1000, quantidade: 1 },
                { status: 'cancelado', total: 500, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorStatus();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { status: 'finalizado', total: 800, quantidade: 2 },
                { status: 'pago', total: 1000, quantidade: 1 },
                { status: 'cancelado', total: 500, quantidade: 1 },
            ];
            jest
                .spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorStatus(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
        });
    });
    describe('gerarRelatorioPorUnidade', () => {
        it('deve gerar relatório por unidade', async () => {
            // Arrange
            const mockResultado = [
                {
                    unidadeId: 'unidade-id-1',
                    nomeUnidade: 'CRAS Centro',
                    total: 1300,
                    quantidade: 3,
                },
                {
                    unidadeId: 'unidade-id-2',
                    nomeUnidade: 'CRAS Norte',
                    total: 1000,
                    quantidade: 1,
                },
            ];
            jest
                .spyOn(pagamentoRepository.manager, 'query')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorUnidade();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                {
                    unidadeId: 'unidade-id-1',
                    nomeUnidade: 'CRAS Centro',
                    total: 1300,
                    quantidade: 3,
                },
                {
                    unidadeId: 'unidade-id-2',
                    nomeUnidade: 'CRAS Norte',
                    total: 1000,
                    quantidade: 1,
                },
            ];
            jest
                .spyOn(pagamentoRepository.manager, 'query')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorUnidade(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalledWith(expect.stringContaining('WHERE p.data_liberacao >= $1 AND p.data_liberacao <= $2'), [dataInicio, dataFim]);
        });
    });
    describe('gerarRelatorioPorTipoBeneficio', () => {
        it('deve gerar relatório por tipo de benefício', async () => {
            // Arrange
            const mockResultado = [
                { tipoBeneficio: 'Auxílio Moradia', total: 1000, quantidade: 2 },
                { tipoBeneficio: 'Auxílio Alimentação', total: 300, quantidade: 1 },
                { tipoBeneficio: 'Auxílio Funeral', total: 1000, quantidade: 1 },
            ];
            jest
                .spyOn(pagamentoRepository.manager, 'query')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorTipoBeneficio();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const unidadeId = 'unidade-id-1';
            const mockResultado = [
                { tipoBeneficio: 'Auxílio Moradia', total: 500, quantidade: 1 },
                { tipoBeneficio: 'Auxílio Alimentação', total: 300, quantidade: 1 },
            ];
            jest
                .spyOn(pagamentoRepository.manager, 'query')
                .mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorTipoBeneficio(null, null, unidadeId);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalledWith(expect.stringContaining('WHERE p.unidade_id = $1'), [unidadeId]);
        });
    });
    describe('obterEstatisticasGerais', () => {
        it('deve obter estatísticas gerais de pagamentos', async () => {
            // Arrange
            const mockEstatisticas = {
                totalPagamentos: 4,
                totalValorPago: 2300,
                totalFinalizados: 2,
                totalEmProcessamento: 1,
                totalCancelados: 1,
                mediaValorPagamento: 575,
                pagamentosPorMetodo: {
                    pix: 2,
                    presencial: 1,
                    transferencia: 1,
                },
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '4',
                totalValorPago: '2300.00',
                totalFinalizados: '2',
                totalEmProcessamento: '1',
                totalCancelados: '1',
            });
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce([
                { metodoPagamento: 'pix', quantidade: '2' },
                { metodoPagamento: 'presencial', quantidade: '1' },
                { metodoPagamento: 'transferencia', quantidade: '1' },
            ]);
            // Act
            const resultado = await service.obterEstatisticasGerais();
            // Assert
            expect(resultado).toEqual(expect.objectContaining({
                totalPagamentos: 4,
                totalValorPago: 2300,
                totalFinalizados: 2,
                totalEmProcessamento: 1,
                totalCancelados: 1,
                pagamentosPorMetodo: expect.any(Object),
            }));
            expect(mockQueryBuilder.select).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '4',
                totalValorPago: '2300.00',
                totalFinalizados: '2',
                totalEmProcessamento: '1',
                totalCancelados: '1',
            });
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce([
                { metodoPagamento: 'pix', quantidade: '2' },
                { metodoPagamento: 'presencial', quantidade: '1' },
                { metodoPagamento: 'transferencia', quantidade: '1' },
            ]);
            // Act
            const resultado = await service.obterEstatisticasGerais(dataInicio, dataFim);
            // Assert
            expect(resultado).toBeDefined();
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxyZWxhdG9yaW8tcGFnYW1lbnRvLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCw2Q0FBcUQ7QUFHckQsK0ZBQTBGO0FBQzFGLHlFQUErRDtBQUMvRCxnRkFBMkU7QUFDM0UsZ0ZBQTJFO0FBRTNFOzs7Ozs7O0dBT0c7QUFDSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLElBQUksT0FBa0MsQ0FBQztJQUN2QyxJQUFJLG1CQUEwQyxDQUFDO0lBRS9DLCtCQUErQjtJQUMvQixNQUFNLGNBQWMsR0FBRztRQUNyQjtZQUNFLEVBQUUsRUFBRSxnQkFBZ0I7WUFDcEIsYUFBYSxFQUFFLGtCQUFrQjtZQUNqQyxLQUFLLEVBQUUsR0FBRztZQUNWLE1BQU0sRUFBRSwyQ0FBbUIsQ0FBQyxVQUFVO1lBQ3RDLGVBQWUsRUFBRSwyQ0FBbUIsQ0FBQyxHQUFHO1lBQ3hDLGNBQWMsRUFBRSxvQkFBb0I7WUFDcEMsYUFBYSxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQztZQUNyQyxXQUFXLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ25DLGVBQWUsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDdkMsV0FBVyxFQUFFLGNBQWM7WUFDM0IsU0FBUyxFQUFFLGNBQWM7WUFDekIsV0FBVyxFQUFFLGlDQUFpQztZQUM5QyxlQUFlLEVBQUU7Z0JBQ2YsYUFBYSxFQUFFLGlCQUFpQjtnQkFDaEMsYUFBYSxFQUFFLEdBQUc7YUFDbkI7U0FDRjtRQUNEO1lBQ0UsRUFBRSxFQUFFLGdCQUFnQjtZQUNwQixhQUFhLEVBQUUsa0JBQWtCO1lBQ2pDLEtBQUssRUFBRSxHQUFHO1lBQ1YsTUFBTSxFQUFFLDJDQUFtQixD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QUFDLENBQUM7WUFFSCxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFLFlBQVksQ0FBQyxDQUFDLHFCQUFxQixDQUFDO2dCQUMvRCxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRTtnQkFDM0MsRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7Z0JBQ2xELEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFO2FBQ3RELENBQUMsQ0FBQztZQUVILE1BQU07WUFDTixNQUFNLFNBQVMsR0FBRyxNQUFNLE9BQU8sQ0FBQyx1QkFBdUIsQ0FDckQsVUFBVSxFQUNWLE9BQU8sQ0FDUixDQUFDO1lBRUYsU0FBUztZQUNULE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNoQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsb0JBQW9CLENBQ2pELHdDQUF3QyxFQUN4QyxFQUFFLFVBQVUsRUFBRSxDQUNmLENBQUM7WUFDRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsb0JBQW9CLENBQ3BELHFDQUFxQyxFQUNyQyxFQUFFLE9BQU8sRUFBRSxDQUNaLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxyZWxhdG9yaW8tcGFnYW1lbnRvLnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IGdldFJlcG9zaXRvcnlUb2tlbiB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XG5pbXBvcnQgeyBSZXBvc2l0b3J5IH0gZnJvbSAndHlwZW9ybSc7XG5cbmltcG9ydCB7IFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9yZWxhdG9yaW8tcGFnYW1lbnRvLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGFnYW1lbnRvIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMvcGFnYW1lbnRvLmVudGl0eSc7XG5pbXBvcnQgeyBTdGF0dXNQYWdhbWVudG9FbnVtIH0gZnJvbSAnLi4vLi4vLi4vZW51bXMvc3RhdHVzLXBhZ2FtZW50by5lbnVtJztcbmltcG9ydCB7IE1ldG9kb1BhZ2FtZW50b0VudW0gfSBmcm9tICcuLi8uLi8uLi9lbnVtcy9tZXRvZG8tcGFnYW1lbnRvLmVudW0nO1xuXG4vKipcbiAqIFRlc3RlcyB1bml0w6FyaW9zIHBhcmEgUmVsYXRvcmlvUGFnYW1lbnRvU2VydmljZVxuICpcbiAqIEdhcmFudGUgcXVlIG9zIG3DqXRvZG9zIGRlIGdlcmHDp8OjbyBkZSByZWxhdMOzcmlvcyBlIGVzdGF0w61zdGljYXNcbiAqIHNvYnJlIHBhZ2FtZW50b3MgZnVuY2lvbmVtIGNvcnJldGFtZW50ZS5cbiAqXG4gKiBAYXV0aG9yIEVxdWlwZSBQR0JlblxuICovXG5kZXNjcmliZSgnUmVsYXRvcmlvUGFnYW1lbnRvU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2U7XG4gIGxldCBwYWdhbWVudG9SZXBvc2l0b3J5OiBSZXBvc2l0b3J5PFBhZ2FtZW50bz47XG5cbiAgLy8gRGFkb3MgZGUgZXhlbXBsbyBwYXJhIHRlc3Rlc1xuICBjb25zdCBwYWdhbWVudG9zTW9jayA9IFtcbiAgICB7XG4gICAgICBpZDogJ3BhZ2FtZW50by1pZC0xJyxcbiAgICAgIHNvbGljaXRhY2FvSWQ6ICdzb2xpY2l0YWNhby1pZC0xJyxcbiAgICAgIHZhbG9yOiA1MDAsXG4gICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uRklOQUxJWkFETyxcbiAgICAgIG1ldG9kb1BhZ2FtZW50bzogTWV0b2RvUGFnYW1lbnRvRW51bS5QSVgsXG4gICAgICBpbmZvQmFuY2FyaWFJZDogJ2luZm8tYmFuY2FyaWEtaWQtMScsXG4gICAgICBkYXRhTGliZXJhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMS0xNScpLFxuICAgICAgZGF0YUNyaWFjYW86IG5ldyBEYXRlKCcyMDI1LTAxLTEwJyksXG4gICAgICBkYXRhQXR1YWxpemFjYW86IG5ldyBEYXRlKCcyMDI1LTAxLTIwJyksXG4gICAgICBsaWJlcmFkb1BvcjogJ3VzdWFyaW8taWQtMScsXG4gICAgICB1bmlkYWRlSWQ6ICd1bmlkYWRlLWlkLTEnLFxuICAgICAgb2JzZXJ2YWNvZXM6ICdQYWdhbWVudG8gZGUgYmVuZWbDrWNpbyBldmVudHVhbCcsXG4gICAgICBkYWRvc0FkaWNpb25haXM6IHtcbiAgICAgICAgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIE1vcmFkaWEnLFxuICAgICAgICB2YWxvckFwcm92YWRvOiA1MDAsXG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdwYWdhbWVudG8taWQtMicsXG4gICAgICBzb2xpY2l0YWNhb0lkOiAnc29saWNpdGFjYW8taWQtMicsXG4gICAgICB2YWxvcjogMzAwLFxuICAgICAgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkZJTkFMSVpBRE8sXG4gICAgICBtZXRvZG9QYWdhbWVudG86IE1ldG9kb1BhZ2FtZW50b0VudW0uUFJFU0VOQ0lBTCxcbiAgICAgIGRhdGFMaWJlcmFjYW86IG5ldyBEYXRlKCcyMDI1LTAyLTEwJyksXG4gICAgICBkYXRhQ3JpYWNhbzogbmV3IERhdGUoJzIwMjUtMDItMDUnKSxcbiAgICAgIGRhdGFBdHVhbGl6YWNhbzogbmV3IERhdGUoJzIwMjUtMDItMTUnKSxcbiAgICAgIGxpYmVyYWRvUG9yOiAndXN1YXJpby1pZC0yJyxcbiAgICAgIHVuaWRhZGVJZDogJ3VuaWRhZGUtaWQtMScsXG4gICAgICBvYnNlcnZhY29lczogJ1BhZ2FtZW50byBkZSBiZW5lZsOtY2lvIGFsaW1lbnRhw6fDo28nLFxuICAgICAgZGFkb3NBZGljaW9uYWlzOiB7XG4gICAgICAgIHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBBbGltZW50YcOnw6NvJyxcbiAgICAgICAgdmFsb3JBcHJvdmFkbzogMzAwLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGFnYW1lbnRvLWlkLTMnLFxuICAgICAgc29saWNpdGFjYW9JZDogJ3NvbGljaXRhY2FvLWlkLTMnLFxuICAgICAgdmFsb3I6IDEwMDAsXG4gICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uUEFHTyxcbiAgICAgIG1ldG9kb1BhZ2FtZW50bzogTWV0b2RvUGFnYW1lbnRvRW51bS5UUkFOU0ZFUkVOQ0lBLFxuICAgICAgaW5mb0JhbmNhcmlhSWQ6ICdpbmZvLWJhbmNhcmlhLWlkLTMnLFxuICAgICAgZGF0YUxpYmVyYWNhbzogbmV3IERhdGUoJzIwMjUtMDMtMDUnKSxcbiAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMy0wMScpLFxuICAgICAgZGF0YUF0dWFsaXphY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMy0wNScpLFxuICAgICAgbGliZXJhZG9Qb3I6ICd1c3VhcmlvLWlkLTEnLFxuICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0yJyxcbiAgICAgIG9ic2VydmFjb2VzOiAnUGFnYW1lbnRvIGRlIGJlbmVmw61jaW8gZnVuZXJhbCcsXG4gICAgICBkYWRvc0FkaWNpb25haXM6IHtcbiAgICAgICAgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEZ1bmVyYWwnLFxuICAgICAgICB2YWxvckFwcm92YWRvOiAxMDAwLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGFnYW1lbnRvLWlkLTQnLFxuICAgICAgc29saWNpdGFjYW9JZDogJ3NvbGljaXRhY2FvLWlkLTQnLFxuICAgICAgdmFsb3I6IDUwMCxcbiAgICAgIHN0YXR1czogU3RhdHVzUGFnYW1lbnRvRW51bS5DQU5DRUxBRE8sXG4gICAgICBtZXRvZG9QYWdhbWVudG86IE1ldG9kb1BhZ2FtZW50b0VudW0uUElYLFxuICAgICAgaW5mb0JhbmNhcmlhSWQ6ICdpbmZvLWJhbmNhcmlhLWlkLTQnLFxuICAgICAgZGF0YUxpYmVyYWNhbzogbmV3IERhdGUoJzIwMjUtMDEtMjAnKSxcbiAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMS0xNScpLFxuICAgICAgZGF0YUF0dWFsaXphY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMS0yMicpLFxuICAgICAgbGliZXJhZG9Qb3I6ICd1c3VhcmlvLWlkLTInLFxuICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0xJyxcbiAgICAgIG9ic2VydmFjb2VzOiAnQ0FOQ0VMQURPOiBEYWRvcyBiYW5jw6FyaW9zIGluY29ycmV0b3MnLFxuICAgICAgZGFkb3NBZGljaW9uYWlzOiB7XG4gICAgICAgIHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBNb3JhZGlhJyxcbiAgICAgICAgdmFsb3JBcHJvdmFkbzogNTAwLFxuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IG1vY2tRdWVyeUJ1aWxkZXIgPSB7XG4gICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBhZGRTZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBhbmRXaGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZ3JvdXBCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgb3JkZXJCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZ2V0UmF3TWFueTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICBnZXRSYXdPbmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgZXhlY3V0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2UsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oUGFnYW1lbnRvKSxcbiAgICAgICAgICB1c2VWYWx1ZToge1xuICAgICAgICAgICAgY3JlYXRlUXVlcnlCdWlsZGVyOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tRdWVyeUJ1aWxkZXIpLFxuICAgICAgICAgICAgZmluZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHBhZ2FtZW50b3NNb2NrKSxcbiAgICAgICAgICAgIGZpbmRBbmRDb3VudDogamVzdFxuICAgICAgICAgICAgICAuZm4oKVxuICAgICAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUoW3BhZ2FtZW50b3NNb2NrLCBwYWdhbWVudG9zTW9jay5sZW5ndGhdKSxcbiAgICAgICAgICAgIG1hbmFnZXI6IHtcbiAgICAgICAgICAgICAgcXVlcnk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2U+KFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2UpO1xuICAgIHBhZ2FtZW50b1JlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0PFJlcG9zaXRvcnk8UGFnYW1lbnRvPj4oXG4gICAgICBnZXRSZXBvc2l0b3J5VG9rZW4oUGFnYW1lbnRvKSxcbiAgICApO1xuICB9KTtcblxuICBpdCgnZGV2ZSBlc3RhciBkZWZpbmlkbycsICgpID0+IHtcbiAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dlcmFyUmVsYXRvcmlvTWVuc2FsJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGdlcmFyIHJlbGF0w7NyaW8gbWVuc2FsIHBvciBwZXLDrW9kbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMScsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAyIH0sXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMicsIHRvdGFsOiAzMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAzJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3RcbiAgICAgICAgLnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzdWx0YWRvKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLmdlcmFyUmVsYXRvcmlvTWVuc2FsKGRhdGFJbmljaW8sIGRhdGFGaW0pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLndoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by5kYXRhTGliZXJhY2FvID49IDpkYXRhSW5pY2lvJyxcbiAgICAgICAgeyBkYXRhSW5pY2lvIH0sXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAncGFnYW1lbnRvLmRhdGFMaWJlcmFjYW8gPD0gOmRhdGFGaW0nLFxuICAgICAgICB7IGRhdGFGaW0gfSxcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5ncm91cEJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciB1bmlkYWRlIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoJzIwMjUtMDEtMDEnKTtcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBuZXcgRGF0ZSgnMjAyNS0wMy0zMScpO1xuICAgICAgY29uc3QgdW5pZGFkZUlkID0gJ3VuaWRhZGUtaWQtMSc7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMScsIHRvdGFsOiA1MDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAyJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgXTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9NZW5zYWwoXG4gICAgICAgIGRhdGFJbmljaW8sXG4gICAgICAgIGRhdGFGaW0sXG4gICAgICAgIHVuaWRhZGVJZCxcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by51bmlkYWRlSWQgPSA6dW5pZGFkZUlkJyxcbiAgICAgICAgeyB1bmlkYWRlSWQgfSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIGFwZW5hcyBwYWdhbWVudG9zIGZpbmFsaXphZG9zL3BhZ29zIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoJzIwMjUtMDEtMDEnKTtcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBuZXcgRGF0ZSgnMjAyNS0wMy0zMScpO1xuICAgICAgY29uc3QgdW5pZGFkZUlkID0gbnVsbDtcbiAgICAgIGNvbnN0IGFwZW5hc0ZpbmFsaXphZG9zID0gdHJ1ZTtcblxuICAgICAgY29uc3QgbW9ja1Jlc3VsdGFkbyA9IFtcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAxJywgdG90YWw6IDUwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IG1lczogJzIwMjUtMDInLCB0b3RhbDogMzAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMycsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICBdO1xuXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb01lbnNhbChcbiAgICAgICAgZGF0YUluaWNpbyxcbiAgICAgICAgZGF0YUZpbSxcbiAgICAgICAgdW5pZGFkZUlkLFxuICAgICAgICBhcGVuYXNGaW5hbGl6YWRvcyxcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by5zdGF0dXMgSU4gKDouLi5zdGF0dXNGaW5hbGl6YWRvKScsXG4gICAgICAgIHtcbiAgICAgICAgICBzdGF0dXNGaW5hbGl6YWRvOiBbXG4gICAgICAgICAgICBTdGF0dXNQYWdhbWVudG9FbnVtLkZJTkFMSVpBRE8sXG4gICAgICAgICAgICBTdGF0dXNQYWdhbWVudG9FbnVtLlBBR08sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXJhclJlbGF0b3Jpb1Bvck1ldG9kbycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBnZXJhciByZWxhdMOzcmlvIHBvciBtw6l0b2RvIGRlIHBhZ2FtZW50bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDIgfSxcbiAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICdwcmVzZW5jaWFsJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IG1ldG9kb1BhZ2FtZW50bzogJ3RyYW5zZmVyZW5jaWEnLCB0b3RhbDogMTAwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgXTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9Qb3JNZXRvZG8oXG4gICAgICAgIGRhdGFJbmljaW8sXG4gICAgICAgIGRhdGFGaW0sXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmdyb3VwQnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGZpbHRyYXIgYXBlbmFzIHBhZ2FtZW50b3MgbsOjbyBjYW5jZWxhZG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcblxuICAgICAgY29uc3QgbW9ja1Jlc3VsdGFkbyA9IFtcbiAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICdwaXgnLCB0b3RhbDogNTAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncHJlc2VuY2lhbCcsIHRvdGFsOiAzMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICd0cmFuc2ZlcmVuY2lhJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3RcbiAgICAgICAgLnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzdWx0YWRvKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLmdlcmFyUmVsYXRvcmlvUG9yTWV0b2RvKFxuICAgICAgICBkYXRhSW5pY2lvLFxuICAgICAgICBkYXRhRmltLFxuICAgICAgKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAncGFnYW1lbnRvLnN0YXR1cyAhPSA6c3RhdHVzQ2FuY2VsYWRvJyxcbiAgICAgICAgeyBzdGF0dXNDYW5jZWxhZG86IFN0YXR1c1BhZ2FtZW50b0VudW0uQ0FOQ0VMQURPIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VyYXJSZWxhdG9yaW9Qb3JTdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZ2VyYXIgcmVsYXTDs3JpbyBwb3Igc3RhdHVzIGRlIHBhZ2FtZW50bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgc3RhdHVzOiAnZmluYWxpemFkbycsIHRvdGFsOiA4MDAsIHF1YW50aWRhZGU6IDIgfSxcbiAgICAgICAgeyBzdGF0dXM6ICdwYWdvJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBzdGF0dXM6ICdjYW5jZWxhZG8nLCB0b3RhbDogNTAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICBdO1xuXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclN0YXR1cygpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmdyb3VwQnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGZpbHRyYXIgcG9yIHBlcsOtb2RvIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoJzIwMjUtMDEtMDEnKTtcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBuZXcgRGF0ZSgnMjAyNS0wMy0zMScpO1xuXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7IHN0YXR1czogJ2ZpbmFsaXphZG8nLCB0b3RhbDogODAwLCBxdWFudGlkYWRlOiAyIH0sXG4gICAgICAgIHsgc3RhdHVzOiAncGFnbycsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgc3RhdHVzOiAnY2FuY2VsYWRvJywgdG90YWw6IDUwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgXTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9Qb3JTdGF0dXMoXG4gICAgICAgIGRhdGFJbmljaW8sXG4gICAgICAgIGRhdGFGaW0sXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci53aGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdwYWdhbWVudG8uZGF0YUxpYmVyYWNhbyA+PSA6ZGF0YUluaWNpbycsXG4gICAgICAgIHsgZGF0YUluaWNpbyB9LFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by5kYXRhTGliZXJhY2FvIDw9IDpkYXRhRmltJyxcbiAgICAgICAgeyBkYXRhRmltIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VyYXJSZWxhdG9yaW9Qb3JVbmlkYWRlJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGdlcmFyIHJlbGF0w7NyaW8gcG9yIHVuaWRhZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7XG4gICAgICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0xJyxcbiAgICAgICAgICBub21lVW5pZGFkZTogJ0NSQVMgQ2VudHJvJyxcbiAgICAgICAgICB0b3RhbDogMTMwMCxcbiAgICAgICAgICBxdWFudGlkYWRlOiAzLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0yJyxcbiAgICAgICAgICBub21lVW5pZGFkZTogJ0NSQVMgTm9ydGUnLFxuICAgICAgICAgIHRvdGFsOiAxMDAwLFxuICAgICAgICAgIHF1YW50aWRhZGU6IDEsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihwYWdhbWVudG9SZXBvc2l0b3J5Lm1hbmFnZXIsICdxdWVyeScpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclVuaWRhZGUoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlci5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmlsdHJhciBwb3IgcGVyw61vZG8gcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB1bmlkYWRlSWQ6ICd1bmlkYWRlLWlkLTEnLFxuICAgICAgICAgIG5vbWVVbmlkYWRlOiAnQ1JBUyBDZW50cm8nLFxuICAgICAgICAgIHRvdGFsOiAxMzAwLFxuICAgICAgICAgIHF1YW50aWRhZGU6IDMsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB1bmlkYWRlSWQ6ICd1bmlkYWRlLWlkLTInLFxuICAgICAgICAgIG5vbWVVbmlkYWRlOiAnQ1JBUyBOb3J0ZScsXG4gICAgICAgICAgdG90YWw6IDEwMDAsXG4gICAgICAgICAgcXVhbnRpZGFkZTogMSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIGplc3RcbiAgICAgICAgLnNweU9uKHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlciwgJ3F1ZXJ5JylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzdWx0YWRvKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLmdlcmFyUmVsYXRvcmlvUG9yVW5pZGFkZShcbiAgICAgICAgZGF0YUluaWNpbyxcbiAgICAgICAgZGF0YUZpbSxcbiAgICAgICk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChwYWdhbWVudG9SZXBvc2l0b3J5Lm1hbmFnZXIucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZyhcbiAgICAgICAgICAnV0hFUkUgcC5kYXRhX2xpYmVyYWNhbyA+PSAkMSBBTkQgcC5kYXRhX2xpYmVyYWNhbyA8PSAkMicsXG4gICAgICAgICksXG4gICAgICAgIFtkYXRhSW5pY2lvLCBkYXRhRmltXSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXJhclJlbGF0b3Jpb1BvclRpcG9CZW5lZmljaW8nLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZ2VyYXIgcmVsYXTDs3JpbyBwb3IgdGlwbyBkZSBiZW5lZsOtY2lvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja1Jlc3VsdGFkbyA9IFtcbiAgICAgICAgeyB0aXBvQmVuZWZpY2lvOiAnQXV4w61saW8gTW9yYWRpYScsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAyIH0sXG4gICAgICAgIHsgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEFsaW1lbnRhw6fDo28nLCB0b3RhbDogMzAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEZ1bmVyYWwnLCB0b3RhbDogMTAwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgXTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24ocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLCAncXVlcnknKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9Qb3JUaXBvQmVuZWZpY2lvKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChwYWdhbWVudG9SZXBvc2l0b3J5Lm1hbmFnZXIucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGZpbHRyYXIgcG9yIHVuaWRhZGUgcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHVuaWRhZGVJZCA9ICd1bmlkYWRlLWlkLTEnO1xuXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7IHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBNb3JhZGlhJywgdG90YWw6IDUwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBBbGltZW50YcOnw6NvJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgXTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24ocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLCAncXVlcnknKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9Qb3JUaXBvQmVuZWZpY2lvKFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLnF1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ1dIRVJFIHAudW5pZGFkZV9pZCA9ICQxJyksXG4gICAgICAgIFt1bmlkYWRlSWRdLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ29idGVyRXN0YXRpc3RpY2FzR2VyYWlzJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIG9idGVyIGVzdGF0w61zdGljYXMgZ2VyYWlzIGRlIHBhZ2FtZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrRXN0YXRpc3RpY2FzID0ge1xuICAgICAgICB0b3RhbFBhZ2FtZW50b3M6IDQsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAyMzAwLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAyLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogMSxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAxLFxuICAgICAgICBtZWRpYVZhbG9yUGFnYW1lbnRvOiA1NzUsXG4gICAgICAgIHBhZ2FtZW50b3NQb3JNZXRvZG86IHtcbiAgICAgICAgICBwaXg6IDIsXG4gICAgICAgICAgcHJlc2VuY2lhbDogMSxcbiAgICAgICAgICB0cmFuc2ZlcmVuY2lhOiAxLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3T25lJykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgdG90YWxQYWdhbWVudG9zOiAnNCcsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAnMjMwMC4wMCcsXG4gICAgICAgIHRvdGFsRmluYWxpemFkb3M6ICcyJyxcbiAgICAgICAgdG90YWxFbVByb2Nlc3NhbWVudG86ICcxJyxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAnMScsXG4gICAgICB9KTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZShbXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgcXVhbnRpZGFkZTogJzInIH0sXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncHJlc2VuY2lhbCcsIHF1YW50aWRhZGU6ICcxJyB9LFxuICAgICAgICB7IG1ldG9kb1BhZ2FtZW50bzogJ3RyYW5zZmVyZW5jaWEnLCBxdWFudGlkYWRlOiAnMScgfSxcbiAgICAgIF0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJFc3RhdGlzdGljYXNHZXJhaXMoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdG90YWxQYWdhbWVudG9zOiA0LFxuICAgICAgICAgIHRvdGFsVmFsb3JQYWdvOiAyMzAwLFxuICAgICAgICAgIHRvdGFsRmluYWxpemFkb3M6IDIsXG4gICAgICAgICAgdG90YWxFbVByb2Nlc3NhbWVudG86IDEsXG4gICAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAxLFxuICAgICAgICAgIHBhZ2FtZW50b3NQb3JNZXRvZG86IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciBwZXLDrW9kbyBxdWFuZG8gZXNwZWNpZmljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3T25lJykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgdG90YWxQYWdhbWVudG9zOiAnNCcsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAnMjMwMC4wMCcsXG4gICAgICAgIHRvdGFsRmluYWxpemFkb3M6ICcyJyxcbiAgICAgICAgdG90YWxFbVByb2Nlc3NhbWVudG86ICcxJyxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAnMScsXG4gICAgICB9KTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZShbXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgcXVhbnRpZGFkZTogJzInIH0sXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncHJlc2VuY2lhbCcsIHF1YW50aWRhZGU6ICcxJyB9LFxuICAgICAgICB7IG1ldG9kb1BhZ2FtZW50bzogJ3RyYW5zZmVyZW5jaWEnLCBxdWFudGlkYWRlOiAnMScgfSxcbiAgICAgIF0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJFc3RhdGlzdGljYXNHZXJhaXMoXG4gICAgICAgIGRhdGFJbmljaW8sXG4gICAgICAgIGRhdGFGaW0sXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci53aGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdwYWdhbWVudG8uZGF0YUxpYmVyYWNhbyA+PSA6ZGF0YUluaWNpbycsXG4gICAgICAgIHsgZGF0YUluaWNpbyB9LFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by5kYXRhTGliZXJhY2FvIDw9IDpkYXRhRmltJyxcbiAgICAgICAgeyBkYXRhRmltIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9