{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\integrador\\controllers\\api-exemplo.controller.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\integrador\\controllers\\api-exemplo.controller.ts"],"sourcesContent":["import { Controller, Get, UseGuards, HttpException, HttpStatus } from '@nestjs/common';\nimport { ApiTags, ApiBearerAuth, ApiOperation, ApiResponse } from '@nestjs/swagger';\nimport { IntegradorAuthGuard } from '../guards/integrador-auth.guard';\nimport { Escopos } from '../decorators/escopos.decorator';\nimport { GetIntegrador } from '../decorators/get-integrador.decorator';\nimport { Integrador } from '../../../entities/integrador.entity';\n\n/**\n * Controller de exemplo para demonstrar como proteger endpoints para acesso de integradores.\n * Este controller pode ser usado como referência para implementar outros endpoints protegidos.\n */\n@ApiTags('api-exemplo')\n@Controller('api/exemplo')\n@UseGuards(IntegradorAuthGuard)\n@ApiBearerAuth()\nexport class ApiExemploController {\n  \n  /**\n   * Endpoint de exemplo que requer escopo de leitura básico.\n   */\n  @Get('dados-basicos')\n  @Escopos('read:dados_basicos')\n  @ApiOperation({ summary: 'Obtém dados básicos (exemplo)' })\n  @ApiResponse({ \n    status: 200, \n    description: 'Dados básicos retornados com sucesso',\n    schema: {\n      properties: {\n        message: { type: 'string' },\n        integrador: { type: 'string' },\n        timestamp: { type: 'string', format: 'date-time' },\n        dados: { type: 'object' }\n      }\n    }\n  })\n  @ApiResponse({ status: 401, description: 'Não autorizado' })\n  @ApiResponse({ status: 403, description: 'Permissão insuficiente' })\n  getDadosBasicos(@GetIntegrador() integrador: Integrador) {\n    // Usando o decorator @GetIntegrador para obter facilmente os dados do integrador\n    return {\n      message: 'Dados básicos disponíveis',\n      integrador: integrador.nome,\n      timestamp: new Date().toISOString(),\n      dados: {\n        exemplo: 'Estes são dados básicos de exemplo',\n        status: 'ativo',\n        identificacao: '12345'\n      }\n    };\n  }\n  \n  /**\n   * Endpoint de exemplo que requer escopo de leitura avançado.\n   */\n  @Get('dados-avancados')\n  @Escopos('read:dados_avancados')\n  @ApiOperation({ summary: 'Obtém dados avançados (exemplo)' })\n  @ApiResponse({ \n    status: 200, \n    description: 'Dados avançados retornados com sucesso',\n    schema: {\n      properties: {\n        message: { type: 'string' },\n        integrador: { type: 'string' },\n        timestamp: { type: 'string', format: 'date-time' },\n        dados: { type: 'object' }\n      }\n    }\n  })\n  @ApiResponse({ status: 401, description: 'Não autorizado' })\n  @ApiResponse({ status: 403, description: 'Permissão insuficiente' })\n  getDadosAvancados(@GetIntegrador() integrador: Integrador) {\n    return {\n      message: 'Dados avançados disponíveis',\n      integrador: integrador.nome,\n      timestamp: new Date().toISOString(),\n      dados: {\n        exemplo: 'Estes são dados avançados de exemplo',\n        detalhes: {\n          tipo: 'detalhado',\n          nivel: 'avançado',\n          sensibilidade: 'média'\n        },\n        estatisticas: {\n          total: 1250,\n          processados: 1100,\n          pendentes: 150\n        }\n      }\n    };\n  }\n\n  /**\n   * Endpoint de exemplo que demonstra como tratar erros.\n   */\n  @Get('erro-exemplo')\n  @Escopos('read:dados_basicos')\n  @ApiOperation({ summary: 'Demonstração de tratamento de erro (exemplo)' })\n  @ApiResponse({ status: 400, description: 'Exemplo de erro' })\n  @ApiResponse({ status: 401, description: 'Não autorizado' })\n  @ApiResponse({ status: 403, description: 'Permissão insuficiente' })\n  getErroExemplo() {\n    // Este é um exemplo de como retornar um erro\n    throw new HttpException(\n      {\n        status: HttpStatus.BAD_REQUEST,\n        error: 'Exemplo de erro',\n        message: 'Este é um exemplo de como os erros são formatados',\n        timestamp: new Date().toISOString(),\n        path: '/api/exemplo/erro-exemplo'\n      },\n      HttpStatus.BAD_REQUEST\n    );\n  }\n}\n"],"version":3}