b674b061204be9d0586b79c82c0430eb
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ApiExemploController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const integrador_auth_guard_1 = require("../guards/integrador-auth.guard");
const escopos_decorator_1 = require("../decorators/escopos.decorator");
const get_integrador_decorator_1 = require("../decorators/get-integrador.decorator");
const integrador_entity_1 = require("../../../entities/integrador.entity");
/**
 * Controller de exemplo para demonstrar como proteger endpoints para acesso de integradores.
 * Este controller pode ser usado como referência para implementar outros endpoints protegidos.
 */
let ApiExemploController = class ApiExemploController {
    /**
     * Endpoint de exemplo que requer escopo de leitura básico.
     */
    getDadosBasicos(integrador) {
        // Usando o decorator @GetIntegrador para obter facilmente os dados do integrador
        return {
            message: 'Dados básicos disponíveis',
            integrador: integrador.nome,
            timestamp: new Date().toISOString(),
            dados: {
                exemplo: 'Estes são dados básicos de exemplo',
                status: 'ativo',
                identificacao: '12345'
            }
        };
    }
    /**
     * Endpoint de exemplo que requer escopo de leitura avançado.
     */
    getDadosAvancados(integrador) {
        return {
            message: 'Dados avançados disponíveis',
            integrador: integrador.nome,
            timestamp: new Date().toISOString(),
            dados: {
                exemplo: 'Estes são dados avançados de exemplo',
                detalhes: {
                    tipo: 'detalhado',
                    nivel: 'avançado',
                    sensibilidade: 'média'
                },
                estatisticas: {
                    total: 1250,
                    processados: 1100,
                    pendentes: 150
                }
            }
        };
    }
    /**
     * Endpoint de exemplo que demonstra como tratar erros.
     */
    getErroExemplo() {
        // Este é um exemplo de como retornar um erro
        throw new common_1.HttpException({
            status: common_1.HttpStatus.BAD_REQUEST,
            error: 'Exemplo de erro',
            message: 'Este é um exemplo de como os erros são formatados',
            timestamp: new Date().toISOString(),
            path: '/api/exemplo/erro-exemplo'
        }, common_1.HttpStatus.BAD_REQUEST);
    }
};
exports.ApiExemploController = ApiExemploController;
__decorate([
    (0, common_1.Get)('dados-basicos'),
    (0, escopos_decorator_1.Escopos)('read:dados_basicos'),
    (0, swagger_1.ApiOperation)({ summary: 'Obtém dados básicos (exemplo)' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Dados básicos retornados com sucesso',
        schema: {
            properties: {
                message: { type: 'string' },
                integrador: { type: 'string' },
                timestamp: { type: 'string', format: 'date-time' },
                dados: { type: 'object' }
            }
        }
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Não autorizado' }),
    (0, swagger_1.ApiResponse)({ status: 403, description: 'Permissão insuficiente' }),
    __param(0, (0, get_integrador_decorator_1.GetIntegrador)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_a = typeof integrador_entity_1.Integrador !== "undefined" && integrador_entity_1.Integrador) === "function" ? _a : Object]),
    __metadata("design:returntype", void 0)
], ApiExemploController.prototype, "getDadosBasicos", null);
__decorate([
    (0, common_1.Get)('dados-avancados'),
    (0, escopos_decorator_1.Escopos)('read:dados_avancados'),
    (0, swagger_1.ApiOperation)({ summary: 'Obtém dados avançados (exemplo)' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Dados avançados retornados com sucesso',
        schema: {
            properties: {
                message: { type: 'string' },
                integrador: { type: 'string' },
                timestamp: { type: 'string', format: 'date-time' },
                dados: { type: 'object' }
            }
        }
    }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Não autorizado' }),
    (0, swagger_1.ApiResponse)({ status: 403, description: 'Permissão insuficiente' }),
    __param(0, (0, get_integrador_decorator_1.GetIntegrador)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof integrador_entity_1.Integrador !== "undefined" && integrador_entity_1.Integrador) === "function" ? _b : Object]),
    __metadata("design:returntype", void 0)
], ApiExemploController.prototype, "getDadosAvancados", null);
__decorate([
    (0, common_1.Get)('erro-exemplo'),
    (0, escopos_decorator_1.Escopos)('read:dados_basicos'),
    (0, swagger_1.ApiOperation)({ summary: 'Demonstração de tratamento de erro (exemplo)' }),
    (0, swagger_1.ApiResponse)({ status: 400, description: 'Exemplo de erro' }),
    (0, swagger_1.ApiResponse)({ status: 401, description: 'Não autorizado' }),
    (0, swagger_1.ApiResponse)({ status: 403, description: 'Permissão insuficiente' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", void 0)
], ApiExemploController.prototype, "getErroExemplo", null);
exports.ApiExemploController = ApiExemploController = __decorate([
    (0, swagger_1.ApiTags)('api-exemplo'),
    (0, common_1.Controller)('api/exemplo'),
    (0, common_1.UseGuards)(integrador_auth_guard_1.IntegradorAuthGuard),
    (0, swagger_1.ApiBearerAuth)()
], ApiExemploController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGludGVncmFkb3JcXGNvbnRyb2xsZXJzXFxhcGktZXhlbXBsby5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FBdUY7QUFDdkYsNkNBQW9GO0FBQ3BGLDJFQUFzRTtBQUN0RSx1RUFBMEQ7QUFDMUQscUZBQXVFO0FBQ3ZFLDJFQUFpRTtBQUVqRTs7O0dBR0c7QUFLSSxJQUFNLG9CQUFvQixHQUExQixNQUFNLG9CQUFvQjtJQUUvQjs7T0FFRztJQWtCSCxlQUFlLENBQWtCLFVBQXNCO1FBQ3JELGlGQUFpRjtRQUNqRixPQUFPO1lBQ0wsT0FBTyxFQUFFLDJCQUEyQjtZQUNwQyxVQUFVLEVBQUUsVUFBVSxDQUFDLElBQUk7WUFDM0IsU0FBUyxFQUFFLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFO1lBQ25DLEtBQUssRUFBRTtnQkFDTCxPQUFPLEVBQUUsb0NBQW9DO2dCQUM3QyxNQUFNLEVBQUUsT0FBTztnQkFDZixhQUFhLEVBQUUsT0FBTzthQUN2QjtTQUNGLENBQUM7SUFDSixDQUFDO0lBRUQ7O09BRUc7SUFrQkgsaUJBQWlCLENBQWtCLFVBQXNCO1FBQ3ZELE9BQU87WUFDTCxPQUFPLEVBQUUsNkJBQTZCO1lBQ3RDLFVBQVUsRUFBRSxVQUFVLENBQUMsSUFBSTtZQUMzQixTQUFTLEVBQUUsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDbkMsS0FBSyxFQUFFO2dCQUNMLE9BQU8sRUFBRSxzQ0FBc0M7Z0JBQy9DLFFBQVEsRUFBRTtvQkFDUixJQUFJLEVBQUUsV0FBVztvQkFDakIsS0FBSyxFQUFFLFVBQVU7b0JBQ2pCLGFBQWEsRUFBRSxPQUFPO2lCQUN2QjtnQkFDRCxZQUFZLEVBQUU7b0JBQ1osS0FBSyxFQUFFLElBQUk7b0JBQ1gsV0FBVyxFQUFFLElBQUk7b0JBQ2pC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LENBQUM7SUFDNUQsSUFBQSxxQkFBVyxFQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsQ0FBQztJQUMzRCxJQUFBLHFCQUFXLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSx3QkFBd0IsRUFBRSxDQUFDOzs7OzBEQWFuRTsrQkFsR1Usb0JBQW9CO0lBSmhDLElBQUEsaUJBQU8sRUFBQyxhQUFhLENBQUM7SUFDdEIsSUFBQSxtQkFBVSxFQUFDLGFBQWEsQ0FBQztJQUN6QixJQUFBLGtCQUFTLEVBQUMsMkNBQW1CLENBQUM7SUFDOUIsSUFBQSx1QkFBYSxHQUFFO0dBQ0gsb0JBQW9CLENBbUdoQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcaW50ZWdyYWRvclxcY29udHJvbGxlcnNcXGFwaS1leGVtcGxvLmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29udHJvbGxlciwgR2V0LCBVc2VHdWFyZHMsIEh0dHBFeGNlcHRpb24sIEh0dHBTdGF0dXMgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBBcGlUYWdzLCBBcGlCZWFyZXJBdXRoLCBBcGlPcGVyYXRpb24sIEFwaVJlc3BvbnNlIH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEludGVncmFkb3JBdXRoR3VhcmQgfSBmcm9tICcuLi9ndWFyZHMvaW50ZWdyYWRvci1hdXRoLmd1YXJkJztcbmltcG9ydCB7IEVzY29wb3MgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2VzY29wb3MuZGVjb3JhdG9yJztcbmltcG9ydCB7IEdldEludGVncmFkb3IgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2dldC1pbnRlZ3JhZG9yLmRlY29yYXRvcic7XG5pbXBvcnQgeyBJbnRlZ3JhZG9yIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMvaW50ZWdyYWRvci5lbnRpdHknO1xuXG4vKipcbiAqIENvbnRyb2xsZXIgZGUgZXhlbXBsbyBwYXJhIGRlbW9uc3RyYXIgY29tbyBwcm90ZWdlciBlbmRwb2ludHMgcGFyYSBhY2Vzc28gZGUgaW50ZWdyYWRvcmVzLlxuICogRXN0ZSBjb250cm9sbGVyIHBvZGUgc2VyIHVzYWRvIGNvbW8gcmVmZXLDqm5jaWEgcGFyYSBpbXBsZW1lbnRhciBvdXRyb3MgZW5kcG9pbnRzIHByb3RlZ2lkb3MuXG4gKi9cbkBBcGlUYWdzKCdhcGktZXhlbXBsbycpXG5AQ29udHJvbGxlcignYXBpL2V4ZW1wbG8nKVxuQFVzZUd1YXJkcyhJbnRlZ3JhZG9yQXV0aEd1YXJkKVxuQEFwaUJlYXJlckF1dGgoKVxuZXhwb3J0IGNsYXNzIEFwaUV4ZW1wbG9Db250cm9sbGVyIHtcbiAgXG4gIC8qKlxuICAgKiBFbmRwb2ludCBkZSBleGVtcGxvIHF1ZSByZXF1ZXIgZXNjb3BvIGRlIGxlaXR1cmEgYsOhc2ljby5cbiAgICovXG4gIEBHZXQoJ2RhZG9zLWJhc2ljb3MnKVxuICBARXNjb3BvcygncmVhZDpkYWRvc19iYXNpY29zJylcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdPYnTDqW0gZGFkb3MgYsOhc2ljb3MgKGV4ZW1wbG8pJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBcbiAgICBzdGF0dXM6IDIwMCwgXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBiw6FzaWNvcyByZXRvcm5hZG9zIGNvbSBzdWNlc3NvJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBpbnRlZ3JhZG9yOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHRpbWVzdGFtcDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICBkYWRvczogeyB0eXBlOiAnb2JqZWN0JyB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAzLCBkZXNjcmlwdGlvbjogJ1Blcm1pc3PDo28gaW5zdWZpY2llbnRlJyB9KVxuICBnZXREYWRvc0Jhc2ljb3MoQEdldEludGVncmFkb3IoKSBpbnRlZ3JhZG9yOiBJbnRlZ3JhZG9yKSB7XG4gICAgLy8gVXNhbmRvIG8gZGVjb3JhdG9yIEBHZXRJbnRlZ3JhZG9yIHBhcmEgb2J0ZXIgZmFjaWxtZW50ZSBvcyBkYWRvcyBkbyBpbnRlZ3JhZG9yXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6ICdEYWRvcyBiw6FzaWNvcyBkaXNwb27DrXZlaXMnLFxuICAgICAgaW50ZWdyYWRvcjogaW50ZWdyYWRvci5ub21lLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBkYWRvczoge1xuICAgICAgICBleGVtcGxvOiAnRXN0ZXMgc8OjbyBkYWRvcyBiw6FzaWNvcyBkZSBleGVtcGxvJyxcbiAgICAgICAgc3RhdHVzOiAnYXRpdm8nLFxuICAgICAgICBpZGVudGlmaWNhY2FvOiAnMTIzNDUnXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEVuZHBvaW50IGRlIGV4ZW1wbG8gcXVlIHJlcXVlciBlc2NvcG8gZGUgbGVpdHVyYSBhdmFuw6dhZG8uXG4gICAqL1xuICBAR2V0KCdkYWRvcy1hdmFuY2Fkb3MnKVxuICBARXNjb3BvcygncmVhZDpkYWRvc19hdmFuY2Fkb3MnKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ09idMOpbSBkYWRvcyBhdmFuw6dhZG9zIChleGVtcGxvKScgfSlcbiAgQEFwaVJlc3BvbnNlKHsgXG4gICAgc3RhdHVzOiAyMDAsIFxuICAgIGRlc2NyaXB0aW9uOiAnRGFkb3MgYXZhbsOnYWRvcyByZXRvcm5hZG9zIGNvbSBzdWNlc3NvJyxcbiAgICBzY2hlbWE6IHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICBpbnRlZ3JhZG9yOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgIHRpbWVzdGFtcDogeyB0eXBlOiAnc3RyaW5nJywgZm9ybWF0OiAnZGF0ZS10aW1lJyB9LFxuICAgICAgICBkYWRvczogeyB0eXBlOiAnb2JqZWN0JyB9XG4gICAgICB9XG4gICAgfVxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAzLCBkZXNjcmlwdGlvbjogJ1Blcm1pc3PDo28gaW5zdWZpY2llbnRlJyB9KVxuICBnZXREYWRvc0F2YW5jYWRvcyhAR2V0SW50ZWdyYWRvcigpIGludGVncmFkb3I6IEludGVncmFkb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZTogJ0RhZG9zIGF2YW7Dp2Fkb3MgZGlzcG9uw612ZWlzJyxcbiAgICAgIGludGVncmFkb3I6IGludGVncmFkb3Iubm9tZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZGFkb3M6IHtcbiAgICAgICAgZXhlbXBsbzogJ0VzdGVzIHPDo28gZGFkb3MgYXZhbsOnYWRvcyBkZSBleGVtcGxvJyxcbiAgICAgICAgZGV0YWxoZXM6IHtcbiAgICAgICAgICB0aXBvOiAnZGV0YWxoYWRvJyxcbiAgICAgICAgICBuaXZlbDogJ2F2YW7Dp2FkbycsXG4gICAgICAgICAgc2Vuc2liaWxpZGFkZTogJ23DqWRpYSdcbiAgICAgICAgfSxcbiAgICAgICAgZXN0YXRpc3RpY2FzOiB7XG4gICAgICAgICAgdG90YWw6IDEyNTAsXG4gICAgICAgICAgcHJvY2Vzc2Fkb3M6IDExMDAsXG4gICAgICAgICAgcGVuZGVudGVzOiAxNTBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRW5kcG9pbnQgZGUgZXhlbXBsbyBxdWUgZGVtb25zdHJhIGNvbW8gdHJhdGFyIGVycm9zLlxuICAgKi9cbiAgQEdldCgnZXJyby1leGVtcGxvJylcbiAgQEVzY29wb3MoJ3JlYWQ6ZGFkb3NfYmFzaWNvcycpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnRGVtb25zdHJhw6fDo28gZGUgdHJhdGFtZW50byBkZSBlcnJvIChleGVtcGxvKScgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiA0MDAsIGRlc2NyaXB0aW9uOiAnRXhlbXBsbyBkZSBlcnJvJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IDQwMSwgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogNDAzLCBkZXNjcmlwdGlvbjogJ1Blcm1pc3PDo28gaW5zdWZpY2llbnRlJyB9KVxuICBnZXRFcnJvRXhlbXBsbygpIHtcbiAgICAvLyBFc3RlIMOpIHVtIGV4ZW1wbG8gZGUgY29tbyByZXRvcm5hciB1bSBlcnJvXG4gICAgdGhyb3cgbmV3IEh0dHBFeGNlcHRpb24oXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICAgICAgZXJyb3I6ICdFeGVtcGxvIGRlIGVycm8nLFxuICAgICAgICBtZXNzYWdlOiAnRXN0ZSDDqSB1bSBleGVtcGxvIGRlIGNvbW8gb3MgZXJyb3Mgc8OjbyBmb3JtYXRhZG9zJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHBhdGg6ICcvYXBpL2V4ZW1wbG8vZXJyby1leGVtcGxvJ1xuICAgICAgfSxcbiAgICAgIEh0dHBTdGF0dXMuQkFEX1JFUVVFU1RcbiAgICApO1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=