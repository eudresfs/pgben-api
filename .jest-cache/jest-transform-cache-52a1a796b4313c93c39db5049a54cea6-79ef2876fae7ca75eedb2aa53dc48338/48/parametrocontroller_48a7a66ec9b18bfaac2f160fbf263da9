0d9f25f159660adf6883c1fad8e598d4
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ParametroController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const permission_guard_1 = require("../../../auth/guards/permission.guard");
const requires_permission_decorator_1 = require("../../../auth/decorators/requires-permission.decorator");
const user_permission_entity_1 = require("../../../entities/user-permission.entity");
const parametro_service_1 = require("../services/parametro.service");
const parametro_create_dto_1 = require("../dtos/parametro/parametro-create.dto");
const parametro_update_dto_1 = require("../dtos/parametro/parametro-update.dto");
const parametro_response_dto_1 = require("../dtos/parametro/parametro-response.dto");
/**
 * Controlador responsável pelas operações de parâmetros do sistema
 */
let ParametroController = class ParametroController {
    parametroService;
    constructor(parametroService) {
        this.parametroService = parametroService;
    }
    /**
     * Busca todos os parâmetros do sistema
     * @param categoria Categoria opcional para filtrar
     * @returns Lista de parâmetros
     */
    async buscarTodos(categoria) {
        return this.parametroService.buscarTodos(categoria);
    }
    /**
     * Busca um parâmetro específico por sua chave
     * @param chave Chave do parâmetro
     * @returns Parâmetro encontrado
     */
    async buscarPorChave(chave) {
        return this.parametroService.buscarPorChave(chave);
    }
    /**
     * Cria um novo parâmetro no sistema
     * @param dto Dados do parâmetro a ser criado
     * @returns Parâmetro criado
     */
    async criar(dto) {
        return this.parametroService.criar(dto);
    }
    /**
     * Atualiza um parâmetro existente
     * @param chave Chave do parâmetro
     * @param dto Dados para atualização
     * @returns Parâmetro atualizado
     */
    async atualizar(chave, dto) {
        return this.parametroService.atualizar(chave, dto);
    }
    /**
     * Remove um parâmetro do sistema
     * @param chave Chave do parâmetro
     */
    async remover(chave) {
        await this.parametroService.remover(chave);
    }
    /**
     * Limpa o cache de parâmetros
     */
    async limparCache() {
        this.parametroService.limparCache();
        return { mensagem: 'Cache de parâmetros limpo com sucesso' };
    }
};
exports.ParametroController = ParametroController;
__decorate([
    (0, common_1.Get)(),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.listar',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar todos os parâmetros do sistema' }),
    (0, swagger_1.ApiQuery)({
        name: 'categoria',
        required: false,
        description: 'Filtrar por categoria',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de parâmetros encontrados',
        type: [parametro_response_dto_1.ParametroResponseDto],
    }),
    __param(0, (0, common_1.Query)('categoria')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_b = typeof Promise !== "undefined" && Promise) === "function" ? _b : Object)
], ParametroController.prototype, "buscarTodos", null);
__decorate([
    (0, common_1.Get)(':chave'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.visualizar',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar parâmetro por chave' }),
    (0, swagger_1.ApiParam)({
        name: 'chave',
        description: 'Chave única do parâmetro',
        example: 'sistema.nome',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Parâmetro encontrado',
        type: parametro_response_dto_1.ParametroResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Parâmetro não encontrado',
    }),
    __param(0, (0, common_1.Param)('chave')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], ParametroController.prototype, "buscarPorChave", null);
__decorate([
    (0, common_1.Post)(),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.criar',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Criar novo parâmetro' }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Parâmetro criado com sucesso',
        type: parametro_response_dto_1.ParametroResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos ou parâmetro já existe',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof parametro_create_dto_1.ParametroCreateDto !== "undefined" && parametro_create_dto_1.ParametroCreateDto) === "function" ? _d : Object]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], ParametroController.prototype, "criar", null);
__decorate([
    (0, common_1.Put)(':chave'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.editar',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Atualizar parâmetro existente' }),
    (0, swagger_1.ApiParam)({
        name: 'chave',
        description: 'Chave única do parâmetro',
        example: 'sistema.nome',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Parâmetro atualizado com sucesso',
        type: parametro_response_dto_1.ParametroResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Parâmetro não encontrado',
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos ou parâmetro não editável',
    }),
    __param(0, (0, common_1.Param)('chave')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof parametro_update_dto_1.ParametroUpdateDto !== "undefined" && parametro_update_dto_1.ParametroUpdateDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], ParametroController.prototype, "atualizar", null);
__decorate([
    (0, common_1.Delete)(':chave'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.remover',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Remover parâmetro' }),
    (0, swagger_1.ApiParam)({
        name: 'chave',
        description: 'Chave única do parâmetro',
        example: 'sistema.nome',
    }),
    (0, swagger_1.ApiResponse)({
        status: 204,
        description: 'Parâmetro removido com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Parâmetro não encontrado',
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Parâmetro não pode ser removido',
    }),
    __param(0, (0, common_1.Param)('chave')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], ParametroController.prototype, "remover", null);
__decorate([
    (0, common_1.Post)('cache/limpar'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'configuracao.parametro.cache.limpar',
        scopeType: user_permission_entity_1.ScopeType.GLOBAL,
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Limpar cache de parâmetros' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Cache limpo com sucesso',
    }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], ParametroController.prototype, "limparCache", null);
exports.ParametroController = ParametroController = __decorate([
    (0, swagger_1.ApiTags)('Configuração'),
    (0, swagger_1.ApiBearerAuth)(),
    (0, common_1.Controller)('configuracao/parametros'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, permission_guard_1.PermissionGuard),
    __metadata("design:paramtypes", [typeof (_a = typeof parametro_service_1.ParametroService !== "undefined" && parametro_service_1.ParametroService) === "function" ? _a : Object])
], ParametroController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcY29udHJvbGxlcnNcXHBhcmFtZXRyby5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSwyQ0FVd0I7QUFDeEIsNkNBT3lCO0FBQ3pCLHdFQUFtRTtBQUNuRSw0RUFBd0U7QUFDeEUsMEdBQTRGO0FBQzVGLHFGQUFxRTtBQUNyRSxxRUFBaUU7QUFDakUsaUZBQTRFO0FBQzVFLGlGQUE0RTtBQUM1RSxxRkFBZ0Y7QUFFaEY7O0dBRUc7QUFLSSxJQUFNLG1CQUFtQixHQUF6QixNQUFNLG1CQUFtQjtJQUNEO0lBQTdCLFlBQTZCLGdCQUFrQztRQUFsQyxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQWtCO0lBQUcsQ0FBQztJQUVuRTs7OztPQUlHO0lBaUJHLEFBQU4sS0FBSyxDQUFDLFdBQVcsQ0FDSyxTQUFrQjtRQUV0QyxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVEOzs7O09BSUc7SUFxQkcsQUFBTixLQUFLLENBQUMsY0FBYyxDQUNGLEtBQWE7UUFFN0IsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFRDs7OztPQUlHO0lBZ0JHLEFBQU4sS0FBSyxDQUFDLEtBQUssQ0FBUyxHQUF1QjtRQUN6QyxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7OztPQUtHO0lBeUJHLEFBQU4sS0FBSyxDQUFDLFNBQVMsQ0FDRyxLQUFhLEVBQ3JCLEdBQXVCO1FBRS9CLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7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QUFHO1FBQ1gsV0FBVyxFQUFFLDBCQUEwQjtLQUN4QyxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsaUNBQWlDO0tBQy9DLENBQUM7SUFDYSxXQUFBLElBQUEsY0FBSyxFQUFDLE9BQU8sQ0FBQyxDQUFBOzs7d0RBQWlCLE9BQU8sb0JBQVAsT0FBTztrREFFcEQ7QUFlSztJQVZMLElBQUEsYUFBSSxFQUFDLGNBQWMsQ0FBQztJQUNwQixJQUFBLGtEQUFrQixFQUFDO1FBQ2xCLGNBQWMsRUFBRSxxQ0FBcUM7UUFDckQsU0FBUyxFQUFFLGtDQUFTLENBQUMsTUFBTTtLQUM1QixDQUFDO0lBQ0QsSUFBQSxzQkFBWSxFQUFDLEVBQUUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLENBQUM7SUFDdkQsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUseUJBQXlCO0tBQ3ZDLENBQUM7Ozt3REFDbUIsT0FBTyxvQkFBUCxPQUFPO3NEQUczQjs4QkF6S1UsbUJBQW1CO0lBSi9CLElBQUEsaUJBQU8sRUFBQyxjQUFjLENBQUM7SUFDdkIsSUFBQSx1QkFBYSxHQUFFO0lBQ2YsSUFBQSxtQkFBVSxFQUFDLHlCQUF5QixDQUFDO0lBQ3JDLElBQUEsa0JBQVMsRUFBQyw2QkFBWSxFQUFFLGtDQUFlLENBQUM7eURBRVEsb0NBQWdCLG9CQUFoQixvQ0FBZ0I7R0FEcEQsbUJBQW1CLENBMEsvQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcY29uZmlndXJhY2FvXFxjb250cm9sbGVyc1xccGFyYW1ldHJvLmNvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29udHJvbGxlcixcbiAgR2V0LFxuICBQb3N0LFxuICBQdXQsXG4gIERlbGV0ZSxcbiAgQm9keSxcbiAgUGFyYW0sXG4gIFF1ZXJ5LFxuICBVc2VHdWFyZHMsXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaVBhcmFtLFxuICBBcGlRdWVyeSxcbiAgQXBpQmVhcmVyQXV0aCxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFBlcm1pc3Npb25HdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL3Blcm1pc3Npb24uZ3VhcmQnO1xuaW1wb3J0IHsgUmVxdWlyZXNQZXJtaXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9kZWNvcmF0b3JzL3JlcXVpcmVzLXBlcm1pc3Npb24uZGVjb3JhdG9yJztcbmltcG9ydCB7IFNjb3BlVHlwZSB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL3VzZXItcGVybWlzc2lvbi5lbnRpdHknO1xuaW1wb3J0IHsgUGFyYW1ldHJvU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3BhcmFtZXRyby5zZXJ2aWNlJztcbmltcG9ydCB7IFBhcmFtZXRyb0NyZWF0ZUR0byB9IGZyb20gJy4uL2R0b3MvcGFyYW1ldHJvL3BhcmFtZXRyby1jcmVhdGUuZHRvJztcbmltcG9ydCB7IFBhcmFtZXRyb1VwZGF0ZUR0byB9IGZyb20gJy4uL2R0b3MvcGFyYW1ldHJvL3BhcmFtZXRyby11cGRhdGUuZHRvJztcbmltcG9ydCB7IFBhcmFtZXRyb1Jlc3BvbnNlRHRvIH0gZnJvbSAnLi4vZHRvcy9wYXJhbWV0cm8vcGFyYW1ldHJvLXJlc3BvbnNlLmR0byc7XG5cbi8qKlxuICogQ29udHJvbGFkb3IgcmVzcG9uc8OhdmVsIHBlbGFzIG9wZXJhw6fDtWVzIGRlIHBhcsOibWV0cm9zIGRvIHNpc3RlbWFcbiAqL1xuQEFwaVRhZ3MoJ0NvbmZpZ3VyYcOnw6NvJylcbkBBcGlCZWFyZXJBdXRoKClcbkBDb250cm9sbGVyKCdjb25maWd1cmFjYW8vcGFyYW1ldHJvcycpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZCwgUGVybWlzc2lvbkd1YXJkKVxuZXhwb3J0IGNsYXNzIFBhcmFtZXRyb0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBhcmFtZXRyb1NlcnZpY2U6IFBhcmFtZXRyb1NlcnZpY2UpIHt9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHRvZG9zIG9zIHBhcsOibWV0cm9zIGRvIHNpc3RlbWFcbiAgICogQHBhcmFtIGNhdGVnb3JpYSBDYXRlZ29yaWEgb3BjaW9uYWwgcGFyYSBmaWx0cmFyXG4gICAqIEByZXR1cm5zIExpc3RhIGRlIHBhcsOibWV0cm9zXG4gICAqL1xuICBAR2V0KClcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdjb25maWd1cmFjYW8ucGFyYW1ldHJvLmxpc3RhcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0J1c2NhciB0b2RvcyBvcyBwYXLDom1ldHJvcyBkbyBzaXN0ZW1hJyB9KVxuICBAQXBpUXVlcnkoe1xuICAgIG5hbWU6ICdjYXRlZ29yaWEnLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0ZpbHRyYXIgcG9yIGNhdGVnb3JpYScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSBwYXLDom1ldHJvcyBlbmNvbnRyYWRvcycsXG4gICAgdHlwZTogW1BhcmFtZXRyb1Jlc3BvbnNlRHRvXSxcbiAgfSlcbiAgYXN5bmMgYnVzY2FyVG9kb3MoXG4gICAgQFF1ZXJ5KCdjYXRlZ29yaWEnKSBjYXRlZ29yaWE/OiBzdHJpbmcsXG4gICk6IFByb21pc2U8UGFyYW1ldHJvUmVzcG9uc2VEdG9bXT4ge1xuICAgIHJldHVybiB0aGlzLnBhcmFtZXRyb1NlcnZpY2UuYnVzY2FyVG9kb3MoY2F0ZWdvcmlhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdXNjYSB1bSBwYXLDom1ldHJvIGVzcGVjw61maWNvIHBvciBzdWEgY2hhdmVcbiAgICogQHBhcmFtIGNoYXZlIENoYXZlIGRvIHBhcsOibWV0cm9cbiAgICogQHJldHVybnMgUGFyw6JtZXRybyBlbmNvbnRyYWRvXG4gICAqL1xuICBAR2V0KCc6Y2hhdmUnKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHtcbiAgICBwZXJtaXNzaW9uTmFtZTogJ2NvbmZpZ3VyYWNhby5wYXJhbWV0cm8udmlzdWFsaXphcicsXG4gICAgc2NvcGVUeXBlOiBTY29wZVR5cGUuR0xPQkFMLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0J1c2NhciBwYXLDom1ldHJvIHBvciBjaGF2ZScgfSlcbiAgQEFwaVBhcmFtKHtcbiAgICBuYW1lOiAnY2hhdmUnLFxuICAgIGRlc2NyaXB0aW9uOiAnQ2hhdmUgw7puaWNhIGRvIHBhcsOibWV0cm8nLFxuICAgIGV4YW1wbGU6ICdzaXN0ZW1hLm5vbWUnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnUGFyw6JtZXRybyBlbmNvbnRyYWRvJyxcbiAgICB0eXBlOiBQYXJhbWV0cm9SZXNwb25zZUR0byxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBkZXNjcmlwdGlvbjogJ1BhcsOibWV0cm8gbsOjbyBlbmNvbnRyYWRvJyxcbiAgfSlcbiAgYXN5bmMgYnVzY2FyUG9yQ2hhdmUoXG4gICAgQFBhcmFtKCdjaGF2ZScpIGNoYXZlOiBzdHJpbmcsXG4gICk6IFByb21pc2U8UGFyYW1ldHJvUmVzcG9uc2VEdG8+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJhbWV0cm9TZXJ2aWNlLmJ1c2NhclBvckNoYXZlKGNoYXZlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmlhIHVtIG5vdm8gcGFyw6JtZXRybyBubyBzaXN0ZW1hXG4gICAqIEBwYXJhbSBkdG8gRGFkb3MgZG8gcGFyw6JtZXRybyBhIHNlciBjcmlhZG9cbiAgICogQHJldHVybnMgUGFyw6JtZXRybyBjcmlhZG9cbiAgICovXG4gIEBQb3N0KClcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdjb25maWd1cmFjYW8ucGFyYW1ldHJvLmNyaWFyJyxcbiAgICBzY29wZVR5cGU6IFNjb3BlVHlwZS5HTE9CQUwsXG4gIH0pXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ3JpYXIgbm92byBwYXLDom1ldHJvJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAxLFxuICAgIGRlc2NyaXB0aW9uOiAnUGFyw6JtZXRybyBjcmlhZG8gY29tIHN1Y2Vzc28nLFxuICAgIHR5cGU6IFBhcmFtZXRyb1Jlc3BvbnNlRHRvLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcyBvdSBwYXLDom1ldHJvIGrDoSBleGlzdGUnLFxuICB9KVxuICBhc3luYyBjcmlhcihAQm9keSgpIGR0bzogUGFyYW1ldHJvQ3JlYXRlRHRvKTogUHJvbWlzZTxQYXJhbWV0cm9SZXNwb25zZUR0bz4ge1xuICAgIHJldHVybiB0aGlzLnBhcmFtZXRyb1NlcnZpY2UuY3JpYXIoZHRvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSB1bSBwYXLDom1ldHJvIGV4aXN0ZW50ZVxuICAgKiBAcGFyYW0gY2hhdmUgQ2hhdmUgZG8gcGFyw6JtZXRyb1xuICAgKiBAcGFyYW0gZHRvIERhZG9zIHBhcmEgYXR1YWxpemHDp8Ojb1xuICAgKiBAcmV0dXJucyBQYXLDom1ldHJvIGF0dWFsaXphZG9cbiAgICovXG4gIEBQdXQoJzpjaGF2ZScpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnY29uZmlndXJhY2FvLnBhcmFtZXRyby5lZGl0YXInLFxuICAgIHNjb3BlVHlwZTogU2NvcGVUeXBlLkdMT0JBTCxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdBdHVhbGl6YXIgcGFyw6JtZXRybyBleGlzdGVudGUnIH0pXG4gIEBBcGlQYXJhbSh7XG4gICAgbmFtZTogJ2NoYXZlJyxcbiAgICBkZXNjcmlwdGlvbjogJ0NoYXZlIMO6bmljYSBkbyBwYXLDom1ldHJvJyxcbiAgICBleGFtcGxlOiAnc2lzdGVtYS5ub21lJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1BhcsOibWV0cm8gYXR1YWxpemFkbyBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogUGFyYW1ldHJvUmVzcG9uc2VEdG8sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZGVzY3JpcHRpb246ICdQYXLDom1ldHJvIG7Do28gZW5jb250cmFkbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDAsXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zIG91IHBhcsOibWV0cm8gbsOjbyBlZGl0w6F2ZWwnLFxuICB9KVxuICBhc3luYyBhdHVhbGl6YXIoXG4gICAgQFBhcmFtKCdjaGF2ZScpIGNoYXZlOiBzdHJpbmcsXG4gICAgQEJvZHkoKSBkdG86IFBhcmFtZXRyb1VwZGF0ZUR0byxcbiAgKTogUHJvbWlzZTxQYXJhbWV0cm9SZXNwb25zZUR0bz4ge1xuICAgIHJldHVybiB0aGlzLnBhcmFtZXRyb1NlcnZpY2UuYXR1YWxpemFyKGNoYXZlLCBkdG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB1bSBwYXLDom1ldHJvIGRvIHNpc3RlbWFcbiAgICogQHBhcmFtIGNoYXZlIENoYXZlIGRvIHBhcsOibWV0cm9cbiAgICovXG4gIEBEZWxldGUoJzpjaGF2ZScpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnY29uZmlndXJhY2FvLnBhcmFtZXRyby5yZW1vdmVyJyxcbiAgICBzY29wZVR5cGU6IFNjb3BlVHlwZS5HTE9CQUwsXG4gIH0pXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnUmVtb3ZlciBwYXLDom1ldHJvJyB9KVxuICBAQXBpUGFyYW0oe1xuICAgIG5hbWU6ICdjaGF2ZScsXG4gICAgZGVzY3JpcHRpb246ICdDaGF2ZSDDum5pY2EgZG8gcGFyw6JtZXRybycsXG4gICAgZXhhbXBsZTogJ3Npc3RlbWEubm9tZScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDQsXG4gICAgZGVzY3JpcHRpb246ICdQYXLDom1ldHJvIHJlbW92aWRvIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBkZXNjcmlwdGlvbjogJ1BhcsOibWV0cm8gbsOjbyBlbmNvbnRyYWRvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1BhcsOibWV0cm8gbsOjbyBwb2RlIHNlciByZW1vdmlkbycsXG4gIH0pXG4gIGFzeW5jIHJlbW92ZXIoQFBhcmFtKCdjaGF2ZScpIGNoYXZlOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCB0aGlzLnBhcmFtZXRyb1NlcnZpY2UucmVtb3ZlcihjaGF2ZSk7XG4gIH1cblxuICAvKipcbiAgICogTGltcGEgbyBjYWNoZSBkZSBwYXLDom1ldHJvc1xuICAgKi9cbiAgQFBvc3QoJ2NhY2hlL2xpbXBhcicpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnY29uZmlndXJhY2FvLnBhcmFtZXRyby5jYWNoZS5saW1wYXInLFxuICAgIHNjb3BlVHlwZTogU2NvcGVUeXBlLkdMT0JBTCxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdMaW1wYXIgY2FjaGUgZGUgcGFyw6JtZXRyb3MnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdDYWNoZSBsaW1wbyBjb20gc3VjZXNzbycsXG4gIH0pXG4gIGFzeW5jIGxpbXBhckNhY2hlKCk6IFByb21pc2U8eyBtZW5zYWdlbTogc3RyaW5nIH0+IHtcbiAgICB0aGlzLnBhcmFtZXRyb1NlcnZpY2UubGltcGFyQ2FjaGUoKTtcbiAgICByZXR1cm4geyBtZW5zYWdlbTogJ0NhY2hlIGRlIHBhcsOibWV0cm9zIGxpbXBvIGNvbSBzdWNlc3NvJyB9O1xuICB9XG59XG4iXSwidmVyc2lvbiI6M30=