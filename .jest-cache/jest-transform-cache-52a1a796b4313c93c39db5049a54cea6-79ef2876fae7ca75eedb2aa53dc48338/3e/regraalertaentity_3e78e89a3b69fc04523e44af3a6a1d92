4b619632a6b0155b816cb5d5bce22c5a
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.RegraAlerta = void 0;
const typeorm_1 = require("typeorm");
const metrica_entity_1 = require("./metrica.entity");
const metrica_seguranca_entity_1 = require("./metrica-seguranca.entity");
/**
 * Entidade que representa regras para geração de alertas
 *
 * Esta entidade define as condições para geração de alertas com base em métricas,
 * incluindo o operador de comparação, valor limiar e mensagem de alerta.
 */
let RegraAlerta = class RegraAlerta {
    id;
    nome;
    metrica_id;
    metrica;
    nivel;
    operador;
    valor_limiar;
    mensagem_alerta;
    canais_notificacao;
    ativo;
    created_at;
    updated_at;
};
exports.RegraAlerta = RegraAlerta;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], RegraAlerta.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)({ length: 100 }),
    __metadata("design:type", String)
], RegraAlerta.prototype, "nome", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, typeorm_1.Index)('idx_regras_alerta_metrica'),
    __metadata("design:type", String)
], RegraAlerta.prototype, "metrica_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => metrica_entity_1.Metrica, (metrica) => metrica.regras_alerta),
    (0, typeorm_1.JoinColumn)({ name: 'metrica_id' }),
    __metadata("design:type", typeof (_a = typeof metrica_entity_1.Metrica !== "undefined" && metrica_entity_1.Metrica) === "function" ? _a : Object)
], RegraAlerta.prototype, "metrica", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: metrica_seguranca_entity_1.NivelAlertaEnum,
    }),
    (0, typeorm_1.Index)('idx_regras_alerta_nivel'),
    __metadata("design:type", typeof (_b = typeof metrica_seguranca_entity_1.NivelAlertaEnum !== "undefined" && metrica_seguranca_entity_1.NivelAlertaEnum) === "function" ? _b : Object)
], RegraAlerta.prototype, "nivel", void 0);
__decorate([
    (0, typeorm_1.Column)({ length: 10 }),
    __metadata("design:type", String)
], RegraAlerta.prototype, "operador", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'numeric', precision: 15, scale: 2 }),
    __metadata("design:type", Number)
], RegraAlerta.prototype, "valor_limiar", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'text' }),
    __metadata("design:type", String)
], RegraAlerta.prototype, "mensagem_alerta", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'jsonb', nullable: true }),
    __metadata("design:type", typeof (_c = typeof Record !== "undefined" && Record) === "function" ? _c : Object)
], RegraAlerta.prototype, "canais_notificacao", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    (0, typeorm_1.Index)('idx_regras_alerta_ativo'),
    __metadata("design:type", Boolean)
], RegraAlerta.prototype, "ativo", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], RegraAlerta.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], RegraAlerta.prototype, "updated_at", void 0);
exports.RegraAlerta = RegraAlerta = __decorate([
    (0, typeorm_1.Entity)('regras_alerta')
], RegraAlerta);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxyZWdyYS1hbGVydGEuZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FTaUI7QUFDakIscURBQTJDO0FBQzNDLHlFQUE2RDtBQUU3RDs7Ozs7R0FLRztBQUVJLElBQU0sV0FBVyxHQUFqQixNQUFNLFdBQVc7SUFFdEIsRUFBRSxDQUFTO0lBR1gsSUFBSSxDQUFTO0lBSWIsVUFBVSxDQUFTO0lBSW5CLE9BQU8sQ0FBVTtJQU9qQixLQUFLLENBQWtCO0lBR3ZCLFFBQVEsQ0FBUztJQUdqQixZQUFZLENBQVM7SUFHckIsZUFBZSxDQUFTO0lBR3hCLGtCQUFrQixDQUFzQjtJQUl4QyxLQUFLLENBQVU7SUFHZixVQUFVLENBQU87SUFHakIsVUFBVSxDQUFPO0NBQ2xCLENBQUE7QUEzQ1ksa0NBQVc7QUFFdEI7SUFEQyxJQUFBLGdDQUFzQixFQUFDLE1BQU0sQ0FBQzs7dUNBQ3BCO0FBR1g7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUM7O3lDQUNYO0FBSWI7SUFGQyxJQUFBLGdCQUFNLEdBQUU7SUFDUixJQUFBLGVBQUssRUFBQywyQkFBMkIsQ0FBQzs7K0NBQ2hCO0FBSW5CO0lBRkMsSUFBQSxtQkFBUyxFQUFDLEdBQUcsRUFBRSxDQUFDLHdCQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUM7SUFDNUQsSUFBQSxvQkFBVSxFQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDO2tEQUMxQix3QkFBTyxvQkFBUCx3QkFBTzs0Q0FBQztBQU9qQjtJQUxDLElBQUEsZ0JBQU0sRUFBQztRQUNOLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLDBDQUFlO0tBQ3RCLENBQUM7SUFDRCxJQUFBLGVBQUssRUFBQyx5QkFBeUIsQ0FBQztrREFDMUIsMENBQWUsb0JBQWYsMENBQWU7MENBQUM7QUFHdkI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUM7OzZDQUNOO0FBR2pCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQzs7aURBQ2hDO0FBR3JCO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDOztvREFDRDtBQUd4QjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO2tEQUN0QixNQUFNLG9CQUFOLE1BQU07dURBQWM7QUFJeEM7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDekIsSUFBQSxlQUFLLEVBQUMseUJBQXlCLENBQUM7OzBDQUNsQjtBQUdmO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7K0NBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTsrQ0FBQztzQkExQ04sV0FBVztJQUR2QixJQUFBLGdCQUFNLEVBQUMsZUFBZSxDQUFDO0dBQ1gsV0FBVyxDQTJDdkIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxyZWdyYS1hbGVydGEuZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEVudGl0eSxcbiAgQ29sdW1uLFxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxuICBNYW55VG9PbmUsXG4gIEpvaW5Db2x1bW4sXG4gIENyZWF0ZURhdGVDb2x1bW4sXG4gIFVwZGF0ZURhdGVDb2x1bW4sXG4gIEluZGV4LFxufSBmcm9tICd0eXBlb3JtJztcbmltcG9ydCB7IE1ldHJpY2EgfSBmcm9tICcuL21ldHJpY2EuZW50aXR5JztcbmltcG9ydCB7IE5pdmVsQWxlcnRhRW51bSB9IGZyb20gJy4vbWV0cmljYS1zZWd1cmFuY2EuZW50aXR5JztcblxuLyoqXG4gKiBFbnRpZGFkZSBxdWUgcmVwcmVzZW50YSByZWdyYXMgcGFyYSBnZXJhw6fDo28gZGUgYWxlcnRhc1xuICpcbiAqIEVzdGEgZW50aWRhZGUgZGVmaW5lIGFzIGNvbmRpw6fDtWVzIHBhcmEgZ2VyYcOnw6NvIGRlIGFsZXJ0YXMgY29tIGJhc2UgZW0gbcOpdHJpY2FzLFxuICogaW5jbHVpbmRvIG8gb3BlcmFkb3IgZGUgY29tcGFyYcOnw6NvLCB2YWxvciBsaW1pYXIgZSBtZW5zYWdlbSBkZSBhbGVydGEuXG4gKi9cbkBFbnRpdHkoJ3JlZ3Jhc19hbGVydGEnKVxuZXhwb3J0IGNsYXNzIFJlZ3JhQWxlcnRhIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBsZW5ndGg6IDEwMCB9KVxuICBub21lOiBzdHJpbmc7XG5cbiAgQENvbHVtbigpXG4gIEBJbmRleCgnaWR4X3JlZ3Jhc19hbGVydGFfbWV0cmljYScpXG4gIG1ldHJpY2FfaWQ6IHN0cmluZztcblxuICBATWFueVRvT25lKCgpID0+IE1ldHJpY2EsIChtZXRyaWNhKSA9PiBtZXRyaWNhLnJlZ3Jhc19hbGVydGEpXG4gIEBKb2luQ29sdW1uKHsgbmFtZTogJ21ldHJpY2FfaWQnIH0pXG4gIG1ldHJpY2E6IE1ldHJpY2E7XG5cbiAgQENvbHVtbih7XG4gICAgdHlwZTogJ2VudW0nLFxuICAgIGVudW06IE5pdmVsQWxlcnRhRW51bSxcbiAgfSlcbiAgQEluZGV4KCdpZHhfcmVncmFzX2FsZXJ0YV9uaXZlbCcpXG4gIG5pdmVsOiBOaXZlbEFsZXJ0YUVudW07XG5cbiAgQENvbHVtbih7IGxlbmd0aDogMTAgfSlcbiAgb3BlcmFkb3I6IHN0cmluZztcblxuICBAQ29sdW1uKHsgdHlwZTogJ251bWVyaWMnLCBwcmVjaXNpb246IDE1LCBzY2FsZTogMiB9KVxuICB2YWxvcl9saW1pYXI6IG51bWJlcjtcblxuICBAQ29sdW1uKHsgdHlwZTogJ3RleHQnIH0pXG4gIG1lbnNhZ2VtX2FsZXJ0YTogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAnanNvbmInLCBudWxsYWJsZTogdHJ1ZSB9KVxuICBjYW5haXNfbm90aWZpY2FjYW86IFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IHRydWUgfSlcbiAgQEluZGV4KCdpZHhfcmVncmFzX2FsZXJ0YV9hdGl2bycpXG4gIGF0aXZvOiBib29sZWFuO1xuXG4gIEBDcmVhdGVEYXRlQ29sdW1uKClcbiAgY3JlYXRlZF9hdDogRGF0ZTtcblxuICBAVXBkYXRlRGF0ZUNvbHVtbigpXG4gIHVwZGF0ZWRfYXQ6IERhdGU7XG59XG4iXSwidmVyc2lvbiI6M30=