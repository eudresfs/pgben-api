d375f7c0ac529404c6c0464e7b0be33f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const dados_bancarios_validator_1 = require("../../validators/dados-bancarios-validator");
/**
 * Testes unitários para o validador de dados bancários
 *
 * Verifica o funcionamento correto das validações para informações bancárias,
 * incluindo códigos de banco, agências, contas e dígitos verificadores.
 *
 * @author Equipe PGBen
 */
describe('DadosBancariosValidator', () => {
    let validator;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [dados_bancarios_validator_1.DadosBancariosValidator],
        }).compile();
        validator = module.get(dados_bancarios_validator_1.DadosBancariosValidator);
    });
    describe('validarCodigoBanco', () => {
        it('deve validar códigos de bancos conhecidos', () => {
            expect(validator.validarCodigoBanco('001')).toBe(true); // Banco do Brasil
            expect(validator.validarCodigoBanco('104')).toBe(true); // Caixa
            expect(validator.validarCodigoBanco('341')).toBe(true); // Itaú
            expect(validator.validarCodigoBanco('033')).toBe(true); // Santander
            expect(validator.validarCodigoBanco('237')).toBe(true); // Bradesco
        });
        it('deve rejeitar códigos de bancos inválidos', () => {
            expect(validator.validarCodigoBanco('000')).toBe(false);
            expect(validator.validarCodigoBanco('999')).toBe(false);
            expect(validator.validarCodigoBanco('ABC')).toBe(false);
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarCodigoBanco('')).toBe(false);
            expect(validator.validarCodigoBanco(null)).toBe(false);
            expect(validator.validarCodigoBanco(undefined)).toBe(false);
        });
        it('deve rejeitar códigos com formato incorreto', () => {
            expect(validator.validarCodigoBanco('01')).toBe(false); // muito curto
            expect(validator.validarCodigoBanco('0001')).toBe(false); // muito longo
            expect(validator.validarCodigoBanco('001a')).toBe(false); // caracteres não numéricos
        });
    });
    describe('obterNomeBanco', () => {
        it('deve retornar o nome correto para códigos de bancos conhecidos', () => {
            expect(validator.obterNomeBanco('001')).toBe('Banco do Brasil');
            expect(validator.obterNomeBanco('104')).toBe('Caixa Econômica Federal');
            expect(validator.obterNomeBanco('341')).toBe('Itaú');
            expect(validator.obterNomeBanco('033')).toBe('Santander');
            expect(validator.obterNomeBanco('237')).toBe('Bradesco');
        });
        it('deve retornar "Banco não cadastrado" para códigos desconhecidos', () => {
            expect(validator.obterNomeBanco('999')).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco('')).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco(null)).toBe('Banco não cadastrado');
            expect(validator.obterNomeBanco(undefined)).toBe('Banco não cadastrado');
        });
    });
    describe('validarAgencia', () => {
        it('deve validar agências com formato correto', () => {
            expect(validator.validarAgencia('1234')).toBe(true);
            expect(validator.validarAgencia('0001')).toBe(true);
            expect(validator.validarAgencia('12345')).toBe(true); // alguns bancos usam 5 dígitos
        });
        it('deve validar agências com formatação', () => {
            expect(validator.validarAgencia('1234-5')).toBe(true);
            expect(validator.validarAgencia('1.234')).toBe(true);
        });
        it('deve rejeitar agências com formato incorreto', () => {
            expect(validator.validarAgencia('1')).toBe(false); // muito curto
            expect(validator.validarAgencia('123456')).toBe(false); // muito longo
            expect(validator.validarAgencia('123A')).toBe(false); // caracteres não numéricos
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarAgencia('')).toBe(false);
            expect(validator.validarAgencia(null)).toBe(false);
            expect(validator.validarAgencia(undefined)).toBe(false);
        });
        it('deve aplicar validações específicas por banco', () => {
            // Banco do Brasil (4 ou 5 dígitos)
            expect(validator.validarAgencia('1234', '001')).toBe(true);
            expect(validator.validarAgencia('12345', '001')).toBe(true);
            // Caixa (4 dígitos)
            expect(validator.validarAgencia('1234', '104')).toBe(true);
            expect(validator.validarAgencia('12345', '104')).toBe(false);
            // Itaú (4 dígitos)
            expect(validator.validarAgencia('1234', '341')).toBe(true);
            expect(validator.validarAgencia('12345', '341')).toBe(false);
        });
    });
    describe('validarConta', () => {
        it('deve validar contas com formato correto', () => {
            expect(validator.validarConta('12345-6')).toBe(true);
            expect(validator.validarConta('123456')).toBe(true);
            expect(validator.validarConta('00001-X')).toBe(true); // com dígito X
        });
        it('deve validar contas com formatação', () => {
            expect(validator.validarConta('12345-6')).toBe(true);
            expect(validator.validarConta('12.345-6')).toBe(true);
        });
        it('deve rejeitar contas com formato incorreto', () => {
            expect(validator.validarConta('12')).toBe(false); // muito curto
            expect(validator.validarConta('12345678901234')).toBe(false); // muito longo
            expect(validator.validarConta('123A56')).toBe(false); // caracteres não numéricos (exceto X)
        });
        it('deve rejeitar valores vazios ou nulos', () => {
            expect(validator.validarConta('')).toBe(false);
            expect(validator.validarConta(null)).toBe(false);
            expect(validator.validarConta(undefined)).toBe(false);
        });
        it('deve aplicar validações específicas por banco', () => {
            // Banco do Brasil
            expect(validator.validarConta('12345-6', '001')).toBe(true);
            expect(validator.validarConta('123456X', '001')).toBe(true);
            // Caixa
            expect(validator.validarConta('123456-7', '104')).toBe(true);
            // Itaú
            expect(validator.validarConta('12345-6', '341')).toBe(true);
            expect(validator.validarConta('1234-5', '341')).toBe(true);
        });
    });
    describe('mascaraAgencia', () => {
        it('deve mascarar corretamente agências', () => {
            const mascarado = validator.mascaraAgencia('1234');
            expect(mascarado).toBe('1**4');
        });
        it('deve retornar asteriscos para agências muito curtas', () => {
            const mascarado = validator.mascaraAgencia('12');
            expect(mascarado).toBe('****');
        });
        it('deve manter o primeiro e último dígito visíveis', () => {
            const mascarado = validator.mascaraAgencia('12345');
            expect(mascarado.charAt(0)).toBe('1');
            expect(mascarado.charAt(mascarado.length - 1)).toBe('5');
            expect(mascarado.substring(1, mascarado.length - 1)).not.toContain(/[0-9]/);
        });
    });
    describe('mascaraConta', () => {
        it('deve mascarar corretamente contas', () => {
            const mascarado = validator.mascaraConta('123456');
            expect(mascarado).toBe('12**56');
        });
        it('deve retornar asteriscos para contas muito curtas', () => {
            const mascarado = validator.mascaraConta('123');
            expect(mascarado).toBe('****');
        });
        it('deve manter os dois primeiros e dois últimos dígitos visíveis', () => {
            const mascarado = validator.mascaraConta('1234567890');
            expect(mascarado.substring(0, 2)).toBe('12');
            expect(mascarado.substring(mascarado.length - 2)).toBe('90');
            expect(mascarado.substring(2, mascarado.length - 2)).not.toContain(/[0-9]/);
        });
    });
    describe('formatarAgencia', () => {
        it('deve formatar corretamente agências', () => {
            expect(validator.formatarAgencia('1234')).toBe('1234');
            expect(validator.formatarAgencia('12-34')).toBe('1234');
            expect(validator.formatarAgencia('12.34')).toBe('1234');
        });
    });
    describe('formatarConta', () => {
        it('deve formatar corretamente contas', () => {
            expect(validator.formatarConta('12345X')).toBe('12345-X');
            expect(validator.formatarConta('123456')).toBe('12345-6');
            expect(validator.formatarConta('12345-6')).toBe('12345-6');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHZhbGlkYXRvcnNcXGRhZG9zLWJhbmNhcmlvcy12YWxpZGF0b3Iuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwwRkFBcUY7QUFFckY7Ozs7Ozs7R0FPRztBQUNILFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7SUFDdkMsSUFBSSxTQUFrQyxDQUFDO0lBRXZDLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLE1BQU0sR0FBa0IsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDM0QsU0FBUyxFQUFFLENBQUMsbURBQXVCLENBQUM7U0FDckMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRWIsU0FBUyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQTBCLG1EQUF1QixDQUFDLENBQUM7SUFDM0UsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO1FBQ2xDLEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGtCQUFrQjtZQUMxRSxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsUUFBUTtZQUNoRSxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTztZQUMvRCxNQUFNLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDLENB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ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccGFnYW1lbnRvXFx0ZXN0c1xcdmFsaWRhdG9yc1xcZGFkb3MtYmFuY2FyaW9zLXZhbGlkYXRvci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgRGFkb3NCYW5jYXJpb3NWYWxpZGF0b3IgfSBmcm9tICcuLi8uLi92YWxpZGF0b3JzL2RhZG9zLWJhbmNhcmlvcy12YWxpZGF0b3InO1xuXG4vKipcbiAqIFRlc3RlcyB1bml0w6FyaW9zIHBhcmEgbyB2YWxpZGFkb3IgZGUgZGFkb3MgYmFuY8Ohcmlvc1xuICogXG4gKiBWZXJpZmljYSBvIGZ1bmNpb25hbWVudG8gY29ycmV0byBkYXMgdmFsaWRhw6fDtWVzIHBhcmEgaW5mb3JtYcOnw7VlcyBiYW5jw6FyaWFzLFxuICogaW5jbHVpbmRvIGPDs2RpZ29zIGRlIGJhbmNvLCBhZ8OqbmNpYXMsIGNvbnRhcyBlIGTDrWdpdG9zIHZlcmlmaWNhZG9yZXMuXG4gKiBcbiAqIEBhdXRob3IgRXF1aXBlIFBHQmVuXG4gKi9cbmRlc2NyaWJlKCdEYWRvc0JhbmNhcmlvc1ZhbGlkYXRvcicsICgpID0+IHtcbiAgbGV0IHZhbGlkYXRvcjogRGFkb3NCYW5jYXJpb3NWYWxpZGF0b3I7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIHByb3ZpZGVyczogW0RhZG9zQmFuY2FyaW9zVmFsaWRhdG9yXSxcbiAgICB9KS5jb21waWxlKCk7XG5cbiAgICB2YWxpZGF0b3IgPSBtb2R1bGUuZ2V0PERhZG9zQmFuY2FyaW9zVmFsaWRhdG9yPihEYWRvc0JhbmNhcmlvc1ZhbGlkYXRvcik7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGFyQ29kaWdvQmFuY28nLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgdmFsaWRhciBjw7NkaWdvcyBkZSBiYW5jb3MgY29uaGVjaWRvcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcwMDEnKSkudG9CZSh0cnVlKTsgLy8gQmFuY28gZG8gQnJhc2lsXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMTA0JykpLnRvQmUodHJ1ZSk7IC8vIENhaXhhXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMzQxJykpLnRvQmUodHJ1ZSk7IC8vIEl0YcO6XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMDMzJykpLnRvQmUodHJ1ZSk7IC8vIFNhbnRhbmRlclxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzIzNycpKS50b0JlKHRydWUpOyAvLyBCcmFkZXNjb1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgY8OzZGlnb3MgZGUgYmFuY29zIGludsOhbGlkb3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbygnMDAwJykpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzk5OScpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCdBQkMnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZWplaXRhciB2YWxvcmVzIHZhemlvcyBvdSBudWxvcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbyhudWxsKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb2RpZ29CYW5jbyh1bmRlZmluZWQpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIGPDs2RpZ29zIGNvbSBmb3JtYXRvIGluY29ycmV0bycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcwMScpKS50b0JlKGZhbHNlKTsgLy8gbXVpdG8gY3VydG9cbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvZGlnb0JhbmNvKCcwMDAxJykpLnRvQmUoZmFsc2UpOyAvLyBtdWl0byBsb25nb1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29kaWdvQmFuY28oJzAwMWEnKSkudG9CZShmYWxzZSk7IC8vIGNhcmFjdGVyZXMgbsOjbyBudW3DqXJpY29zXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdvYnRlck5vbWVCYW5jbycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBvIG5vbWUgY29ycmV0byBwYXJhIGPDs2RpZ29zIGRlIGJhbmNvcyBjb25oZWNpZG9zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnMDAxJykpLnRvQmUoJ0JhbmNvIGRvIEJyYXNpbCcpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnMTA0JykpLnRvQmUoJ0NhaXhhIEVjb27DtG1pY2EgRmVkZXJhbCcpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnMzQxJykpLnRvQmUoJ0l0YcO6Jyk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLm9idGVyTm9tZUJhbmNvKCcwMzMnKSkudG9CZSgnU2FudGFuZGVyJyk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLm9idGVyTm9tZUJhbmNvKCcyMzcnKSkudG9CZSgnQnJhZGVzY28nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIFwiQmFuY28gbsOjbyBjYWRhc3RyYWRvXCIgcGFyYSBjw7NkaWdvcyBkZXNjb25oZWNpZG9zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnOTk5JykpLnRvQmUoJ0JhbmNvIG7Do28gY2FkYXN0cmFkbycpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbygnJykpLnRvQmUoJ0JhbmNvIG7Do28gY2FkYXN0cmFkbycpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5vYnRlck5vbWVCYW5jbyhudWxsKSkudG9CZSgnQmFuY28gbsOjbyBjYWRhc3RyYWRvJyk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLm9idGVyTm9tZUJhbmNvKHVuZGVmaW5lZCkpLnRvQmUoJ0JhbmNvIG7Do28gY2FkYXN0cmFkbycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndmFsaWRhckFnZW5jaWEnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgdmFsaWRhciBhZ8OqbmNpYXMgY29tIGZvcm1hdG8gY29ycmV0bycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzAwMDEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQ1JykpLnRvQmUodHJ1ZSk7IC8vIGFsZ3VucyBiYW5jb3MgdXNhbSA1IGTDrWdpdG9zXG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSB2YWxpZGFyIGFnw6puY2lhcyBjb20gZm9ybWF0YcOnw6NvJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNC01JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxLjIzNCcpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgYWfDqm5jaWFzIGNvbSBmb3JtYXRvIGluY29ycmV0bycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEnKSkudG9CZShmYWxzZSk7IC8vIG11aXRvIGN1cnRvXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0NTYnKSkudG9CZShmYWxzZSk7IC8vIG11aXRvIGxvbmdvXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjNBJykpLnRvQmUoZmFsc2UpOyAvLyBjYXJhY3RlcmVzIG7Do28gbnVtw6lyaWNvc1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgdmFsb3JlcyB2YXppb3Mgb3UgbnVsb3MnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKG51bGwpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEodW5kZWZpbmVkKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBhcGxpY2FyIHZhbGlkYcOnw7VlcyBlc3BlY8OtZmljYXMgcG9yIGJhbmNvJywgKCkgPT4ge1xuICAgICAgLy8gQmFuY28gZG8gQnJhc2lsICg0IG91IDUgZMOtZ2l0b3MpXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0JywgJzAwMScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNDUnLCAnMDAxJykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIENhaXhhICg0IGTDrWdpdG9zKVxuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNCcsICcxMDQnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckFnZW5jaWEoJzEyMzQ1JywgJzEwNCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gSXRhw7ogKDQgZMOtZ2l0b3MpXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJBZ2VuY2lhKCcxMjM0JywgJzM0MScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQWdlbmNpYSgnMTIzNDUnLCAnMzQxJykpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndmFsaWRhckNvbnRhJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHZhbGlkYXIgY29udGFzIGNvbSBmb3JtYXRvIGNvcnJldG8nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDUtNicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1NicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzAwMDAxLVgnKSkudG9CZSh0cnVlKTsgLy8gY29tIGTDrWdpdG8gWFxuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgdmFsaWRhciBjb250YXMgY29tIGZvcm1hdGHDp8OjbycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcxMjM0NS02JykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIuMzQ1LTYnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIGNvbnRhcyBjb20gZm9ybWF0byBpbmNvcnJldG8nLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTInKSkudG9CZShmYWxzZSk7IC8vIG11aXRvIGN1cnRvXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDU2Nzg5MDEyMzQnKSkudG9CZShmYWxzZSk7IC8vIG11aXRvIGxvbmdvXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzQTU2JykpLnRvQmUoZmFsc2UpOyAvLyBjYXJhY3RlcmVzIG7Do28gbnVtw6lyaWNvcyAoZXhjZXRvIFgpXG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZWplaXRhciB2YWxvcmVzIHZhemlvcyBvdSBudWxvcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcnKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YShudWxsKSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSh1bmRlZmluZWQpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGFwbGljYXIgdmFsaWRhw6fDtWVzIGVzcGVjw61maWNhcyBwb3IgYmFuY28nLCAoKSA9PiB7XG4gICAgICAvLyBCYW5jbyBkbyBCcmFzaWxcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcxMjM0NS02JywgJzAwMScpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci52YWxpZGFyQ29udGEoJzEyMzQ1NlgnLCAnMDAxJykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIENhaXhhXG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDU2LTcnLCAnMTA0JykpLnRvQmUodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEl0YcO6XG4gICAgICBleHBlY3QodmFsaWRhdG9yLnZhbGlkYXJDb250YSgnMTIzNDUtNicsICczNDEnKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IudmFsaWRhckNvbnRhKCcxMjM0LTUnLCAnMzQxJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdtYXNjYXJhQWdlbmNpYScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBtYXNjYXJhciBjb3JyZXRhbWVudGUgYWfDqm5jaWFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFzY2FyYWRvID0gdmFsaWRhdG9yLm1hc2NhcmFBZ2VuY2lhKCcxMjM0Jyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvKS50b0JlKCcxKio0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBhc3RlcmlzY29zIHBhcmEgYWfDqm5jaWFzIG11aXRvIGN1cnRhcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hc2NhcmFkbyA9IHZhbGlkYXRvci5tYXNjYXJhQWdlbmNpYSgnMTInKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8pLnRvQmUoJyoqKionKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIG1hbnRlciBvIHByaW1laXJvIGUgw7psdGltbyBkw61naXRvIHZpc8OtdmVpcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hc2NhcmFkbyA9IHZhbGlkYXRvci5tYXNjYXJhQWdlbmNpYSgnMTIzNDUnKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8uY2hhckF0KDApKS50b0JlKCcxJyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvLmNoYXJBdChtYXNjYXJhZG8ubGVuZ3RoIC0gMSkpLnRvQmUoJzUnKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8uc3Vic3RyaW5nKDEsIG1hc2NhcmFkby5sZW5ndGggLSAxKSkubm90LnRvQ29udGFpbigvWzAtOV0vKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ21hc2NhcmFDb250YScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBtYXNjYXJhciBjb3JyZXRhbWVudGUgY29udGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFzY2FyYWRvID0gdmFsaWRhdG9yLm1hc2NhcmFDb250YSgnMTIzNDU2Jyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvKS50b0JlKCcxMioqNTYnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIGFzdGVyaXNjb3MgcGFyYSBjb250YXMgbXVpdG8gY3VydGFzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbWFzY2FyYWRvID0gdmFsaWRhdG9yLm1hc2NhcmFDb250YSgnMTIzJyk7XG4gICAgICBleHBlY3QobWFzY2FyYWRvKS50b0JlKCcqKioqJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBtYW50ZXIgb3MgZG9pcyBwcmltZWlyb3MgZSBkb2lzIMO6bHRpbW9zIGTDrWdpdG9zIHZpc8OtdmVpcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1hc2NhcmFkbyA9IHZhbGlkYXRvci5tYXNjYXJhQ29udGEoJzEyMzQ1Njc4OTAnKTtcbiAgICAgIGV4cGVjdChtYXNjYXJhZG8uc3Vic3RyaW5nKDAsIDIpKS50b0JlKCcxMicpO1xuICAgICAgZXhwZWN0KG1hc2NhcmFkby5zdWJzdHJpbmcobWFzY2FyYWRvLmxlbmd0aCAtIDIpKS50b0JlKCc5MCcpO1xuICAgICAgZXhwZWN0KG1hc2NhcmFkby5zdWJzdHJpbmcoMiwgbWFzY2FyYWRvLmxlbmd0aCAtIDIpKS5ub3QudG9Db250YWluKC9bMC05XS8pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZm9ybWF0YXJBZ2VuY2lhJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGZvcm1hdGFyIGNvcnJldGFtZW50ZSBhZ8OqbmNpYXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLmZvcm1hdGFyQWdlbmNpYSgnMTIzNCcpKS50b0JlKCcxMjM0Jyk7XG4gICAgICBleHBlY3QodmFsaWRhdG9yLmZvcm1hdGFyQWdlbmNpYSgnMTItMzQnKSkudG9CZSgnMTIzNCcpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRvci5mb3JtYXRhckFnZW5jaWEoJzEyLjM0JykpLnRvQmUoJzEyMzQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Zvcm1hdGFyQ29udGEnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZm9ybWF0YXIgY29ycmV0YW1lbnRlIGNvbnRhcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDVYJykpLnRvQmUoJzEyMzQ1LVgnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDU2JykpLnRvQmUoJzEyMzQ1LTYnKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0b3IuZm9ybWF0YXJDb250YSgnMTIzNDUtNicpKS50b0JlKCcxMjM0NS02Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=