f0bbc9927e527c8bd5edae6ba32abd68
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const typeorm_1 = require("@nestjs/typeorm");
const jwt_1 = require("@nestjs/jwt");
const common_1 = require("@nestjs/common");
const entities_1 = require("../../../entities");
const integrador_token_service_1 = require("../services/integrador-token.service");
const integrador_service_1 = require("../services/integrador.service");
/**
 * Testes unitários para o serviço de tokens de integradores.
 * Valida a geração, validação e revogação de tokens, além das verificações
 * de permissões e restrições de IP.
 */
describe('IntegradorTokenService', () => {
    let service;
    let integradorService;
    let jwtService;
    let tokenRepository;
    let tokenRevogadoRepository;
    // Mocks de repositórios e serviços
    const mockTokenRepository = {
        create: jest.fn(),
        save: jest.fn(),
        find: jest.fn(),
        findOne: jest.fn(),
        remove: jest.fn(),
    };
    const mockTokenRevogadoRepository = {
        create: jest.fn(),
        save: jest.fn(),
        findOne: jest.fn(),
        delete: jest.fn(),
        createQueryBuilder: jest.fn().mockReturnThis(),
        delete: jest.fn().mockReturnThis(),
        from: jest.fn().mockReturnThis(),
        where: jest.fn().mockReturnThis(),
        execute: jest.fn(),
    };
    const mockIntegradorService = {
        findById: jest.fn(),
        registrarAcesso: jest.fn(),
    };
    const mockJwtService = {
        sign: jest.fn(),
        verify: jest.fn(),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                integrador_token_service_1.IntegradorTokenService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(entities_1.IntegradorToken),
                    useValue: mockTokenRepository,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(entities_1.TokenRevogado),
                    useValue: mockTokenRevogadoRepository,
                },
                {
                    provide: integrador_service_1.IntegradorService,
                    useValue: mockIntegradorService,
                },
                {
                    provide: jwt_1.JwtService,
                    useValue: mockJwtService,
                },
            ],
        }).compile();
        service = module.get(integrador_token_service_1.IntegradorTokenService);
        integradorService = module.get(integrador_service_1.IntegradorService);
        jwtService = module.get(jwt_1.JwtService);
        tokenRepository = module.get((0, typeorm_1.getRepositoryToken)(entities_1.IntegradorToken));
        tokenRevogadoRepository = module.get((0, typeorm_1.getRepositoryToken)(entities_1.TokenRevogado));
        // Mock da função crypto.createHash que é usada no serviço
        jest.spyOn(global.crypto, 'createHash').mockReturnValue({
            update: jest.fn().mockReturnThis(),
            digest: jest.fn().mockReturnValue('token-hash'),
        });
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    it('deve estar definido', () => {
        expect(service).toBeDefined();
    });
    describe('createToken', () => {
        it('deve criar um token com sucesso', async () => {
            // Arrange
            const integradorId = 'integrador-id';
            const createTokenDto = {
                nome: 'Token Teste',
                descricao: 'Token para testes',
                escopos: ['read:dados_basicos', 'write:solicitacoes'],
                diasValidade: 30,
                semExpiracao: false,
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Teste',
                ativo: true,
                permissoesEscopo: [
                    'read:dados_basicos',
                    'write:solicitacoes',
                    'read:cidadaos',
                ],
            };
            const tokenEntity = {
                id: 'token-id',
                integradorId,
                nome: createTokenDto.nome,
                descricao: createTokenDto.descricao,
                tokenHash: 'token-hash',
                escopos: createTokenDto.escopos,
                dataExpiracao: expect.any(Date),
                dataCriacao: new Date(),
            };
            const jwtToken = 'jwt-token-string';
            mockIntegradorService.findById.mockResolvedValue(integrador);
            mockTokenRepository.create.mockReturnValue(tokenEntity);
            mockTokenRepository.save.mockResolvedValue(tokenEntity);
            mockJwtService.sign.mockReturnValue(jwtToken);
            // Act
            const result = await service.createToken(integradorId, createTokenDto);
            // Assert
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockJwtService.sign).toHaveBeenCalledWith({
                sub: `integrador:${integradorId}`,
                name: integrador.nome,
                type: 'api_token',
                scopes: createTokenDto.escopos,
            }, { expiresIn: '30d' });
            expect(mockTokenRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                integradorId,
                nome: createTokenDto.nome,
                descricao: createTokenDto.descricao,
                tokenHash: expect.any(String),
                escopos: createTokenDto.escopos,
                dataExpiracao: expect.any(Date),
            }));
            expect(mockTokenRepository.save).toHaveBeenCalled();
            expect(result).toEqual({
                token: jwtToken,
                tokenInfo: expect.any(Object),
            });
        });
        it('deve criar um token sem expiração quando semExpiracao=true', async () => {
            // Arrange
            const integradorId = 'integrador-id';
            const createTokenDto = {
                nome: 'Token Permanente',
                descricao: 'Token sem expiração',
                escopos: ['read:dados_basicos'],
                semExpiracao: true,
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Teste',
                ativo: true,
                permissoesEscopo: [
                    'read:dados_basicos',
                    'write:solicitacoes',
                    'read:cidadaos',
                ],
            };
            const tokenEntity = {
                id: 'token-id',
                integradorId,
                nome: createTokenDto.nome,
                descricao: createTokenDto.descricao,
                tokenHash: 'token-hash',
                escopos: createTokenDto.escopos,
                dataExpiracao: null, // Sem expiração
                dataCriacao: new Date(),
            };
            mockIntegradorService.findById.mockResolvedValue(integrador);
            mockTokenRepository.create.mockReturnValue(tokenEntity);
            mockTokenRepository.save.mockResolvedValue(tokenEntity);
            mockJwtService.sign.mockReturnValue('jwt-token-string');
            // Act
            const result = await service.createToken(integradorId, createTokenDto);
            // Assert
            expect(mockJwtService.sign).toHaveBeenCalledWith(expect.any(Object), {});
            expect(mockTokenRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                dataExpiracao: null, // Confirma que token não tem expiração
            }));
            expect(result.tokenInfo.dataExpiracao).toBeNull();
        });
        it('deve lançar BadRequestException quando integrador está inativo', async () => {
            // Arrange
            const integradorId = 'integrador-id';
            const createTokenDto = {
                nome: 'Token Teste',
                escopos: ['read:dados_basicos'],
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Inativo',
                ativo: false,
            };
            mockIntegradorService.findById.mockResolvedValue(integrador);
            // Act & Assert
            await expect(service.createToken(integradorId, createTokenDto)).rejects.toThrow(common_1.BadRequestException);
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockTokenRepository.create).not.toHaveBeenCalled();
            expect(mockTokenRepository.save).not.toHaveBeenCalled();
        });
        it('deve lançar BadRequestException quando escopo solicitado não é permitido', async () => {
            // Arrange
            const integradorId = 'integrador-id';
            const createTokenDto = {
                nome: 'Token Teste',
                escopos: ['read:dados_basicos', 'admin:sistema'], // escopo não permitido
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Teste',
                ativo: true,
                permissoesEscopo: ['read:dados_basicos', 'write:solicitacoes'],
            };
            mockIntegradorService.findById.mockResolvedValue(integrador);
            // Act & Assert
            await expect(service.createToken(integradorId, createTokenDto)).rejects.toThrow(common_1.BadRequestException);
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockTokenRepository.create).not.toHaveBeenCalled();
            expect(mockTokenRepository.save).not.toHaveBeenCalled();
        });
    });
    describe('findAllByIntegrador', () => {
        it('deve retornar todos os tokens de um integrador', async () => {
            // Arrange
            const integradorId = 'integrador-id';
            const tokens = [
                {
                    id: 'token-1',
                    integradorId,
                    nome: 'Token 1',
                    dataCriacao: new Date(),
                },
                {
                    id: 'token-2',
                    integradorId,
                    nome: 'Token 2',
                    dataCriacao: new Date(),
                },
            ];
            mockIntegradorService.findById.mockResolvedValue({ id: integradorId });
            mockTokenRepository.find.mockResolvedValue(tokens);
            // Act
            const result = await service.findAllByIntegrador(integradorId);
            // Assert
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockTokenRepository.find).toHaveBeenCalledWith({
                where: { integradorId },
                order: { dataCriacao: 'DESC' },
            });
            expect(result).toHaveLength(2);
            expect(result[0].id).toEqual(tokens[0].id);
            expect(result[1].id).toEqual(tokens[1].id);
        });
    });
    describe('findOne', () => {
        it('deve retornar um token específico pelo ID', async () => {
            // Arrange
            const tokenId = 'token-id';
            const token = {
                id: tokenId,
                integradorId: 'integrador-id',
                nome: 'Token Teste',
                dataCriacao: new Date(),
            };
            mockTokenRepository.findOne.mockResolvedValue(token);
            // Act
            const result = await service.findOne(tokenId);
            // Assert
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { id: tokenId },
            });
            expect(result).toBeDefined();
            expect(result.id).toEqual(tokenId);
        });
        it('deve lançar NotFoundException quando token não existe', async () => {
            // Arrange
            const tokenId = 'token-inexistente';
            mockTokenRepository.findOne.mockResolvedValue(null);
            // Act & Assert
            await expect(service.findOne(tokenId)).rejects.toThrow(common_1.NotFoundException);
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { id: tokenId },
            });
        });
    });
    describe('revogarToken', () => {
        it('deve revogar um token com sucesso', async () => {
            // Arrange
            const tokenId = 'token-id';
            const motivo = 'Teste de revogação';
            const token = {
                id: tokenId,
                integradorId: 'integrador-id',
                nome: 'Token para Revogar',
                tokenHash: 'token-hash',
                revogado: false,
                dataExpiracao: new Date(Date.now() + 1000 * 60 * 60 * 24 * 30), // 30 dias no futuro
            };
            const tokenRevogado = {
                ...token,
                revogado: true,
                dataRevogacao: expect.any(Date),
                motivoRevogacao: motivo,
            };
            mockTokenRepository.findOne.mockResolvedValue(token);
            mockTokenRepository.save.mockResolvedValue(tokenRevogado);
            mockTokenRevogadoRepository.create.mockReturnValue({
                tokenHash: token.tokenHash,
                integradorId: token.integradorId,
                motivoRevogacao: motivo,
                dataExpiracao: token.dataExpiracao,
                dataLimpeza: expect.any(Date),
            });
            mockTokenRevogadoRepository.save.mockResolvedValue({});
            // Act
            const result = await service.revogarToken(tokenId, motivo);
            // Assert
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { id: tokenId },
            });
            expect(mockTokenRepository.save).toHaveBeenCalledWith(expect.objectContaining({
                id: tokenId,
                revogado: true,
                dataRevogacao: expect.any(Date),
                motivoRevogacao: motivo,
            }));
            expect(mockTokenRevogadoRepository.create).toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.save).toHaveBeenCalled();
            expect(result.revogado).toBe(true);
            expect(result.motivoRevogacao).toEqual(motivo);
        });
        it('deve lançar BadRequestException ao tentar revogar um token já revogado', async () => {
            // Arrange
            const tokenId = 'token-id';
            const motivo = 'Teste de revogação';
            const token = {
                id: tokenId,
                nome: 'Token já Revogado',
                revogado: true,
                dataRevogacao: new Date(Date.now() - 1000 * 60 * 60), // 1 hora atrás
                motivoRevogacao: 'Revogado anteriormente',
            };
            mockTokenRepository.findOne.mockResolvedValue(token);
            // Act & Assert
            await expect(service.revogarToken(tokenId, motivo)).rejects.toThrow(common_1.BadRequestException);
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { id: tokenId },
            });
            expect(mockTokenRepository.save).not.toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.create).not.toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.save).not.toHaveBeenCalled();
        });
        it('deve lançar NotFoundException ao tentar revogar um token inexistente', async () => {
            // Arrange
            const tokenId = 'token-inexistente';
            const motivo = 'Teste de revogação';
            mockTokenRepository.findOne.mockResolvedValue(null);
            // Act & Assert
            await expect(service.revogarToken(tokenId, motivo)).rejects.toThrow(common_1.NotFoundException);
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { id: tokenId },
            });
            expect(mockTokenRepository.save).not.toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.create).not.toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.save).not.toHaveBeenCalled();
        });
    });
    describe('validateToken', () => {
        it('deve validar um token válido com sucesso', async () => {
            // Arrange
            const token = 'valid-jwt-token';
            const tokenHash = 'token-hash';
            const integradorId = 'integrador-id';
            const jwtPayload = {
                sub: `integrador:${integradorId}`,
                name: 'Integrador Teste',
                type: 'api_token',
                scopes: ['read:dados_basicos'],
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Teste',
                ativo: true,
            };
            const tokenInfo = {
                id: 'token-id',
                integradorId,
                tokenHash,
                ultimoUso: null,
            };
            mockJwtService.verify.mockReturnValue(jwtPayload);
            mockTokenRevogadoRepository.findOne.mockResolvedValue(null); // Não está revogado
            mockIntegradorService.findById.mockResolvedValue(integrador);
            mockTokenRepository.findOne.mockResolvedValue(tokenInfo);
            // Act
            const result = await service.validateToken(token);
            // Assert
            expect(mockJwtService.verify).toHaveBeenCalledWith(token);
            expect(mockTokenRevogadoRepository.findOne).toHaveBeenCalledWith({
                where: { tokenHash },
            });
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockIntegradorService.registrarAcesso).toHaveBeenCalledWith(integradorId);
            expect(mockTokenRepository.findOne).toHaveBeenCalledWith({
                where: { tokenHash },
            });
            expect(mockTokenRepository.save).toHaveBeenCalledWith(expect.objectContaining({
                id: tokenInfo.id,
                ultimoUso: expect.any(Date),
            }));
            expect(result).toEqual({
                ...jwtPayload,
                integrador,
            });
        });
        it('deve lançar UnauthorizedException quando token está revogado', async () => {
            // Arrange
            const token = 'revoked-jwt-token';
            const tokenHash = 'token-hash';
            const integradorId = 'integrador-id';
            const jwtPayload = {
                sub: `integrador:${integradorId}`,
                name: 'Integrador Teste',
                type: 'api_token',
            };
            mockJwtService.verify.mockReturnValue(jwtPayload);
            mockTokenRevogadoRepository.findOne.mockResolvedValue({
                id: 'revoked-id',
                tokenHash,
            }); // Token revogado
            // Act & Assert
            await expect(service.validateToken(token)).rejects.toThrow(common_1.UnauthorizedException);
            expect(mockJwtService.verify).toHaveBeenCalledWith(token);
            expect(mockTokenRevogadoRepository.findOne).toHaveBeenCalledWith({
                where: { tokenHash },
            });
            expect(mockIntegradorService.findById).not.toHaveBeenCalled();
            expect(mockIntegradorService.registrarAcesso).not.toHaveBeenCalled();
        });
        it('deve lançar UnauthorizedException quando integrador está inativo', async () => {
            // Arrange
            const token = 'valid-jwt-token';
            const tokenHash = 'token-hash';
            const integradorId = 'integrador-id';
            const jwtPayload = {
                sub: `integrador:${integradorId}`,
                name: 'Integrador Inativo',
                type: 'api_token',
            };
            const integrador = {
                id: integradorId,
                nome: 'Integrador Inativo',
                ativo: false, // Integrador inativo
            };
            mockJwtService.verify.mockReturnValue(jwtPayload);
            mockTokenRevogadoRepository.findOne.mockResolvedValue(null); // Não está revogado
            mockIntegradorService.findById.mockResolvedValue(integrador);
            // Act & Assert
            await expect(service.validateToken(token)).rejects.toThrow(common_1.UnauthorizedException);
            expect(mockJwtService.verify).toHaveBeenCalledWith(token);
            expect(mockTokenRevogadoRepository.findOne).toHaveBeenCalledWith({
                where: { tokenHash },
            });
            expect(mockIntegradorService.findById).toHaveBeenCalledWith(integradorId);
            expect(mockIntegradorService.registrarAcesso).not.toHaveBeenCalled();
        });
        it('deve lançar UnauthorizedException quando type do token não é api_token', async () => {
            // Arrange
            const token = 'wrong-type-token';
            const jwtPayload = {
                sub: 'user:123',
                name: 'Usuário',
                type: 'user_token', // Tipo incorreto
            };
            mockJwtService.verify.mockReturnValue(jwtPayload);
            // Act & Assert
            await expect(service.validateToken(token)).rejects.toThrow(common_1.UnauthorizedException);
            expect(mockJwtService.verify).toHaveBeenCalledWith(token);
            expect(mockTokenRevogadoRepository.findOne).not.toHaveBeenCalled();
            expect(mockIntegradorService.findById).not.toHaveBeenCalled();
        });
    });
    describe('hasRequiredScopes', () => {
        it('deve retornar true quando token tem todos os escopos necessários', () => {
            // Arrange
            const payload = {
                scopes: ['read:dados_basicos', 'write:solicitacoes', 'read:cidadaos'],
            };
            const requiredScopes = ['read:dados_basicos', 'write:solicitacoes'];
            // Act
            const result = service.hasRequiredScopes(payload, requiredScopes);
            // Assert
            expect(result).toBe(true);
        });
        it('deve retornar false quando token não tem todos os escopos necessários', () => {
            // Arrange
            const payload = {
                scopes: ['read:dados_basicos'],
            };
            const requiredScopes = ['read:dados_basicos', 'write:solicitacoes'];
            // Act
            const result = service.hasRequiredScopes(payload, requiredScopes);
            // Assert
            expect(result).toBe(false);
        });
        it('deve retornar true quando não há escopos requeridos', () => {
            // Arrange
            const payload = {
                scopes: ['read:dados_basicos'],
            };
            const requiredScopes = [];
            // Act
            const result = service.hasRequiredScopes(payload, requiredScopes);
            // Assert
            expect(result).toBe(true);
        });
        it('deve retornar false quando payload não tem escopos', () => {
            // Arrange
            const payload = {};
            const requiredScopes = ['read:dados_basicos'];
            // Act
            const result = service.hasRequiredScopes(payload, requiredScopes);
            // Assert
            expect(result).toBe(false);
        });
    });
    describe('isIpAllowed', () => {
        it('deve retornar true quando IP está na lista de permitidos', () => {
            // Arrange
            const integrador = {
                ipPermitidos: ['192.168.1.1', '10.0.0.1', '172.16.0.1'],
            };
            const ipAddress = '192.168.1.1';
            // Act
            const result = service.isIpAllowed(integrador, ipAddress);
            // Assert
            expect(result).toBe(true);
        });
        it('deve retornar false quando IP não está na lista de permitidos', () => {
            // Arrange
            const integrador = {
                ipPermitidos: ['192.168.1.1', '10.0.0.1'],
            };
            const ipAddress = '172.16.0.1';
            // Act
            const result = service.isIpAllowed(integrador, ipAddress);
            // Assert
            expect(result).toBe(false);
        });
        it('deve retornar true quando não há lista de IPs permitidos', () => {
            // Arrange
            const integrador = {
                ipPermitidos: [],
            };
            const ipAddress = '192.168.1.1';
            // Act
            const result = service.isIpAllowed(integrador, ipAddress);
            // Assert
            expect(result).toBe(true);
        });
        it('deve retornar true quando a propriedade ipPermitidos não existe', () => {
            // Arrange
            const integrador = {};
            const ipAddress = '192.168.1.1';
            // Act
            const result = service.isIpAllowed(integrador, ipAddress);
            // Assert
            expect(result).toBe(true);
        });
    });
    describe('limparTokensRevogadosExpirados', () => {
        it('deve remover tokens revogados expirados', async () => {
            // Arrange
            mockTokenRevogadoRepository.execute.mockResolvedValue({ affected: 5 });
            // Act
            const result = await service.limparTokensRevogadosExpirados();
            // Assert
            expect(mockTokenRevogadoRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.delete).toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.from).toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.where).toHaveBeenCalled();
            expect(mockTokenRevogadoRepository.execute).toHaveBeenCalled();
            expect(result).toBe(5);
        });
        it('deve retornar 0 quando nenhum token for removido', async () => {
            // Arrange
            mockTokenRevogadoRepository.execute.mockResolvedValue({ affected: 0 });
            // Act
            const result = await service.limparTokensRevogadosExpirados();
            // Assert
            expect(mockTokenRevogadoRepository.execute).toHaveBeenCalled();
            expect(result).toBe(0);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGludGVncmFkb3JcXHRlc3RzXFxpbnRlZ3JhZG9yLXRva2VuLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCw2Q0FBcUQ7QUFDckQscUNBQXlDO0FBQ3pDLDJDQUl3QjtBQUN4QixnREFBbUU7QUFDbkUsbUZBQThFO0FBQzlFLHVFQUFtRTtBQUduRTs7OztHQUlHO0FBQ0gsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtJQUN0QyxJQUFJLE9BQStCLENBQUM7SUFDcEMsSUFBSSxpQkFBb0MsQ0FBQztJQUN6QyxJQUFJLFVBQXNCLENBQUM7SUFDM0IsSUFBSSxlQUFvQixDQUFDO0lBQ3pCLElBQUksdUJBQTRCLENBQUM7SUFFakMsbUNBQW1DO0lBQ25DLE1BQU0sbUJBQW1CLEdBQUc7UUFDMUIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2xCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2xCLENBQUM7SUFFRixNQUFNLDJCQUEyQixHQUFHO1FBQ2xDLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMsRUFBRTtRQUM5QyxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGNBQWMs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TUFBTSxNQUFNLEdBQUcsTUFBTSxPQUFPLENBQUMsOEJBQThCLEVBQUUsQ0FBQztZQUU5RCxTQUFTO1lBQ1QsTUFBTSxDQUFDLDJCQUEyQixDQUFDLGtCQUFrQixDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUMxRSxNQUFNLENBQUMsMkJBQTJCLENBQUMsTUFBTSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUM5RCxNQUFNLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUM1RCxNQUFNLENBQUMsMkJBQTJCLENBQUMsS0FBSyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUM3RCxNQUFNLENBQUMsMkJBQTJCLENBQUMsT0FBTyxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUMvRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGtEQUFrRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ2hFLFVBQVU7WUFDViwyQkFBMkIsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUV2RSxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxPQUFPLENBQUMsOEJBQThCLEVBQUUsQ0FBQztZQUU5RCxTQUFTO1lBQ1QsTUFBTSxDQUFDLDJCQUEyQixDQUFDLE9BQU8sQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7WUFDL0QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGludGVncmFkb3JcXHRlc3RzXFxpbnRlZ3JhZG9yLXRva2VuLnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IGdldFJlcG9zaXRvcnlUb2tlbiB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XG5pbXBvcnQgeyBKd3RTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9qd3QnO1xuaW1wb3J0IHtcbiAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgTm90Rm91bmRFeGNlcHRpb24sXG4gIFVuYXV0aG9yaXplZEV4Y2VwdGlvbixcbn0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgSW50ZWdyYWRvclRva2VuLCBUb2tlblJldm9nYWRvIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMnO1xuaW1wb3J0IHsgSW50ZWdyYWRvclRva2VuU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2ludGVncmFkb3ItdG9rZW4uc2VydmljZSc7XG5pbXBvcnQgeyBJbnRlZ3JhZG9yU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2ludGVncmFkb3Iuc2VydmljZSc7XG5pbXBvcnQgeyBDcmVhdGVUb2tlbkR0byB9IGZyb20gJy4uL2R0by9jcmVhdGUtdG9rZW4uZHRvJztcblxuLyoqXG4gKiBUZXN0ZXMgdW5pdMOhcmlvcyBwYXJhIG8gc2VydmnDp28gZGUgdG9rZW5zIGRlIGludGVncmFkb3Jlcy5cbiAqIFZhbGlkYSBhIGdlcmHDp8OjbywgdmFsaWRhw6fDo28gZSByZXZvZ2HDp8OjbyBkZSB0b2tlbnMsIGFsw6ltIGRhcyB2ZXJpZmljYcOnw7Vlc1xuICogZGUgcGVybWlzc8O1ZXMgZSByZXN0cmnDp8O1ZXMgZGUgSVAuXG4gKi9cbmRlc2NyaWJlKCdJbnRlZ3JhZG9yVG9rZW5TZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogSW50ZWdyYWRvclRva2VuU2VydmljZTtcbiAgbGV0IGludGVncmFkb3JTZXJ2aWNlOiBJbnRlZ3JhZG9yU2VydmljZTtcbiAgbGV0IGp3dFNlcnZpY2U6IEp3dFNlcnZpY2U7XG4gIGxldCB0b2tlblJlcG9zaXRvcnk6IGFueTtcbiAgbGV0IHRva2VuUmV2b2dhZG9SZXBvc2l0b3J5OiBhbnk7XG5cbiAgLy8gTW9ja3MgZGUgcmVwb3NpdMOzcmlvcyBlIHNlcnZpw6dvc1xuICBjb25zdCBtb2NrVG9rZW5SZXBvc2l0b3J5ID0ge1xuICAgIGNyZWF0ZTogamVzdC5mbigpLFxuICAgIHNhdmU6IGplc3QuZm4oKSxcbiAgICBmaW5kOiBqZXN0LmZuKCksXG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIHJlbW92ZTogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeSA9IHtcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBzYXZlOiBqZXN0LmZuKCksXG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIGNyZWF0ZVF1ZXJ5QnVpbGRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZXhlY3V0ZTogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tJbnRlZ3JhZG9yU2VydmljZSA9IHtcbiAgICBmaW5kQnlJZDogamVzdC5mbigpLFxuICAgIHJlZ2lzdHJhckFjZXNzbzogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tKd3RTZXJ2aWNlID0ge1xuICAgIHNpZ246IGplc3QuZm4oKSxcbiAgICB2ZXJpZnk6IGplc3QuZm4oKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIEludGVncmFkb3JUb2tlblNlcnZpY2UsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oSW50ZWdyYWRvclRva2VuKSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1Rva2VuUmVwb3NpdG9yeSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IGdldFJlcG9zaXRvcnlUb2tlbihUb2tlblJldm9nYWRvKSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogSW50ZWdyYWRvclNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tJbnRlZ3JhZG9yU2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEp3dFNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tKd3RTZXJ2aWNlLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KS5jb21waWxlKCk7XG5cbiAgICBzZXJ2aWNlID0gbW9kdWxlLmdldDxJbnRlZ3JhZG9yVG9rZW5TZXJ2aWNlPihJbnRlZ3JhZG9yVG9rZW5TZXJ2aWNlKTtcbiAgICBpbnRlZ3JhZG9yU2VydmljZSA9IG1vZHVsZS5nZXQ8SW50ZWdyYWRvclNlcnZpY2U+KEludGVncmFkb3JTZXJ2aWNlKTtcbiAgICBqd3RTZXJ2aWNlID0gbW9kdWxlLmdldDxKd3RTZXJ2aWNlPihKd3RTZXJ2aWNlKTtcbiAgICB0b2tlblJlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0KGdldFJlcG9zaXRvcnlUb2tlbihJbnRlZ3JhZG9yVG9rZW4pKTtcbiAgICB0b2tlblJldm9nYWRvUmVwb3NpdG9yeSA9IG1vZHVsZS5nZXQoZ2V0UmVwb3NpdG9yeVRva2VuKFRva2VuUmV2b2dhZG8pKTtcblxuICAgIC8vIE1vY2sgZGEgZnVuw6fDo28gY3J5cHRvLmNyZWF0ZUhhc2ggcXVlIMOpIHVzYWRhIG5vIHNlcnZpw6dvXG4gICAgamVzdC5zcHlPbihnbG9iYWwuY3J5cHRvLCAnY3JlYXRlSGFzaCcpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICB1cGRhdGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZGlnZXN0OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCd0b2tlbi1oYXNoJyksXG4gICAgfSBhcyBhbnkpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnZGV2ZSBlc3RhciBkZWZpbmlkbycsICgpID0+IHtcbiAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZVRva2VuJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGNyaWFyIHVtIHRva2VuIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW50ZWdyYWRvcklkID0gJ2ludGVncmFkb3ItaWQnO1xuICAgICAgY29uc3QgY3JlYXRlVG9rZW5EdG86IENyZWF0ZVRva2VuRHRvID0ge1xuICAgICAgICBub21lOiAnVG9rZW4gVGVzdGUnLFxuICAgICAgICBkZXNjcmljYW86ICdUb2tlbiBwYXJhIHRlc3RlcycsXG4gICAgICAgIGVzY29wb3M6IFsncmVhZDpkYWRvc19iYXNpY29zJywgJ3dyaXRlOnNvbGljaXRhY29lcyddLFxuICAgICAgICBkaWFzVmFsaWRhZGU6IDMwLFxuICAgICAgICBzZW1FeHBpcmFjYW86IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgaW50ZWdyYWRvciA9IHtcbiAgICAgICAgaWQ6IGludGVncmFkb3JJZCxcbiAgICAgICAgbm9tZTogJ0ludGVncmFkb3IgVGVzdGUnLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgICAgcGVybWlzc29lc0VzY29wbzogW1xuICAgICAgICAgICdyZWFkOmRhZG9zX2Jhc2ljb3MnLFxuICAgICAgICAgICd3cml0ZTpzb2xpY2l0YWNvZXMnLFxuICAgICAgICAgICdyZWFkOmNpZGFkYW9zJyxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRva2VuRW50aXR5ID0ge1xuICAgICAgICBpZDogJ3Rva2VuLWlkJyxcbiAgICAgICAgaW50ZWdyYWRvcklkLFxuICAgICAgICBub21lOiBjcmVhdGVUb2tlbkR0by5ub21lLFxuICAgICAgICBkZXNjcmljYW86IGNyZWF0ZVRva2VuRHRvLmRlc2NyaWNhbyxcbiAgICAgICAgdG9rZW5IYXNoOiAndG9rZW4taGFzaCcsXG4gICAgICAgIGVzY29wb3M6IGNyZWF0ZVRva2VuRHRvLmVzY29wb3MsXG4gICAgICAgIGRhdGFFeHBpcmFjYW86IGV4cGVjdC5hbnkoRGF0ZSksXG4gICAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgY29uc3Qgand0VG9rZW4gPSAnand0LXRva2VuLXN0cmluZyc7XG5cbiAgICAgIG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShpbnRlZ3JhZG9yKTtcbiAgICAgIG1vY2tUb2tlblJlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXR1cm5WYWx1ZSh0b2tlbkVudGl0eSk7XG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LnNhdmUubW9ja1Jlc29sdmVkVmFsdWUodG9rZW5FbnRpdHkpO1xuICAgICAgbW9ja0p3dFNlcnZpY2Uuc2lnbi5tb2NrUmV0dXJuVmFsdWUoand0VG9rZW4pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlVG9rZW4oaW50ZWdyYWRvcklkLCBjcmVhdGVUb2tlbkR0byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoaW50ZWdyYWRvcklkKTtcbiAgICAgIGV4cGVjdChtb2NrSnd0U2VydmljZS5zaWduKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAge1xuICAgICAgICAgIHN1YjogYGludGVncmFkb3I6JHtpbnRlZ3JhZG9ySWR9YCxcbiAgICAgICAgICBuYW1lOiBpbnRlZ3JhZG9yLm5vbWUsXG4gICAgICAgICAgdHlwZTogJ2FwaV90b2tlbicsXG4gICAgICAgICAgc2NvcGVzOiBjcmVhdGVUb2tlbkR0by5lc2NvcG9zLFxuICAgICAgICB9LFxuICAgICAgICB7IGV4cGlyZXNJbjogJzMwZCcgfSxcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgaW50ZWdyYWRvcklkLFxuICAgICAgICAgIG5vbWU6IGNyZWF0ZVRva2VuRHRvLm5vbWUsXG4gICAgICAgICAgZGVzY3JpY2FvOiBjcmVhdGVUb2tlbkR0by5kZXNjcmljYW8sXG4gICAgICAgICAgdG9rZW5IYXNoOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgICAgZXNjb3BvczogY3JlYXRlVG9rZW5EdG8uZXNjb3BvcyxcbiAgICAgICAgICBkYXRhRXhwaXJhY2FvOiBleHBlY3QuYW55KERhdGUpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdG9rZW46IGp3dFRva2VuLFxuICAgICAgICB0b2tlbkluZm86IGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgY3JpYXIgdW0gdG9rZW4gc2VtIGV4cGlyYcOnw6NvIHF1YW5kbyBzZW1FeHBpcmFjYW89dHJ1ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludGVncmFkb3JJZCA9ICdpbnRlZ3JhZG9yLWlkJztcbiAgICAgIGNvbnN0IGNyZWF0ZVRva2VuRHRvOiBDcmVhdGVUb2tlbkR0byA9IHtcbiAgICAgICAgbm9tZTogJ1Rva2VuIFBlcm1hbmVudGUnLFxuICAgICAgICBkZXNjcmljYW86ICdUb2tlbiBzZW0gZXhwaXJhw6fDo28nLFxuICAgICAgICBlc2NvcG9zOiBbJ3JlYWQ6ZGFkb3NfYmFzaWNvcyddLFxuICAgICAgICBzZW1FeHBpcmFjYW86IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBpbnRlZ3JhZG9yID0ge1xuICAgICAgICBpZDogaW50ZWdyYWRvcklkLFxuICAgICAgICBub21lOiAnSW50ZWdyYWRvciBUZXN0ZScsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICBwZXJtaXNzb2VzRXNjb3BvOiBbXG4gICAgICAgICAgJ3JlYWQ6ZGFkb3NfYmFzaWNvcycsXG4gICAgICAgICAgJ3dyaXRlOnNvbGljaXRhY29lcycsXG4gICAgICAgICAgJ3JlYWQ6Y2lkYWRhb3MnLFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgdG9rZW5FbnRpdHkgPSB7XG4gICAgICAgIGlkOiAndG9rZW4taWQnLFxuICAgICAgICBpbnRlZ3JhZG9ySWQsXG4gICAgICAgIG5vbWU6IGNyZWF0ZVRva2VuRHRvLm5vbWUsXG4gICAgICAgIGRlc2NyaWNhbzogY3JlYXRlVG9rZW5EdG8uZGVzY3JpY2FvLFxuICAgICAgICB0b2tlbkhhc2g6ICd0b2tlbi1oYXNoJyxcbiAgICAgICAgZXNjb3BvczogY3JlYXRlVG9rZW5EdG8uZXNjb3BvcyxcbiAgICAgICAgZGF0YUV4cGlyYWNhbzogbnVsbCwgLy8gU2VtIGV4cGlyYcOnw6NvXG4gICAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgbW9ja0ludGVncmFkb3JTZXJ2aWNlLmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKGludGVncmFkb3IpO1xuICAgICAgbW9ja1Rva2VuUmVwb3NpdG9yeS5jcmVhdGUubW9ja1JldHVyblZhbHVlKHRva2VuRW50aXR5KTtcbiAgICAgIG1vY2tUb2tlblJlcG9zaXRvcnkuc2F2ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0b2tlbkVudGl0eSk7XG4gICAgICBtb2NrSnd0U2VydmljZS5zaWduLm1vY2tSZXR1cm5WYWx1ZSgnand0LXRva2VuLXN0cmluZycpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlVG9rZW4oaW50ZWdyYWRvcklkLCBjcmVhdGVUb2tlbkR0byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tKd3RTZXJ2aWNlLnNpZ24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIHt9LCAvLyBTZW0gb3DDp8O1ZXMgZGUgZXhwaXJhw6fDo29cbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgZGF0YUV4cGlyYWNhbzogbnVsbCwgLy8gQ29uZmlybWEgcXVlIHRva2VuIG7Do28gdGVtIGV4cGlyYcOnw6NvXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQudG9rZW5JbmZvLmRhdGFFeHBpcmFjYW8pLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIGludGVncmFkb3IgZXN0w6EgaW5hdGl2bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludGVncmFkb3JJZCA9ICdpbnRlZ3JhZG9yLWlkJztcbiAgICAgIGNvbnN0IGNyZWF0ZVRva2VuRHRvOiBDcmVhdGVUb2tlbkR0byA9IHtcbiAgICAgICAgbm9tZTogJ1Rva2VuIFRlc3RlJyxcbiAgICAgICAgZXNjb3BvczogWydyZWFkOmRhZG9zX2Jhc2ljb3MnXSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGludGVncmFkb3IgPSB7XG4gICAgICAgIGlkOiBpbnRlZ3JhZG9ySWQsXG4gICAgICAgIG5vbWU6ICdJbnRlZ3JhZG9yIEluYXRpdm8nLFxuICAgICAgICBhdGl2bzogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBtb2NrSW50ZWdyYWRvclNlcnZpY2UuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoaW50ZWdyYWRvcik7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmNyZWF0ZVRva2VuKGludGVncmFkb3JJZCwgY3JlYXRlVG9rZW5EdG8pLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgICBleHBlY3QobW9ja0ludGVncmFkb3JTZXJ2aWNlLmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChpbnRlZ3JhZG9ySWQpO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuY3JlYXRlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuc2F2ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgQmFkUmVxdWVzdEV4Y2VwdGlvbiBxdWFuZG8gZXNjb3BvIHNvbGljaXRhZG8gbsOjbyDDqSBwZXJtaXRpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnRlZ3JhZG9ySWQgPSAnaW50ZWdyYWRvci1pZCc7XG4gICAgICBjb25zdCBjcmVhdGVUb2tlbkR0bzogQ3JlYXRlVG9rZW5EdG8gPSB7XG4gICAgICAgIG5vbWU6ICdUb2tlbiBUZXN0ZScsXG4gICAgICAgIGVzY29wb3M6IFsncmVhZDpkYWRvc19iYXNpY29zJywgJ2FkbWluOnNpc3RlbWEnXSwgLy8gZXNjb3BvIG7Do28gcGVybWl0aWRvXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBpbnRlZ3JhZG9yID0ge1xuICAgICAgICBpZDogaW50ZWdyYWRvcklkLFxuICAgICAgICBub21lOiAnSW50ZWdyYWRvciBUZXN0ZScsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICBwZXJtaXNzb2VzRXNjb3BvOiBbJ3JlYWQ6ZGFkb3NfYmFzaWNvcycsICd3cml0ZTpzb2xpY2l0YWNvZXMnXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShpbnRlZ3JhZG9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UuY3JlYXRlVG9rZW4oaW50ZWdyYWRvcklkLCBjcmVhdGVUb2tlbkR0byksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcbiAgICAgIGV4cGVjdChtb2NrSW50ZWdyYWRvclNlcnZpY2UuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGludGVncmFkb3JJZCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZEFsbEJ5SW50ZWdyYWRvcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciB0b2RvcyBvcyB0b2tlbnMgZGUgdW0gaW50ZWdyYWRvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGludGVncmFkb3JJZCA9ICdpbnRlZ3JhZG9yLWlkJztcbiAgICAgIGNvbnN0IHRva2VucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAndG9rZW4tMScsXG4gICAgICAgICAgaW50ZWdyYWRvcklkLFxuICAgICAgICAgIG5vbWU6ICdUb2tlbiAxJyxcbiAgICAgICAgICBkYXRhQ3JpYWNhbzogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAndG9rZW4tMicsXG4gICAgICAgICAgaW50ZWdyYWRvcklkLFxuICAgICAgICAgIG5vbWU6ICdUb2tlbiAyJyxcbiAgICAgICAgICBkYXRhQ3JpYWNhbzogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF07XG5cbiAgICAgIG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiBpbnRlZ3JhZG9ySWQgfSk7XG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmQubW9ja1Jlc29sdmVkVmFsdWUodG9rZW5zKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRBbGxCeUludGVncmFkb3IoaW50ZWdyYWRvcklkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja0ludGVncmFkb3JTZXJ2aWNlLmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChpbnRlZ3JhZG9ySWQpO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpbnRlZ3JhZG9ySWQgfSxcbiAgICAgICAgb3JkZXI6IHsgZGF0YUNyaWFjYW86ICdERVNDJyB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzBdLmlkKS50b0VxdWFsKHRva2Vuc1swXS5pZCk7XG4gICAgICBleHBlY3QocmVzdWx0WzFdLmlkKS50b0VxdWFsKHRva2Vuc1sxXS5pZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kT25lJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJldG9ybmFyIHVtIHRva2VuIGVzcGVjw61maWNvIHBlbG8gSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0b2tlbklkID0gJ3Rva2VuLWlkJztcbiAgICAgIGNvbnN0IHRva2VuID0ge1xuICAgICAgICBpZDogdG9rZW5JZCxcbiAgICAgICAgaW50ZWdyYWRvcklkOiAnaW50ZWdyYWRvci1pZCcsXG4gICAgICAgIG5vbWU6ICdUb2tlbiBUZXN0ZScsXG4gICAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcblxuICAgICAgbW9ja1Rva2VuUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKHRva2VuKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRPbmUodG9rZW5JZCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogdG9rZW5JZCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pZCkudG9FcXVhbCh0b2tlbklkKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIHRva2VuIG7Do28gZXhpc3RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdG9rZW5JZCA9ICd0b2tlbi1pbmV4aXN0ZW50ZSc7XG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZE9uZSh0b2tlbklkKSkucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXhjZXB0aW9uKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmRPbmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHRva2VuSWQgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmV2b2dhclRva2VuJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJldm9nYXIgdW0gdG9rZW4gY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB0b2tlbklkID0gJ3Rva2VuLWlkJztcbiAgICAgIGNvbnN0IG1vdGl2byA9ICdUZXN0ZSBkZSByZXZvZ2HDp8Ojbyc7XG5cbiAgICAgIGNvbnN0IHRva2VuID0ge1xuICAgICAgICBpZDogdG9rZW5JZCxcbiAgICAgICAgaW50ZWdyYWRvcklkOiAnaW50ZWdyYWRvci1pZCcsXG4gICAgICAgIG5vbWU6ICdUb2tlbiBwYXJhIFJldm9nYXInLFxuICAgICAgICB0b2tlbkhhc2g6ICd0b2tlbi1oYXNoJyxcbiAgICAgICAgcmV2b2dhZG86IGZhbHNlLFxuICAgICAgICBkYXRhRXhwaXJhY2FvOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMTAwMCAqIDYwICogNjAgKiAyNCAqIDMwKSwgLy8gMzAgZGlhcyBubyBmdXR1cm9cbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRva2VuUmV2b2dhZG8gPSB7XG4gICAgICAgIC4uLnRva2VuLFxuICAgICAgICByZXZvZ2FkbzogdHJ1ZSxcbiAgICAgICAgZGF0YVJldm9nYWNhbzogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgICAgbW90aXZvUmV2b2dhY2FvOiBtb3Rpdm8sXG4gICAgICB9O1xuXG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUodG9rZW4pO1xuICAgICAgbW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKHRva2VuUmV2b2dhZG8pO1xuICAgICAgbW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICB0b2tlbkhhc2g6IHRva2VuLnRva2VuSGFzaCxcbiAgICAgICAgaW50ZWdyYWRvcklkOiB0b2tlbi5pbnRlZ3JhZG9ySWQsXG4gICAgICAgIG1vdGl2b1Jldm9nYWNhbzogbW90aXZvLFxuICAgICAgICBkYXRhRXhwaXJhY2FvOiB0b2tlbi5kYXRhRXhwaXJhY2FvLFxuICAgICAgICBkYXRhTGltcGV6YTogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgIH0pO1xuICAgICAgbW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LnNhdmUubW9ja1Jlc29sdmVkVmFsdWUoe30pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UucmV2b2dhclRva2VuKHRva2VuSWQsIG1vdGl2byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogdG9rZW5JZCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGlkOiB0b2tlbklkLFxuICAgICAgICAgIHJldm9nYWRvOiB0cnVlLFxuICAgICAgICAgIGRhdGFSZXZvZ2FjYW86IGV4cGVjdC5hbnkoRGF0ZSksXG4gICAgICAgICAgbW90aXZvUmV2b2dhY2FvOiBtb3Rpdm8sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LnNhdmUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmV2b2dhZG8pLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0Lm1vdGl2b1Jldm9nYWNhbykudG9FcXVhbChtb3Rpdm8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIGFvIHRlbnRhciByZXZvZ2FyIHVtIHRva2VuIGrDoSByZXZvZ2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRva2VuSWQgPSAndG9rZW4taWQnO1xuICAgICAgY29uc3QgbW90aXZvID0gJ1Rlc3RlIGRlIHJldm9nYcOnw6NvJztcblxuICAgICAgY29uc3QgdG9rZW4gPSB7XG4gICAgICAgIGlkOiB0b2tlbklkLFxuICAgICAgICBub21lOiAnVG9rZW4gasOhIFJldm9nYWRvJyxcbiAgICAgICAgcmV2b2dhZG86IHRydWUsXG4gICAgICAgIGRhdGFSZXZvZ2FjYW86IG5ldyBEYXRlKERhdGUubm93KCkgLSAxMDAwICogNjAgKiA2MCksIC8vIDEgaG9yYSBhdHLDoXNcbiAgICAgICAgbW90aXZvUmV2b2dhY2FvOiAnUmV2b2dhZG8gYW50ZXJpb3JtZW50ZScsXG4gICAgICB9O1xuXG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUodG9rZW4pO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJldm9nYXJUb2tlbih0b2tlbklkLCBtb3Rpdm8pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogdG9rZW5JZCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIE5vdEZvdW5kRXhjZXB0aW9uIGFvIHRlbnRhciByZXZvZ2FyIHVtIHRva2VuIGluZXhpc3RlbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdG9rZW5JZCA9ICd0b2tlbi1pbmV4aXN0ZW50ZSc7XG4gICAgICBjb25zdCBtb3Rpdm8gPSAnVGVzdGUgZGUgcmV2b2dhw6fDo28nO1xuXG4gICAgICBtb2NrVG9rZW5SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmV2b2dhclRva2VuKHRva2VuSWQsIG1vdGl2bykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyBpZDogdG9rZW5JZCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5jcmVhdGUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LnNhdmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd2YWxpZGF0ZVRva2VuJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHZhbGlkYXIgdW0gdG9rZW4gdsOhbGlkbyBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRva2VuID0gJ3ZhbGlkLWp3dC10b2tlbic7XG4gICAgICBjb25zdCB0b2tlbkhhc2ggPSAndG9rZW4taGFzaCc7XG4gICAgICBjb25zdCBpbnRlZ3JhZG9ySWQgPSAnaW50ZWdyYWRvci1pZCc7XG5cbiAgICAgIGNvbnN0IGp3dFBheWxvYWQgPSB7XG4gICAgICAgIHN1YjogYGludGVncmFkb3I6JHtpbnRlZ3JhZG9ySWR9YCxcbiAgICAgICAgbmFtZTogJ0ludGVncmFkb3IgVGVzdGUnLFxuICAgICAgICB0eXBlOiAnYXBpX3Rva2VuJyxcbiAgICAgICAgc2NvcGVzOiBbJ3JlYWQ6ZGFkb3NfYmFzaWNvcyddLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgaW50ZWdyYWRvciA9IHtcbiAgICAgICAgaWQ6IGludGVncmFkb3JJZCxcbiAgICAgICAgbm9tZTogJ0ludGVncmFkb3IgVGVzdGUnLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRva2VuSW5mbyA9IHtcbiAgICAgICAgaWQ6ICd0b2tlbi1pZCcsXG4gICAgICAgIGludGVncmFkb3JJZCxcbiAgICAgICAgdG9rZW5IYXNoLFxuICAgICAgICB1bHRpbW9Vc286IG51bGwsXG4gICAgICB9O1xuXG4gICAgICBtb2NrSnd0U2VydmljZS52ZXJpZnkubW9ja1JldHVyblZhbHVlKGp3dFBheWxvYWQpO1xuICAgICAgbW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7IC8vIE7Do28gZXN0w6EgcmV2b2dhZG9cbiAgICAgIG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShpbnRlZ3JhZG9yKTtcbiAgICAgIG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0b2tlbkluZm8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UudmFsaWRhdGVUb2tlbih0b2tlbik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tKd3RTZXJ2aWNlLnZlcmlmeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodG9rZW4pO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5maW5kT25lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IHRva2VuSGFzaCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja0ludGVncmFkb3JTZXJ2aWNlLmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChpbnRlZ3JhZG9ySWQpO1xuICAgICAgZXhwZWN0KG1vY2tJbnRlZ3JhZG9yU2VydmljZS5yZWdpc3RyYXJBY2Vzc28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBpbnRlZ3JhZG9ySWQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyB0b2tlbkhhc2ggfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJlcG9zaXRvcnkuc2F2ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBpZDogdG9rZW5JbmZvLmlkLFxuICAgICAgICAgIHVsdGltb1VzbzogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIC4uLmp3dFBheWxvYWQsXG4gICAgICAgIGludGVncmFkb3IsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgVW5hdXRob3JpemVkRXhjZXB0aW9uIHF1YW5kbyB0b2tlbiBlc3TDoSByZXZvZ2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRva2VuID0gJ3Jldm9rZWQtand0LXRva2VuJztcbiAgICAgIGNvbnN0IHRva2VuSGFzaCA9ICd0b2tlbi1oYXNoJztcbiAgICAgIGNvbnN0IGludGVncmFkb3JJZCA9ICdpbnRlZ3JhZG9yLWlkJztcblxuICAgICAgY29uc3Qgand0UGF5bG9hZCA9IHtcbiAgICAgICAgc3ViOiBgaW50ZWdyYWRvcjoke2ludGVncmFkb3JJZH1gLFxuICAgICAgICBuYW1lOiAnSW50ZWdyYWRvciBUZXN0ZScsXG4gICAgICAgIHR5cGU6ICdhcGlfdG9rZW4nLFxuICAgICAgfTtcblxuICAgICAgbW9ja0p3dFNlcnZpY2UudmVyaWZ5Lm1vY2tSZXR1cm5WYWx1ZShqd3RQYXlsb2FkKTtcbiAgICAgIG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgaWQ6ICdyZXZva2VkLWlkJyxcbiAgICAgICAgdG9rZW5IYXNoLFxuICAgICAgfSk7IC8vIFRva2VuIHJldm9nYWRvXG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudmFsaWRhdGVUb2tlbih0b2tlbikpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgVW5hdXRob3JpemVkRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrSnd0U2VydmljZS52ZXJpZnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRva2VuKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB3aGVyZTogeyB0b2tlbkhhc2ggfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrSW50ZWdyYWRvclNlcnZpY2UucmVnaXN0cmFyQWNlc3NvKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBVbmF1dGhvcml6ZWRFeGNlcHRpb24gcXVhbmRvIGludGVncmFkb3IgZXN0w6EgaW5hdGl2bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRva2VuID0gJ3ZhbGlkLWp3dC10b2tlbic7XG4gICAgICBjb25zdCB0b2tlbkhhc2ggPSAndG9rZW4taGFzaCc7XG4gICAgICBjb25zdCBpbnRlZ3JhZG9ySWQgPSAnaW50ZWdyYWRvci1pZCc7XG5cbiAgICAgIGNvbnN0IGp3dFBheWxvYWQgPSB7XG4gICAgICAgIHN1YjogYGludGVncmFkb3I6JHtpbnRlZ3JhZG9ySWR9YCxcbiAgICAgICAgbmFtZTogJ0ludGVncmFkb3IgSW5hdGl2bycsXG4gICAgICAgIHR5cGU6ICdhcGlfdG9rZW4nLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgaW50ZWdyYWRvciA9IHtcbiAgICAgICAgaWQ6IGludGVncmFkb3JJZCxcbiAgICAgICAgbm9tZTogJ0ludGVncmFkb3IgSW5hdGl2bycsXG4gICAgICAgIGF0aXZvOiBmYWxzZSwgLy8gSW50ZWdyYWRvciBpbmF0aXZvXG4gICAgICB9O1xuXG4gICAgICBtb2NrSnd0U2VydmljZS52ZXJpZnkubW9ja1JldHVyblZhbHVlKGp3dFBheWxvYWQpO1xuICAgICAgbW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7IC8vIE7Do28gZXN0w6EgcmV2b2dhZG9cbiAgICAgIG1vY2tJbnRlZ3JhZG9yU2VydmljZS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShpbnRlZ3JhZG9yKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS52YWxpZGF0ZVRva2VuKHRva2VuKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBVbmF1dGhvcml6ZWRFeGNlcHRpb24sXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tKd3RTZXJ2aWNlLnZlcmlmeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodG9rZW4pO1xuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5maW5kT25lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHdoZXJlOiB7IHRva2VuSGFzaCB9LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja0ludGVncmFkb3JTZXJ2aWNlLmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChpbnRlZ3JhZG9ySWQpO1xuICAgICAgZXhwZWN0KG1vY2tJbnRlZ3JhZG9yU2VydmljZS5yZWdpc3RyYXJBY2Vzc28pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIFVuYXV0aG9yaXplZEV4Y2VwdGlvbiBxdWFuZG8gdHlwZSBkbyB0b2tlbiBuw6NvIMOpIGFwaV90b2tlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRva2VuID0gJ3dyb25nLXR5cGUtdG9rZW4nO1xuXG4gICAgICBjb25zdCBqd3RQYXlsb2FkID0ge1xuICAgICAgICBzdWI6ICd1c2VyOjEyMycsXG4gICAgICAgIG5hbWU6ICdVc3XDoXJpbycsXG4gICAgICAgIHR5cGU6ICd1c2VyX3Rva2VuJywgLy8gVGlwbyBpbmNvcnJldG9cbiAgICAgIH07XG5cbiAgICAgIG1vY2tKd3RTZXJ2aWNlLnZlcmlmeS5tb2NrUmV0dXJuVmFsdWUoand0UGF5bG9hZCk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudmFsaWRhdGVUb2tlbih0b2tlbikpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgVW5hdXRob3JpemVkRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrSnd0U2VydmljZS52ZXJpZnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRva2VuKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZmluZE9uZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrSW50ZWdyYWRvclNlcnZpY2UuZmluZEJ5SWQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdoYXNSZXF1aXJlZFNjb3BlcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciB0cnVlIHF1YW5kbyB0b2tlbiB0ZW0gdG9kb3Mgb3MgZXNjb3BvcyBuZWNlc3PDoXJpb3MnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBzY29wZXM6IFsncmVhZDpkYWRvc19iYXNpY29zJywgJ3dyaXRlOnNvbGljaXRhY29lcycsICdyZWFkOmNpZGFkYW9zJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVxdWlyZWRTY29wZXMgPSBbJ3JlYWQ6ZGFkb3NfYmFzaWNvcycsICd3cml0ZTpzb2xpY2l0YWNvZXMnXTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmhhc1JlcXVpcmVkU2NvcGVzKHBheWxvYWQsIHJlcXVpcmVkU2NvcGVzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgZmFsc2UgcXVhbmRvIHRva2VuIG7Do28gdGVtIHRvZG9zIG9zIGVzY29wb3MgbmVjZXNzw6FyaW9zJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgc2NvcGVzOiBbJ3JlYWQ6ZGFkb3NfYmFzaWNvcyddLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlcXVpcmVkU2NvcGVzID0gWydyZWFkOmRhZG9zX2Jhc2ljb3MnLCAnd3JpdGU6c29saWNpdGFjb2VzJ107XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gc2VydmljZS5oYXNSZXF1aXJlZFNjb3BlcyhwYXlsb2FkLCByZXF1aXJlZFNjb3Blcyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciB0cnVlIHF1YW5kbyBuw6NvIGjDoSBlc2NvcG9zIHJlcXVlcmlkb3MnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgICBzY29wZXM6IFsncmVhZDpkYWRvc19iYXNpY29zJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgcmVxdWlyZWRTY29wZXMgPSBbXTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmhhc1JlcXVpcmVkU2NvcGVzKHBheWxvYWQsIHJlcXVpcmVkU2NvcGVzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgZmFsc2UgcXVhbmRvIHBheWxvYWQgbsOjbyB0ZW0gZXNjb3BvcycsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7fTtcbiAgICAgIGNvbnN0IHJlcXVpcmVkU2NvcGVzID0gWydyZWFkOmRhZG9zX2Jhc2ljb3MnXTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBzZXJ2aWNlLmhhc1JlcXVpcmVkU2NvcGVzKHBheWxvYWQsIHJlcXVpcmVkU2NvcGVzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2lzSXBBbGxvd2VkJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJldG9ybmFyIHRydWUgcXVhbmRvIElQIGVzdMOhIG5hIGxpc3RhIGRlIHBlcm1pdGlkb3MnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnRlZ3JhZG9yID0ge1xuICAgICAgICBpcFBlcm1pdGlkb3M6IFsnMTkyLjE2OC4xLjEnLCAnMTAuMC4wLjEnLCAnMTcyLjE2LjAuMSddLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGlwQWRkcmVzcyA9ICcxOTIuMTY4LjEuMSc7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gc2VydmljZS5pc0lwQWxsb3dlZChpbnRlZ3JhZG9yLCBpcEFkZHJlc3MpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBmYWxzZSBxdWFuZG8gSVAgbsOjbyBlc3TDoSBuYSBsaXN0YSBkZSBwZXJtaXRpZG9zJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW50ZWdyYWRvciA9IHtcbiAgICAgICAgaXBQZXJtaXRpZG9zOiBbJzE5Mi4xNjguMS4xJywgJzEwLjAuMC4xJ10sXG4gICAgICB9O1xuICAgICAgY29uc3QgaXBBZGRyZXNzID0gJzE3Mi4xNi4wLjEnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaXNJcEFsbG93ZWQoaW50ZWdyYWRvciwgaXBBZGRyZXNzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIHRydWUgcXVhbmRvIG7Do28gaMOhIGxpc3RhIGRlIElQcyBwZXJtaXRpZG9zJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW50ZWdyYWRvciA9IHtcbiAgICAgICAgaXBQZXJtaXRpZG9zOiBbXSxcbiAgICAgIH07XG4gICAgICBjb25zdCBpcEFkZHJlc3MgPSAnMTkyLjE2OC4xLjEnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaXNJcEFsbG93ZWQoaW50ZWdyYWRvciwgaXBBZGRyZXNzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdHJ1ZSBxdWFuZG8gYSBwcm9wcmllZGFkZSBpcFBlcm1pdGlkb3MgbsOjbyBleGlzdGUnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnRlZ3JhZG9yID0ge307XG4gICAgICBjb25zdCBpcEFkZHJlc3MgPSAnMTkyLjE2OC4xLjEnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHNlcnZpY2UuaXNJcEFsbG93ZWQoaW50ZWdyYWRvciwgaXBBZGRyZXNzKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbGltcGFyVG9rZW5zUmV2b2dhZG9zRXhwaXJhZG9zJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJlbW92ZXIgdG9rZW5zIHJldm9nYWRvcyBleHBpcmFkb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZXhlY3V0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGFmZmVjdGVkOiA1IH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UubGltcGFyVG9rZW5zUmV2b2dhZG9zRXhwaXJhZG9zKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5jcmVhdGVRdWVyeUJ1aWxkZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1Rva2VuUmV2b2dhZG9SZXBvc2l0b3J5LmZyb20pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkud2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSg1KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIDAgcXVhbmRvIG5lbmh1bSB0b2tlbiBmb3IgcmVtb3ZpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrVG9rZW5SZXZvZ2Fkb1JlcG9zaXRvcnkuZXhlY3V0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGFmZmVjdGVkOiAwIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UubGltcGFyVG9rZW5zUmV2b2dhZG9zRXhwaXJhZG9zKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tUb2tlblJldm9nYWRvUmVwb3NpdG9yeS5leGVjdXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9