a319e4c75825251255247b79bdd32795
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DadosNatalidade = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const solicitacao_entity_1 = require("./solicitacao.entity");
/**
 * Entidade para armazenar dados específicos do cidadão para Auxílio Natalidade
 *
 * Armazena informações específicas necessárias para a solicitação do benefício
 * de Auxílio Natalidade, como dados da gestação, pré-natal, etc.
 */
let DadosNatalidade = class DadosNatalidade {
    id;
    solicitacao_id;
    solicitacao;
    realiza_pre_natal;
    atendida_psf_ubs;
    gravidez_risco;
    data_provavel_parto;
    gemeos_trigemeos;
    ja_tem_filhos;
    quantidade_filhos;
    telefone_cadastrado_cpf;
    chave_pix;
    created_at;
    updated_at;
    removed_at;
    // Getters
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se todos os critérios para pecúnia estão preenchidos
     */
    temCriteriosPecunia() {
        return !!(this.telefone_cadastrado_cpf && this.chave_pix);
    }
    /**
     * Verifica se é uma gravidez múltipla
     */
    isGravidezMultipla() {
        return this.gemeos_trigemeos;
    }
    /**
     * Verifica se é primípara (primeiro filho)
     */
    isPrimipara() {
        return !this.ja_tem_filhos || this.quantidade_filhos === 0;
    }
    /**
     * Calcula se está no prazo para solicitação baseado na data provável do parto
     */
    estaNoPrazoSolicitacao(prazoMaximoDias) {
        if (!this.data_provavel_parto)
            return false;
        const hoje = new Date();
        const dataLimite = new Date(this.data_provavel_parto);
        dataLimite.setDate(dataLimite.getDate() + prazoMaximoDias);
        return hoje <= dataLimite;
    }
    /**
     * Valida se os dados estão completos para submissão
     */
    validarDadosCompletos() {
        const erros = [];
        if (this.ja_tem_filhos &&
            (this.quantidade_filhos === null || this.quantidade_filhos === undefined)) {
            erros.push('Quantidade de filhos é obrigatória quando já tem filhos');
        }
        if (this.realiza_pre_natal && !this.atendida_psf_ubs) {
            erros.push('Quando realiza pré-natal, deve informar se é atendida pelo PSF/UBS');
        }
        return {
            valido: erros.length === 0,
            erros,
        };
    }
};
exports.DadosNatalidade = DadosNatalidade;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID da solicitação é obrigatório' }),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "solicitacao_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => solicitacao_entity_1.Solicitacao, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'solicitacao_id' }),
    __metadata("design:type", typeof (_a = typeof solicitacao_entity_1.Solicitacao !== "undefined" && solicitacao_entity_1.Solicitacao) === "function" ? _a : Object)
], DadosNatalidade.prototype, "solicitacao", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Realiza pré-natal deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "realiza_pre_natal", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Atendida pelo PSF/UBS deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "atendida_psf_ubs", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Gravidez de risco deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "gravidez_risco", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'date', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)({}, { message: 'Data provável do parto deve ser uma data válida' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], DadosNatalidade.prototype, "data_provavel_parto", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Gêmeos/Trigêmeos deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "gemeos_trigemeos", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Já tem filhos deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "ja_tem_filhos", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'integer', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Quantidade de filhos deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Quantidade de filhos não pode ser negativa' }),
    __metadata("design:type", Number)
], DadosNatalidade.prototype, "quantidade_filhos", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "telefone_cadastrado_cpf", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "chave_pix", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], DadosNatalidade.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], DadosNatalidade.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], DadosNatalidade.prototype, "removed_at", void 0);
exports.DadosNatalidade = DadosNatalidade = __decorate([
    (0, typeorm_1.Entity)('dados_natalidade'),
    (0, typeorm_1.Index)(['solicitacao_id'], { unique: true })
], DadosNatalidade);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxkYWRvcy1uYXRhbGlkYWRlLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBVWlCO0FBQ2pCLHFEQU95QjtBQUN6Qiw2REFBbUQ7QUFFbkQ7Ozs7O0dBS0c7QUFHSSxJQUFNLGVBQWUsR0FBckIsTUFBTSxlQUFlO0lBRTFCLEVBQUUsQ0FBUztJQUlYLGNBQWMsQ0FBUztJQUl2QixXQUFXLENBQWM7SUFJekIsaUJBQWlCLENBQVU7SUFJM0IsZ0JBQWdCLENBQVU7SUFJMUIsY0FBYyxDQUFVO0lBUXhCLG1CQUFtQixDQUFRO0lBSTNCLGdCQUFnQixDQUFVO0lBSTFCLGFBQWEsQ0FBVTtJQU12QixpQkFBaUIsQ0FBVTtJQUkzQix1QkFBdUIsQ0FBVTtJQUlqQyxTQUFTLENBQVU7SUFHbkIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUdqQixVQUFVLENBQU87SUFFakIsVUFBVTtJQUNWLElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELHNCQUFzQjtJQUV0Qjs7T0FFRztJQUNILG1CQUFtQjtRQUNqQixPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsa0JBQWtCO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQy9CLENBQUM7SUFFRDs7T0FFRztJQUNILFdBQVc7UUFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFB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RUFBRSxDQUFDO0lBQzFCLElBQUEsMkJBQVMsRUFBQyxFQUFFLE9BQU8sRUFBRSxvQ0FBb0MsRUFBRSxDQUFDOztzREFDdEM7QUFNdkI7SUFKQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUMzQyxJQUFBLDRCQUFVLEdBQUU7SUFDWixJQUFBLDBCQUFRLEVBQUMsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLHlDQUF5QyxFQUFFLENBQUM7SUFDcEUsSUFBQSxxQkFBRyxFQUFDLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSw0Q0FBNEMsRUFBRSxDQUFDOzswREFDdkM7QUFJM0I7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDMUIsSUFBQSw0QkFBVSxHQUFFOztnRUFDb0I7QUFJakM7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDMUIsSUFBQSw0QkFBVSxHQUFFOztrREFDTTtBQUduQjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1AsSUFBSSxvQkFBSixJQUFJO21EQUFDO0FBR2pCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7bURBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTttREFBQzswQkE3RE4sZUFBZTtJQUYzQixJQUFBLGdCQUFNLEVBQUMsa0JBQWtCLENBQUM7SUFDMUIsSUFBQSxlQUFLLEVBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0dBQy9CLGVBQWUsQ0F3STNCIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxlbnRpdGllc1xcZGFkb3MtbmF0YWxpZGFkZS5lbnRpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRW50aXR5LFxuICBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uLFxuICBDb2x1bW4sXG4gIENyZWF0ZURhdGVDb2x1bW4sXG4gIFVwZGF0ZURhdGVDb2x1bW4sXG4gIERlbGV0ZURhdGVDb2x1bW4sXG4gIE1hbnlUb09uZSxcbiAgSm9pbkNvbHVtbixcbiAgSW5kZXgsXG59IGZyb20gJ3R5cGVvcm0nO1xuaW1wb3J0IHtcbiAgSXNOb3RFbXB0eSxcbiAgSXNCb29sZWFuLFxuICBJc0RhdGVTdHJpbmcsXG4gIElzT3B0aW9uYWwsXG4gIElzTnVtYmVyLFxuICBNaW4sXG59IGZyb20gJ2NsYXNzLXZhbGlkYXRvcic7XG5pbXBvcnQgeyBTb2xpY2l0YWNhbyB9IGZyb20gJy4vc29saWNpdGFjYW8uZW50aXR5JztcblxuLyoqXG4gKiBFbnRpZGFkZSBwYXJhIGFybWF6ZW5hciBkYWRvcyBlc3BlY8OtZmljb3MgZG8gY2lkYWTDo28gcGFyYSBBdXjDrWxpbyBOYXRhbGlkYWRlXG4gKlxuICogQXJtYXplbmEgaW5mb3JtYcOnw7VlcyBlc3BlY8OtZmljYXMgbmVjZXNzw6FyaWFzIHBhcmEgYSBzb2xpY2l0YcOnw6NvIGRvIGJlbmVmw61jaW9cbiAqIGRlIEF1eMOtbGlvIE5hdGFsaWRhZGUsIGNvbW8gZGFkb3MgZGEgZ2VzdGHDp8OjbywgcHLDqS1uYXRhbCwgZXRjLlxuICovXG5ARW50aXR5KCdkYWRvc19uYXRhbGlkYWRlJylcbkBJbmRleChbJ3NvbGljaXRhY2FvX2lkJ10sIHsgdW5pcXVlOiB0cnVlIH0pXG5leHBvcnQgY2xhc3MgRGFkb3NOYXRhbGlkYWRlIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oKVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdJRCBkYSBzb2xpY2l0YcOnw6NvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgc29saWNpdGFjYW9faWQ6IHN0cmluZztcblxuICBATWFueVRvT25lKCgpID0+IFNvbGljaXRhY2FvLCB7IG9uRGVsZXRlOiAnQ0FTQ0FERScgfSlcbiAgQEpvaW5Db2x1bW4oeyBuYW1lOiAnc29saWNpdGFjYW9faWQnIH0pXG4gIHNvbGljaXRhY2FvOiBTb2xpY2l0YWNhbztcblxuICBAQ29sdW1uKHsgZGVmYXVsdDogZmFsc2UgfSlcbiAgQElzQm9vbGVhbih7IG1lc3NhZ2U6ICdSZWFsaXphIHByw6ktbmF0YWwgZGV2ZSBzZXIgdW0gYm9vbGVhbm8nIH0pXG4gIHJlYWxpemFfcHJlX25hdGFsOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyBkZWZhdWx0OiBmYWxzZSB9KVxuICBASXNCb29sZWFuKHsgbWVzc2FnZTogJ0F0ZW5kaWRhIHBlbG8gUFNGL1VCUyBkZXZlIHNlciB1bSBib29sZWFubycgfSlcbiAgYXRlbmRpZGFfcHNmX3ViczogYm9vbGVhbjtcblxuICBAQ29sdW1uKHsgZGVmYXVsdDogZmFsc2UgfSlcbiAgQElzQm9vbGVhbih7IG1lc3NhZ2U6ICdHcmF2aWRleiBkZSByaXNjbyBkZXZlIHNlciB1bSBib29sZWFubycgfSlcbiAgZ3JhdmlkZXpfcmlzY286IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IHR5cGU6ICdkYXRlJywgbnVsbGFibGU6IHRydWUgfSlcbiAgQElzT3B0aW9uYWwoKVxuICBASXNEYXRlU3RyaW5nKFxuICAgIHt9LFxuICAgIHsgbWVzc2FnZTogJ0RhdGEgcHJvdsOhdmVsIGRvIHBhcnRvIGRldmUgc2VyIHVtYSBkYXRhIHbDoWxpZGEnIH0sXG4gIClcbiAgZGF0YV9wcm92YXZlbF9wYXJ0bz86IERhdGU7XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXG4gIEBJc0Jvb2xlYW4oeyBtZXNzYWdlOiAnR8OqbWVvcy9Ucmlnw6ptZW9zIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICBnZW1lb3NfdHJpZ2VtZW9zOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyBkZWZhdWx0OiBmYWxzZSB9KVxuICBASXNCb29sZWFuKHsgbWVzc2FnZTogJ0rDoSB0ZW0gZmlsaG9zIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICBqYV90ZW1fZmlsaG9zOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAnaW50ZWdlcicsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdRdWFudGlkYWRlIGRlIGZpbGhvcyBkZXZlIHNlciB1bSBuw7ptZXJvJyB9KVxuICBATWluKDAsIHsgbWVzc2FnZTogJ1F1YW50aWRhZGUgZGUgZmlsaG9zIG7Do28gcG9kZSBzZXIgbmVnYXRpdmEnIH0pXG4gIHF1YW50aWRhZGVfZmlsaG9zPzogbnVtYmVyO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIHRlbGVmb25lX2NhZGFzdHJhZG9fY3BmPzogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIGNoYXZlX3BpeD86IHN0cmluZztcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkX2F0OiBEYXRlO1xuXG4gIEBEZWxldGVEYXRlQ29sdW1uKClcbiAgcmVtb3ZlZF9hdDogRGF0ZTtcblxuICAvLyBHZXR0ZXJzXG4gIGdldCBjcmVhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdDtcbiAgfVxuXG4gIGdldCB1cGRhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdDtcbiAgfVxuXG4gIGdldCByZW1vdmVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIFV0aWxpdMOhcmlvc1xuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0b2RvcyBvcyBjcml0w6lyaW9zIHBhcmEgcGVjw7puaWEgZXN0w6NvIHByZWVuY2hpZG9zXG4gICAqL1xuICB0ZW1Dcml0ZXJpb3NQZWN1bmlhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhISh0aGlzLnRlbGVmb25lX2NhZGFzdHJhZG9fY3BmICYmIHRoaXMuY2hhdmVfcGl4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSB1bWEgZ3JhdmlkZXogbcO6bHRpcGxhXG4gICAqL1xuICBpc0dyYXZpZGV6TXVsdGlwbGEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2VtZW9zX3RyaWdlbWVvcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBwcmltw61wYXJhIChwcmltZWlybyBmaWxobylcbiAgICovXG4gIGlzUHJpbWlwYXJhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5qYV90ZW1fZmlsaG9zIHx8IHRoaXMucXVhbnRpZGFkZV9maWxob3MgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYSBzZSBlc3TDoSBubyBwcmF6byBwYXJhIHNvbGljaXRhw6fDo28gYmFzZWFkbyBuYSBkYXRhIHByb3bDoXZlbCBkbyBwYXJ0b1xuICAgKi9cbiAgZXN0YU5vUHJhem9Tb2xpY2l0YWNhbyhwcmF6b01heGltb0RpYXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5kYXRhX3Byb3ZhdmVsX3BhcnRvKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBob2plID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkYXRhTGltaXRlID0gbmV3IERhdGUodGhpcy5kYXRhX3Byb3ZhdmVsX3BhcnRvKTtcbiAgICBkYXRhTGltaXRlLnNldERhdGUoZGF0YUxpbWl0ZS5nZXREYXRlKCkgKyBwcmF6b01heGltb0RpYXMpO1xuXG4gICAgcmV0dXJuIGhvamUgPD0gZGF0YUxpbWl0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGEgc2Ugb3MgZGFkb3MgZXN0w6NvIGNvbXBsZXRvcyBwYXJhIHN1Ym1pc3PDo29cbiAgICovXG4gIHZhbGlkYXJEYWRvc0NvbXBsZXRvcygpOiB7IHZhbGlkbzogYm9vbGVhbjsgZXJyb3M6IHN0cmluZ1tdIH0ge1xuICAgIGNvbnN0IGVycm9zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5qYV90ZW1fZmlsaG9zICYmXG4gICAgICAodGhpcy5xdWFudGlkYWRlX2ZpbGhvcyA9PT0gbnVsbCB8fCB0aGlzLnF1YW50aWRhZGVfZmlsaG9zID09PSB1bmRlZmluZWQpXG4gICAgKSB7XG4gICAgICBlcnJvcy5wdXNoKCdRdWFudGlkYWRlIGRlIGZpbGhvcyDDqSBvYnJpZ2F0w7NyaWEgcXVhbmRvIGrDoSB0ZW0gZmlsaG9zJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVhbGl6YV9wcmVfbmF0YWwgJiYgIXRoaXMuYXRlbmRpZGFfcHNmX3Vicykge1xuICAgICAgZXJyb3MucHVzaChcbiAgICAgICAgJ1F1YW5kbyByZWFsaXphIHByw6ktbmF0YWwsIGRldmUgaW5mb3JtYXIgc2Ugw6kgYXRlbmRpZGEgcGVsbyBQU0YvVUJTJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkbzogZXJyb3MubGVuZ3RoID09PSAwLFxuICAgICAgZXJyb3MsXG4gICAgfTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9