48979d7bba1ff6e5c99a1e529fe05bc9
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MonitoringModule = void 0;
const common_1 = require("@nestjs/common");
const terminus_1 = require("@nestjs/terminus");
const axios_1 = require("@nestjs/axios");
const config_1 = require("@nestjs/config");
const health_controller_1 = require("./health.controller");
const metrics_controller_1 = require("./metrics.controller");
const metrics_service_1 = require("./metrics.service");
const metrics_interceptor_1 = require("./metrics.interceptor");
const enhanced_metrics_service_1 = require("./enhanced-metrics.service");
const enhanced_metrics_controller_1 = require("./enhanced-metrics.controller");
const enhanced_metrics_interceptor_1 = require("./enhanced-metrics.interceptor");
const cache_metrics_interceptor_1 = require("./cache-metrics.interceptor");
const health_check_service_1 = require("../services/health-check.service");
/**
 * Módulo Global de Monitoramento
 *
 * Configura o sistema de monitoramento para toda a aplicação
 * incluindo health checks e métricas
 */
// Módulo NÃO global para evitar problemas com interceptors
let MonitoringModule = class MonitoringModule {
};
exports.MonitoringModule = MonitoringModule;
exports.MonitoringModule = MonitoringModule = __decorate([
    (0, common_1.Module)({
        imports: [
            terminus_1.TerminusModule,
            axios_1.HttpModule,
            config_1.ConfigModule
        ],
        controllers: [health_controller_1.HealthController, metrics_controller_1.MetricsController, enhanced_metrics_controller_1.EnhancedMetricsController],
        providers: [
            metrics_service_1.MetricsService,
            metrics_interceptor_1.MetricsInterceptor,
            enhanced_metrics_service_1.EnhancedMetricsService,
            enhanced_metrics_interceptor_1.EnhancedMetricsInterceptor,
            cache_metrics_interceptor_1.CacheMetricsInterceptor,
            health_check_service_1.HealthCheckService,
        ],
        exports: [
            metrics_service_1.MetricsService,
            metrics_interceptor_1.MetricsInterceptor,
            enhanced_metrics_service_1.EnhancedMetricsService,
            enhanced_metrics_interceptor_1.EnhancedMetricsInterceptor,
            cache_metrics_interceptor_1.CacheMetricsInterceptor,
            health_check_service_1.HealthCheckService,
        ],
    })
], MonitoringModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcbW9uaXRvcmluZ1xcbW9uaXRvcmluZy5tb2R1bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkNBQW9EO0FBQ3BELCtDQUFrRDtBQUNsRCx5Q0FBMkM7QUFDM0MsMkNBQThDO0FBQzlDLDJEQUF1RDtBQUN2RCw2REFBeUQ7QUFDekQsdURBQW1EO0FBQ25ELCtEQUEyRDtBQUMzRCx5RUFBb0U7QUFDcEUsK0VBQTBFO0FBQzFFLGlGQUE0RTtBQUM1RSwyRUFBc0U7QUFDdEUsMkVBQXNFO0FBRXRFOzs7OztHQUtHO0FBQ0gsMkRBQTJEO0FBeUJwRCxJQUFNLGdCQUFnQixHQUF0QixNQUFNLGdCQUFnQjtDQUFHLENBQUE7QUFBbkIsNENBQWdCOzJCQUFoQixnQkFBZ0I7SUF4QjVCLElBQUEsZUFBTSxFQUFDO1FBQ04sT0FBTyxFQUFFO1lBQ1AseUJBQWM7WUFDZCxrQkFBVTtZQUNWLHFCQUFZO1NBQ2I7UUFDRCxXQUFXLEVBQUUsQ0FBQyxvQ0FBZ0IsRUFBRSxzQ0FBaUIsRUFBRSx1REFBeUIsQ0FBQztRQUM3RSxTQUFTLEVBQUU7WUFDVCxnQ0FBYztZQUNkLHdDQUFrQjtZQUNsQixpREFBc0I7WUFDdEIseURBQTBCO1lBQzFCLG1EQUF1QjtZQUN2Qix5Q0FBa0I7U0FDbkI7UUFDRCxPQUFPLEVBQUU7WUFDUCxnQ0FBYztZQUNkLHdDQUFrQjtZQUNsQixpREFBc0I7WUFDdEIseURBQTBCO1lBQzFCLG1EQUF1QjtZQUN2Qix5Q0FBa0I7U0FDbkI7S0FDRixDQUFDO0dBQ1csZ0JBQWdCLENBQUciLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcbW9uaXRvcmluZ1xcbW9uaXRvcmluZy5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlLCBmb3J3YXJkUmVmIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgVGVybWludXNNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlcm1pbnVzJztcbmltcG9ydCB7IEh0dHBNb2R1bGUgfSBmcm9tICdAbmVzdGpzL2F4aW9zJztcbmltcG9ydCB7IENvbmZpZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJztcbmltcG9ydCB7IEhlYWx0aENvbnRyb2xsZXIgfSBmcm9tICcuL2hlYWx0aC5jb250cm9sbGVyJztcbmltcG9ydCB7IE1ldHJpY3NDb250cm9sbGVyIH0gZnJvbSAnLi9tZXRyaWNzLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgTWV0cmljc1NlcnZpY2UgfSBmcm9tICcuL21ldHJpY3Muc2VydmljZSc7XG5pbXBvcnQgeyBNZXRyaWNzSW50ZXJjZXB0b3IgfSBmcm9tICcuL21ldHJpY3MuaW50ZXJjZXB0b3InO1xuaW1wb3J0IHsgRW5oYW5jZWRNZXRyaWNzU2VydmljZSB9IGZyb20gJy4vZW5oYW5jZWQtbWV0cmljcy5zZXJ2aWNlJztcbmltcG9ydCB7IEVuaGFuY2VkTWV0cmljc0NvbnRyb2xsZXIgfSBmcm9tICcuL2VuaGFuY2VkLW1ldHJpY3MuY29udHJvbGxlcic7XG5pbXBvcnQgeyBFbmhhbmNlZE1ldHJpY3NJbnRlcmNlcHRvciB9IGZyb20gJy4vZW5oYW5jZWQtbWV0cmljcy5pbnRlcmNlcHRvcic7XG5pbXBvcnQgeyBDYWNoZU1ldHJpY3NJbnRlcmNlcHRvciB9IGZyb20gJy4vY2FjaGUtbWV0cmljcy5pbnRlcmNlcHRvcic7XG5pbXBvcnQgeyBIZWFsdGhDaGVja1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9oZWFsdGgtY2hlY2suc2VydmljZSc7XG5cbi8qKlxuICogTcOzZHVsbyBHbG9iYWwgZGUgTW9uaXRvcmFtZW50b1xuICpcbiAqIENvbmZpZ3VyYSBvIHNpc3RlbWEgZGUgbW9uaXRvcmFtZW50byBwYXJhIHRvZGEgYSBhcGxpY2HDp8Ojb1xuICogaW5jbHVpbmRvIGhlYWx0aCBjaGVja3MgZSBtw6l0cmljYXNcbiAqL1xuLy8gTcOzZHVsbyBOw4NPIGdsb2JhbCBwYXJhIGV2aXRhciBwcm9ibGVtYXMgY29tIGludGVyY2VwdG9yc1xuQE1vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBUZXJtaW51c01vZHVsZSwgXG4gICAgSHR0cE1vZHVsZSwgXG4gICAgQ29uZmlnTW9kdWxlXG4gIF0sXG4gIGNvbnRyb2xsZXJzOiBbSGVhbHRoQ29udHJvbGxlciwgTWV0cmljc0NvbnRyb2xsZXIsIEVuaGFuY2VkTWV0cmljc0NvbnRyb2xsZXJdLFxuICBwcm92aWRlcnM6IFtcbiAgICBNZXRyaWNzU2VydmljZSxcbiAgICBNZXRyaWNzSW50ZXJjZXB0b3IsXG4gICAgRW5oYW5jZWRNZXRyaWNzU2VydmljZSxcbiAgICBFbmhhbmNlZE1ldHJpY3NJbnRlcmNlcHRvcixcbiAgICBDYWNoZU1ldHJpY3NJbnRlcmNlcHRvcixcbiAgICBIZWFsdGhDaGVja1NlcnZpY2UsXG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBNZXRyaWNzU2VydmljZSxcbiAgICBNZXRyaWNzSW50ZXJjZXB0b3IsXG4gICAgRW5oYW5jZWRNZXRyaWNzU2VydmljZSxcbiAgICBFbmhhbmNlZE1ldHJpY3NJbnRlcmNlcHRvcixcbiAgICBDYWNoZU1ldHJpY3NJbnRlcmNlcHRvcixcbiAgICBIZWFsdGhDaGVja1NlcnZpY2UsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE1vbml0b3JpbmdNb2R1bGUge31cbiJdLCJ2ZXJzaW9uIjozfQ==