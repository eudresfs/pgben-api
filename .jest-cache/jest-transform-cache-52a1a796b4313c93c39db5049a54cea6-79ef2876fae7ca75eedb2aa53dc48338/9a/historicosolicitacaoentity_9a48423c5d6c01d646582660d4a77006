14c3de3e7e02d5a5897429999b133d7b
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", { value: true });
exports.HistoricoSolicitacao = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const solicitacao_entity_1 = require("./solicitacao.entity");
const usuario_entity_1 = require("./usuario.entity");
const status_solicitacao_enum_1 = require("../enums/status-solicitacao.enum");
let HistoricoSolicitacao = class HistoricoSolicitacao {
    id;
    solicitacao_id;
    solicitacao;
    status_anterior;
    status_atual;
    usuario_id;
    usuario;
    observacao;
    dados_alterados;
    ip_usuario;
    created_at;
};
exports.HistoricoSolicitacao = HistoricoSolicitacao;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], HistoricoSolicitacao.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Solicitação é obrigatória' }),
    __metadata("design:type", String)
], HistoricoSolicitacao.prototype, "solicitacao_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => solicitacao_entity_1.Solicitacao, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'solicitacao_id' }),
    __metadata("design:type", typeof (_a = typeof solicitacao_entity_1.Solicitacao !== "undefined" && solicitacao_entity_1.Solicitacao) === "function" ? _a : Object)
], HistoricoSolicitacao.prototype, "solicitacao", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: status_solicitacao_enum_1.StatusSolicitacao,
        enumName: 'status_historico_solicitacao_anterior',
    }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Status anterior é obrigatório' }),
    __metadata("design:type", typeof (_b = typeof status_solicitacao_enum_1.StatusSolicitacao !== "undefined" && status_solicitacao_enum_1.StatusSolicitacao) === "function" ? _b : Object)
], HistoricoSolicitacao.prototype, "status_anterior", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: status_solicitacao_enum_1.StatusSolicitacao,
        enumName: 'status_historico_solicitacao_atual',
    }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Status atual é obrigatório' }),
    __metadata("design:type", typeof (_c = typeof status_solicitacao_enum_1.StatusSolicitacao !== "undefined" && status_solicitacao_enum_1.StatusSolicitacao) === "function" ? _c : Object)
], HistoricoSolicitacao.prototype, "status_atual", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Usuário que realizou a alteração é obrigatório' }),
    __metadata("design:type", String)
], HistoricoSolicitacao.prototype, "usuario_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => usuario_entity_1.Usuario),
    (0, typeorm_1.JoinColumn)({ name: 'usuario_id' }),
    __metadata("design:type", typeof (_d = typeof usuario_entity_1.Usuario !== "undefined" && usuario_entity_1.Usuario) === "function" ? _d : Object)
], HistoricoSolicitacao.prototype, "usuario", void 0);
__decorate([
    (0, typeorm_1.Column)('text', { nullable: true }),
    __metadata("design:type", Object)
], HistoricoSolicitacao.prototype, "observacao", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], HistoricoSolicitacao.prototype, "dados_alterados", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'varchar', length: 45, nullable: true }),
    __metadata("design:type", Object)
], HistoricoSolicitacao.prototype, "ip_usuario", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], HistoricoSolicitacao.prototype, "created_at", void 0);
exports.HistoricoSolicitacao = HistoricoSolicitacao = __decorate([
    (0, typeorm_1.Entity)('historico_status_solicitacao'),
    (0, typeorm_1.Index)(['solicitacao_id', 'created_at'])
], HistoricoSolicitacao);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxoaXN0b3JpY28tc29saWNpdGFjYW8uZW50aXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FRaUI7QUFDakIscURBQTZDO0FBQzdDLDZEQUFtRDtBQUNuRCxxREFBMkM7QUFDM0MsOEVBQXFFO0FBSTlELElBQU0sb0JBQW9CLEdBQTFCLE1BQU0sb0JBQW9CO0lBRS9CLEVBQUUsQ0FBUztJQUlYLGNBQWMsQ0FBUztJQUl2QixXQUFXLENBQWM7SUFRekIsZUFBZSxDQUFvQjtJQVFuQyxZQUFZLENBQW9CO0lBSWhDLFVBQVUsQ0FBUztJQUluQixPQUFPLENBQVU7SUFHakIsVUFBVSxDQUFnQjtJQUcxQixlQUFlLENBQTZCO0lBRzVDLFVBQVUsQ0FBZ0I7SUFHMUIsVUFBVSxDQUFPO0NBQ2xCLENBQUE7QUEvQ1ksb0RBQW9CO0FBRS9CO0lBREMsSUFBQSxnQ0FBc0IsRUFBQyxNQUFNLENBQUM7O2dEQUNwQjtBQUlYO0lBRkMsSUFBQSxnQkFBTSxHQUFFO0lBQ1IsSUFBQSw0QkFBVSxFQUFDLEVBQUUsT0FBTyxFQUFFLDJCQUEyQixFQUFFLENBQUM7OzREQUM5QjtBQUl2QjtJQUZDLElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUUsQ0FBQyxnQ0FBVyxFQUFFLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBQ3JELElBQUEsb0JBQVUsRUFBQyxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxDQUFDO2tEQUMxQixnQ0FBVyxvQkFBWCxnQ0FBVzt5REFBQztBQVF6QjtJQU5DLElBQUEsZ0JBQU0sRUFBQztRQUNOLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLDJDQUFpQjtRQUN2QixRQUFRLEVBQUUsdUNBQXVDO0tBQ2xELENBQUM7SUFDRCxJQUFBLDRCQUFVLEVBQUMsRUFBRSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsQ0FBQztrREFDeEMsMkNBQWlCLG9CQUFqQiwyQ0FBaUI7NkRBQUM7QUFRbkM7SUFOQyxJQUFBLGdCQUFNLEVBQUM7UUFDTixJQUFJLEVBQUUsTUFBTTtRQUNaLElBQUksRUFBRSwyQ0FBaUI7UUFDdkIsUUFBUSxFQUFFLG9DQUFvQztLQUMvQyxDQUFDO0lBQ0QsSUFBQSw0QkFBVSxFQUFDLEVBQUUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLENBQUM7a0RBQ3hDLDJDQUFpQixvQkFBakIsMkNBQWlCOzBEQUFDO0FBSWhDO0lBRkMsSUFBQSxnQkFBTSxHQUFFO0lBQ1IsSUFBQSw0QkFBVSxFQUFDLEVBQUUsT0FBTyxFQUFFLGdEQUFnRCxFQUFFLENBQUM7O3dEQUN2RDtBQUluQjtJQUZDLElBQUEsbUJBQVMsRUFBQyxHQUFHLEVBQUUsQ0FBQyx3QkFBTyxDQUFDO0lBQ3hCLElBQUEsb0JBQVUsRUFBQyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsQ0FBQztrREFDMUIsd0JBQU8sb0JBQVAsd0JBQU87cURBQUM7QUFHakI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOzt3REFDVDtBQUcxQjtJQURDLElBQUEsZ0JBQU0sRUFBQyxPQUFPLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7OzZEQUNRO0FBRzVDO0lBREMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQzs7d0RBQzlCO0FBRzFCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7d0RBQUM7K0JBOUNOLG9CQUFvQjtJQUZoQyxJQUFBLGdCQUFNLEVBQUMsOEJBQThCLENBQUM7SUFDdEMsSUFBQSxlQUFLLEVBQUMsQ0FBQyxnQkFBZ0IsRUFBRSxZQUFZLENBQUMsQ0FBQztHQUMzQixvQkFBb0IsQ0ErQ2hDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxlbnRpdGllc1xcaGlzdG9yaWNvLXNvbGljaXRhY2FvLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENvbHVtbixcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcbiAgTWFueVRvT25lLFxuICBKb2luQ29sdW1uLFxuICBJbmRleCxcbn0gZnJvbSAndHlwZW9ybSc7XG5pbXBvcnQgeyBJc05vdEVtcHR5IH0gZnJvbSAnY2xhc3MtdmFsaWRhdG9yJztcbmltcG9ydCB7IFNvbGljaXRhY2FvIH0gZnJvbSAnLi9zb2xpY2l0YWNhby5lbnRpdHknO1xuaW1wb3J0IHsgVXN1YXJpbyB9IGZyb20gJy4vdXN1YXJpby5lbnRpdHknO1xuaW1wb3J0IHsgU3RhdHVzU29saWNpdGFjYW8gfSBmcm9tICcuLi9lbnVtcy9zdGF0dXMtc29saWNpdGFjYW8uZW51bSc7XG5cbkBFbnRpdHkoJ2hpc3Rvcmljb19zdGF0dXNfc29saWNpdGFjYW8nKVxuQEluZGV4KFsnc29saWNpdGFjYW9faWQnLCAnY3JlYXRlZF9hdCddKVxuZXhwb3J0IGNsYXNzIEhpc3Rvcmljb1NvbGljaXRhY2FvIHtcbiAgQFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4oJ3V1aWQnKVxuICBpZDogc3RyaW5nO1xuXG4gIEBDb2x1bW4oKVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdTb2xpY2l0YcOnw6NvIMOpIG9icmlnYXTDs3JpYScgfSlcbiAgc29saWNpdGFjYW9faWQ6IHN0cmluZztcblxuICBATWFueVRvT25lKCgpID0+IFNvbGljaXRhY2FvLCB7IG9uRGVsZXRlOiAnQ0FTQ0FERScgfSlcbiAgQEpvaW5Db2x1bW4oeyBuYW1lOiAnc29saWNpdGFjYW9faWQnIH0pXG4gIHNvbGljaXRhY2FvOiBTb2xpY2l0YWNhbztcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogU3RhdHVzU29saWNpdGFjYW8sXG4gICAgZW51bU5hbWU6ICdzdGF0dXNfaGlzdG9yaWNvX3NvbGljaXRhY2FvX2FudGVyaW9yJyxcbiAgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnU3RhdHVzIGFudGVyaW9yIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgc3RhdHVzX2FudGVyaW9yOiBTdGF0dXNTb2xpY2l0YWNhbztcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogU3RhdHVzU29saWNpdGFjYW8sXG4gICAgZW51bU5hbWU6ICdzdGF0dXNfaGlzdG9yaWNvX3NvbGljaXRhY2FvX2F0dWFsJyxcbiAgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnU3RhdHVzIGF0dWFsIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgc3RhdHVzX2F0dWFsOiBTdGF0dXNTb2xpY2l0YWNhbztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnVXN1w6FyaW8gcXVlIHJlYWxpem91IGEgYWx0ZXJhw6fDo28gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICB1c3VhcmlvX2lkOiBzdHJpbmc7XG5cbiAgQE1hbnlUb09uZSgoKSA9PiBVc3VhcmlvKVxuICBASm9pbkNvbHVtbih7IG5hbWU6ICd1c3VhcmlvX2lkJyB9KVxuICB1c3VhcmlvOiBVc3VhcmlvO1xuXG4gIEBDb2x1bW4oJ3RleHQnLCB7IG51bGxhYmxlOiB0cnVlIH0pXG4gIG9ic2VydmFjYW86IHN0cmluZyB8IG51bGw7XG5cbiAgQENvbHVtbignanNvbmInLCB7IG51bGxhYmxlOiB0cnVlIH0pXG4gIGRhZG9zX2FsdGVyYWRvczogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGw7XG5cbiAgQENvbHVtbih7IHR5cGU6ICd2YXJjaGFyJywgbGVuZ3RoOiA0NSwgbnVsbGFibGU6IHRydWUgfSlcbiAgaXBfdXN1YXJpbzogc3RyaW5nIHwgbnVsbDtcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG59XG4iXSwidmVyc2lvbiI6M30=