{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\beneficio\\dto\\create-dados-cesta-basica.dto.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\beneficio\\dto\\create-dados-cesta-basica.dto.ts"],"sourcesContent":["import {\n  IsNotEmpty,\n  IsNumber,\n  IsEnum,\n  IsOptional,\n  IsUUID,\n  Min,\n  Max,\n  ValidateIf,\n  MinLength,\n} from 'class-validator';\nimport { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { Transform } from 'class-transformer';\nimport { PeriodicidadeEnum, OrigemAtendimentoEnum } from '@/enums';\n\n/**\n * DTO para criação de dados específicos do cidadão para Cesta Básica\n */\nexport class CreateDadosCestaBasicaDto {\n  @ApiProperty({\n    description: 'ID da solicitação de benefício',\n    example: '550e8400-e29b-41d4-a716-446655440000',\n  })\n  @IsNotEmpty({ message: 'ID da solicitação é obrigatório' })\n  @IsUUID('4', { message: 'ID da solicitação inválido' })\n  solicitacao_id: string;\n\n  @ApiProperty({\n    description: 'Quantidade de cestas básicas solicitadas',\n    example: 2,\n    minimum: 1,\n    maximum: 12,\n  })\n  @IsNotEmpty({ message: 'Quantidade de cestas é obrigatória' })\n  @IsNumber({}, { message: 'Quantidade de cestas deve ser um número' })\n  @Min(1, { message: 'Quantidade mínima é 1 cesta' })\n  @Max(12, { message: 'Quantidade máxima é 12 cestas' })\n  @Transform(({ value }) => {\n    if (typeof value === 'string') {\n      const num = parseInt(value, 10);\n      return isNaN(num) ? value : num;\n    }\n    return value;\n  })\n  quantidade_cestas_solicitadas: number;\n\n  @ApiProperty({\n    description: 'Período de concessão do benefício',\n    enum: PeriodicidadeEnum,\n    example: PeriodicidadeEnum.MENSAL,\n  })\n  @IsNotEmpty({ message: 'Período de concessão é obrigatório' })\n  @IsEnum(PeriodicidadeEnum, { message: 'Período de concessão inválido' })\n  periodo_concessao: PeriodicidadeEnum;\n\n  @ApiProperty({\n    description: 'Origem do atendimento que gerou a solicitação',\n    enum: OrigemAtendimentoEnum,\n    example: OrigemAtendimentoEnum.CRAS,\n  })\n  @IsNotEmpty({ message: 'Origem do atendimento é obrigatória' })\n  @IsEnum(OrigemAtendimentoEnum, { message: 'Origem do atendimento inválida' })\n  origem_atendimento: OrigemAtendimentoEnum;\n\n  @ApiPropertyOptional({\n    description:\n      'Número de pessoas na família (para cálculo da quantidade recomendada)',\n    example: 4,\n    minimum: 1,\n  })\n  @IsOptional()\n  @IsNumber({}, { message: 'Número de pessoas na família deve ser um número' })\n  @Min(1, { message: 'Número mínimo de pessoas na família é 1' })\n  @Transform(({ value }) => {\n    if (typeof value === 'string') {\n      const num = parseInt(value, 10);\n      return isNaN(num) ? value : num;\n    }\n    return value;\n  })\n  numero_pessoas_familia?: number;\n\n  @ApiPropertyOptional({\n    description:\n      'Justificativa para a quantidade solicitada (obrigatória se quantidade > recomendada)',\n    example:\n      'Família com necessidades especiais devido a situação de vulnerabilidade extrema.',\n  })\n  @IsOptional()\n  @ValidateIf((o) => {\n    // Validação condicional: obrigatória se quantidade > recomendada\n    // Regra simples: 1 cesta para até 3 pessoas, +1 a cada 3 pessoas\n    const recomendada = o.numero_pessoas_familia\n      ? Math.ceil(o.numero_pessoas_familia / 3)\n      : 1;\n    return o.quantidade_cestas_solicitadas > recomendada + 1;\n  })\n  @IsNotEmpty({\n    message: 'Justificativa é obrigatória para quantidade acima do recomendado',\n  })\n  @MinLength(10, { message: 'Justificativa deve ter pelo menos 10 caracteres' })\n  justificativa_quantidade?: string;\n\n  @ApiPropertyOptional({\n    description: 'Observações especiais sobre o caso',\n    example:\n      'Família acompanhada pelo PAIF devido a situação de vulnerabilidade.',\n  })\n  @IsOptional()\n  observacoes_especiais?: string;\n\n  @ApiPropertyOptional({\n    description: 'Nome do técnico responsável pelo acompanhamento',\n    example: 'Maria Silva - Assistente Social',\n  })\n  @IsOptional()\n  tecnico_responsavel?: string;\n\n  @ApiPropertyOptional({\n    description:\n      'Unidade solicitante (obrigatória para encaminhamentos externos)',\n    example: 'CRAS Regional III',\n  })\n  @ValidateIf(\n    (o) =>\n      o.origem_atendimento === OrigemAtendimentoEnum.ENCAMINHAMENTO_EXTERNO,\n  )\n  @IsNotEmpty({\n    message: 'Unidade solicitante é obrigatória para encaminhamentos externos',\n  })\n  @IsOptional()\n  unidade_solicitante?: string;\n}\n\n/**\n * DTO para atualização de dados específicos do cidadão para Cesta Básica\n */\nexport class UpdateDadosCestaBasicaDto {\n  @ApiPropertyOptional({\n    description: 'Quantidade de cestas básicas solicitadas',\n    example: 2,\n    minimum: 1,\n    maximum: 12,\n  })\n  @IsOptional()\n  @IsNumber({}, { message: 'Quantidade de cestas deve ser um número' })\n  @Min(1, { message: 'Quantidade mínima é 1 cesta' })\n  @Max(12, { message: 'Quantidade máxima é 12 cestas' })\n  @Transform(({ value }) => {\n    if (typeof value === 'string') {\n      const num = parseInt(value, 10);\n      return isNaN(num) ? value : num;\n    }\n    return value;\n  })\n  quantidade_cestas_solicitadas?: number;\n\n  @ApiPropertyOptional({\n    description: 'Período de concessão do benefício',\n    enum: PeriodicidadeEnum,\n    example: PeriodicidadeEnum.MENSAL,\n  })\n  @IsOptional()\n  @IsEnum(PeriodicidadeEnum, { message: 'Período de concessão inválido' })\n  periodo_concessao?: PeriodicidadeEnum;\n\n  @ApiPropertyOptional({\n    description: 'Origem do atendimento que gerou a solicitação',\n    enum: OrigemAtendimentoEnum,\n    example: OrigemAtendimentoEnum.CRAS,\n  })\n  @IsOptional()\n  @IsEnum(OrigemAtendimentoEnum, { message: 'Origem do atendimento inválida' })\n  origem_atendimento?: OrigemAtendimentoEnum;\n\n  @ApiPropertyOptional({\n    description: 'Número de pessoas na família',\n    example: 4,\n    minimum: 1,\n  })\n  @IsOptional()\n  @IsNumber({}, { message: 'Número de pessoas na família deve ser um número' })\n  @Min(1, { message: 'Número mínimo de pessoas na família é 1' })\n  @Transform(({ value }) => {\n    if (typeof value === 'string') {\n      const num = parseInt(value, 10);\n      return isNaN(num) ? value : num;\n    }\n    return value;\n  })\n  numero_pessoas_familia?: number;\n\n  @ApiPropertyOptional({\n    description: 'Justificativa para a quantidade solicitada',\n    example: 'Justificativa atualizada após reavaliação.',\n  })\n  @IsOptional()\n  @MinLength(10, { message: 'Justificativa deve ter pelo menos 10 caracteres' })\n  justificativa_quantidade?: string;\n\n  @ApiPropertyOptional({\n    description: 'Observações especiais sobre o caso',\n    example: 'Observações atualizadas.',\n  })\n  @IsOptional()\n  observacoes_especiais?: string;\n\n  @ApiPropertyOptional({\n    description: 'Nome do técnico responsável pelo acompanhamento',\n    example: 'João Santos - Assistente Social',\n  })\n  @IsOptional()\n  tecnico_responsavel?: string;\n\n  @ApiPropertyOptional({\n    description: 'Unidade solicitante',\n    example: 'CRAS Regional IV',\n  })\n  @IsOptional()\n  unidade_solicitante?: string;\n}\n"],"version":3}