52ab3ce9a44e4dd51297d79d9de4d260
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const typeorm_1 = require("@nestjs/typeorm");
const metricas_pagamento_service_1 = require("../../../services/metricas-pagamento.service");
const pagamento_entity_1 = require("../../../entities/pagamento.entity");
const comprovante_pagamento_entity_1 = require("../../../entities/comprovante-pagamento.entity");
const confirmacao_recebimento_entity_1 = require("../../../entities/confirmacao-recebimento.entity");
const status_pagamento_enum_1 = require("../../../enums/status-pagamento.enum");
const metodo_pagamento_enum_1 = require("../../../enums/metodo-pagamento.enum");
/**
 * Testes unitários para MetricasPagamentoService
 *
 * Valida o funcionamento do serviço responsável por coletar
 * e disponibilizar métricas sobre as operações de pagamento.
 *
 * @author Equipe PGBen
 */
describe('MetricasPagamentoService', () => {
    let service;
    let pagamentoRepository;
    let comprovanteRepository;
    let confirmacaoRepository;
    // Mock do QueryBuilder para uso nos testes
    const mockQueryBuilder = {
        select: jest.fn().mockReturnThis(),
        addSelect: jest.fn().mockReturnThis(),
        from: jest.fn().mockReturnThis(),
        where: jest.fn().mockReturnThis(),
        andWhere: jest.fn().mockReturnThis(),
        leftJoin: jest.fn().mockReturnThis(),
        innerJoin: jest.fn().mockReturnThis(),
        groupBy: jest.fn().mockReturnThis(),
        orderBy: jest.fn().mockReturnThis(),
        getRawMany: jest.fn().mockResolvedValue([]),
        getRawOne: jest.fn().mockResolvedValue({}),
        execute: jest.fn().mockResolvedValue([]),
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                metricas_pagamento_service_1.MetricasPagamentoService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento),
                    useValue: {
                        createQueryBuilder: jest.fn().mockReturnValue(mockQueryBuilder),
                        manager: {
                            query: jest.fn().mockResolvedValue([]),
                        },
                    },
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(comprovante_pagamento_entity_1.ComprovantePagamento),
                    useValue: {
                        createQueryBuilder: jest.fn().mockReturnValue(mockQueryBuilder),
                        count: jest.fn().mockResolvedValue(0),
                    },
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(confirmacao_recebimento_entity_1.ConfirmacaoRecebimento),
                    useValue: {
                        createQueryBuilder: jest.fn().mockReturnValue(mockQueryBuilder),
                        count: jest.fn().mockResolvedValue(0),
                    },
                },
            ],
        }).compile();
        service = module.get(metricas_pagamento_service_1.MetricasPagamentoService);
        pagamentoRepository = module.get((0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento));
        comprovanteRepository = module.get((0, typeorm_1.getRepositoryToken)(comprovante_pagamento_entity_1.ComprovantePagamento));
        confirmacaoRepository = module.get((0, typeorm_1.getRepositoryToken)(confirmacao_recebimento_entity_1.ConfirmacaoRecebimento));
    });
    it('deve estar definido', () => {
        expect(service).toBeDefined();
    });
    describe('obterMetricasVolume', () => {
        it('deve retornar métricas de volume de pagamentos', async () => {
            // Arrange
            const mockMetricas = {
                totalPagamentos: 100,
                totalEmProcessamento: 20,
                totalFinalizados: 70,
                totalCancelados: 10,
                totalValorPago: 50000,
                mediaTempoProcessamento: 48, // horas
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '100',
                totalEmProcessamento: '20',
                totalFinalizados: '70',
                totalCancelados: '10',
                totalValorPago: '50000.00',
                mediaTempoProcessamento: '48.00',
            });
            // Act
            const resultado = await service.obterMetricasVolume();
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(pagamentoRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockQueryBuilder.select).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockMetricas = {
                totalPagamentos: 50,
                totalEmProcessamento: 10,
                totalFinalizados: 35,
                totalCancelados: 5,
                totalValorPago: 25000,
                mediaTempoProcessamento: 36, // horas
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '50',
                totalEmProcessamento: '10',
                totalFinalizados: '35',
                totalCancelados: '5',
                totalValorPago: '25000.00',
                mediaTempoProcessamento: '36.00',
            });
            // Act
            const resultado = await service.obterMetricasVolume(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataCriacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataCriacao <= :dataFim', { dataFim });
        });
    });
    describe('obterMetricasEficiencia', () => {
        it('deve retornar métricas de eficiência do processamento de pagamentos', async () => {
            // Arrange
            const mockMetricas = {
                tempoMedioPorStatus: [
                    { status: status_pagamento_enum_1.StatusPagamentoEnum.AGENDADO, tempoMedio: 24 }, // horas
                    { status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO, tempoMedio: 48 }, // horas
                    { status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO, tempoMedio: 72 }, // horas
                    { status: status_pagamento_enum_1.StatusPagamentoEnum.CONFIRMADO, tempoMedio: 96 }, // horas
                ],
                taxaConclusao: 0.7, // 70% dos pagamentos são concluídos
                taxaCancelamento: 0.1, // 10% dos pagamentos são cancelados
                tempoMedioTotal: 96, // horas do início ao fim do processo
            };
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce([
                { status: status_pagamento_enum_1.StatusPagamentoEnum.AGENDADO, tempoMedio: '24.00' },
                { status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO, tempoMedio: '48.00' },
                { status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO, tempoMedio: '72.00' },
                { status: status_pagamento_enum_1.StatusPagamentoEnum.CONFIRMADO, tempoMedio: '96.00' },
            ]);
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                taxaConclusao: '0.70',
                taxaCancelamento: '0.10',
                tempoMedioTotal: '96.00',
            });
            // Act
            const resultado = await service.obterMetricasEficiencia();
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(pagamentoRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const unidadeId = 'unidade-id-1';
            const mockTempoMedioPorStatus = [
                { status: status_pagamento_enum_1.StatusPagamentoEnum.AGENDADO, tempoMedio: 24 },
                { status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO, tempoMedio: 48 },
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockTempoMedioPorStatus.map((item) => ({
                status: item.status,
                tempoMedio: item.tempoMedio.toString(),
            })));
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                taxaConclusao: '0.75',
                taxaCancelamento: '0.05',
                tempoMedioTotal: '72.00',
            });
            // Act
            const resultado = await service.obterMetricasEficiencia(null, null, unidadeId);
            // Assert
            expect(resultado).toBeDefined();
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.unidadeId = :unidadeId', { unidadeId });
        });
    });
    describe('obterMetricasComprovantes', () => {
        it('deve retornar métricas sobre os comprovantes de pagamento', async () => {
            // Arrange
            const mockMetricas = {
                totalComprovantes: 80,
                tempoMedioUpload: 36, // horas após pagamento
                percentualPagamentosComComprovante: 0.8, // 80% dos pagamentos têm comprovante
                tamanhoMedioArquivo: 1024, // KB
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalComprovantes: '80',
                tempoMedioUpload: '36.00',
                percentualPagamentosComComprovante: '0.80',
                tamanhoMedioArquivo: '1024.00',
            });
            jest.spyOn(comprovanteRepository, 'count').mockResolvedValueOnce(80);
            // Act
            const resultado = await service.obterMetricasComprovantes();
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(comprovanteRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockQueryBuilder.select).toHaveBeenCalled();
        });
        it('deve filtrar por método de pagamento quando especificado', async () => {
            // Arrange
            const metodoPagamento = metodo_pagamento_enum_1.MetodoPagamentoEnum.PIX;
            const mockMetricas = {
                totalComprovantes: 50,
                tempoMedioUpload: 24, // horas após pagamento
                percentualPagamentosComComprovante: 0.9, // 90% dos pagamentos PIX têm comprovante
                tamanhoMedioArquivo: 800, // KB
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalComprovantes: '50',
                tempoMedioUpload: '24.00',
                percentualPagamentosComComprovante: '0.90',
                tamanhoMedioArquivo: '800.00',
            });
            // Act
            const resultado = await service.obterMetricasComprovantes(null, null, metodoPagamento);
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(mockQueryBuilder.innerJoin).toHaveBeenCalled();
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('p.metodoPagamento = :metodoPagamento', { metodoPagamento });
        });
    });
    describe('obterMetricasConfirmacoes', () => {
        it('deve retornar métricas sobre as confirmações de recebimento', async () => {
            // Arrange
            const mockMetricas = {
                totalConfirmacoes: 70,
                tempoMedioConfirmacao: 72, // horas após pagamento
                percentualPagamentosConfirmados: 0.7, // 70% dos pagamentos são confirmados pelo beneficiário
                taxaConfirmacaoEspontanea: 0.6, // 60% das confirmações são espontâneas
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalConfirmacoes: '70',
                tempoMedioConfirmacao: '72.00',
                percentualPagamentosConfirmados: '0.70',
                taxaConfirmacaoEspontanea: '0.60',
            });
            jest.spyOn(confirmacaoRepository, 'count').mockResolvedValueOnce(70);
            // Act
            const resultado = await service.obterMetricasConfirmacoes();
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(confirmacaoRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockQueryBuilder.select).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const unidadeId = 'unidade-id-1';
            const mockMetricas = {
                totalConfirmacoes: 40,
                tempoMedioConfirmacao: 48, // horas após pagamento
                percentualPagamentosConfirmados: 0.8, // 80% dos pagamentos da unidade são confirmados
                taxaConfirmacaoEspontanea: 0.7, // 70% das confirmações da unidade são espontâneas
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalConfirmacoes: '40',
                tempoMedioConfirmacao: '48.00',
                percentualPagamentosConfirmados: '0.80',
                taxaConfirmacaoEspontanea: '0.70',
            });
            // Act
            const resultado = await service.obterMetricasConfirmacoes(null, null, unidadeId);
            // Assert
            expect(resultado).toEqual(mockMetricas);
            expect(mockQueryBuilder.innerJoin).toHaveBeenCalled();
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('p.unidadeId = :unidadeId', { unidadeId });
        });
    });
    describe('obterMetricasTempoReais', () => {
        it('deve retornar métricas de tempo real sobre pagamentos', async () => {
            // Arrange
            const mockMetricas = {
                pagamentosUltimas24h: 10,
                confirmacoesPendentes: 20,
                valorLiberadoHoje: 5000,
                pagamentosMaisRecentes: [
                    {
                        id: 'pagamento-id-1',
                        valor: 500,
                        status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
                        dataAtualizacao: new Date(),
                    },
                    {
                        id: 'pagamento-id-2',
                        valor: 300,
                        status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO,
                        dataAtualizacao: new Date(),
                    },
                ],
                taxaConfirmacaoHoje: 0.8, // 80% dos pagamentos de hoje foram confirmados
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                pagamentosUltimas24h: '10',
                confirmacoesPendentes: '20',
                valorLiberadoHoje: '5000.00',
                taxaConfirmacaoHoje: '0.80',
            });
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce([
                {
                    id: 'pagamento-id-1',
                    valor: '500.00',
                    status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
                    dataAtualizacao: new Date().toISOString(),
                },
                {
                    id: 'pagamento-id-2',
                    valor: '300.00',
                    status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO,
                    dataAtualizacao: new Date().toISOString(),
                },
            ]);
            // Act
            const resultado = await service.obterMetricasTempoReais();
            // Assert
            expect(resultado).toMatchObject({
                pagamentosUltimas24h: 10,
                confirmacoesPendentes: 20,
                valorLiberadoHoje: 5000,
                taxaConfirmacaoHoje: 0.8,
            });
            expect(resultado.pagamentosMaisRecentes).toHaveLength(2);
            expect(pagamentoRepository.createQueryBuilder).toHaveBeenCalled();
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.orderBy).toHaveBeenCalled();
        });
    });
    describe('obterDashboard', () => {
        it('deve retornar dados consolidados para dashboard', async () => {
            // Arrange
            const mockVolume = {
                totalPagamentos: 100,
                totalEmProcessamento: 20,
                totalFinalizados: 70,
                totalCancelados: 10,
                totalValorPago: 50000,
                mediaTempoProcessamento: 48,
            };
            const mockEficiencia = {
                tempoMedioPorStatus: [
                    { status: status_pagamento_enum_1.StatusPagamentoEnum.AGENDADO, tempoMedio: 24 },
                ],
                taxaConclusao: 0.7,
                taxaCancelamento: 0.1,
                tempoMedioTotal: 96,
            };
            const mockTempoReal = {
                pagamentosUltimas24h: 10,
                confirmacoesPendentes: 20,
                valorLiberadoHoje: 5000,
                pagamentosMaisRecentes: [
                    {
                        id: 'pagamento-id-1',
                        valor: 500,
                        status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
                        dataAtualizacao: new Date(),
                    },
                ],
                taxaConfirmacaoHoje: 0.8,
            };
            // Mock dos métodos do serviço
            jest
                .spyOn(service, 'obterMetricasVolume')
                .mockResolvedValueOnce(mockVolume);
            jest
                .spyOn(service, 'obterMetricasEficiencia')
                .mockResolvedValueOnce(mockEficiencia);
            jest
                .spyOn(service, 'obterMetricasTempoReais')
                .mockResolvedValueOnce(mockTempoReal);
            // Act
            const resultado = await service.obterDashboard();
            // Assert
            expect(resultado).toEqual({
                volume: mockVolume,
                eficiencia: mockEficiencia,
                tempoReal: mockTempoReal,
            });
            expect(service.obterMetricasVolume).toHaveBeenCalled();
            expect(service.obterMetricasEficiencia).toHaveBeenCalled();
            expect(service.obterMetricasTempoReais).toHaveBeenCalled();
        });
        it('deve aplicar filtros a todos os métodos quando especificados', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const unidadeId = 'unidade-id-1';
            // Mock dos métodos do serviço
            jest
                .spyOn(service, 'obterMetricasVolume')
                .mockResolvedValueOnce({});
            jest
                .spyOn(service, 'obterMetricasEficiencia')
                .mockResolvedValueOnce({});
            jest
                .spyOn(service, 'obterMetricasTempoReais')
                .mockResolvedValueOnce({});
            // Act
            await service.obterDashboard(dataInicio, dataFim, unidadeId);
            // Assert
            expect(service.obterMetricasVolume).toHaveBeenCalledWith(dataInicio, dataFim, unidadeId);
            expect(service.obterMetricasEficiencia).toHaveBeenCalledWith(dataInicio, dataFim, unidadeId);
            expect(service.obterMetricasTempoReais).toHaveBeenCalledWith(unidadeId);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxtZXRyaWNhcy1wYWdhbWVudG8uc2VydmljZS5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQXNEO0FBQ3RELDZDQUFxRDtBQUdyRCw2RkFBd0Y7QUFDeEYseUVBQStEO0FBQy9ELGlHQUFzRjtBQUN0RixxR0FBMEY7QUFDMUYsZ0ZBQTJFO0FBQzNFLGdGQUEyRTtBQUUzRTs7Ozs7OztHQU9HO0FBQ0gsUUFBUSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRTtJQUN4QyxJQUFJLE9BQWlDLENBQUM7SUFDdEMsSUFBSSxtQkFBMEMsQ0FBQztJQUMvQyxJQUFJLHFCQUF1RCxDQUFDO0lBQzVELElBQUkscUJBQXlELENBQUM7SUFFOUQsMkNBQTJDO0lBQzNDLE1BQU0sZ0JBQWdCLEdBQUc7UUFDdkIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDbEMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDckMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDaEMsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDakMsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDcEMsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDcEMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDckMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7UUFDbkMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVB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Q3BDLElBQUk7aUJBQ0QsS0FBSyxDQUFDLE9BQU8sRUFBRSx5QkFBeUIsQ0FBQztpQkFDekMscUJBQXFCLENBQUMsRUFBUyxDQUFDLENBQUM7WUFDcEMsSUFBSTtpQkFDRCxLQUFLLENBQUMsT0FBTyxFQUFFLHlCQUF5QixDQUFDO2lCQUN6QyxxQkFBcUIsQ0FBQyxFQUFTLENBQUMsQ0FBQztZQUVwQyxNQUFNO1lBQ04sTUFBTSxPQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFFN0QsU0FBUztZQUNULE1BQU0sQ0FBQyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxvQkFBb0IsQ0FDdEQsVUFBVSxFQUNWLE9BQU8sRUFDUCxTQUFTLENBQ1YsQ0FBQztZQUNGLE1BQU0sQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxvQkFBb0IsQ0FDMUQsVUFBVSxFQUNWLE9BQU8sRUFDUCxTQUFTLENBQ1YsQ0FBQztZQUNGLE1BQU0sQ0FBQyxPQUFPLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUMxRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxtZXRyaWNhcy1wYWdhbWVudG8uc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgZ2V0UmVwb3NpdG9yeVRva2VuIH0gZnJvbSAnQG5lc3Rqcy90eXBlb3JtJztcbmltcG9ydCB7IFJlcG9zaXRvcnkgfSBmcm9tICd0eXBlb3JtJztcblxuaW1wb3J0IHsgTWV0cmljYXNQYWdhbWVudG9TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvbWV0cmljYXMtcGFnYW1lbnRvLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGFnYW1lbnRvIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMvcGFnYW1lbnRvLmVudGl0eSc7XG5pbXBvcnQgeyBDb21wcm92YW50ZVBhZ2FtZW50byB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL2NvbXByb3ZhbnRlLXBhZ2FtZW50by5lbnRpdHknO1xuaW1wb3J0IHsgQ29uZmlybWFjYW9SZWNlYmltZW50byB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL2NvbmZpcm1hY2FvLXJlY2ViaW1lbnRvLmVudGl0eSc7XG5pbXBvcnQgeyBTdGF0dXNQYWdhbWVudG9FbnVtIH0gZnJvbSAnLi4vLi4vLi4vZW51bXMvc3RhdHVzLXBhZ2FtZW50by5lbnVtJztcbmltcG9ydCB7IE1ldG9kb1BhZ2FtZW50b0VudW0gfSBmcm9tICcuLi8uLi8uLi9lbnVtcy9tZXRvZG8tcGFnYW1lbnRvLmVudW0nO1xuXG4vKipcbiAqIFRlc3RlcyB1bml0w6FyaW9zIHBhcmEgTWV0cmljYXNQYWdhbWVudG9TZXJ2aWNlXG4gKlxuICogVmFsaWRhIG8gZnVuY2lvbmFtZW50byBkbyBzZXJ2acOnbyByZXNwb25zw6F2ZWwgcG9yIGNvbGV0YXJcbiAqIGUgZGlzcG9uaWJpbGl6YXIgbcOpdHJpY2FzIHNvYnJlIGFzIG9wZXJhw6fDtWVzIGRlIHBhZ2FtZW50by5cbiAqXG4gKiBAYXV0aG9yIEVxdWlwZSBQR0JlblxuICovXG5kZXNjcmliZSgnTWV0cmljYXNQYWdhbWVudG9TZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogTWV0cmljYXNQYWdhbWVudG9TZXJ2aWNlO1xuICBsZXQgcGFnYW1lbnRvUmVwb3NpdG9yeTogUmVwb3NpdG9yeTxQYWdhbWVudG8+O1xuICBsZXQgY29tcHJvdmFudGVSZXBvc2l0b3J5OiBSZXBvc2l0b3J5PENvbXByb3ZhbnRlUGFnYW1lbnRvPjtcbiAgbGV0IGNvbmZpcm1hY2FvUmVwb3NpdG9yeTogUmVwb3NpdG9yeTxDb25maXJtYWNhb1JlY2ViaW1lbnRvPjtcblxuICAvLyBNb2NrIGRvIFF1ZXJ5QnVpbGRlciBwYXJhIHVzbyBub3MgdGVzdGVzXG4gIGNvbnN0IG1vY2tRdWVyeUJ1aWxkZXIgPSB7XG4gICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBhZGRTZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGZyb206IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIHdoZXJlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBhbmRXaGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgbGVmdEpvaW46IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGlubmVySm9pbjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZ3JvdXBCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgb3JkZXJCeTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgZ2V0UmF3TWFueTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgICBnZXRSYXdPbmU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXG4gICAgZXhlY3V0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtdKSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIE1ldHJpY2FzUGFnYW1lbnRvU2VydmljZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IGdldFJlcG9zaXRvcnlUb2tlbihQYWdhbWVudG8pLFxuICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICBjcmVhdGVRdWVyeUJ1aWxkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1F1ZXJ5QnVpbGRlciksXG4gICAgICAgICAgICBtYW5hZ2VyOiB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENvbXByb3ZhbnRlUGFnYW1lbnRvKSxcbiAgICAgICAgICB1c2VWYWx1ZToge1xuICAgICAgICAgICAgY3JlYXRlUXVlcnlCdWlsZGVyOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tRdWVyeUJ1aWxkZXIpLFxuICAgICAgICAgICAgY291bnQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgwKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENvbmZpcm1hY2FvUmVjZWJpbWVudG8pLFxuICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICBjcmVhdGVRdWVyeUJ1aWxkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja1F1ZXJ5QnVpbGRlciksXG4gICAgICAgICAgICBjb3VudDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKDApLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PE1ldHJpY2FzUGFnYW1lbnRvU2VydmljZT4oTWV0cmljYXNQYWdhbWVudG9TZXJ2aWNlKTtcbiAgICBwYWdhbWVudG9SZXBvc2l0b3J5ID0gbW9kdWxlLmdldDxSZXBvc2l0b3J5PFBhZ2FtZW50bz4+KFxuICAgICAgZ2V0UmVwb3NpdG9yeVRva2VuKFBhZ2FtZW50byksXG4gICAgKTtcbiAgICBjb21wcm92YW50ZVJlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0PFJlcG9zaXRvcnk8Q29tcHJvdmFudGVQYWdhbWVudG8+PihcbiAgICAgIGdldFJlcG9zaXRvcnlUb2tlbihDb21wcm92YW50ZVBhZ2FtZW50byksXG4gICAgKTtcbiAgICBjb25maXJtYWNhb1JlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0PFJlcG9zaXRvcnk8Q29uZmlybWFjYW9SZWNlYmltZW50bz4+KFxuICAgICAgZ2V0UmVwb3NpdG9yeVRva2VuKENvbmZpcm1hY2FvUmVjZWJpbWVudG8pLFxuICAgICk7XG4gIH0pO1xuXG4gIGl0KCdkZXZlIGVzdGFyIGRlZmluaWRvJywgKCkgPT4ge1xuICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnb2J0ZXJNZXRyaWNhc1ZvbHVtZScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBtw6l0cmljYXMgZGUgdm9sdW1lIGRlIHBhZ2FtZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrTWV0cmljYXMgPSB7XG4gICAgICAgIHRvdGFsUGFnYW1lbnRvczogMTAwLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogMjAsXG4gICAgICAgIHRvdGFsRmluYWxpemFkb3M6IDcwLFxuICAgICAgICB0b3RhbENhbmNlbGFkb3M6IDEwLFxuICAgICAgICB0b3RhbFZhbG9yUGFnbzogNTAwMDAsXG4gICAgICAgIG1lZGlhVGVtcG9Qcm9jZXNzYW1lbnRvOiA0OCwgLy8gaG9yYXNcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsUGFnYW1lbnRvczogJzEwMCcsXG4gICAgICAgIHRvdGFsRW1Qcm9jZXNzYW1lbnRvOiAnMjAnLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAnNzAnLFxuICAgICAgICB0b3RhbENhbmNlbGFkb3M6ICcxMCcsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAnNTAwMDAuMDAnLFxuICAgICAgICBtZWRpYVRlbXBvUHJvY2Vzc2FtZW50bzogJzQ4LjAwJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJNZXRyaWNhc1ZvbHVtZSgpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja01ldHJpY2FzKTtcbiAgICAgIGV4cGVjdChwYWdhbWVudG9SZXBvc2l0b3J5LmNyZWF0ZVF1ZXJ5QnVpbGRlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciBwZXLDrW9kbyBxdWFuZG8gZXNwZWNpZmljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcblxuICAgICAgY29uc3QgbW9ja01ldHJpY2FzID0ge1xuICAgICAgICB0b3RhbFBhZ2FtZW50b3M6IDUwLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogMTAsXG4gICAgICAgIHRvdGFsRmluYWxpemFkb3M6IDM1LFxuICAgICAgICB0b3RhbENhbmNlbGFkb3M6IDUsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAyNTAwMCxcbiAgICAgICAgbWVkaWFUZW1wb1Byb2Nlc3NhbWVudG86IDM2LCAvLyBob3Jhc1xuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3T25lJykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgdG90YWxQYWdhbWVudG9zOiAnNTAnLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogJzEwJyxcbiAgICAgICAgdG90YWxGaW5hbGl6YWRvczogJzM1JyxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAnNScsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAnMjUwMDAuMDAnLFxuICAgICAgICBtZWRpYVRlbXBvUHJvY2Vzc2FtZW50bzogJzM2LjAwJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJNZXRyaWNhc1ZvbHVtZShkYXRhSW5pY2lvLCBkYXRhRmltKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tNZXRyaWNhcyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci53aGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdwYWdhbWVudG8uZGF0YUNyaWFjYW8gPj0gOmRhdGFJbmljaW8nLFxuICAgICAgICB7IGRhdGFJbmljaW8gfSxcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5hbmRXaGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdwYWdhbWVudG8uZGF0YUNyaWFjYW8gPD0gOmRhdGFGaW0nLFxuICAgICAgICB7IGRhdGFGaW0gfSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdvYnRlck1ldHJpY2FzRWZpY2llbmNpYScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBtw6l0cmljYXMgZGUgZWZpY2nDqm5jaWEgZG8gcHJvY2Vzc2FtZW50byBkZSBwYWdhbWVudG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja01ldHJpY2FzID0ge1xuICAgICAgICB0ZW1wb01lZGlvUG9yU3RhdHVzOiBbXG4gICAgICAgICAgeyBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uQUdFTkRBRE8sIHRlbXBvTWVkaW86IDI0IH0sIC8vIGhvcmFzXG4gICAgICAgICAgeyBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uTElCRVJBRE8sIHRlbXBvTWVkaW86IDQ4IH0sIC8vIGhvcmFzXG4gICAgICAgICAgeyBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uUEFHTywgdGVtcG9NZWRpbzogNzIgfSwgLy8gaG9yYXNcbiAgICAgICAgICB7IHN0YXR1czogU3RhdHVzUGFnYW1lbnRvRW51bS5DT05GSVJNQURPLCB0ZW1wb01lZGlvOiA5NiB9LCAvLyBob3Jhc1xuICAgICAgICBdLFxuICAgICAgICB0YXhhQ29uY2x1c2FvOiAwLjcsIC8vIDcwJSBkb3MgcGFnYW1lbnRvcyBzw6NvIGNvbmNsdcOtZG9zXG4gICAgICAgIHRheGFDYW5jZWxhbWVudG86IDAuMSwgLy8gMTAlIGRvcyBwYWdhbWVudG9zIHPDo28gY2FuY2VsYWRvc1xuICAgICAgICB0ZW1wb01lZGlvVG90YWw6IDk2LCAvLyBob3JhcyBkbyBpbsOtY2lvIGFvIGZpbSBkbyBwcm9jZXNzb1xuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZShbXG4gICAgICAgIHsgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkFHRU5EQURPLCB0ZW1wb01lZGlvOiAnMjQuMDAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkxJQkVSQURPLCB0ZW1wb01lZGlvOiAnNDguMDAnIH0sXG4gICAgICAgIHsgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLlBBR08sIHRlbXBvTWVkaW86ICc3Mi4wMCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uQ09ORklSTUFETywgdGVtcG9NZWRpbzogJzk2LjAwJyB9LFxuICAgICAgXSk7XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRheGFDb25jbHVzYW86ICcwLjcwJyxcbiAgICAgICAgdGF4YUNhbmNlbGFtZW50bzogJzAuMTAnLFxuICAgICAgICB0ZW1wb01lZGlvVG90YWw6ICc5Ni4wMCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLm9idGVyTWV0cmljYXNFZmljaWVuY2lhKCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrTWV0cmljYXMpO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkuY3JlYXRlUXVlcnlCdWlsZGVyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmdyb3VwQnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGZpbHRyYXIgcG9yIHVuaWRhZGUgcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHVuaWRhZGVJZCA9ICd1bmlkYWRlLWlkLTEnO1xuXG4gICAgICBjb25zdCBtb2NrVGVtcG9NZWRpb1BvclN0YXR1cyA9IFtcbiAgICAgICAgeyBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uQUdFTkRBRE8sIHRlbXBvTWVkaW86IDI0IH0sXG4gICAgICAgIHsgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkxJQkVSQURPLCB0ZW1wb01lZGlvOiA0OCB9LFxuICAgICAgXTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZShcbiAgICAgICAgbW9ja1RlbXBvTWVkaW9Qb3JTdGF0dXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgIHN0YXR1czogaXRlbS5zdGF0dXMsXG4gICAgICAgICAgdGVtcG9NZWRpbzogaXRlbS50ZW1wb01lZGlvLnRvU3RyaW5nKCksXG4gICAgICAgIH0pKSxcbiAgICAgICk7XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRheGFDb25jbHVzYW86ICcwLjc1JyxcbiAgICAgICAgdGF4YUNhbmNlbGFtZW50bzogJzAuMDUnLFxuICAgICAgICB0ZW1wb01lZGlvVG90YWw6ICc3Mi4wMCcsXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLm9idGVyTWV0cmljYXNFZmljaWVuY2lhKFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5hbmRXaGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdwYWdhbWVudG8udW5pZGFkZUlkID0gOnVuaWRhZGVJZCcsXG4gICAgICAgIHsgdW5pZGFkZUlkIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnb2J0ZXJNZXRyaWNhc0NvbXByb3ZhbnRlcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBtw6l0cmljYXMgc29icmUgb3MgY29tcHJvdmFudGVzIGRlIHBhZ2FtZW50bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tNZXRyaWNhcyA9IHtcbiAgICAgICAgdG90YWxDb21wcm92YW50ZXM6IDgwLFxuICAgICAgICB0ZW1wb01lZGlvVXBsb2FkOiAzNiwgLy8gaG9yYXMgYXDDs3MgcGFnYW1lbnRvXG4gICAgICAgIHBlcmNlbnR1YWxQYWdhbWVudG9zQ29tQ29tcHJvdmFudGU6IDAuOCwgLy8gODAlIGRvcyBwYWdhbWVudG9zIHTDqm0gY29tcHJvdmFudGVcbiAgICAgICAgdGFtYW5ob01lZGlvQXJxdWl2bzogMTAyNCwgLy8gS0JcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsQ29tcHJvdmFudGVzOiAnODAnLFxuICAgICAgICB0ZW1wb01lZGlvVXBsb2FkOiAnMzYuMDAnLFxuICAgICAgICBwZXJjZW50dWFsUGFnYW1lbnRvc0NvbUNvbXByb3ZhbnRlOiAnMC44MCcsXG4gICAgICAgIHRhbWFuaG9NZWRpb0FycXVpdm86ICcxMDI0LjAwJyxcbiAgICAgIH0pO1xuXG4gICAgICBqZXN0LnNweU9uKGNvbXByb3ZhbnRlUmVwb3NpdG9yeSwgJ2NvdW50JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKDgwKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLm9idGVyTWV0cmljYXNDb21wcm92YW50ZXMoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tNZXRyaWNhcyk7XG4gICAgICBleHBlY3QoY29tcHJvdmFudGVSZXBvc2l0b3J5LmNyZWF0ZVF1ZXJ5QnVpbGRlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciBtw6l0b2RvIGRlIHBhZ2FtZW50byBxdWFuZG8gZXNwZWNpZmljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbWV0b2RvUGFnYW1lbnRvID0gTWV0b2RvUGFnYW1lbnRvRW51bS5QSVg7XG5cbiAgICAgIGNvbnN0IG1vY2tNZXRyaWNhcyA9IHtcbiAgICAgICAgdG90YWxDb21wcm92YW50ZXM6IDUwLFxuICAgICAgICB0ZW1wb01lZGlvVXBsb2FkOiAyNCwgLy8gaG9yYXMgYXDDs3MgcGFnYW1lbnRvXG4gICAgICAgIHBlcmNlbnR1YWxQYWdhbWVudG9zQ29tQ29tcHJvdmFudGU6IDAuOSwgLy8gOTAlIGRvcyBwYWdhbWVudG9zIFBJWCB0w6ptIGNvbXByb3ZhbnRlXG4gICAgICAgIHRhbWFuaG9NZWRpb0FycXVpdm86IDgwMCwgLy8gS0JcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsQ29tcHJvdmFudGVzOiAnNTAnLFxuICAgICAgICB0ZW1wb01lZGlvVXBsb2FkOiAnMjQuMDAnLFxuICAgICAgICBwZXJjZW50dWFsUGFnYW1lbnRvc0NvbUNvbXByb3ZhbnRlOiAnMC45MCcsXG4gICAgICAgIHRhbWFuaG9NZWRpb0FycXVpdm86ICc4MDAuMDAnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5vYnRlck1ldHJpY2FzQ29tcHJvdmFudGVzKFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICBtZXRvZG9QYWdhbWVudG8sXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja01ldHJpY2FzKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmlubmVySm9pbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAncC5tZXRvZG9QYWdhbWVudG8gPSA6bWV0b2RvUGFnYW1lbnRvJyxcbiAgICAgICAgeyBtZXRvZG9QYWdhbWVudG8gfSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdvYnRlck1ldHJpY2FzQ29uZmlybWFjb2VzJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJldG9ybmFyIG3DqXRyaWNhcyBzb2JyZSBhcyBjb25maXJtYcOnw7VlcyBkZSByZWNlYmltZW50bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tNZXRyaWNhcyA9IHtcbiAgICAgICAgdG90YWxDb25maXJtYWNvZXM6IDcwLFxuICAgICAgICB0ZW1wb01lZGlvQ29uZmlybWFjYW86IDcyLCAvLyBob3JhcyBhcMOzcyBwYWdhbWVudG9cbiAgICAgICAgcGVyY2VudHVhbFBhZ2FtZW50b3NDb25maXJtYWRvczogMC43LCAvLyA3MCUgZG9zIHBhZ2FtZW50b3Mgc8OjbyBjb25maXJtYWRvcyBwZWxvIGJlbmVmaWNpw6FyaW9cbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvRXNwb250YW5lYTogMC42LCAvLyA2MCUgZGFzIGNvbmZpcm1hw6fDtWVzIHPDo28gZXNwb250w6JuZWFzXG4gICAgICB9O1xuXG4gICAgICBqZXN0LnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdPbmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2Uoe1xuICAgICAgICB0b3RhbENvbmZpcm1hY29lczogJzcwJyxcbiAgICAgICAgdGVtcG9NZWRpb0NvbmZpcm1hY2FvOiAnNzIuMDAnLFxuICAgICAgICBwZXJjZW50dWFsUGFnYW1lbnRvc0NvbmZpcm1hZG9zOiAnMC43MCcsXG4gICAgICAgIHRheGFDb25maXJtYWNhb0VzcG9udGFuZWE6ICcwLjYwJyxcbiAgICAgIH0pO1xuXG4gICAgICBqZXN0LnNweU9uKGNvbmZpcm1hY2FvUmVwb3NpdG9yeSwgJ2NvdW50JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKDcwKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLm9idGVyTWV0cmljYXNDb25maXJtYWNvZXMoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tNZXRyaWNhcyk7XG4gICAgICBleHBlY3QoY29uZmlybWFjYW9SZXBvc2l0b3J5LmNyZWF0ZVF1ZXJ5QnVpbGRlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciB1bmlkYWRlIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1bmlkYWRlSWQgPSAndW5pZGFkZS1pZC0xJztcblxuICAgICAgY29uc3QgbW9ja01ldHJpY2FzID0ge1xuICAgICAgICB0b3RhbENvbmZpcm1hY29lczogNDAsXG4gICAgICAgIHRlbXBvTWVkaW9Db25maXJtYWNhbzogNDgsIC8vIGhvcmFzIGFww7NzIHBhZ2FtZW50b1xuICAgICAgICBwZXJjZW50dWFsUGFnYW1lbnRvc0NvbmZpcm1hZG9zOiAwLjgsIC8vIDgwJSBkb3MgcGFnYW1lbnRvcyBkYSB1bmlkYWRlIHPDo28gY29uZmlybWFkb3NcbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvRXNwb250YW5lYTogMC43LCAvLyA3MCUgZGFzIGNvbmZpcm1hw6fDtWVzIGRhIHVuaWRhZGUgc8OjbyBlc3BvbnTDom5lYXNcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsQ29uZmlybWFjb2VzOiAnNDAnLFxuICAgICAgICB0ZW1wb01lZGlvQ29uZmlybWFjYW86ICc0OC4wMCcsXG4gICAgICAgIHBlcmNlbnR1YWxQYWdhbWVudG9zQ29uZmlybWFkb3M6ICcwLjgwJyxcbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvRXNwb250YW5lYTogJzAuNzAnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5vYnRlck1ldHJpY2FzQ29uZmlybWFjb2VzKFxuICAgICAgICBudWxsLFxuICAgICAgICBudWxsLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICApO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja01ldHJpY2FzKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmlubmVySm9pbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAncC51bmlkYWRlSWQgPSA6dW5pZGFkZUlkJyxcbiAgICAgICAgeyB1bmlkYWRlSWQgfSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdvYnRlck1ldHJpY2FzVGVtcG9SZWFpcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBtw6l0cmljYXMgZGUgdGVtcG8gcmVhbCBzb2JyZSBwYWdhbWVudG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgbW9ja01ldHJpY2FzID0ge1xuICAgICAgICBwYWdhbWVudG9zVWx0aW1hczI0aDogMTAsXG4gICAgICAgIGNvbmZpcm1hY29lc1BlbmRlbnRlczogMjAsXG4gICAgICAgIHZhbG9yTGliZXJhZG9Ib2plOiA1MDAwLFxuICAgICAgICBwYWdhbWVudG9zTWFpc1JlY2VudGVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdwYWdhbWVudG8taWQtMScsXG4gICAgICAgICAgICB2YWxvcjogNTAwLFxuICAgICAgICAgICAgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLlBBR08sXG4gICAgICAgICAgICBkYXRhQXR1YWxpemFjYW86IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3BhZ2FtZW50by1pZC0yJyxcbiAgICAgICAgICAgIHZhbG9yOiAzMDAsXG4gICAgICAgICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uTElCRVJBRE8sXG4gICAgICAgICAgICBkYXRhQXR1YWxpemFjYW86IG5ldyBEYXRlKCksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvSG9qZTogMC44LCAvLyA4MCUgZG9zIHBhZ2FtZW50b3MgZGUgaG9qZSBmb3JhbSBjb25maXJtYWRvc1xuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3T25lJykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgcGFnYW1lbnRvc1VsdGltYXMyNGg6ICcxMCcsXG4gICAgICAgIGNvbmZpcm1hY29lc1BlbmRlbnRlczogJzIwJyxcbiAgICAgICAgdmFsb3JMaWJlcmFkb0hvamU6ICc1MDAwLjAwJyxcbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvSG9qZTogJzAuODAnLFxuICAgICAgfSk7XG5cbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwYWdhbWVudG8taWQtMScsXG4gICAgICAgICAgdmFsb3I6ICc1MDAuMDAnLFxuICAgICAgICAgIHN0YXR1czogU3RhdHVzUGFnYW1lbnRvRW51bS5QQUdPLFxuICAgICAgICAgIGRhdGFBdHVhbGl6YWNhbzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwYWdhbWVudG8taWQtMicsXG4gICAgICAgICAgdmFsb3I6ICczMDAuMDAnLFxuICAgICAgICAgIHN0YXR1czogU3RhdHVzUGFnYW1lbnRvRW51bS5MSUJFUkFETyxcbiAgICAgICAgICBkYXRhQXR1YWxpemFjYW86IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJNZXRyaWNhc1RlbXBvUmVhaXMoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgcGFnYW1lbnRvc1VsdGltYXMyNGg6IDEwLFxuICAgICAgICBjb25maXJtYWNvZXNQZW5kZW50ZXM6IDIwLFxuICAgICAgICB2YWxvckxpYmVyYWRvSG9qZTogNTAwMCxcbiAgICAgICAgdGF4YUNvbmZpcm1hY2FvSG9qZTogMC44LFxuICAgICAgfSk7XG4gICAgICBleHBlY3QocmVzdWx0YWRvLnBhZ2FtZW50b3NNYWlzUmVjZW50ZXMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChwYWdhbWVudG9SZXBvc2l0b3J5LmNyZWF0ZVF1ZXJ5QnVpbGRlcikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5vcmRlckJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdvYnRlckRhc2hib2FyZCcsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBkYWRvcyBjb25zb2xpZGFkb3MgcGFyYSBkYXNoYm9hcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrVm9sdW1lID0ge1xuICAgICAgICB0b3RhbFBhZ2FtZW50b3M6IDEwMCxcbiAgICAgICAgdG90YWxFbVByb2Nlc3NhbWVudG86IDIwLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiA3MCxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAxMCxcbiAgICAgICAgdG90YWxWYWxvclBhZ286IDUwMDAwLFxuICAgICAgICBtZWRpYVRlbXBvUHJvY2Vzc2FtZW50bzogNDgsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrRWZpY2llbmNpYSA9IHtcbiAgICAgICAgdGVtcG9NZWRpb1BvclN0YXR1czogW1xuICAgICAgICAgIHsgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkFHRU5EQURPLCB0ZW1wb01lZGlvOiAyNCB9LFxuICAgICAgICBdLFxuICAgICAgICB0YXhhQ29uY2x1c2FvOiAwLjcsXG4gICAgICAgIHRheGFDYW5jZWxhbWVudG86IDAuMSxcbiAgICAgICAgdGVtcG9NZWRpb1RvdGFsOiA5NixcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tUZW1wb1JlYWwgPSB7XG4gICAgICAgIHBhZ2FtZW50b3NVbHRpbWFzMjRoOiAxMCxcbiAgICAgICAgY29uZmlybWFjb2VzUGVuZGVudGVzOiAyMCxcbiAgICAgICAgdmFsb3JMaWJlcmFkb0hvamU6IDUwMDAsXG4gICAgICAgIHBhZ2FtZW50b3NNYWlzUmVjZW50ZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ3BhZ2FtZW50by1pZC0xJyxcbiAgICAgICAgICAgIHZhbG9yOiA1MDAsXG4gICAgICAgICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uUEFHTyxcbiAgICAgICAgICAgIGRhdGFBdHVhbGl6YWNhbzogbmV3IERhdGUoKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB0YXhhQ29uZmlybWFjYW9Ib2plOiAwLjgsXG4gICAgICB9O1xuXG4gICAgICAvLyBNb2NrIGRvcyBtw6l0b2RvcyBkbyBzZXJ2acOnb1xuICAgICAgamVzdFxuICAgICAgICAuc3B5T24oc2VydmljZSwgJ29idGVyTWV0cmljYXNWb2x1bWUnKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tWb2x1bWUpO1xuICAgICAgamVzdFxuICAgICAgICAuc3B5T24oc2VydmljZSwgJ29idGVyTWV0cmljYXNFZmljaWVuY2lhJylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrRWZpY2llbmNpYSk7XG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihzZXJ2aWNlLCAnb2J0ZXJNZXRyaWNhc1RlbXBvUmVhaXMnKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tUZW1wb1JlYWwpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2Uub2J0ZXJEYXNoYm9hcmQoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHtcbiAgICAgICAgdm9sdW1lOiBtb2NrVm9sdW1lLFxuICAgICAgICBlZmljaWVuY2lhOiBtb2NrRWZpY2llbmNpYSxcbiAgICAgICAgdGVtcG9SZWFsOiBtb2NrVGVtcG9SZWFsLFxuICAgICAgfSk7XG4gICAgICBleHBlY3Qoc2VydmljZS5vYnRlck1ldHJpY2FzVm9sdW1lKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3Qoc2VydmljZS5vYnRlck1ldHJpY2FzRWZpY2llbmNpYSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHNlcnZpY2Uub2J0ZXJNZXRyaWNhc1RlbXBvUmVhaXMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGFwbGljYXIgZmlsdHJvcyBhIHRvZG9zIG9zIG3DqXRvZG9zIHF1YW5kbyBlc3BlY2lmaWNhZG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcbiAgICAgIGNvbnN0IHVuaWRhZGVJZCA9ICd1bmlkYWRlLWlkLTEnO1xuXG4gICAgICAvLyBNb2NrIGRvcyBtw6l0b2RvcyBkbyBzZXJ2acOnb1xuICAgICAgamVzdFxuICAgICAgICAuc3B5T24oc2VydmljZSwgJ29idGVyTWV0cmljYXNWb2x1bWUnKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHt9IGFzIGFueSk7XG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihzZXJ2aWNlLCAnb2J0ZXJNZXRyaWNhc0VmaWNpZW5jaWEnKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHt9IGFzIGFueSk7XG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihzZXJ2aWNlLCAnb2J0ZXJNZXRyaWNhc1RlbXBvUmVhaXMnKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHt9IGFzIGFueSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgc2VydmljZS5vYnRlckRhc2hib2FyZChkYXRhSW5pY2lvLCBkYXRhRmltLCB1bmlkYWRlSWQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChzZXJ2aWNlLm9idGVyTWV0cmljYXNWb2x1bWUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBkYXRhSW5pY2lvLFxuICAgICAgICBkYXRhRmltLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHNlcnZpY2Uub2J0ZXJNZXRyaWNhc0VmaWNpZW5jaWEpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBkYXRhSW5pY2lvLFxuICAgICAgICBkYXRhRmltLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHNlcnZpY2Uub2J0ZXJNZXRyaWNhc1RlbXBvUmVhaXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHVuaWRhZGVJZCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=