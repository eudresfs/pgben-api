402314d134fa1b4ff0e6556e30a2e2a3
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.RequisitoDocumento = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const tipo_beneficio_entity_1 = require("./tipo-beneficio.entity");
const enums_1 = require("../enums");
let RequisitoDocumento = class RequisitoDocumento {
    id;
    tipo_beneficio_id;
    tipo_beneficio;
    tipo_documento;
    nome;
    obrigatorio;
    descricao;
    validacoes;
    created_at;
    updated_at;
    removed_at;
    // Getters e Setters
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se o requisito foi criado recentemente (últimas 24 horas)
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do registro em dias
     */
    getIdadeRegistroEmDias() {
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    /**
     * Verifica se o requisito foi removido
     */
    foiRemovido() {
        return !!this.removed_at;
    }
    /**
     * Verifica se o requisito está ativo
     */
    isAtivo() {
        return !this.removed_at;
    }
    /**
     * Verifica se é um documento obrigatório
     */
    isObrigatorio() {
        return this.obrigatorio;
    }
    /**
     * Verifica se é um documento opcional
     */
    isOpcional() {
        return !this.obrigatorio;
    }
    /**
     * Verifica se é documento de identificação
     */
    isDocumentoIdentificacao() {
        return (this.tipo_documento === enums_1.TipoDocumentoEnum.RG ||
            this.tipo_documento === enums_1.TipoDocumentoEnum.CPF);
    }
    /**
     * Verifica se é documento de comprovação
     */
    isDocumentoComprovacao() {
        return (this.tipo_documento === enums_1.TipoDocumentoEnum.COMPROVANTE_RESIDENCIA ||
            this.tipo_documento === enums_1.TipoDocumentoEnum.COMPROVANTE_RENDA);
    }
    /**
     * Verifica se é certidão
     */
    isCertidao() {
        return this.tipo_documento === enums_1.TipoDocumentoEnum.CERTIDAO_NASCIMENTO;
    }
    /**
     * Verifica se é documento médico
     */
    isDocumentoMedico() {
        return this.tipo_documento === enums_1.TipoDocumentoEnum.DECLARACAO_MEDICA;
    }
    /**
     * Verifica se é documento de moradia
     */
    isDocumentoMoradia() {
        return (this.tipo_documento === enums_1.TipoDocumentoEnum.CONTRATO_ALUGUEL ||
            this.tipo_documento === enums_1.TipoDocumentoEnum.COMPROVANTE_RESIDENCIA);
    }
    /**
     * Obtém a descrição do tipo de documento
     */
    getDescricaoTipoDocumento() {
        const descricoes = {
            // Documentos de identificação
            [enums_1.TipoDocumentoEnum.CPF]: 'Cadastro de Pessoa Física (CPF)',
            [enums_1.TipoDocumentoEnum.RG]: 'Registro Geral (RG)',
            [enums_1.TipoDocumentoEnum.CNH]: 'Carteira Nacional de Habilitação (CNH)',
            [enums_1.TipoDocumentoEnum.PASSAPORTE]: 'Passaporte',
            // Certidões
            [enums_1.TipoDocumentoEnum.CERTIDAO_NASCIMENTO]: 'Certidão de Nascimento',
            [enums_1.TipoDocumentoEnum.CERTIDAO_CASAMENTO]: 'Certidão de Casamento',
            [enums_1.TipoDocumentoEnum.CERTIDAO_OBITO]: 'Certidão de Óbito',
            // Comprovantes básicos
            [enums_1.TipoDocumentoEnum.COMPROVANTE_RESIDENCIA]: 'Comprovante de Residência',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_RENDA]: 'Comprovante de Renda',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_ESCOLARIDADE]: 'Comprovante de Escolaridade',
            // Documentos médicos e de saúde
            [enums_1.TipoDocumentoEnum.DECLARACAO_MEDICA]: 'Declaração Médica',
            [enums_1.TipoDocumentoEnum.CARTAO_VACINA]: 'Cartão de Vacinação',
            [enums_1.TipoDocumentoEnum.CARTAO_SUS]: 'Cartão do SUS',
            [enums_1.TipoDocumentoEnum.LAUDO_MEDICO]: 'Laudo Médico',
            [enums_1.TipoDocumentoEnum.ATESTADO_MEDICO]: 'Atestado Médico',
            [enums_1.TipoDocumentoEnum.EXAME_PRE_NATAL]: 'Exame Pré-Natal',
            // Documentos habitacionais
            [enums_1.TipoDocumentoEnum.CONTRATO_ALUGUEL]: 'Contrato de Aluguel',
            [enums_1.TipoDocumentoEnum.ESCRITURA_IMOVEL]: 'Escritura do Imóvel',
            [enums_1.TipoDocumentoEnum.IPTU]: 'IPTU',
            [enums_1.TipoDocumentoEnum.CONTA_AGUA]: 'Conta de Água',
            [enums_1.TipoDocumentoEnum.CONTA_LUZ]: 'Conta de Luz',
            [enums_1.TipoDocumentoEnum.CONTA_TELEFONE]: 'Conta de Telefone',
            // Documentos trabalhistas e previdenciários
            [enums_1.TipoDocumentoEnum.CARTEIRA_TRABALHO]: 'Carteira de Trabalho',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_DESEMPREGO]: 'Comprovante de Desemprego',
            [enums_1.TipoDocumentoEnum.EXTRATO_FGTS]: 'Extrato do FGTS',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_APOSENTADORIA]: 'Comprovante de Aposentadoria',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_PENSAO]: 'Comprovante de Pensão',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_BENEFICIO_INSS]: 'Comprovante de Benefício INSS',
            // Documentos bancários
            [enums_1.TipoDocumentoEnum.EXTRATO_BANCARIO]: 'Extrato Bancário',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_PIX]: 'Comprovante PIX',
            [enums_1.TipoDocumentoEnum.DADOS_BANCARIOS]: 'Dados Bancários',
            // Documentos familiares e sociais
            [enums_1.TipoDocumentoEnum.DECLARACAO_COMPOSICAO_FAMILIAR]: 'Declaração de Composição Familiar',
            [enums_1.TipoDocumentoEnum.DECLARACAO_UNIAO_ESTAVEL]: 'Declaração de União Estável',
            [enums_1.TipoDocumentoEnum.GUARDA_MENOR]: 'Termo de Guarda de Menor',
            [enums_1.TipoDocumentoEnum.TUTELA]: 'Termo de Tutela',
            // Documentos específicos para benefícios
            [enums_1.TipoDocumentoEnum.BOLETIM_OCORRENCIA]: 'Boletim de Ocorrência',
            [enums_1.TipoDocumentoEnum.MEDIDA_PROTETIVA]: 'Medida Protetiva',
            [enums_1.TipoDocumentoEnum.TERMO_ACOLHIMENTO]: 'Termo de Acolhimento',
            [enums_1.TipoDocumentoEnum.RELATORIO_SOCIAL]: 'Relatório Social',
            [enums_1.TipoDocumentoEnum.PARECER_TECNICO]: 'Parecer Técnico',
            // Documentos de programas sociais
            [enums_1.TipoDocumentoEnum.CARTAO_CADUNICO]: 'Cartão CadÚnico',
            [enums_1.TipoDocumentoEnum.FOLHA_RESUMO_CADUNICO]: 'Folha Resumo CadÚnico',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_BOLSA_FAMILIA]: 'Comprovante Bolsa Família',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_BPC]: 'Comprovante BPC',
            // Documentos educacionais
            [enums_1.TipoDocumentoEnum.DECLARACAO_ESCOLAR]: 'Declaração Escolar',
            [enums_1.TipoDocumentoEnum.HISTORICO_ESCOLAR]: 'Histórico Escolar',
            [enums_1.TipoDocumentoEnum.MATRICULA_ESCOLAR]: 'Comprovante de Matrícula Escolar',
            // Documentos específicos para mortalidade
            [enums_1.TipoDocumentoEnum.DECLARACAO_OBITO]: 'Declaração de Óbito',
            [enums_1.TipoDocumentoEnum.AUTORIZACAO_SEPULTAMENTO]: 'Autorização de Sepultamento',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_PARENTESCO]: 'Comprovante de Parentesco',
            // Documentos específicos para natalidade
            [enums_1.TipoDocumentoEnum.CARTAO_PRE_NATAL]: 'Cartão Pré-Natal',
            [enums_1.TipoDocumentoEnum.DECLARACAO_NASCIDO_VIVO]: 'Declaração de Nascido Vivo',
            [enums_1.TipoDocumentoEnum.COMPROVANTE_GESTACAO]: 'Comprovante de Gestação',
            // Documentos específicos para passagens
            [enums_1.TipoDocumentoEnum.COMPROVANTE_VIAGEM]: 'Comprovante de Viagem',
            [enums_1.TipoDocumentoEnum.AUTORIZACAO_VIAGEM]: 'Autorização de Viagem',
            [enums_1.TipoDocumentoEnum.BILHETE_PASSAGEM]: 'Bilhete de Passagem',
            // Documentos diversos
            [enums_1.TipoDocumentoEnum.PROCURACAO]: 'Procuração',
            [enums_1.TipoDocumentoEnum.DECLARACAO_HIPOSSUFICIENCIA]: 'Declaração de Hipossuficiência',
            [enums_1.TipoDocumentoEnum.TERMO_RESPONSABILIDADE]: 'Termo de Responsabilidade',
            [enums_1.TipoDocumentoEnum.FOTO_3X4]: 'Foto 3x4',
            [enums_1.TipoDocumentoEnum.OUTRO]: 'Outro Documento',
        };
        return descricoes[this.tipo_documento] || 'Documento não identificado';
    }
    /**
     * Verifica se tem validações definidas
     */
    temValidacoes() {
        return !!this.validacoes && Object.keys(this.validacoes).length > 0;
    }
    /**
     * Verifica se tem validação de formato
     */
    temValidacaoFormato() {
        return (this.temValidacoes() &&
            !!this.validacoes.formato &&
            this.validacoes.formato.length > 0);
    }
    /**
     * Verifica se tem validação de tamanho
     */
    temValidacaoTamanho() {
        return (this.temValidacoes() &&
            this.validacoes.tamanho_maximo !== undefined &&
            this.validacoes.tamanho_maximo !== null);
    }
    /**
     * Verifica se tem validação de validade
     */
    temValidacaoValidade() {
        return (this.temValidacoes() &&
            this.validacoes.validade_maxima !== undefined &&
            this.validacoes.validade_maxima !== null);
    }
    /**
     * Obtém os formatos aceitos
     */
    getFormatosAceitos() {
        if (!this.temValidacaoFormato())
            return [];
        return this.validacoes.formato || [];
    }
    /**
     * Obtém o tamanho máximo em MB
     */
    getTamanhoMaximo() {
        if (!this.temValidacaoTamanho())
            return null;
        return this.validacoes.tamanho_maximo ?? null;
    }
    /**
     * Obtém a validade máxima em dias
     */
    getValidadeMaxima() {
        if (!this.temValidacaoValidade())
            return null;
        return this.validacoes.validade_maxima ?? null;
    }
    /**
     * Obtém o tamanho máximo formatado
     */
    getTamanhoMaximoFormatado() {
        const tamanho = this.getTamanhoMaximo();
        if (!tamanho)
            return 'Sem limite de tamanho';
        if (tamanho < 1) {
            return `${(tamanho * 1024).toFixed(0)} KB`;
        }
        else {
            return `${tamanho} MB`;
        }
    }
    /**
     * Obtém a validade máxima formatada
     */
    getValidadeMaximaFormatada() {
        const validade = this.getValidadeMaxima();
        if (!validade)
            return 'Sem limite de validade';
        if (validade < 30) {
            return `${validade} dia(s)`;
        }
        else if (validade < 365) {
            const meses = Math.floor(validade / 30);
            return `${meses} mês(es)`;
        }
        else {
            const anos = Math.floor(validade / 365);
            return `${anos} ano(s)`;
        }
    }
    /**
     * Verifica se um formato é aceito
     */
    formatoEhAceito(formato) {
        if (!this.temValidacaoFormato())
            return true;
        return this.getFormatosAceitos().includes(formato.toLowerCase());
    }
    /**
     * Verifica se um tamanho é válido (em bytes)
     */
    tamanhoEhValido(tamanhoBytes) {
        const tamanhoMaximo = this.getTamanhoMaximo();
        if (!tamanhoMaximo)
            return true;
        const tamanhoMaximoBytes = tamanhoMaximo * 1024 * 1024; // Converte MB para bytes
        return tamanhoBytes <= tamanhoMaximoBytes;
    }
    /**
     * Verifica se uma data de emissão é válida
     */
    dataEmissaoEhValida(dataEmissao) {
        const validadeMaxima = this.getValidadeMaxima();
        if (!validadeMaxima)
            return true;
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - dataEmissao.getTime());
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        return diffDays <= validadeMaxima;
    }
    /**
     * Verifica se pertence a um tipo de benefício
     */
    pertenceAoTipoBeneficio(tipoBeneficioId) {
        return this.tipo_beneficio_id === tipoBeneficioId;
    }
    /**
     * Obtém um resumo do requisito
     */
    getSummary() {
        const descricao = this.getDescricaoTipoDocumento();
        const obrigatoriedade = this.isObrigatorio() ? 'Obrigatório' : 'Opcional';
        return `${descricao} - ${obrigatoriedade}`;
    }
    /**
     * Gera uma chave única para o requisito
     */
    getUniqueKey() {
        return `requisito_${this.tipo_beneficio_id}_${this.tipo_documento}`;
    }
    /**
     * Verifica se o requisito é consistente
     */
    isConsistente() {
        // Verifica se tem tipo de benefício
        if (!this.tipo_beneficio_id)
            return false;
        // Verifica se tem tipo de documento válido
        if (!Object.values(enums_1.TipoDocumentoEnum).includes(this.tipo_documento))
            return false;
        // Verifica validações se existirem
        if (this.temValidacoes()) {
            if (this.temValidacaoTamanho() &&
                this.validacoes.tamanho_maximo !== undefined &&
                this.validacoes.tamanho_maximo <= 0) {
                return false;
            }
            if (this.temValidacaoValidade() &&
                this.validacoes.validade_maxima !== undefined &&
                this.validacoes.validade_maxima <= 0) {
                return false;
            }
        }
        return true;
    }
    /**
     * Verifica se pode ser removido
     */
    podeSerRemovido() {
        // Não pode remover se já foi removido
        if (this.foiRemovido())
            return false;
        // Pode implementar lógica adicional aqui
        // Por exemplo, verificar se tem documentos associados
        return true;
    }
    /**
     * Clona o requisito (sem ID)
     */
    clone() {
        return {
            tipo_beneficio_id: this.tipo_beneficio_id,
            tipo_documento: this.tipo_documento,
            obrigatorio: this.obrigatorio,
            descricao: this.descricao,
            validacoes: this.validacoes
                ? JSON.parse(JSON.stringify(this.validacoes))
                : null,
        };
    }
    /**
     * Verifica se é um requisito crítico
     */
    isCritico() {
        // Documentos de identificação são sempre críticos
        if (this.isDocumentoIdentificacao())
            return true;
        // Documentos obrigatórios são críticos
        if (this.isObrigatorio())
            return true;
        return false;
    }
    /**
     * Obtém a categoria do documento
     */
    getCategoria() {
        if (this.isDocumentoIdentificacao())
            return 'IDENTIFICACAO';
        if (this.isDocumentoComprovacao())
            return 'COMPROVACAO';
        if (this.isCertidao())
            return 'CERTIDAO';
        if (this.isDocumentoMedico())
            return 'MEDICO';
        if (this.isDocumentoMoradia())
            return 'MORADIA';
        return 'OUTRO';
    }
    /**
     * Obtém a prioridade do documento (1 = mais prioritário)
     */
    getPrioridade() {
        if (this.isDocumentoIdentificacao())
            return 1;
        if (this.isObrigatorio())
            return 2;
        return 3;
    }
    /**
     * Formata a data de criação
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de atualização
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleDateString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            tipo_documento: this.tipo_documento,
            obrigatorio: this.obrigatorio,
            created_at: this.created_at,
            updated_at: this.updated_at,
        };
    }
    /**
     * Obtém sugestões de melhoria para o requisito
     */
    getSugestoesMelhoria() {
        const sugestoes = [];
        if (!this.descricao || this.descricao.trim().length === 0) {
            sugestoes.push('Adicionar descrição detalhada do documento');
        }
        if (!this.temValidacoes()) {
            sugestoes.push('Definir validações para o documento');
        }
        if (this.isDocumentoIdentificacao() && !this.isObrigatorio()) {
            sugestoes.push('Documentos de identificação devem ser obrigatórios');
        }
        if (!this.isConsistente()) {
            sugestoes.push('Verificar e corrigir inconsistências nos dados');
        }
        return sugestoes;
    }
    /**
     * Verifica se precisa de atualização (dados muito antigos)
     */
    precisaAtualizacao() {
        // Dados com mais de 6 meses podem precisar de revisão
        const seisMesesAtras = new Date();
        seisMesesAtras.setMonth(seisMesesAtras.getMonth() - 6);
        return this.updated_at < seisMesesAtras;
    }
    /**
     * Obtém estatísticas do requisito
     */
    getEstatisticas() {
        return {
            categoria: this.getCategoria(),
            prioridade: this.getPrioridade(),
            obrigatorio: this.isObrigatorio(),
            temValidacoes: this.temValidacoes(),
            formatosAceitos: this.getFormatosAceitos().length,
            tamanhoMaximo: this.getTamanhoMaximoFormatado(),
            validadeMaxima: this.getValidadeMaximaFormatada(),
        };
    }
};
exports.RequisitoDocumento = RequisitoDocumento;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], RequisitoDocumento.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Tipo de benefício é obrigatório' }),
    __metadata("design:type", String)
], RequisitoDocumento.prototype, "tipo_beneficio_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => tipo_beneficio_entity_1.TipoBeneficio, (tipoBeneficio) => tipoBeneficio.requisito_documento),
    (0, typeorm_1.JoinColumn)({ name: 'tipo_beneficio_id' }),
    __metadata("design:type", typeof (_a = typeof tipo_beneficio_entity_1.TipoBeneficio !== "undefined" && tipo_beneficio_entity_1.TipoBeneficio) === "function" ? _a : Object)
], RequisitoDocumento.prototype, "tipo_beneficio", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: enums_1.TipoDocumentoEnum,
        enumName: 'tipo_documento_enum',
    }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Tipo de documento é obrigatório' }),
    __metadata("design:type", typeof (_b = typeof enums_1.TipoDocumentoEnum !== "undefined" && enums_1.TipoDocumentoEnum) === "function" ? _b : Object)
], RequisitoDocumento.prototype, "tipo_documento", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'varchar', length: 255 }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome do documento é obrigatório' }),
    __metadata("design:type", String)
], RequisitoDocumento.prototype, "nome", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: true }),
    __metadata("design:type", Boolean)
], RequisitoDocumento.prototype, "obrigatorio", void 0);
__decorate([
    (0, typeorm_1.Column)('text', { nullable: true }),
    __metadata("design:type", String)
], RequisitoDocumento.prototype, "descricao", void 0);
__decorate([
    (0, typeorm_1.Column)('jsonb', { nullable: true }),
    __metadata("design:type", Object)
], RequisitoDocumento.prototype, "validacoes", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], RequisitoDocumento.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], RequisitoDocumento.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], RequisitoDocumento.prototype, "removed_at", void 0);
exports.RequisitoDocumento = RequisitoDocumento = __decorate([
    (0, typeorm_1.Entity)('requisito_documento'),
    (0, typeorm_1.Index)(['tipo_beneficio_id', 'tipo_documento'], { unique: true })
], RequisitoDocumento);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxyZXF1aXNpdG8tZG9jdW1lbnRvLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBVWlCO0FBQ2pCLHFEQUE2QztBQUM3QyxtRUFBd0Q7QUFDeEQsb0NBQTZDO0FBSXRDLElBQU0sa0JBQWtCLEdBQXhCLE1BQU0sa0JBQWtCO0lBRTdCLEVBQUUsQ0FBUztJQUlYLGlCQUFpQixDQUFTO0lBTzFCLGNBQWMsQ0FBZ0I7SUFROUIsY0FBYyxDQUFvQjtJQUlsQyxJQUFJLENBQVM7SUFHYixXQUFXLENBQVU7SUFHckIsU0FBUyxDQUFTO0lBR2xCLFVBQVUsQ0FJUjtJQUdGLFVBQVUsQ0FBTztJQUdqQixVQUFVLENBQU87SUFHakIsVUFBVSxDQUFPO0lBRWpCLG9CQUFvQjtJQUNwQixJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxzQkFBc0I7SUFFdEI7O09BRUc7SUFDSCxvQkFBb0I7UUFDbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixNQUFNLFVBQVUsR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDbkUsT0FBTyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztJQUN0QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxzQkFBc0I7UUFDcEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixN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QUFJLEVBQUUseUJBQWlCO1FBQ3ZCLFFBQVEsRUFBRSxxQkFBcUI7S0FDaEMsQ0FBQztJQUNELElBQUEsNEJBQVUsRUFBQyxFQUFFLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxDQUFDO2tEQUMzQyx5QkFBaUIsb0JBQWpCLHlCQUFpQjswREFBQztBQUlsQztJQUZDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQ3hDLElBQUEsNEJBQVUsRUFBQyxFQUFFLE9BQU8sRUFBRSxpQ0FBaUMsRUFBRSxDQUFDOztnREFDOUM7QUFHYjtJQURDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQzs7dURBQ0w7QUFHckI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOztxREFDakI7QUFHbEI7SUFEQyxJQUFBLGdCQUFNLEVBQUMsT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDOztzREFLbEM7QUFHRjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1AsSUFBSSxvQkFBSixJQUFJO3NEQUFDO0FBR2pCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7c0RBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTtzREFBQzs2QkEvQ04sa0JBQWtCO0lBRjlCLElBQUEsZ0JBQU0sRUFBQyxxQkFBcUIsQ0FBQztJQUM3QixJQUFBLGVBQUssRUFBQyxDQUFDLG1CQUFtQixFQUFFLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQUM7R0FDcEQsa0JBQWtCLENBc2xCOUIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxyZXF1aXNpdG8tZG9jdW1lbnRvLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENvbHVtbixcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcbiAgVXBkYXRlRGF0ZUNvbHVtbixcbiAgRGVsZXRlRGF0ZUNvbHVtbixcbiAgTWFueVRvT25lLFxuICBKb2luQ29sdW1uLFxuICBJbmRleCxcbn0gZnJvbSAndHlwZW9ybSc7XG5pbXBvcnQgeyBJc05vdEVtcHR5IH0gZnJvbSAnY2xhc3MtdmFsaWRhdG9yJztcbmltcG9ydCB7IFRpcG9CZW5lZmljaW8gfSBmcm9tICcuL3RpcG8tYmVuZWZpY2lvLmVudGl0eSc7XG5pbXBvcnQgeyBUaXBvRG9jdW1lbnRvRW51bSB9IGZyb20gJy4uL2VudW1zJztcblxuQEVudGl0eSgncmVxdWlzaXRvX2RvY3VtZW50bycpXG5ASW5kZXgoWyd0aXBvX2JlbmVmaWNpb19pZCcsICd0aXBvX2RvY3VtZW50byddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuZXhwb3J0IGNsYXNzIFJlcXVpc2l0b0RvY3VtZW50byB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnVGlwbyBkZSBiZW5lZsOtY2lvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgdGlwb19iZW5lZmljaW9faWQ6IHN0cmluZztcblxuICBATWFueVRvT25lKFxuICAgICgpID0+IFRpcG9CZW5lZmljaW8sXG4gICAgKHRpcG9CZW5lZmljaW8pID0+IHRpcG9CZW5lZmljaW8ucmVxdWlzaXRvX2RvY3VtZW50byxcbiAgKVxuICBASm9pbkNvbHVtbih7IG5hbWU6ICd0aXBvX2JlbmVmaWNpb19pZCcgfSlcbiAgdGlwb19iZW5lZmljaW86IFRpcG9CZW5lZmljaW87XG5cbiAgQENvbHVtbih7XG4gICAgdHlwZTogJ2VudW0nLFxuICAgIGVudW06IFRpcG9Eb2N1bWVudG9FbnVtLFxuICAgIGVudW1OYW1lOiAndGlwb19kb2N1bWVudG9fZW51bScsXG4gIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ1RpcG8gZGUgZG9jdW1lbnRvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgdGlwb19kb2N1bWVudG86IFRpcG9Eb2N1bWVudG9FbnVtO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAndmFyY2hhcicsIGxlbmd0aDogMjU1IH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ05vbWUgZG8gZG9jdW1lbnRvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgbm9tZTogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBkZWZhdWx0OiB0cnVlIH0pXG4gIG9icmlnYXRvcmlvOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oJ3RleHQnLCB7IG51bGxhYmxlOiB0cnVlIH0pXG4gIGRlc2NyaWNhbzogc3RyaW5nO1xuXG4gIEBDb2x1bW4oJ2pzb25iJywgeyBudWxsYWJsZTogdHJ1ZSB9KVxuICB2YWxpZGFjb2VzOiB7XG4gICAgZm9ybWF0bz86IHN0cmluZ1tdO1xuICAgIHRhbWFuaG9fbWF4aW1vPzogbnVtYmVyO1xuICAgIHZhbGlkYWRlX21heGltYT86IG51bWJlcjtcbiAgfTtcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkX2F0OiBEYXRlO1xuXG4gIEBEZWxldGVEYXRlQ29sdW1uKClcbiAgcmVtb3ZlZF9hdDogRGF0ZTtcblxuICAvLyBHZXR0ZXJzIGUgU2V0dGVyc1xuICBnZXQgY3JlYXRlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZWRfYXQ7XG4gIH1cblxuICBnZXQgdXBkYXRlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZWRfYXQ7XG4gIH1cblxuICBnZXQgcmVtb3ZlZEF0KCk6IERhdGUge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZWRfYXQ7XG4gIH1cblxuICAvLyBNw6l0b2RvcyBVdGlsaXTDoXJpb3NcblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyByZXF1aXNpdG8gZm9pIGNyaWFkbyByZWNlbnRlbWVudGUgKMO6bHRpbWFzIDI0IGhvcmFzKVxuICAgKi9cbiAgaXNDcmlhZG9SZWNlbnRlbWVudGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWdvcmEgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHVtRGlhQXRyYXMgPSBuZXcgRGF0ZShhZ29yYS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0ID4gdW1EaWFBdHJhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIGEgaWRhZGUgZG8gcmVnaXN0cm8gZW0gZGlhc1xuICAgKi9cbiAgZ2V0SWRhZGVSZWdpc3Ryb0VtRGlhcygpOiBudW1iZXIge1xuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmVGltZSA9IE1hdGguYWJzKGFnb3JhLmdldFRpbWUoKSAtIHRoaXMuY3JlYXRlZF9hdC5nZXRUaW1lKCkpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gcmVxdWlzaXRvIGZvaSByZW1vdmlkb1xuICAgKi9cbiAgZm9pUmVtb3ZpZG8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhdGhpcy5yZW1vdmVkX2F0O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gcmVxdWlzaXRvIGVzdMOhIGF0aXZvXG4gICAqL1xuICBpc0F0aXZvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5yZW1vdmVkX2F0O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIHVtIGRvY3VtZW50byBvYnJpZ2F0w7NyaW9cbiAgICovXG4gIGlzT2JyaWdhdG9yaW8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMub2JyaWdhdG9yaW87XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgdW0gZG9jdW1lbnRvIG9wY2lvbmFsXG4gICAqL1xuICBpc09wY2lvbmFsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5vYnJpZ2F0b3JpbztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBkb2N1bWVudG8gZGUgaWRlbnRpZmljYcOnw6NvXG4gICAqL1xuICBpc0RvY3VtZW50b0lkZW50aWZpY2FjYW8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudGlwb19kb2N1bWVudG8gPT09IFRpcG9Eb2N1bWVudG9FbnVtLlJHIHx8XG4gICAgICB0aGlzLnRpcG9fZG9jdW1lbnRvID09PSBUaXBvRG9jdW1lbnRvRW51bS5DUEZcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGRvY3VtZW50byBkZSBjb21wcm92YcOnw6NvXG4gICAqL1xuICBpc0RvY3VtZW50b0NvbXByb3ZhY2FvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnRpcG9fZG9jdW1lbnRvID09PSBUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9SRVNJREVOQ0lBIHx8XG4gICAgICB0aGlzLnRpcG9fZG9jdW1lbnRvID09PSBUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9SRU5EQVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgY2VydGlkw6NvXG4gICAqL1xuICBpc0NlcnRpZGFvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRpcG9fZG9jdW1lbnRvID09PSBUaXBvRG9jdW1lbnRvRW51bS5DRVJUSURBT19OQVNDSU1FTlRPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGRvY3VtZW50byBtw6lkaWNvXG4gICAqL1xuICBpc0RvY3VtZW50b01lZGljbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50aXBvX2RvY3VtZW50byA9PT0gVGlwb0RvY3VtZW50b0VudW0uREVDTEFSQUNBT19NRURJQ0E7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgZG9jdW1lbnRvIGRlIG1vcmFkaWFcbiAgICovXG4gIGlzRG9jdW1lbnRvTW9yYWRpYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy50aXBvX2RvY3VtZW50byA9PT0gVGlwb0RvY3VtZW50b0VudW0uQ09OVFJBVE9fQUxVR1VFTCB8fFxuICAgICAgdGhpcy50aXBvX2RvY3VtZW50byA9PT0gVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfUkVTSURFTkNJQVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZGVzY3Jpw6fDo28gZG8gdGlwbyBkZSBkb2N1bWVudG9cbiAgICovXG4gIGdldERlc2NyaWNhb1RpcG9Eb2N1bWVudG8oKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXNjcmljb2VzID0ge1xuICAgICAgLy8gRG9jdW1lbnRvcyBkZSBpZGVudGlmaWNhw6fDo29cbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DUEZdOiAnQ2FkYXN0cm8gZGUgUGVzc29hIEbDrXNpY2EgKENQRiknLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLlJHXTogJ1JlZ2lzdHJvIEdlcmFsIChSRyknLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNOSF06ICdDYXJ0ZWlyYSBOYWNpb25hbCBkZSBIYWJpbGl0YcOnw6NvIChDTkgpJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5QQVNTQVBPUlRFXTogJ1Bhc3NhcG9ydGUnLFxuXG4gICAgICAvLyBDZXJ0aWTDtWVzXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ0VSVElEQU9fTkFTQ0lNRU5UT106ICdDZXJ0aWTDo28gZGUgTmFzY2ltZW50bycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ0VSVElEQU9fQ0FTQU1FTlRPXTogJ0NlcnRpZMOjbyBkZSBDYXNhbWVudG8nLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNFUlRJREFPX09CSVRPXTogJ0NlcnRpZMOjbyBkZSDDk2JpdG8nLFxuXG4gICAgICAvLyBDb21wcm92YW50ZXMgYsOhc2ljb3NcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9SRVNJREVOQ0lBXTogJ0NvbXByb3ZhbnRlIGRlIFJlc2lkw6puY2lhJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9SRU5EQV06ICdDb21wcm92YW50ZSBkZSBSZW5kYScsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfRVNDT0xBUklEQURFXTpcbiAgICAgICAgJ0NvbXByb3ZhbnRlIGRlIEVzY29sYXJpZGFkZScsXG5cbiAgICAgIC8vIERvY3VtZW50b3MgbcOpZGljb3MgZSBkZSBzYcO6ZGVcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5ERUNMQVJBQ0FPX01FRElDQV06ICdEZWNsYXJhw6fDo28gTcOpZGljYScsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ0FSVEFPX1ZBQ0lOQV06ICdDYXJ0w6NvIGRlIFZhY2luYcOnw6NvJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DQVJUQU9fU1VTXTogJ0NhcnTDo28gZG8gU1VTJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5MQVVET19NRURJQ09dOiAnTGF1ZG8gTcOpZGljbycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQVRFU1RBRE9fTUVESUNPXTogJ0F0ZXN0YWRvIE3DqWRpY28nLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkVYQU1FX1BSRV9OQVRBTF06ICdFeGFtZSBQcsOpLU5hdGFsJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyBoYWJpdGFjaW9uYWlzXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09OVFJBVE9fQUxVR1VFTF06ICdDb250cmF0byBkZSBBbHVndWVsJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5FU0NSSVRVUkFfSU1PVkVMXTogJ0VzY3JpdHVyYSBkbyBJbcOzdmVsJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5JUFRVXTogJ0lQVFUnLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNPTlRBX0FHVUFdOiAnQ29udGEgZGUgw4FndWEnLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNPTlRBX0xVWl06ICdDb250YSBkZSBMdXonLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNPTlRBX1RFTEVGT05FXTogJ0NvbnRhIGRlIFRlbGVmb25lJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyB0cmFiYWxoaXN0YXMgZSBwcmV2aWRlbmNpw6FyaW9zXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ0FSVEVJUkFfVFJBQkFMSE9dOiAnQ2FydGVpcmEgZGUgVHJhYmFsaG8nLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkNPTVBST1ZBTlRFX0RFU0VNUFJFR09dOiAnQ29tcHJvdmFudGUgZGUgRGVzZW1wcmVnbycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uRVhUUkFUT19GR1RTXTogJ0V4dHJhdG8gZG8gRkdUUycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfQVBPU0VOVEFET1JJQV06XG4gICAgICAgICdDb21wcm92YW50ZSBkZSBBcG9zZW50YWRvcmlhJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9QRU5TQU9dOiAnQ29tcHJvdmFudGUgZGUgUGVuc8OjbycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfQkVORUZJQ0lPX0lOU1NdOlxuICAgICAgICAnQ29tcHJvdmFudGUgZGUgQmVuZWbDrWNpbyBJTlNTJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyBiYW5jw6FyaW9zXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uRVhUUkFUT19CQU5DQVJJT106ICdFeHRyYXRvIEJhbmPDoXJpbycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfUElYXTogJ0NvbXByb3ZhbnRlIFBJWCcsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uREFET1NfQkFOQ0FSSU9TXTogJ0RhZG9zIEJhbmPDoXJpb3MnLFxuXG4gICAgICAvLyBEb2N1bWVudG9zIGZhbWlsaWFyZXMgZSBzb2NpYWlzXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uREVDTEFSQUNBT19DT01QT1NJQ0FPX0ZBTUlMSUFSXTpcbiAgICAgICAgJ0RlY2xhcmHDp8OjbyBkZSBDb21wb3Npw6fDo28gRmFtaWxpYXInLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkRFQ0xBUkFDQU9fVU5JQU9fRVNUQVZFTF06XG4gICAgICAgICdEZWNsYXJhw6fDo28gZGUgVW5pw6NvIEVzdMOhdmVsJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5HVUFSREFfTUVOT1JdOiAnVGVybW8gZGUgR3VhcmRhIGRlIE1lbm9yJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5UVVRFTEFdOiAnVGVybW8gZGUgVHV0ZWxhJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyBlc3BlY8OtZmljb3MgcGFyYSBiZW5lZsOtY2lvc1xuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkJPTEVUSU1fT0NPUlJFTkNJQV06ICdCb2xldGltIGRlIE9jb3Jyw6puY2lhJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5NRURJREFfUFJPVEVUSVZBXTogJ01lZGlkYSBQcm90ZXRpdmEnLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLlRFUk1PX0FDT0xISU1FTlRPXTogJ1Rlcm1vIGRlIEFjb2xoaW1lbnRvJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5SRUxBVE9SSU9fU09DSUFMXTogJ1JlbGF0w7NyaW8gU29jaWFsJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5QQVJFQ0VSX1RFQ05JQ09dOiAnUGFyZWNlciBUw6ljbmljbycsXG5cbiAgICAgIC8vIERvY3VtZW50b3MgZGUgcHJvZ3JhbWFzIHNvY2lhaXNcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DQVJUQU9fQ0FEVU5JQ09dOiAnQ2FydMOjbyBDYWTDmm5pY28nLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkZPTEhBX1JFU1VNT19DQURVTklDT106ICdGb2xoYSBSZXN1bW8gQ2Fkw5puaWNvJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9CT0xTQV9GQU1JTElBXTpcbiAgICAgICAgJ0NvbXByb3ZhbnRlIEJvbHNhIEZhbcOtbGlhJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9CUENdOiAnQ29tcHJvdmFudGUgQlBDJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyBlZHVjYWNpb25haXNcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5ERUNMQVJBQ0FPX0VTQ09MQVJdOiAnRGVjbGFyYcOnw6NvIEVzY29sYXInLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkhJU1RPUklDT19FU0NPTEFSXTogJ0hpc3TDs3JpY28gRXNjb2xhcicsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uTUFUUklDVUxBX0VTQ09MQVJdOiAnQ29tcHJvdmFudGUgZGUgTWF0csOtY3VsYSBFc2NvbGFyJyxcblxuICAgICAgLy8gRG9jdW1lbnRvcyBlc3BlY8OtZmljb3MgcGFyYSBtb3J0YWxpZGFkZVxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkRFQ0xBUkFDQU9fT0JJVE9dOiAnRGVjbGFyYcOnw6NvIGRlIMOTYml0bycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQVVUT1JJWkFDQU9fU0VQVUxUQU1FTlRPXTpcbiAgICAgICAgJ0F1dG9yaXphw6fDo28gZGUgU2VwdWx0YW1lbnRvJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DT01QUk9WQU5URV9QQVJFTlRFU0NPXTogJ0NvbXByb3ZhbnRlIGRlIFBhcmVudGVzY28nLFxuXG4gICAgICAvLyBEb2N1bWVudG9zIGVzcGVjw61maWNvcyBwYXJhIG5hdGFsaWRhZGVcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5DQVJUQU9fUFJFX05BVEFMXTogJ0NhcnTDo28gUHLDqS1OYXRhbCcsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uREVDTEFSQUNBT19OQVNDSURPX1ZJVk9dOiAnRGVjbGFyYcOnw6NvIGRlIE5hc2NpZG8gVml2bycsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfR0VTVEFDQU9dOiAnQ29tcHJvdmFudGUgZGUgR2VzdGHDp8OjbycsXG5cbiAgICAgIC8vIERvY3VtZW50b3MgZXNwZWPDrWZpY29zIHBhcmEgcGFzc2FnZW5zXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQ09NUFJPVkFOVEVfVklBR0VNXTogJ0NvbXByb3ZhbnRlIGRlIFZpYWdlbScsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uQVVUT1JJWkFDQU9fVklBR0VNXTogJ0F1dG9yaXphw6fDo28gZGUgVmlhZ2VtJyxcbiAgICAgIFtUaXBvRG9jdW1lbnRvRW51bS5CSUxIRVRFX1BBU1NBR0VNXTogJ0JpbGhldGUgZGUgUGFzc2FnZW0nLFxuXG4gICAgICAvLyBEb2N1bWVudG9zIGRpdmVyc29zXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uUFJPQ1VSQUNBT106ICdQcm9jdXJhw6fDo28nLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLkRFQ0xBUkFDQU9fSElQT1NTVUZJQ0lFTkNJQV06XG4gICAgICAgICdEZWNsYXJhw6fDo28gZGUgSGlwb3NzdWZpY2nDqm5jaWEnLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLlRFUk1PX1JFU1BPTlNBQklMSURBREVdOiAnVGVybW8gZGUgUmVzcG9uc2FiaWxpZGFkZScsXG4gICAgICBbVGlwb0RvY3VtZW50b0VudW0uRk9UT18zWDRdOiAnRm90byAzeDQnLFxuICAgICAgW1RpcG9Eb2N1bWVudG9FbnVtLk9VVFJPXTogJ091dHJvIERvY3VtZW50bycsXG4gICAgfTtcbiAgICByZXR1cm4gZGVzY3JpY29lc1t0aGlzLnRpcG9fZG9jdW1lbnRvXSB8fCAnRG9jdW1lbnRvIG7Do28gaWRlbnRpZmljYWRvJztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gdmFsaWRhw6fDtWVzIGRlZmluaWRhc1xuICAgKi9cbiAgdGVtVmFsaWRhY29lcygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnZhbGlkYWNvZXMgJiYgT2JqZWN0LmtleXModGhpcy52YWxpZGFjb2VzKS5sZW5ndGggPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSB2YWxpZGHDp8OjbyBkZSBmb3JtYXRvXG4gICAqL1xuICB0ZW1WYWxpZGFjYW9Gb3JtYXRvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnRlbVZhbGlkYWNvZXMoKSAmJlxuICAgICAgISF0aGlzLnZhbGlkYWNvZXMuZm9ybWF0byAmJlxuICAgICAgdGhpcy52YWxpZGFjb2VzLmZvcm1hdG8ubGVuZ3RoID4gMFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIHZhbGlkYcOnw6NvIGRlIHRhbWFuaG9cbiAgICovXG4gIHRlbVZhbGlkYWNhb1RhbWFuaG8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudGVtVmFsaWRhY29lcygpICYmXG4gICAgICB0aGlzLnZhbGlkYWNvZXMudGFtYW5ob19tYXhpbW8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgdGhpcy52YWxpZGFjb2VzLnRhbWFuaG9fbWF4aW1vICE9PSBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gdmFsaWRhw6fDo28gZGUgdmFsaWRhZGVcbiAgICovXG4gIHRlbVZhbGlkYWNhb1ZhbGlkYWRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnRlbVZhbGlkYWNvZXMoKSAmJlxuICAgICAgdGhpcy52YWxpZGFjb2VzLnZhbGlkYWRlX21heGltYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICB0aGlzLnZhbGlkYWNvZXMudmFsaWRhZGVfbWF4aW1hICE9PSBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gb3MgZm9ybWF0b3MgYWNlaXRvc1xuICAgKi9cbiAgZ2V0Rm9ybWF0b3NBY2VpdG9zKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsaWRhY2FvRm9ybWF0bygpKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhY29lcy5mb3JtYXRvIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIHRhbWFuaG8gbcOheGltbyBlbSBNQlxuICAgKi9cbiAgZ2V0VGFtYW5ob01heGltbygpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsaWRhY2FvVGFtYW5obygpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gdGhpcy52YWxpZGFjb2VzLnRhbWFuaG9fbWF4aW1vID8/IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgdmFsaWRhZGUgbcOheGltYSBlbSBkaWFzXG4gICAqL1xuICBnZXRWYWxpZGFkZU1heGltYSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsaWRhY2FvVmFsaWRhZGUoKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHRoaXMudmFsaWRhY29lcy52YWxpZGFkZV9tYXhpbWEgPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyB0YW1hbmhvIG3DoXhpbW8gZm9ybWF0YWRvXG4gICAqL1xuICBnZXRUYW1hbmhvTWF4aW1vRm9ybWF0YWRvKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGFtYW5obyA9IHRoaXMuZ2V0VGFtYW5ob01heGltbygpO1xuICAgIGlmICghdGFtYW5obykgcmV0dXJuICdTZW0gbGltaXRlIGRlIHRhbWFuaG8nO1xuXG4gICAgaWYgKHRhbWFuaG8gPCAxKSB7XG4gICAgICByZXR1cm4gYCR7KHRhbWFuaG8gKiAxMDI0KS50b0ZpeGVkKDApfSBLQmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgJHt0YW1hbmhvfSBNQmA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIHZhbGlkYWRlIG3DoXhpbWEgZm9ybWF0YWRhXG4gICAqL1xuICBnZXRWYWxpZGFkZU1heGltYUZvcm1hdGFkYSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbGlkYWRlID0gdGhpcy5nZXRWYWxpZGFkZU1heGltYSgpO1xuICAgIGlmICghdmFsaWRhZGUpIHJldHVybiAnU2VtIGxpbWl0ZSBkZSB2YWxpZGFkZSc7XG5cbiAgICBpZiAodmFsaWRhZGUgPCAzMCkge1xuICAgICAgcmV0dXJuIGAke3ZhbGlkYWRlfSBkaWEocylgO1xuICAgIH0gZWxzZSBpZiAodmFsaWRhZGUgPCAzNjUpIHtcbiAgICAgIGNvbnN0IG1lc2VzID0gTWF0aC5mbG9vcih2YWxpZGFkZSAvIDMwKTtcbiAgICAgIHJldHVybiBgJHttZXNlc30gbcOqcyhlcylgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhbm9zID0gTWF0aC5mbG9vcih2YWxpZGFkZSAvIDM2NSk7XG4gICAgICByZXR1cm4gYCR7YW5vc30gYW5vKHMpYDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdW0gZm9ybWF0byDDqSBhY2VpdG9cbiAgICovXG4gIGZvcm1hdG9FaEFjZWl0byhmb3JtYXRvOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsaWRhY2FvRm9ybWF0bygpKSByZXR1cm4gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcy5nZXRGb3JtYXRvc0FjZWl0b3MoKS5pbmNsdWRlcyhmb3JtYXRvLnRvTG93ZXJDYXNlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtIHRhbWFuaG8gw6kgdsOhbGlkbyAoZW0gYnl0ZXMpXG4gICAqL1xuICB0YW1hbmhvRWhWYWxpZG8odGFtYW5ob0J5dGVzOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCB0YW1hbmhvTWF4aW1vID0gdGhpcy5nZXRUYW1hbmhvTWF4aW1vKCk7XG4gICAgaWYgKCF0YW1hbmhvTWF4aW1vKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHRhbWFuaG9NYXhpbW9CeXRlcyA9IHRhbWFuaG9NYXhpbW8gKiAxMDI0ICogMTAyNDsgLy8gQ29udmVydGUgTUIgcGFyYSBieXRlc1xuICAgIHJldHVybiB0YW1hbmhvQnl0ZXMgPD0gdGFtYW5ob01heGltb0J5dGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHVtYSBkYXRhIGRlIGVtaXNzw6NvIMOpIHbDoWxpZGFcbiAgICovXG4gIGRhdGFFbWlzc2FvRWhWYWxpZGEoZGF0YUVtaXNzYW86IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB2YWxpZGFkZU1heGltYSA9IHRoaXMuZ2V0VmFsaWRhZGVNYXhpbWEoKTtcbiAgICBpZiAoIXZhbGlkYWRlTWF4aW1hKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmVGltZSA9IE1hdGguYWJzKGFnb3JhLmdldFRpbWUoKSAtIGRhdGFFbWlzc2FvLmdldFRpbWUoKSk7XG4gICAgY29uc3QgZGlmZkRheXMgPSBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuXG4gICAgcmV0dXJuIGRpZmZEYXlzIDw9IHZhbGlkYWRlTWF4aW1hO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHBlcnRlbmNlIGEgdW0gdGlwbyBkZSBiZW5lZsOtY2lvXG4gICAqL1xuICBwZXJ0ZW5jZUFvVGlwb0JlbmVmaWNpbyh0aXBvQmVuZWZpY2lvSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRpcG9fYmVuZWZpY2lvX2lkID09PSB0aXBvQmVuZWZpY2lvSWQ7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIHVtIHJlc3VtbyBkbyByZXF1aXNpdG9cbiAgICovXG4gIGdldFN1bW1hcnkoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXNjcmljYW8gPSB0aGlzLmdldERlc2NyaWNhb1RpcG9Eb2N1bWVudG8oKTtcbiAgICBjb25zdCBvYnJpZ2F0b3JpZWRhZGUgPSB0aGlzLmlzT2JyaWdhdG9yaW8oKSA/ICdPYnJpZ2F0w7NyaW8nIDogJ09wY2lvbmFsJztcbiAgICByZXR1cm4gYCR7ZGVzY3JpY2FvfSAtICR7b2JyaWdhdG9yaWVkYWRlfWA7XG4gIH1cblxuICAvKipcbiAgICogR2VyYSB1bWEgY2hhdmUgw7puaWNhIHBhcmEgbyByZXF1aXNpdG9cbiAgICovXG4gIGdldFVuaXF1ZUtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgcmVxdWlzaXRvXyR7dGhpcy50aXBvX2JlbmVmaWNpb19pZH1fJHt0aGlzLnRpcG9fZG9jdW1lbnRvfWA7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbyByZXF1aXNpdG8gw6kgY29uc2lzdGVudGVcbiAgICovXG4gIGlzQ29uc2lzdGVudGUoKTogYm9vbGVhbiB7XG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIHRpcG8gZGUgYmVuZWbDrWNpb1xuICAgIGlmICghdGhpcy50aXBvX2JlbmVmaWNpb19pZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIHRpcG8gZGUgZG9jdW1lbnRvIHbDoWxpZG9cbiAgICBpZiAoIU9iamVjdC52YWx1ZXMoVGlwb0RvY3VtZW50b0VudW0pLmluY2x1ZGVzKHRoaXMudGlwb19kb2N1bWVudG8pKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2EgdmFsaWRhw6fDtWVzIHNlIGV4aXN0aXJlbVxuICAgIGlmICh0aGlzLnRlbVZhbGlkYWNvZXMoKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnRlbVZhbGlkYWNhb1RhbWFuaG8oKSAmJlxuICAgICAgICB0aGlzLnZhbGlkYWNvZXMudGFtYW5ob19tYXhpbW8gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICB0aGlzLnZhbGlkYWNvZXMudGFtYW5ob19tYXhpbW8gPD0gMFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnRlbVZhbGlkYWNhb1ZhbGlkYWRlKCkgJiZcbiAgICAgICAgdGhpcy52YWxpZGFjb2VzLnZhbGlkYWRlX21heGltYSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIHRoaXMudmFsaWRhY29lcy52YWxpZGFkZV9tYXhpbWEgPD0gMFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBwb2RlIHNlciByZW1vdmlkb1xuICAgKi9cbiAgcG9kZVNlclJlbW92aWRvKCk6IGJvb2xlYW4ge1xuICAgIC8vIE7Do28gcG9kZSByZW1vdmVyIHNlIGrDoSBmb2kgcmVtb3ZpZG9cbiAgICBpZiAodGhpcy5mb2lSZW1vdmlkbygpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBQb2RlIGltcGxlbWVudGFyIGzDs2dpY2EgYWRpY2lvbmFsIGFxdWlcbiAgICAvLyBQb3IgZXhlbXBsbywgdmVyaWZpY2FyIHNlIHRlbSBkb2N1bWVudG9zIGFzc29jaWFkb3NcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25hIG8gcmVxdWlzaXRvIChzZW0gSUQpXG4gICAqL1xuICBjbG9uZSgpOiBQYXJ0aWFsPFJlcXVpc2l0b0RvY3VtZW50bz4ge1xuICAgIHJldHVybiB7XG4gICAgICB0aXBvX2JlbmVmaWNpb19pZDogdGhpcy50aXBvX2JlbmVmaWNpb19pZCxcbiAgICAgIHRpcG9fZG9jdW1lbnRvOiB0aGlzLnRpcG9fZG9jdW1lbnRvLFxuICAgICAgb2JyaWdhdG9yaW86IHRoaXMub2JyaWdhdG9yaW8sXG4gICAgICBkZXNjcmljYW86IHRoaXMuZGVzY3JpY2FvLFxuICAgICAgdmFsaWRhY29lczogdGhpcy52YWxpZGFjb2VzXG4gICAgICAgID8gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZhbGlkYWNvZXMpKVxuICAgICAgICA6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSB1bSByZXF1aXNpdG8gY3LDrXRpY29cbiAgICovXG4gIGlzQ3JpdGljbygpOiBib29sZWFuIHtcbiAgICAvLyBEb2N1bWVudG9zIGRlIGlkZW50aWZpY2HDp8OjbyBzw6NvIHNlbXByZSBjcsOtdGljb3NcbiAgICBpZiAodGhpcy5pc0RvY3VtZW50b0lkZW50aWZpY2FjYW8oKSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBEb2N1bWVudG9zIG9icmlnYXTDs3Jpb3Mgc8OjbyBjcsOtdGljb3NcbiAgICBpZiAodGhpcy5pc09icmlnYXRvcmlvKCkpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIGNhdGVnb3JpYSBkbyBkb2N1bWVudG9cbiAgICovXG4gIGdldENhdGVnb3JpYSgpOlxuICAgIHwgJ0lERU5USUZJQ0FDQU8nXG4gICAgfCAnQ09NUFJPVkFDQU8nXG4gICAgfCAnQ0VSVElEQU8nXG4gICAgfCAnTUVESUNPJ1xuICAgIHwgJ01PUkFESUEnXG4gICAgfCAnT1VUUk8nIHtcbiAgICBpZiAodGhpcy5pc0RvY3VtZW50b0lkZW50aWZpY2FjYW8oKSkgcmV0dXJuICdJREVOVElGSUNBQ0FPJztcbiAgICBpZiAodGhpcy5pc0RvY3VtZW50b0NvbXByb3ZhY2FvKCkpIHJldHVybiAnQ09NUFJPVkFDQU8nO1xuICAgIGlmICh0aGlzLmlzQ2VydGlkYW8oKSkgcmV0dXJuICdDRVJUSURBTyc7XG4gICAgaWYgKHRoaXMuaXNEb2N1bWVudG9NZWRpY28oKSkgcmV0dXJuICdNRURJQ08nO1xuICAgIGlmICh0aGlzLmlzRG9jdW1lbnRvTW9yYWRpYSgpKSByZXR1cm4gJ01PUkFESUEnO1xuICAgIHJldHVybiAnT1VUUk8nO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIHByaW9yaWRhZGUgZG8gZG9jdW1lbnRvICgxID0gbWFpcyBwcmlvcml0w6FyaW8pXG4gICAqL1xuICBnZXRQcmlvcmlkYWRlKCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuaXNEb2N1bWVudG9JZGVudGlmaWNhY2FvKCkpIHJldHVybiAxO1xuICAgIGlmICh0aGlzLmlzT2JyaWdhdG9yaW8oKSkgcmV0dXJuIDI7XG4gICAgcmV0dXJuIDM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgY3JpYcOnw6NvXG4gICAqL1xuICBnZXRDcmlhY2FvRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdC50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgYXR1YWxpemHDp8Ojb1xuICAgKi9cbiAgZ2V0QXR1YWxpemFjYW9Gb3JtYXRhZGEoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0LnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgaW5mb3JtYcOnw7VlcyBzZW5zw612ZWlzIHBhcmEgbG9nc1xuICAgKi9cbiAgdG9TYWZlTG9nKCk6IFBhcnRpYWw8UmVxdWlzaXRvRG9jdW1lbnRvPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdGlwb19kb2N1bWVudG86IHRoaXMudGlwb19kb2N1bWVudG8sXG4gICAgICBvYnJpZ2F0b3JpbzogdGhpcy5vYnJpZ2F0b3JpbyxcbiAgICAgIGNyZWF0ZWRfYXQ6IHRoaXMuY3JlYXRlZF9hdCxcbiAgICAgIHVwZGF0ZWRfYXQ6IHRoaXMudXBkYXRlZF9hdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBzdWdlc3TDtWVzIGRlIG1lbGhvcmlhIHBhcmEgbyByZXF1aXNpdG9cbiAgICovXG4gIGdldFN1Z2VzdG9lc01lbGhvcmlhKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzdWdlc3RvZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoIXRoaXMuZGVzY3JpY2FvIHx8IHRoaXMuZGVzY3JpY2FvLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdBZGljaW9uYXIgZGVzY3Jpw6fDo28gZGV0YWxoYWRhIGRvIGRvY3VtZW50bycpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy50ZW1WYWxpZGFjb2VzKCkpIHtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKCdEZWZpbmlyIHZhbGlkYcOnw7VlcyBwYXJhIG8gZG9jdW1lbnRvJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEb2N1bWVudG9JZGVudGlmaWNhY2FvKCkgJiYgIXRoaXMuaXNPYnJpZ2F0b3JpbygpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnRG9jdW1lbnRvcyBkZSBpZGVudGlmaWNhw6fDo28gZGV2ZW0gc2VyIG9icmlnYXTDs3Jpb3MnKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNDb25zaXN0ZW50ZSgpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnVmVyaWZpY2FyIGUgY29ycmlnaXIgaW5jb25zaXN0w6puY2lhcyBub3MgZGFkb3MnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZXN0b2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHByZWNpc2EgZGUgYXR1YWxpemHDp8OjbyAoZGFkb3MgbXVpdG8gYW50aWdvcylcbiAgICovXG4gIHByZWNpc2FBdHVhbGl6YWNhbygpOiBib29sZWFuIHtcbiAgICAvLyBEYWRvcyBjb20gbWFpcyBkZSA2IG1lc2VzIHBvZGVtIHByZWNpc2FyIGRlIHJldmlzw6NvXG4gICAgY29uc3Qgc2Vpc01lc2VzQXRyYXMgPSBuZXcgRGF0ZSgpO1xuICAgIHNlaXNNZXNlc0F0cmFzLnNldE1vbnRoKHNlaXNNZXNlc0F0cmFzLmdldE1vbnRoKCkgLSA2KTtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0IDwgc2Vpc01lc2VzQXRyYXM7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGVzdGF0w61zdGljYXMgZG8gcmVxdWlzaXRvXG4gICAqL1xuICBnZXRFc3RhdGlzdGljYXMoKToge1xuICAgIGNhdGVnb3JpYTogc3RyaW5nO1xuICAgIHByaW9yaWRhZGU6IG51bWJlcjtcbiAgICBvYnJpZ2F0b3JpbzogYm9vbGVhbjtcbiAgICB0ZW1WYWxpZGFjb2VzOiBib29sZWFuO1xuICAgIGZvcm1hdG9zQWNlaXRvczogbnVtYmVyO1xuICAgIHRhbWFuaG9NYXhpbW86IHN0cmluZztcbiAgICB2YWxpZGFkZU1heGltYTogc3RyaW5nO1xuICB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2F0ZWdvcmlhOiB0aGlzLmdldENhdGVnb3JpYSgpLFxuICAgICAgcHJpb3JpZGFkZTogdGhpcy5nZXRQcmlvcmlkYWRlKCksXG4gICAgICBvYnJpZ2F0b3JpbzogdGhpcy5pc09icmlnYXRvcmlvKCksXG4gICAgICB0ZW1WYWxpZGFjb2VzOiB0aGlzLnRlbVZhbGlkYWNvZXMoKSxcbiAgICAgIGZvcm1hdG9zQWNlaXRvczogdGhpcy5nZXRGb3JtYXRvc0FjZWl0b3MoKS5sZW5ndGgsXG4gICAgICB0YW1hbmhvTWF4aW1vOiB0aGlzLmdldFRhbWFuaG9NYXhpbW9Gb3JtYXRhZG8oKSxcbiAgICAgIHZhbGlkYWRlTWF4aW1hOiB0aGlzLmdldFZhbGlkYWRlTWF4aW1hRm9ybWF0YWRhKCksXG4gICAgfTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9