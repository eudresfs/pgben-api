{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\alerta-metrica.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\alerta-metrica.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  Index,\n  ManyToOne,\n  JoinColumn,\n  CreateDateColumn,\n  UpdateDateColumn,\n} from 'typeorm';\nimport {\n  IsNotEmpty,\n  IsUUID,\n  IsOptional,\n  IsNumber,\n  Min,\n  IsEnum,\n  IsString,\n} from 'class-validator';\nimport { Metrica } from './metrica.entity';\nimport { NivelAlertaEnum } from './metrica-seguranca.entity';\n\n/**\n * Entidade que representa alertas gerados com base em métricas\n *\n * Esta entidade armazena informações sobre alertas gerados quando uma métrica\n * ultrapassa um limiar definido, incluindo o nível do alerta, valor atual,\n * limiar violado e status de resolução.\n */\n@Entity('alertas_metricas')\nexport class AlertaMetrica {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ type: 'uuid' })\n  @Index('idx_alertas_metricas_metrica_id')\n  @IsNotEmpty({ message: 'ID da métrica é obrigatório' })\n  @IsUUID('4', { message: 'ID da métrica inválido' })\n  metrica_id: string;\n\n  @ManyToOne(() => Metrica)\n  @JoinColumn({ name: 'metrica_id' })\n  metrica: Metrica;\n\n  @CreateDateColumn({ name: 'created_at' })\n  @Index('idx_alertas_metricas_timestamp')\n  created_at: Date;\n\n  @Column({\n    type: 'enum',\n    enum: NivelAlertaEnum,\n  })\n  @Index('idx_alertas_metricas_nivel')\n  @IsEnum(NivelAlertaEnum, { message: 'Nível de alerta inválido' })\n  nivel: NivelAlertaEnum;\n\n  @Column({ type: 'numeric', precision: 15, scale: 2 })\n  @IsNotEmpty({ message: 'Valor atual é obrigatório' })\n  @IsNumber({}, { message: 'Valor atual deve ser um número' })\n  valor_atual: number;\n\n  @Column({ type: 'numeric', precision: 15, scale: 2 })\n  @IsNotEmpty({ message: 'Limiar violado é obrigatório' })\n  @IsNumber({}, { message: 'Limiar violado deve ser um número' })\n  limiar_violado: number;\n\n  @Column({ type: 'text', nullable: true })\n  @IsOptional()\n  @IsString({ message: 'Mensagem deve ser uma string' })\n  mensagem: string;\n\n  @Column({ type: 'jsonb', nullable: true })\n  detalhes: Record<string, any>;\n\n  @Column({ default: false })\n  @Index('idx_alertas_metricas_resolvido')\n  resolvido: boolean;\n\n  @Column({ type: 'timestamp', nullable: true })\n  data_resolucao: Date;\n\n  @Column({ default: false })\n  notificacao_enviada: boolean;\n}\n"],"version":3}