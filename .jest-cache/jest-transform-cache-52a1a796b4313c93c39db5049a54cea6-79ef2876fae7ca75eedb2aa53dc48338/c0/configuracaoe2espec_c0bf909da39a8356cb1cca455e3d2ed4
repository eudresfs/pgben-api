b8d39b5eb2021d5c58c0db651d46cdf3
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const request = __importStar(require("supertest"));
const typeorm_1 = require("@nestjs/typeorm");
const config_1 = require("@nestjs/config");
const configuracao_module_1 = require("../configuracao.module");
const jwt_1 = require("@nestjs/jwt");
const parametro_tipo_enum_1 = require("../enums/parametro-tipo.enum");
const template_tipo_enum_1 = require("../enums/template-tipo.enum");
const integracao_tipo_enum_1 = require("../enums/integracao-tipo.enum");
/**
 * Teste de integração do Módulo de Configuração
 *
 * Este teste realiza a verificação completa do fluxo de operações
 * CRUD para os diversos serviços do módulo, garantindo que todas
 * as funcionalidades estão operando corretamente.
 */
describe('Configuração - Testes de Integração', () => {
    let app;
    let authToken;
    // Dados de teste para criação de um parâmetro
    const parametroTeste = {
        chave: 'teste.parametro',
        valor: 'Valor de teste',
        tipo: parametro_tipo_enum_1.ParametroTipoEnum.STRING,
        descricao: 'Parâmetro para testes',
        categoria: 'testes',
    };
    // Dados de teste para criação de um template
    const templateTeste = {
        codigo: 'teste-template',
        nome: 'Template de Teste',
        descricao: 'Template para testes',
        tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
        conteudo: '<html><body>Olá, {{nome}}!</body></html>',
    };
    // Dados de teste para criação de uma configuração de integração
    const integracaoTeste = {
        codigo: 'teste-integracao',
        nome: 'Integração de Teste',
        descricao: 'Configuração para testes',
        tipo: integracao_tipo_enum_1.IntegracaoTipoEnum.EMAIL,
        configuracao: {
            host: 'smtp.teste.com',
            port: 587,
            secure: false,
            from: 'teste@example.com',
        },
        credenciais: {
            user: 'usuario_teste',
            password: 'senha_teste',
        },
    };
    // Configurar a aplicação para os testes
    beforeAll(async () => {
        // Criar o módulo de teste que inclui os componentes necessários
        const moduleFixture = await testing_1.Test.createTestingModule({
            imports: [
                // Configuração do ambiente
                config_1.ConfigModule.forRoot({
                    isGlobal: true,
                    envFilePath: '.env.test',
                }),
                // Conexão com o banco de dados de teste
                typeorm_1.TypeOrmModule.forRootAsync({
                    imports: [config_1.ConfigModule],
                    useFactory: (configService) => ({
                        type: 'postgres',
                        host: configService.get('DB_HOST', 'localhost'),
                        port: configService.get('DB_PORT', 5432),
                        username: configService.get('DB_USERNAME', 'postgres'),
                        password: configService.get('DB_PASSWORD', 'postgres'),
                        database: configService.get('DB_DATABASE', 'pgben_test'),
                        entities: ['dist/**/*.entity{.ts,.js}'],
                        synchronize: true, // Apenas para ambiente de teste
                    }),
                    inject: [config_1.ConfigService],
                }),
                // Módulo JWT para simulação de autenticação
                jwt_1.JwtModule.registerAsync({
                    imports: [config_1.ConfigModule],
                    useFactory: (configService) => ({
                        secret: configService.get('JWT_SECRET', 'test-secret'),
                        signOptions: { expiresIn: '1h' },
                    }),
                    inject: [config_1.ConfigService],
                }),
                // Módulo de configuração a ser testado
                configuracao_module_1.ConfiguracaoModule,
            ],
        }).compile();
        // Criar a aplicação
        app = moduleFixture.createNestApplication();
        // Configurar pipes globais para validação
        app.useGlobalPipes(new common_1.ValidationPipe({
            transform: true,
            whitelist: true,
            forbidNonWhitelisted: true,
        }));
        await app.init();
        // Criar um token JWT para os testes (simulando um usuário autenticado)
        const jwtService = moduleFixture.get(jwt_1.JwtModule);
        authToken = `Bearer ${jwtService.sign({
            sub: '00000000-0000-0000-0000-000000000001',
            username: 'admin',
            roles: ['admin'],
        })}`;
    });
    // Limpar recursos após os testes
    afterAll(async () => {
        await app.close();
    });
    // Verificar a limpeza entre testes
    afterEach(async () => {
        // Remover os dados de teste criados
        await request(app.getHttpServer())
            .delete(`/configuracao/parametros/${parametroTeste.chave}`)
            .set('Authorization', authToken)
            .catch(() => { });
        await request(app.getHttpServer())
            .delete(`/configuracao/templates/${templateTeste.codigo}`)
            .set('Authorization', authToken)
            .catch(() => { });
        await request(app.getHttpServer())
            .delete(`/configuracao/integracoes/${integracaoTeste.codigo}`)
            .set('Authorization', authToken)
            .catch(() => { });
    });
    //------------------------------------------------------
    // Testes para o serviço de Parâmetros
    //------------------------------------------------------
    describe('Serviço de Parâmetros', () => {
        it('Deve criar, buscar, atualizar e remover um parâmetro', async () => {
            // 1. Criar um parâmetro
            const criarResponse = await request(app.getHttpServer())
                .post('/configuracao/parametros')
                .set('Authorization', authToken)
                .send(parametroTeste)
                .expect(201);
            expect(criarResponse.body).toHaveProperty('id');
            expect(criarResponse.body.chave).toBe(parametroTeste.chave);
            // 2. Buscar o parâmetro criado
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/parametros/${parametroTeste.chave}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(buscarResponse.body.chave).toBe(parametroTeste.chave);
            expect(buscarResponse.body.valor).toBe(parametroTeste.valor);
            // 3. Atualizar o parâmetro
            const dadosAtualizacao = {
                valor: 'Valor atualizado',
                descricao: 'Descrição atualizada',
            };
            const atualizarResponse = await request(app.getHttpServer())
                .put(`/configuracao/parametros/${parametroTeste.chave}`)
                .set('Authorization', authToken)
                .send(dadosAtualizacao)
                .expect(200);
            expect(atualizarResponse.body.valor).toBe(dadosAtualizacao.valor);
            expect(atualizarResponse.body.descricao).toBe(dadosAtualizacao.descricao);
            // 4. Remover o parâmetro
            await request(app.getHttpServer())
                .delete(`/configuracao/parametros/${parametroTeste.chave}`)
                .set('Authorization', authToken)
                .expect(204);
            // 5. Verificar que o parâmetro foi removido
            await request(app.getHttpServer())
                .get(`/configuracao/parametros/${parametroTeste.chave}`)
                .set('Authorization', authToken)
                .expect(404);
        });
        it('Deve buscar parâmetros por categoria', async () => {
            // 1. Criar um parâmetro
            await request(app.getHttpServer())
                .post('/configuracao/parametros')
                .set('Authorization', authToken)
                .send(parametroTeste)
                .expect(201);
            // 2. Buscar por categoria
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/parametros/categoria/${parametroTeste.categoria}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(Array.isArray(buscarResponse.body)).toBe(true);
            expect(buscarResponse.body.length).toBeGreaterThan(0);
            expect(buscarResponse.body[0].categoria).toBe(parametroTeste.categoria);
        });
    });
    //------------------------------------------------------
    // Testes para o serviço de Templates
    //------------------------------------------------------
    describe('Serviço de Templates', () => {
        it('Deve criar, buscar, atualizar e remover um template', async () => {
            // 1. Criar um template
            const criarResponse = await request(app.getHttpServer())
                .post('/configuracao/templates')
                .set('Authorization', authToken)
                .send(templateTeste)
                .expect(201);
            expect(criarResponse.body).toHaveProperty('id');
            expect(criarResponse.body.codigo).toBe(templateTeste.codigo);
            // 2. Buscar o template criado
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/templates/${templateTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(buscarResponse.body.codigo).toBe(templateTeste.codigo);
            expect(buscarResponse.body.nome).toBe(templateTeste.nome);
            // 3. Atualizar o template
            const dadosAtualizacao = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>Conteúdo atualizado, {{nome}}!</body></html>',
            };
            const atualizarResponse = await request(app.getHttpServer())
                .put(`/configuracao/templates/${templateTeste.codigo}`)
                .set('Authorization', authToken)
                .send(dadosAtualizacao)
                .expect(200);
            expect(atualizarResponse.body.nome).toBe(dadosAtualizacao.nome);
            expect(atualizarResponse.body.descricao).toBe(dadosAtualizacao.descricao);
            expect(atualizarResponse.body.conteudo).toBe(dadosAtualizacao.conteudo);
            // 4. Testar renderização do template
            const testarResponse = await request(app.getHttpServer())
                .post('/configuracao/templates/testar')
                .set('Authorization', authToken)
                .send({
                conteudo: dadosAtualizacao.conteudo,
                dados: { nome: 'João' },
            })
                .expect(200);
            expect(testarResponse.body.conteudo).toBe('<html><body>Conteúdo atualizado, João!</body></html>');
            // 5. Alterar status do template
            const statusResponse = await request(app.getHttpServer())
                .put(`/configuracao/templates/${templateTeste.codigo}/status`)
                .set('Authorization', authToken)
                .send({ ativo: false })
                .expect(200);
            expect(statusResponse.body.ativo).toBe(false);
            // 6. Remover o template
            await request(app.getHttpServer())
                .delete(`/configuracao/templates/${templateTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(204);
            // 7. Verificar que o template foi removido
            await request(app.getHttpServer())
                .get(`/configuracao/templates/${templateTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(404);
        });
        it('Deve buscar templates por tipo', async () => {
            // 1. Criar um template
            await request(app.getHttpServer())
                .post('/configuracao/templates')
                .set('Authorization', authToken)
                .send(templateTeste)
                .expect(201);
            // 2. Buscar por tipo
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/templates/tipo/${templateTeste.tipo}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(Array.isArray(buscarResponse.body)).toBe(true);
            expect(buscarResponse.body.length).toBeGreaterThan(0);
            expect(buscarResponse.body[0].tipo).toBe(templateTeste.tipo);
        });
    });
    //------------------------------------------------------
    // Testes para o serviço de Integrações
    //------------------------------------------------------
    describe('Serviço de Integrações', () => {
        it('Deve criar, buscar, atualizar e remover uma configuração de integração', async () => {
            // 1. Criar uma configuração de integração
            const criarResponse = await request(app.getHttpServer())
                .put(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .send(integracaoTeste)
                .expect(200);
            expect(criarResponse.body).toHaveProperty('id');
            expect(criarResponse.body.codigo).toBe(integracaoTeste.codigo);
            // 2. Buscar a configuração criada
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(buscarResponse.body.codigo).toBe(integracaoTeste.codigo);
            expect(buscarResponse.body.nome).toBe(integracaoTeste.nome);
            expect(buscarResponse.body.configuracao).toEqual(integracaoTeste.configuracao);
            // As credenciais não devem ser retornadas na resposta
            expect(buscarResponse.body.credenciais).toBeUndefined();
            // 3. Atualizar a configuração
            const dadosAtualizacao = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                configuracao: {
                    ...integracaoTeste.configuracao,
                    port: 465,
                    secure: true,
                },
            };
            const atualizarResponse = await request(app.getHttpServer())
                .put(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .send(dadosAtualizacao)
                .expect(200);
            expect(atualizarResponse.body.nome).toBe(dadosAtualizacao.nome);
            expect(atualizarResponse.body.descricao).toBe(dadosAtualizacao.descricao);
            expect(atualizarResponse.body.configuracao).toEqual(dadosAtualizacao.configuracao);
            // 4. Alterar status da configuração
            const statusResponse = await request(app.getHttpServer())
                .put(`/configuracao/integracoes/${integracaoTeste.codigo}/status`)
                .set('Authorization', authToken)
                .send({ ativo: false })
                .expect(200);
            expect(statusResponse.body.ativo).toBe(false);
            // 5. Remover a configuração
            await request(app.getHttpServer())
                .delete(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(204);
            // 6. Verificar que a configuração foi removida
            await request(app.getHttpServer())
                .get(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .expect(404);
        });
        it('Deve buscar configurações de integração por tipo', async () => {
            // 1. Criar uma configuração de integração
            await request(app.getHttpServer())
                .put(`/configuracao/integracoes/${integracaoTeste.codigo}`)
                .set('Authorization', authToken)
                .send(integracaoTeste)
                .expect(200);
            // 2. Buscar por tipo
            const buscarResponse = await request(app.getHttpServer())
                .get(`/configuracao/integracoes?tipo=${integracaoTeste.tipo}`)
                .set('Authorization', authToken)
                .expect(200);
            expect(Array.isArray(buscarResponse.body)).toBe(true);
            expect(buscarResponse.body.length).toBeGreaterThan(0);
            expect(buscarResponse.body[0].tipo).toBe(integracaoTeste.tipo);
        });
        it('Deve testar uma configuração de integração', async () => {
            // 1. Testar uma configuração
            // Note: Em um ambiente de teste real, você provavelmente usaria um mock para o
            // serviço externo que é testado, como um servidor SMTP
            const testarResponse = await request(app.getHttpServer())
                .post('/configuracao/integracoes/testar')
                .set('Authorization', authToken)
                .send({
                tipo: integracao_tipo_enum_1.IntegracaoTipoEnum.EMAIL,
                configuracao: integracaoTeste.configuracao,
                credenciais: integracaoTeste.credenciais,
                dadosTeste: {
                    para: 'teste@example.com',
                    assunto: 'Teste de Integração',
                    mensagem: 'Esta é uma mensagem de teste.',
                },
            })
                .expect(200);
            // Em um teste real, você verificaria o sucesso ou falha com base na resposta do serviço externo
            expect(testarResponse.body).toHaveProperty('sucesso');
            expect(testarResponse.body).toHaveProperty('mensagem');
        });
    });
    //------------------------------------------------------
    // Testes para o serviço de Limites
    //------------------------------------------------------
    describe('Serviço de Limites', () => {
        it('Deve atualizar e buscar limites de upload', async () => {
            // 1. Buscar limites atuais
            const buscarLimitesResponse = await request(app.getHttpServer())
                .get('/configuracao/limites/upload')
                .set('Authorization', authToken)
                .expect(200);
            // 2. Atualizar limites
            const limitesAtualizados = {
                tamanhoMaximoArquivo: 20971520, // 20MB
                numeroMaximoArquivos: 30,
                extensoesPermitidas: ['jpg', 'jpeg', 'png', 'pdf', 'docx', 'xlsx'],
                maximoPorRequisicao: 10,
            };
            const atualizarResponse = await request(app.getHttpServer())
                .put('/configuracao/limites/upload')
                .set('Authorization', authToken)
                .send(limitesAtualizados)
                .expect(200);
            expect(atualizarResponse.body.tamanhoMaximoArquivo).toBe(limitesAtualizados.tamanhoMaximoArquivo);
            expect(atualizarResponse.body.numeroMaximoArquivos).toBe(limitesAtualizados.numeroMaximoArquivos);
            expect(atualizarResponse.body.extensoesPermitidas).toEqual(expect.arrayContaining(limitesAtualizados.extensoesPermitidas));
            expect(atualizarResponse.body.maximoPorRequisicao).toBe(limitesAtualizados.maximoPorRequisicao);
            // 3. Verificar que os limites foram atualizados
            const verificarResponse = await request(app.getHttpServer())
                .get('/configuracao/limites/upload')
                .set('Authorization', authToken)
                .expect(200);
            expect(verificarResponse.body).toEqual(atualizarResponse.body);
        });
        it('Deve atualizar e buscar prazos', async () => {
            // 1. Buscar prazo atual de análise
            const buscarPrazoResponse = await request(app.getHttpServer())
                .get('/configuracao/limites/prazos/analise')
                .set('Authorization', authToken)
                .expect(200);
            expect(buscarPrazoResponse.body).toHaveProperty('tipo', 'analise');
            expect(buscarPrazoResponse.body).toHaveProperty('dias');
            // 2. Atualizar prazo
            const prazoAtualizado = {
                dias: 20,
            };
            const atualizarResponse = await request(app.getHttpServer())
                .put('/configuracao/limites/prazos/analise')
                .set('Authorization', authToken)
                .send(prazoAtualizado)
                .expect(200);
            expect(atualizarResponse.body).toHaveProperty('tipo', 'analise');
            expect(atualizarResponse.body).toHaveProperty('dias', prazoAtualizado.dias);
            // 3. Verificar que o prazo foi atualizado
            const verificarResponse = await request(app.getHttpServer())
                .get('/configuracao/limites/prazos/analise')
                .set('Authorization', authToken)
                .expect(200);
            expect(verificarResponse.body).toEqual(atualizarResponse.body);
            // 4. Buscar data limite baseada no prazo
            const dataLimiteResponse = await request(app.getHttpServer())
                .get('/configuracao/limites/prazos/analise/data-limite')
                .set('Authorization', authToken)
                .expect(200);
            expect(dataLimiteResponse.body).toHaveProperty('tipo', 'analise');
            expect(dataLimiteResponse.body).toHaveProperty('dias', prazoAtualizado.dias);
            expect(dataLimiteResponse.body).toHaveProperty('dataLimite');
            // A data limite deve ser uma data futura
            const dataLimite = new Date(dataLimiteResponse.body.dataLimite);
            const hoje = new Date();
            expect(dataLimite > hoje).toBe(true);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcdGVzdHNcXGNvbmZpZ3VyYWNhby5lMmUuc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZDQUFzRDtBQUN0RCwyQ0FBa0U7QUFDbEUsbURBQXFDO0FBQ3JDLDZDQUFnRDtBQUNoRCwyQ0FBNkQ7QUFDN0QsZ0VBQTREO0FBQzVELHFDQUF3QztBQUN4QyxzRUFBaUU7QUFDakUsb0VBQStEO0FBQy9ELHdFQUFtRTtBQUVuRTs7Ozs7O0dBTUc7QUFDSCxRQUFRLENBQUMscUNBQXFDLEVBQUUsR0FBRyxFQUFFO0lBQ25ELElBQUksR0FBcUIsQ0FBQztJQUMxQixJQUFJLFNBQWlCLENBQUM7SUFFdEIsOENBQThDO0lBQzlDLE1BQU0sY0FBYyxHQUFHO1FBQ3JCLEtBQUssRUFBRSxpQkFBaUI7UUFDeEIsS0FBSyxFQUFFLGdCQUFnQjtRQUN2QixJQUFJLEVBQUUsdUNBQWlCLENBQUMsTUFBTTtRQUM5QixTQUFTLEVBQUUsdUJBQXVCO1FBQ2xDLFNBQVMsRUFBRSxRQUFRO0tBQ3BCLENBQUM7SUFFRiw2Q0FBNkM7SUFDN0MsTUFBTSxhQUFhLEdBQUc7UUFDcEIsTUFBTSxFQUFFLGdCQUFnQjtRQUN4QixJQUFJLEVBQUUsbUJBQW1CO1FBQ3pCLFNBQVMsRUFBRSxzQkFBc0I7UUFDakMsSUFBSSxFQUFFLHFDQUFnQixDQUFDLEtBQUs7UUFDNUIsUUFBUSxFQUFFLDBDQUEwQztLQUNyRCxDQUFDO0lBRUYsZ0VBQWdFO0lBQ2hFLE1BQU0sZUFBZSxHQUFHO1FBQ3RCLE1BQU0sRUFBRSxrQkFBa0I7UUFDMUIsSUFBSSxFQUFFLHFCQUFxQjtRQUMzQixTQUFTLEVBQUUsMEJBQTBCO1FBQ3JDLElBQUksRUFBRSx5Q0FBa0IsQ0FBQyxLQUFLO1FBQzlCLFlBQVksRUFBRTtZ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QyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDbEUsTUFBTSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdFLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFFN0QseUNBQXlDO1lBQ3pDLE1BQU0sVUFBVSxHQUFHLElBQUksSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUNoRSxNQUFNLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1lBQ3hCLE1BQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcY29uZmlndXJhY2FvXFx0ZXN0c1xcY29uZmlndXJhY2FvLmUyZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSU5lc3RBcHBsaWNhdGlvbiwgVmFsaWRhdGlvblBpcGUgfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgKiBhcyByZXF1ZXN0IGZyb20gJ3N1cGVydGVzdCc7XG5pbXBvcnQgeyBUeXBlT3JtTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90eXBlb3JtJztcbmltcG9ydCB7IENvbmZpZ01vZHVsZSwgQ29uZmlnU2VydmljZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJztcbmltcG9ydCB7IENvbmZpZ3VyYWNhb01vZHVsZSB9IGZyb20gJy4uL2NvbmZpZ3VyYWNhby5tb2R1bGUnO1xuaW1wb3J0IHsgSnd0TW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9qd3QnO1xuaW1wb3J0IHsgUGFyYW1ldHJvVGlwb0VudW0gfSBmcm9tICcuLi9lbnVtcy9wYXJhbWV0cm8tdGlwby5lbnVtJztcbmltcG9ydCB7IFRlbXBsYXRlVGlwb0VudW0gfSBmcm9tICcuLi9lbnVtcy90ZW1wbGF0ZS10aXBvLmVudW0nO1xuaW1wb3J0IHsgSW50ZWdyYWNhb1RpcG9FbnVtIH0gZnJvbSAnLi4vZW51bXMvaW50ZWdyYWNhby10aXBvLmVudW0nO1xuXG4vKipcbiAqIFRlc3RlIGRlIGludGVncmHDp8OjbyBkbyBNw7NkdWxvIGRlIENvbmZpZ3VyYcOnw6NvXG4gKiBcbiAqIEVzdGUgdGVzdGUgcmVhbGl6YSBhIHZlcmlmaWNhw6fDo28gY29tcGxldGEgZG8gZmx1eG8gZGUgb3BlcmHDp8O1ZXNcbiAqIENSVUQgcGFyYSBvcyBkaXZlcnNvcyBzZXJ2acOnb3MgZG8gbcOzZHVsbywgZ2FyYW50aW5kbyBxdWUgdG9kYXNcbiAqIGFzIGZ1bmNpb25hbGlkYWRlcyBlc3TDo28gb3BlcmFuZG8gY29ycmV0YW1lbnRlLlxuICovXG5kZXNjcmliZSgnQ29uZmlndXJhw6fDo28gLSBUZXN0ZXMgZGUgSW50ZWdyYcOnw6NvJywgKCkgPT4ge1xuICBsZXQgYXBwOiBJTmVzdEFwcGxpY2F0aW9uO1xuICBsZXQgYXV0aFRva2VuOiBzdHJpbmc7XG5cbiAgLy8gRGFkb3MgZGUgdGVzdGUgcGFyYSBjcmlhw6fDo28gZGUgdW0gcGFyw6JtZXRyb1xuICBjb25zdCBwYXJhbWV0cm9UZXN0ZSA9IHtcbiAgICBjaGF2ZTogJ3Rlc3RlLnBhcmFtZXRybycsXG4gICAgdmFsb3I6ICdWYWxvciBkZSB0ZXN0ZScsXG4gICAgdGlwbzogUGFyYW1ldHJvVGlwb0VudW0uU1RSSU5HLFxuICAgIGRlc2NyaWNhbzogJ1BhcsOibWV0cm8gcGFyYSB0ZXN0ZXMnLFxuICAgIGNhdGVnb3JpYTogJ3Rlc3RlcycsXG4gIH07XG5cbiAgLy8gRGFkb3MgZGUgdGVzdGUgcGFyYSBjcmlhw6fDo28gZGUgdW0gdGVtcGxhdGVcbiAgY29uc3QgdGVtcGxhdGVUZXN0ZSA9IHtcbiAgICBjb2RpZ286ICd0ZXN0ZS10ZW1wbGF0ZScsXG4gICAgbm9tZTogJ1RlbXBsYXRlIGRlIFRlc3RlJyxcbiAgICBkZXNjcmljYW86ICdUZW1wbGF0ZSBwYXJhIHRlc3RlcycsXG4gICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICBjb250ZXVkbzogJzxodG1sPjxib2R5Pk9sw6EsIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgfTtcblxuICAvLyBEYWRvcyBkZSB0ZXN0ZSBwYXJhIGNyaWHDp8OjbyBkZSB1bWEgY29uZmlndXJhw6fDo28gZGUgaW50ZWdyYcOnw6NvXG4gIGNvbnN0IGludGVncmFjYW9UZXN0ZSA9IHtcbiAgICBjb2RpZ286ICd0ZXN0ZS1pbnRlZ3JhY2FvJyxcbiAgICBub21lOiAnSW50ZWdyYcOnw6NvIGRlIFRlc3RlJyxcbiAgICBkZXNjcmljYW86ICdDb25maWd1cmHDp8OjbyBwYXJhIHRlc3RlcycsXG4gICAgdGlwbzogSW50ZWdyYWNhb1RpcG9FbnVtLkVNQUlMLFxuICAgIGNvbmZpZ3VyYWNhbzoge1xuICAgICAgaG9zdDogJ3NtdHAudGVzdGUuY29tJyxcbiAgICAgIHBvcnQ6IDU4NyxcbiAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgICBmcm9tOiAndGVzdGVAZXhhbXBsZS5jb20nLFxuICAgIH0sXG4gICAgY3JlZGVuY2lhaXM6IHtcbiAgICAgIHVzZXI6ICd1c3VhcmlvX3Rlc3RlJyxcbiAgICAgIHBhc3N3b3JkOiAnc2VuaGFfdGVzdGUnLFxuICAgIH0sXG4gIH07XG5cbiAgLy8gQ29uZmlndXJhciBhIGFwbGljYcOnw6NvIHBhcmEgb3MgdGVzdGVzXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ3JpYXIgbyBtw7NkdWxvIGRlIHRlc3RlIHF1ZSBpbmNsdWkgb3MgY29tcG9uZW50ZXMgbmVjZXNzw6FyaW9zXG4gICAgY29uc3QgbW9kdWxlRml4dHVyZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBpbXBvcnRzOiBbXG4gICAgICAgIC8vIENvbmZpZ3VyYcOnw6NvIGRvIGFtYmllbnRlXG4gICAgICAgIENvbmZpZ01vZHVsZS5mb3JSb290KHtcbiAgICAgICAgICBpc0dsb2JhbDogdHJ1ZSxcbiAgICAgICAgICBlbnZGaWxlUGF0aDogJy5lbnYudGVzdCcsXG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gQ29uZXjDo28gY29tIG8gYmFuY28gZGUgZGFkb3MgZGUgdGVzdGVcbiAgICAgICAgVHlwZU9ybU1vZHVsZS5mb3JSb290QXN5bmMoe1xuICAgICAgICAgIGltcG9ydHM6IFtDb25maWdNb2R1bGVdLFxuICAgICAgICAgIHVzZUZhY3Rvcnk6IChjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlKSA9PiAoe1xuICAgICAgICAgICAgdHlwZTogJ3Bvc3RncmVzJyxcbiAgICAgICAgICAgIGhvc3Q6IGNvbmZpZ1NlcnZpY2UuZ2V0KCdEQl9IT1NUJywgJ2xvY2FsaG9zdCcpLFxuICAgICAgICAgICAgcG9ydDogY29uZmlnU2VydmljZS5nZXQ8bnVtYmVyPignREJfUE9SVCcsIDU0MzIpLFxuICAgICAgICAgICAgdXNlcm5hbWU6IGNvbmZpZ1NlcnZpY2UuZ2V0KCdEQl9VU0VSTkFNRScsICdwb3N0Z3JlcycpLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IGNvbmZpZ1NlcnZpY2UuZ2V0KCdEQl9QQVNTV09SRCcsICdwb3N0Z3JlcycpLFxuICAgICAgICAgICAgZGF0YWJhc2U6IGNvbmZpZ1NlcnZpY2UuZ2V0KCdEQl9EQVRBQkFTRScsICdwZ2Jlbl90ZXN0JyksXG4gICAgICAgICAgICBlbnRpdGllczogWydkaXN0LyoqLyouZW50aXR5ey50cywuanN9J10sXG4gICAgICAgICAgICBzeW5jaHJvbml6ZTogdHJ1ZSwgLy8gQXBlbmFzIHBhcmEgYW1iaWVudGUgZGUgdGVzdGVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBpbmplY3Q6IFtDb25maWdTZXJ2aWNlXSxcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBNw7NkdWxvIEpXVCBwYXJhIHNpbXVsYcOnw6NvIGRlIGF1dGVudGljYcOnw6NvXG4gICAgICAgIEp3dE1vZHVsZS5yZWdpc3RlckFzeW5jKHtcbiAgICAgICAgICBpbXBvcnRzOiBbQ29uZmlnTW9kdWxlXSxcbiAgICAgICAgICB1c2VGYWN0b3J5OiAoY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkgPT4gKHtcbiAgICAgICAgICAgIHNlY3JldDogY29uZmlnU2VydmljZS5nZXQoJ0pXVF9TRUNSRVQnLCAndGVzdC1zZWNyZXQnKSxcbiAgICAgICAgICAgIHNpZ25PcHRpb25zOiB7IGV4cGlyZXNJbjogJzFoJyB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGluamVjdDogW0NvbmZpZ1NlcnZpY2VdLFxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIE3Ds2R1bG8gZGUgY29uZmlndXJhw6fDo28gYSBzZXIgdGVzdGFkb1xuICAgICAgICBDb25maWd1cmFjYW9Nb2R1bGUsXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIC8vIENyaWFyIGEgYXBsaWNhw6fDo29cbiAgICBhcHAgPSBtb2R1bGVGaXh0dXJlLmNyZWF0ZU5lc3RBcHBsaWNhdGlvbigpO1xuICAgIFxuICAgIC8vIENvbmZpZ3VyYXIgcGlwZXMgZ2xvYmFpcyBwYXJhIHZhbGlkYcOnw6NvXG4gICAgYXBwLnVzZUdsb2JhbFBpcGVzKFxuICAgICAgbmV3IFZhbGlkYXRpb25QaXBlKHtcbiAgICAgICAgdHJhbnNmb3JtOiB0cnVlLFxuICAgICAgICB3aGl0ZWxpc3Q6IHRydWUsXG4gICAgICAgIGZvcmJpZE5vbldoaXRlbGlzdGVkOiB0cnVlLFxuICAgICAgfSksXG4gICAgKTtcbiAgICBcbiAgICBhd2FpdCBhcHAuaW5pdCgpO1xuXG4gICAgLy8gQ3JpYXIgdW0gdG9rZW4gSldUIHBhcmEgb3MgdGVzdGVzIChzaW11bGFuZG8gdW0gdXN1w6FyaW8gYXV0ZW50aWNhZG8pXG4gICAgY29uc3Qgand0U2VydmljZSA9IG1vZHVsZUZpeHR1cmUuZ2V0PEp3dE1vZHVsZT4oSnd0TW9kdWxlKTtcbiAgICBhdXRoVG9rZW4gPSBgQmVhcmVyICR7and0U2VydmljZS5zaWduKHtcbiAgICAgIHN1YjogJzAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMScsXG4gICAgICB1c2VybmFtZTogJ2FkbWluJyxcbiAgICAgIHJvbGVzOiBbJ2FkbWluJ10sXG4gICAgfSl9YDtcbiAgfSk7XG5cbiAgLy8gTGltcGFyIHJlY3Vyc29zIGFww7NzIG9zIHRlc3Rlc1xuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYXBwLmNsb3NlKCk7XG4gIH0pO1xuXG4gIC8vIFZlcmlmaWNhciBhIGxpbXBlemEgZW50cmUgdGVzdGVzXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8gUmVtb3ZlciBvcyBkYWRvcyBkZSB0ZXN0ZSBjcmlhZG9zXG4gICAgYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgLmRlbGV0ZShgL2NvbmZpZ3VyYWNhby9wYXJhbWV0cm9zLyR7cGFyYW1ldHJvVGVzdGUuY2hhdmV9YClcbiAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAuY2F0Y2goKCkgPT4ge30pO1xuXG4gICAgYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgLmRlbGV0ZShgL2NvbmZpZ3VyYWNhby90ZW1wbGF0ZXMvJHt0ZW1wbGF0ZVRlc3RlLmNvZGlnb31gKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAuZGVsZXRlKGAvY29uZmlndXJhY2FvL2ludGVncmFjb2VzLyR7aW50ZWdyYWNhb1Rlc3RlLmNvZGlnb31gKVxuICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XG4gIH0pO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRlc3RlcyBwYXJhIG8gc2VydmnDp28gZGUgUGFyw6JtZXRyb3NcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgZGVzY3JpYmUoJ1NlcnZpw6dvIGRlIFBhcsOibWV0cm9zJywgKCkgPT4ge1xuICAgIGl0KCdEZXZlIGNyaWFyLCBidXNjYXIsIGF0dWFsaXphciBlIHJlbW92ZXIgdW0gcGFyw6JtZXRybycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIENyaWFyIHVtIHBhcsOibWV0cm9cbiAgICAgIGNvbnN0IGNyaWFyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KCcvY29uZmlndXJhY2FvL3BhcmFtZXRyb3MnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChwYXJhbWV0cm9UZXN0ZSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICBleHBlY3QoY3JpYXJSZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgIGV4cGVjdChjcmlhclJlc3BvbnNlLmJvZHkuY2hhdmUpLnRvQmUocGFyYW1ldHJvVGVzdGUuY2hhdmUpO1xuXG4gICAgICAvLyAyLiBCdXNjYXIgbyBwYXLDom1ldHJvIGNyaWFkb1xuICAgICAgY29uc3QgYnVzY2FyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5nZXQoYC9jb25maWd1cmFjYW8vcGFyYW1ldHJvcy8ke3BhcmFtZXRyb1Rlc3RlLmNoYXZlfWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGJ1c2NhclJlc3BvbnNlLmJvZHkuY2hhdmUpLnRvQmUocGFyYW1ldHJvVGVzdGUuY2hhdmUpO1xuICAgICAgZXhwZWN0KGJ1c2NhclJlc3BvbnNlLmJvZHkudmFsb3IpLnRvQmUocGFyYW1ldHJvVGVzdGUudmFsb3IpO1xuXG4gICAgICAvLyAzLiBBdHVhbGl6YXIgbyBwYXLDom1ldHJvXG4gICAgICBjb25zdCBkYWRvc0F0dWFsaXphY2FvID0ge1xuICAgICAgICB2YWxvcjogJ1ZhbG9yIGF0dWFsaXphZG8nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBhdHVhbGl6YWRhJyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGF0dWFsaXphclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KGAvY29uZmlndXJhY2FvL3BhcmFtZXRyb3MvJHtwYXJhbWV0cm9UZXN0ZS5jaGF2ZX1gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChkYWRvc0F0dWFsaXphY2FvKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChhdHVhbGl6YXJSZXNwb25zZS5ib2R5LnZhbG9yKS50b0JlKGRhZG9zQXR1YWxpemFjYW8udmFsb3IpO1xuICAgICAgZXhwZWN0KGF0dWFsaXphclJlc3BvbnNlLmJvZHkuZGVzY3JpY2FvKS50b0JlKGRhZG9zQXR1YWxpemFjYW8uZGVzY3JpY2FvKTtcblxuICAgICAgLy8gNC4gUmVtb3ZlciBvIHBhcsOibWV0cm9cbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmRlbGV0ZShgL2NvbmZpZ3VyYWNhby9wYXJhbWV0cm9zLyR7cGFyYW1ldHJvVGVzdGUuY2hhdmV9YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDQpO1xuXG4gICAgICAvLyA1LiBWZXJpZmljYXIgcXVlIG8gcGFyw6JtZXRybyBmb2kgcmVtb3ZpZG9cbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldChgL2NvbmZpZ3VyYWNhby9wYXJhbWV0cm9zLyR7cGFyYW1ldHJvVGVzdGUuY2hhdmV9YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ0RldmUgYnVzY2FyIHBhcsOibWV0cm9zIHBvciBjYXRlZ29yaWEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAxLiBDcmlhciB1bSBwYXLDom1ldHJvXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KCcvY29uZmlndXJhY2FvL3BhcmFtZXRyb3MnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChwYXJhbWV0cm9UZXN0ZSlcbiAgICAgICAgLmV4cGVjdCgyMDEpO1xuXG4gICAgICAvLyAyLiBCdXNjYXIgcG9yIGNhdGVnb3JpYVxuICAgICAgY29uc3QgYnVzY2FyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5nZXQoYC9jb25maWd1cmFjYW8vcGFyYW1ldHJvcy9jYXRlZ29yaWEvJHtwYXJhbWV0cm9UZXN0ZS5jYXRlZ29yaWF9YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShidXNjYXJSZXNwb25zZS5ib2R5KSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChidXNjYXJSZXNwb25zZS5ib2R5Lmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KGJ1c2NhclJlc3BvbnNlLmJvZHlbMF0uY2F0ZWdvcmlhKS50b0JlKHBhcmFtZXRyb1Rlc3RlLmNhdGVnb3JpYSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRlc3RlcyBwYXJhIG8gc2VydmnDp28gZGUgVGVtcGxhdGVzXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIGRlc2NyaWJlKCdTZXJ2acOnbyBkZSBUZW1wbGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ0RldmUgY3JpYXIsIGJ1c2NhciwgYXR1YWxpemFyIGUgcmVtb3ZlciB1bSB0ZW1wbGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIENyaWFyIHVtIHRlbXBsYXRlXG4gICAgICBjb25zdCBjcmlhclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucG9zdCgnL2NvbmZpZ3VyYWNhby90ZW1wbGF0ZXMnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZCh0ZW1wbGF0ZVRlc3RlKVxuICAgICAgICAuZXhwZWN0KDIwMSk7XG5cbiAgICAgIGV4cGVjdChjcmlhclJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdpZCcpO1xuICAgICAgZXhwZWN0KGNyaWFyUmVzcG9uc2UuYm9keS5jb2RpZ28pLnRvQmUodGVtcGxhdGVUZXN0ZS5jb2RpZ28pO1xuXG4gICAgICAvLyAyLiBCdXNjYXIgbyB0ZW1wbGF0ZSBjcmlhZG9cbiAgICAgIGNvbnN0IGJ1c2NhclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KGAvY29uZmlndXJhY2FvL3RlbXBsYXRlcy8ke3RlbXBsYXRlVGVzdGUuY29kaWdvfWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGJ1c2NhclJlc3BvbnNlLmJvZHkuY29kaWdvKS50b0JlKHRlbXBsYXRlVGVzdGUuY29kaWdvKTtcbiAgICAgIGV4cGVjdChidXNjYXJSZXNwb25zZS5ib2R5Lm5vbWUpLnRvQmUodGVtcGxhdGVUZXN0ZS5ub21lKTtcblxuICAgICAgLy8gMy4gQXR1YWxpemFyIG8gdGVtcGxhdGVcbiAgICAgIGNvbnN0IGRhZG9zQXR1YWxpemFjYW8gPSB7XG4gICAgICAgIG5vbWU6ICdOb21lIEF0dWFsaXphZG8nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBhdHVhbGl6YWRhJyxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5Db250ZcO6ZG8gYXR1YWxpemFkbywge3tub21lfX0hPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgYXR1YWxpemFyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wdXQoYC9jb25maWd1cmFjYW8vdGVtcGxhdGVzLyR7dGVtcGxhdGVUZXN0ZS5jb2RpZ299YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLnNlbmQoZGFkb3NBdHVhbGl6YWNhbylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoYXR1YWxpemFyUmVzcG9uc2UuYm9keS5ub21lKS50b0JlKGRhZG9zQXR1YWxpemFjYW8ubm9tZSk7XG4gICAgICBleHBlY3QoYXR1YWxpemFyUmVzcG9uc2UuYm9keS5kZXNjcmljYW8pLnRvQmUoZGFkb3NBdHVhbGl6YWNhby5kZXNjcmljYW8pO1xuICAgICAgZXhwZWN0KGF0dWFsaXphclJlc3BvbnNlLmJvZHkuY29udGV1ZG8pLnRvQmUoZGFkb3NBdHVhbGl6YWNhby5jb250ZXVkbyk7XG5cbiAgICAgIC8vIDQuIFRlc3RhciByZW5kZXJpemHDp8OjbyBkbyB0ZW1wbGF0ZVxuICAgICAgY29uc3QgdGVzdGFyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KCcvY29uZmlndXJhY2FvL3RlbXBsYXRlcy90ZXN0YXInKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgY29udGV1ZG86IGRhZG9zQXR1YWxpemFjYW8uY29udGV1ZG8sXG4gICAgICAgICAgZGFkb3M6IHsgbm9tZTogJ0pvw6NvJyB9LFxuICAgICAgICB9KVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdCh0ZXN0YXJSZXNwb25zZS5ib2R5LmNvbnRldWRvKS50b0JlKCc8aHRtbD48Ym9keT5Db250ZcO6ZG8gYXR1YWxpemFkbywgSm/Do28hPC9ib2R5PjwvaHRtbD4nKTtcblxuICAgICAgLy8gNS4gQWx0ZXJhciBzdGF0dXMgZG8gdGVtcGxhdGVcbiAgICAgIGNvbnN0IHN0YXR1c1Jlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KGAvY29uZmlndXJhY2FvL3RlbXBsYXRlcy8ke3RlbXBsYXRlVGVzdGUuY29kaWdvfS9zdGF0dXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZCh7IGF0aXZvOiBmYWxzZSB9KVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChzdGF0dXNSZXNwb25zZS5ib2R5LmF0aXZvKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gNi4gUmVtb3ZlciBvIHRlbXBsYXRlXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5kZWxldGUoYC9jb25maWd1cmFjYW8vdGVtcGxhdGVzLyR7dGVtcGxhdGVUZXN0ZS5jb2RpZ299YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDQpO1xuXG4gICAgICAvLyA3LiBWZXJpZmljYXIgcXVlIG8gdGVtcGxhdGUgZm9pIHJlbW92aWRvXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5nZXQoYC9jb25maWd1cmFjYW8vdGVtcGxhdGVzLyR7dGVtcGxhdGVUZXN0ZS5jb2RpZ299YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCg0MDQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ0RldmUgYnVzY2FyIHRlbXBsYXRlcyBwb3IgdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIENyaWFyIHVtIHRlbXBsYXRlXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KCcvY29uZmlndXJhY2FvL3RlbXBsYXRlcycpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5zZW5kKHRlbXBsYXRlVGVzdGUpXG4gICAgICAgIC5leHBlY3QoMjAxKTtcblxuICAgICAgLy8gMi4gQnVzY2FyIHBvciB0aXBvXG4gICAgICBjb25zdCBidXNjYXJSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldChgL2NvbmZpZ3VyYWNhby90ZW1wbGF0ZXMvdGlwby8ke3RlbXBsYXRlVGVzdGUudGlwb31gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGJ1c2NhclJlc3BvbnNlLmJvZHkpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGJ1c2NhclJlc3BvbnNlLmJvZHkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoYnVzY2FyUmVzcG9uc2UuYm9keVswXS50aXBvKS50b0JlKHRlbXBsYXRlVGVzdGUudGlwbyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRlc3RlcyBwYXJhIG8gc2VydmnDp28gZGUgSW50ZWdyYcOnw7Vlc1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBkZXNjcmliZSgnU2VydmnDp28gZGUgSW50ZWdyYcOnw7VlcycsICgpID0+IHtcbiAgICBpdCgnRGV2ZSBjcmlhciwgYnVzY2FyLCBhdHVhbGl6YXIgZSByZW1vdmVyIHVtYSBjb25maWd1cmHDp8OjbyBkZSBpbnRlZ3Jhw6fDo28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAxLiBDcmlhciB1bWEgY29uZmlndXJhw6fDo28gZGUgaW50ZWdyYcOnw6NvXG4gICAgICBjb25zdCBjcmlhclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KGAvY29uZmlndXJhY2FvL2ludGVncmFjb2VzLyR7aW50ZWdyYWNhb1Rlc3RlLmNvZGlnb31gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChpbnRlZ3JhY2FvVGVzdGUpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGNyaWFyUmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICBleHBlY3QoY3JpYXJSZXNwb25zZS5ib2R5LmNvZGlnbykudG9CZShpbnRlZ3JhY2FvVGVzdGUuY29kaWdvKTtcblxuICAgICAgLy8gMi4gQnVzY2FyIGEgY29uZmlndXJhw6fDo28gY3JpYWRhXG4gICAgICBjb25zdCBidXNjYXJSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldChgL2NvbmZpZ3VyYWNhby9pbnRlZ3JhY29lcy8ke2ludGVncmFjYW9UZXN0ZS5jb2RpZ299YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoYnVzY2FyUmVzcG9uc2UuYm9keS5jb2RpZ28pLnRvQmUoaW50ZWdyYWNhb1Rlc3RlLmNvZGlnbyk7XG4gICAgICBleHBlY3QoYnVzY2FyUmVzcG9uc2UuYm9keS5ub21lKS50b0JlKGludGVncmFjYW9UZXN0ZS5ub21lKTtcbiAgICAgIGV4cGVjdChidXNjYXJSZXNwb25zZS5ib2R5LmNvbmZpZ3VyYWNhbykudG9FcXVhbChpbnRlZ3JhY2FvVGVzdGUuY29uZmlndXJhY2FvKTtcbiAgICAgIC8vIEFzIGNyZWRlbmNpYWlzIG7Do28gZGV2ZW0gc2VyIHJldG9ybmFkYXMgbmEgcmVzcG9zdGFcbiAgICAgIGV4cGVjdChidXNjYXJSZXNwb25zZS5ib2R5LmNyZWRlbmNpYWlzKS50b0JlVW5kZWZpbmVkKCk7XG5cbiAgICAgIC8vIDMuIEF0dWFsaXphciBhIGNvbmZpZ3VyYcOnw6NvXG4gICAgICBjb25zdCBkYWRvc0F0dWFsaXphY2FvID0ge1xuICAgICAgICBub21lOiAnTm9tZSBBdHVhbGl6YWRvJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gYXR1YWxpemFkYScsXG4gICAgICAgIGNvbmZpZ3VyYWNhbzoge1xuICAgICAgICAgIC4uLmludGVncmFjYW9UZXN0ZS5jb25maWd1cmFjYW8sXG4gICAgICAgICAgcG9ydDogNDY1LFxuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGF0dWFsaXphclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KGAvY29uZmlndXJhY2FvL2ludGVncmFjb2VzLyR7aW50ZWdyYWNhb1Rlc3RlLmNvZGlnb31gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChkYWRvc0F0dWFsaXphY2FvKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChhdHVhbGl6YXJSZXNwb25zZS5ib2R5Lm5vbWUpLnRvQmUoZGFkb3NBdHVhbGl6YWNhby5ub21lKTtcbiAgICAgIGV4cGVjdChhdHVhbGl6YXJSZXNwb25zZS5ib2R5LmRlc2NyaWNhbykudG9CZShkYWRvc0F0dWFsaXphY2FvLmRlc2NyaWNhbyk7XG4gICAgICBleHBlY3QoYXR1YWxpemFyUmVzcG9uc2UuYm9keS5jb25maWd1cmFjYW8pLnRvRXF1YWwoZGFkb3NBdHVhbGl6YWNhby5jb25maWd1cmFjYW8pO1xuXG4gICAgICAvLyA0LiBBbHRlcmFyIHN0YXR1cyBkYSBjb25maWd1cmHDp8Ojb1xuICAgICAgY29uc3Qgc3RhdHVzUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wdXQoYC9jb25maWd1cmFjYW8vaW50ZWdyYWNvZXMvJHtpbnRlZ3JhY2FvVGVzdGUuY29kaWdvfS9zdGF0dXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZCh7IGF0aXZvOiBmYWxzZSB9KVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChzdGF0dXNSZXNwb25zZS5ib2R5LmF0aXZvKS50b0JlKGZhbHNlKTtcblxuICAgICAgLy8gNS4gUmVtb3ZlciBhIGNvbmZpZ3VyYcOnw6NvXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5kZWxldGUoYC9jb25maWd1cmFjYW8vaW50ZWdyYWNvZXMvJHtpbnRlZ3JhY2FvVGVzdGUuY29kaWdvfWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjA0KTtcblxuICAgICAgLy8gNi4gVmVyaWZpY2FyIHF1ZSBhIGNvbmZpZ3VyYcOnw6NvIGZvaSByZW1vdmlkYVxuICAgICAgYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KGAvY29uZmlndXJhY2FvL2ludGVncmFjb2VzLyR7aW50ZWdyYWNhb1Rlc3RlLmNvZGlnb31gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgfSk7XG5cbiAgICBpdCgnRGV2ZSBidXNjYXIgY29uZmlndXJhw6fDtWVzIGRlIGludGVncmHDp8OjbyBwb3IgdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIDEuIENyaWFyIHVtYSBjb25maWd1cmHDp8OjbyBkZSBpbnRlZ3Jhw6fDo29cbiAgICAgIGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnB1dChgL2NvbmZpZ3VyYWNhby9pbnRlZ3JhY29lcy8ke2ludGVncmFjYW9UZXN0ZS5jb2RpZ299YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLnNlbmQoaW50ZWdyYWNhb1Rlc3RlKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIC8vIDIuIEJ1c2NhciBwb3IgdGlwb1xuICAgICAgY29uc3QgYnVzY2FyUmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5nZXQoYC9jb25maWd1cmFjYW8vaW50ZWdyYWNvZXM/dGlwbz0ke2ludGVncmFjYW9UZXN0ZS50aXBvfWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYnVzY2FyUmVzcG9uc2UuYm9keSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoYnVzY2FyUmVzcG9uc2UuYm9keS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChidXNjYXJSZXNwb25zZS5ib2R5WzBdLnRpcG8pLnRvQmUoaW50ZWdyYWNhb1Rlc3RlLnRpcG8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ0RldmUgdGVzdGFyIHVtYSBjb25maWd1cmHDp8OjbyBkZSBpbnRlZ3Jhw6fDo28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAxLiBUZXN0YXIgdW1hIGNvbmZpZ3VyYcOnw6NvXG4gICAgICAvLyBOb3RlOiBFbSB1bSBhbWJpZW50ZSBkZSB0ZXN0ZSByZWFsLCB2b2PDqiBwcm92YXZlbG1lbnRlIHVzYXJpYSB1bSBtb2NrIHBhcmEgb1xuICAgICAgLy8gc2VydmnDp28gZXh0ZXJubyBxdWUgw6kgdGVzdGFkbywgY29tbyB1bSBzZXJ2aWRvciBTTVRQXG4gICAgICBjb25zdCB0ZXN0YXJSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnBvc3QoJy9jb25maWd1cmFjYW8vaW50ZWdyYWNvZXMvdGVzdGFyJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHRpcG86IEludGVncmFjYW9UaXBvRW51bS5FTUFJTCxcbiAgICAgICAgICBjb25maWd1cmFjYW86IGludGVncmFjYW9UZXN0ZS5jb25maWd1cmFjYW8sXG4gICAgICAgICAgY3JlZGVuY2lhaXM6IGludGVncmFjYW9UZXN0ZS5jcmVkZW5jaWFpcyxcbiAgICAgICAgICBkYWRvc1Rlc3RlOiB7XG4gICAgICAgICAgICBwYXJhOiAndGVzdGVAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgYXNzdW50bzogJ1Rlc3RlIGRlIEludGVncmHDp8OjbycsXG4gICAgICAgICAgICBtZW5zYWdlbTogJ0VzdGEgw6kgdW1hIG1lbnNhZ2VtIGRlIHRlc3RlLicsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICAvLyBFbSB1bSB0ZXN0ZSByZWFsLCB2b2PDqiB2ZXJpZmljYXJpYSBvIHN1Y2Vzc28gb3UgZmFsaGEgY29tIGJhc2UgbmEgcmVzcG9zdGEgZG8gc2VydmnDp28gZXh0ZXJub1xuICAgICAgZXhwZWN0KHRlc3RhclJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdzdWNlc3NvJyk7XG4gICAgICBleHBlY3QodGVzdGFyUmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ21lbnNhZ2VtJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFRlc3RlcyBwYXJhIG8gc2VydmnDp28gZGUgTGltaXRlc1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBkZXNjcmliZSgnU2VydmnDp28gZGUgTGltaXRlcycsICgpID0+IHtcbiAgICBpdCgnRGV2ZSBhdHVhbGl6YXIgZSBidXNjYXIgbGltaXRlcyBkZSB1cGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyAxLiBCdXNjYXIgbGltaXRlcyBhdHVhaXNcbiAgICAgIGNvbnN0IGJ1c2NhckxpbWl0ZXNSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldCgnL2NvbmZpZ3VyYWNhby9saW1pdGVzL3VwbG9hZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgLy8gMi4gQXR1YWxpemFyIGxpbWl0ZXNcbiAgICAgIGNvbnN0IGxpbWl0ZXNBdHVhbGl6YWRvcyA9IHtcbiAgICAgICAgdGFtYW5ob01heGltb0FycXVpdm86IDIwOTcxNTIwLCAvLyAyME1CXG4gICAgICAgIG51bWVyb01heGltb0FycXVpdm9zOiAzMCxcbiAgICAgICAgZXh0ZW5zb2VzUGVybWl0aWRhczogWydqcGcnLCAnanBlZycsICdwbmcnLCAncGRmJywgJ2RvY3gnLCAneGxzeCddLFxuICAgICAgICBtYXhpbW9Qb3JSZXF1aXNpY2FvOiAxMCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGF0dWFsaXphclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KCcvY29uZmlndXJhY2FvL2xpbWl0ZXMvdXBsb2FkJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLnNlbmQobGltaXRlc0F0dWFsaXphZG9zKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChhdHVhbGl6YXJSZXNwb25zZS5ib2R5LnRhbWFuaG9NYXhpbW9BcnF1aXZvKS50b0JlKGxpbWl0ZXNBdHVhbGl6YWRvcy50YW1hbmhvTWF4aW1vQXJxdWl2byk7XG4gICAgICBleHBlY3QoYXR1YWxpemFyUmVzcG9uc2UuYm9keS5udW1lcm9NYXhpbW9BcnF1aXZvcykudG9CZShsaW1pdGVzQXR1YWxpemFkb3MubnVtZXJvTWF4aW1vQXJxdWl2b3MpO1xuICAgICAgZXhwZWN0KGF0dWFsaXphclJlc3BvbnNlLmJvZHkuZXh0ZW5zb2VzUGVybWl0aWRhcykudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKGxpbWl0ZXNBdHVhbGl6YWRvcy5leHRlbnNvZXNQZXJtaXRpZGFzKSk7XG4gICAgICBleHBlY3QoYXR1YWxpemFyUmVzcG9uc2UuYm9keS5tYXhpbW9Qb3JSZXF1aXNpY2FvKS50b0JlKGxpbWl0ZXNBdHVhbGl6YWRvcy5tYXhpbW9Qb3JSZXF1aXNpY2FvKTtcblxuICAgICAgLy8gMy4gVmVyaWZpY2FyIHF1ZSBvcyBsaW1pdGVzIGZvcmFtIGF0dWFsaXphZG9zXG4gICAgICBjb25zdCB2ZXJpZmljYXJSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldCgnL2NvbmZpZ3VyYWNhby9saW1pdGVzL3VwbG9hZCcpXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBhdXRoVG9rZW4pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KHZlcmlmaWNhclJlc3BvbnNlLmJvZHkpLnRvRXF1YWwoYXR1YWxpemFyUmVzcG9uc2UuYm9keSk7XG4gICAgfSk7XG5cbiAgICBpdCgnRGV2ZSBhdHVhbGl6YXIgZSBidXNjYXIgcHJhem9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gMS4gQnVzY2FyIHByYXpvIGF0dWFsIGRlIGFuw6FsaXNlXG4gICAgICBjb25zdCBidXNjYXJQcmF6b1Jlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KCcvY29uZmlndXJhY2FvL2xpbWl0ZXMvcHJhem9zL2FuYWxpc2UnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChidXNjYXJQcmF6b1Jlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0aXBvJywgJ2FuYWxpc2UnKTtcbiAgICAgIGV4cGVjdChidXNjYXJQcmF6b1Jlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdkaWFzJyk7XG5cbiAgICAgIC8vIDIuIEF0dWFsaXphciBwcmF6b1xuICAgICAgY29uc3QgcHJhem9BdHVhbGl6YWRvID0ge1xuICAgICAgICBkaWFzOiAyMCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGF0dWFsaXphclJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucHV0KCcvY29uZmlndXJhY2FvL2xpbWl0ZXMvcHJhem9zL2FuYWxpc2UnKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYXV0aFRva2VuKVxuICAgICAgICAuc2VuZChwcmF6b0F0dWFsaXphZG8pXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgZXhwZWN0KGF0dWFsaXphclJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0aXBvJywgJ2FuYWxpc2UnKTtcbiAgICAgIGV4cGVjdChhdHVhbGl6YXJSZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZGlhcycsIHByYXpvQXR1YWxpemFkby5kaWFzKTtcblxuICAgICAgLy8gMy4gVmVyaWZpY2FyIHF1ZSBvIHByYXpvIGZvaSBhdHVhbGl6YWRvXG4gICAgICBjb25zdCB2ZXJpZmljYXJSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldCgnL2NvbmZpZ3VyYWNhby9saW1pdGVzL3ByYXpvcy9hbmFsaXNlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QodmVyaWZpY2FyUmVzcG9uc2UuYm9keSkudG9FcXVhbChhdHVhbGl6YXJSZXNwb25zZS5ib2R5KTtcblxuICAgICAgLy8gNC4gQnVzY2FyIGRhdGEgbGltaXRlIGJhc2VhZGEgbm8gcHJhem9cbiAgICAgIGNvbnN0IGRhdGFMaW1pdGVSZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmdldCgnL2NvbmZpZ3VyYWNhby9saW1pdGVzL3ByYXpvcy9hbmFsaXNlL2RhdGEtbGltaXRlJylcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGF1dGhUb2tlbilcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QoZGF0YUxpbWl0ZVJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCd0aXBvJywgJ2FuYWxpc2UnKTtcbiAgICAgIGV4cGVjdChkYXRhTGltaXRlUmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2RpYXMnLCBwcmF6b0F0dWFsaXphZG8uZGlhcyk7XG4gICAgICBleHBlY3QoZGF0YUxpbWl0ZVJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdkYXRhTGltaXRlJyk7XG4gICAgICBcbiAgICAgIC8vIEEgZGF0YSBsaW1pdGUgZGV2ZSBzZXIgdW1hIGRhdGEgZnV0dXJhXG4gICAgICBjb25zdCBkYXRhTGltaXRlID0gbmV3IERhdGUoZGF0YUxpbWl0ZVJlc3BvbnNlLmJvZHkuZGF0YUxpbWl0ZSk7XG4gICAgICBjb25zdCBob2plID0gbmV3IERhdGUoKTtcbiAgICAgIGV4cGVjdChkYXRhTGltaXRlID4gaG9qZSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==