fbf0fc803a184e3231d2cb164c202015
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;
Object.defineProperty(exports, "__esModule", { value: true });
exports.TemplateController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const template_service_1 = require("../services/template.service");
const template_create_dto_1 = require("../dtos/template/template-create.dto");
const template_update_dto_1 = require("../dtos/template/template-update.dto");
const template_test_dto_1 = require("../dtos/template/template-test.dto");
const template_response_dto_1 = require("../dtos/template/template-response.dto");
const template_tipo_enum_1 = require("../../../enums/template-tipo.enum");
/**
 * Controlador responsável pelas operações de templates do sistema
 */
let TemplateController = class TemplateController {
    templateService;
    constructor(templateService) {
        this.templateService = templateService;
    }
    /**
     * Busca todos os templates do sistema
     * @param tipo Tipo opcional para filtrar
     * @returns Lista de templates
     */
    async buscarTodos(tipo) {
        return this.templateService.buscarTodos(tipo);
    }
    /**
     * Busca um template específico por seu código
     * @param codigo Código do template
     * @returns Template encontrado
     */
    async buscarPorCodigo(codigo) {
        return this.templateService.buscarPorCodigo(codigo);
    }
    /**
     * Cria um novo template no sistema
     * @param dto Dados do template a ser criado
     * @returns Template criado
     */
    async criar(dto) {
        return this.templateService.criar(dto);
    }
    /**
     * Atualiza um template existente
     * @param codigo Código do template
     * @param dto Dados para atualização
     * @returns Template atualizado
     */
    async atualizar(codigo, dto) {
        return this.templateService.atualizar(codigo, dto);
    }
    /**
     * Remove um template do sistema
     * @param codigo Código do template
     */
    async remover(codigo) {
        await this.templateService.remover(codigo);
    }
    /**
     * Testa a renderização de um template com dados de exemplo
     * @param dto Dados para teste do template
     * @returns Conteúdo renderizado
     */
    async testar(dto) {
        return this.templateService.testar(dto);
    }
    /**
     * Ativa ou desativa um template
     * @param codigo Código do template
     * @param ativo Status de ativação
     * @returns Template atualizado
     */
    async alterarStatus(codigo, { ativo }) {
        return this.templateService.alterarStatus(codigo, ativo);
    }
    /**
     * Busca templates por tipo
     * @param tipo Tipo dos templates
     * @returns Lista de templates
     */
    async buscarPorTipo(tipo) {
        return this.templateService.buscarPorTipo(tipo);
    }
};
exports.TemplateController = TemplateController;
__decorate([
    (0, common_1.Get)(),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar todos os templates do sistema' }),
    (0, swagger_1.ApiQuery)({
        name: 'tipo',
        required: false,
        description: 'Filtrar por tipo de template',
        enum: template_tipo_enum_1.TemplateTipoEnum,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de templates encontrados',
        type: [template_response_dto_1.TemplateResponseDto],
    }),
    __param(0, (0, common_1.Query)('tipo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof template_tipo_enum_1.TemplateTipoEnum !== "undefined" && template_tipo_enum_1.TemplateTipoEnum) === "function" ? _b : Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], TemplateController.prototype, "buscarTodos", null);
__decorate([
    (0, common_1.Get)(':codigo'),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar template por código' }),
    (0, swagger_1.ApiParam)({
        name: 'codigo',
        description: 'Código único do template',
        example: 'email-bem-vindo',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Template encontrado',
        type: template_response_dto_1.TemplateResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Template não encontrado',
    }),
    __param(0, (0, common_1.Param)('codigo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], TemplateController.prototype, "buscarPorCodigo", null);
__decorate([
    (0, common_1.Post)(),
    (0, swagger_1.ApiOperation)({ summary: 'Criar novo template' }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Template criado com sucesso',
        type: template_response_dto_1.TemplateResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos ou template já existe',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_e = typeof template_create_dto_1.TemplateCreateDto !== "undefined" && template_create_dto_1.TemplateCreateDto) === "function" ? _e : Object]),
    __metadata("design:returntype", typeof (_f = typeof Promise !== "undefined" && Promise) === "function" ? _f : Object)
], TemplateController.prototype, "criar", null);
__decorate([
    (0, common_1.Put)(':codigo'),
    (0, swagger_1.ApiOperation)({ summary: 'Atualizar template existente' }),
    (0, swagger_1.ApiParam)({
        name: 'codigo',
        description: 'Código único do template',
        example: 'email-bem-vindo',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Template atualizado com sucesso',
        type: template_response_dto_1.TemplateResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Template não encontrado',
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos',
    }),
    __param(0, (0, common_1.Param)('codigo')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_g = typeof template_update_dto_1.TemplateUpdateDto !== "undefined" && template_update_dto_1.TemplateUpdateDto) === "function" ? _g : Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], TemplateController.prototype, "atualizar", null);
__decorate([
    (0, common_1.Delete)(':codigo'),
    (0, swagger_1.ApiOperation)({ summary: 'Remover template' }),
    (0, swagger_1.ApiParam)({
        name: 'codigo',
        description: 'Código único do template',
        example: 'email-bem-vindo',
    }),
    (0, swagger_1.ApiResponse)({
        status: 204,
        description: 'Template removido com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Template não encontrado',
    }),
    __param(0, (0, common_1.Param)('codigo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], TemplateController.prototype, "remover", null);
__decorate([
    (0, common_1.Post)('testar'),
    (0, swagger_1.ApiOperation)({ summary: 'Testar renderização de template' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Template renderizado com sucesso',
        schema: {
            type: 'object',
            properties: {
                conteudo: {
                    type: 'string',
                    description: 'Conteúdo renderizado do template',
                },
            },
        },
    }),
    (0, swagger_1.ApiResponse)({
        status: 400,
        description: 'Dados inválidos ou erro na renderização',
    }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_k = typeof template_test_dto_1.TemplateTestDto !== "undefined" && template_test_dto_1.TemplateTestDto) === "function" ? _k : Object]),
    __metadata("design:returntype", typeof (_l = typeof Promise !== "undefined" && Promise) === "function" ? _l : Object)
], TemplateController.prototype, "testar", null);
__decorate([
    (0, common_1.Put)(':codigo/status'),
    (0, swagger_1.ApiOperation)({ summary: 'Ativar ou desativar template' }),
    (0, swagger_1.ApiParam)({
        name: 'codigo',
        description: 'Código único do template',
        example: 'email-bem-vindo',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Status do template atualizado com sucesso',
        type: template_response_dto_1.TemplateResponseDto,
    }),
    (0, swagger_1.ApiResponse)({
        status: 404,
        description: 'Template não encontrado',
    }),
    __param(0, (0, common_1.Param)('codigo')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", typeof (_m = typeof Promise !== "undefined" && Promise) === "function" ? _m : Object)
], TemplateController.prototype, "alterarStatus", null);
__decorate([
    (0, common_1.Get)('tipo/:tipo'),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar templates por tipo' }),
    (0, swagger_1.ApiParam)({
        name: 'tipo',
        description: 'Tipo de template',
        enum: template_tipo_enum_1.TemplateTipoEnum,
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de templates encontrados',
        type: [template_response_dto_1.TemplateResponseDto],
    }),
    __param(0, (0, common_1.Param)('tipo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof template_tipo_enum_1.TemplateTipoEnum !== "undefined" && template_tipo_enum_1.TemplateTipoEnum) === "function" ? _o : Object]),
    __metadata("design:returntype", typeof (_p = typeof Promise !== "undefined" && Promise) === "function" ? _p : Object)
], TemplateController.prototype, "buscarPorTipo", null);
exports.TemplateController = TemplateController = __decorate([
    (0, swagger_1.ApiTags)('Configuração'),
    (0, common_1.Controller)('configuracao/templates'),
    __metadata("design:paramtypes", [typeof (_a = typeof template_service_1.TemplateService !== "undefined" && template_service_1.TemplateService) === "function" ? _a : Object])
], TemplateController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcY29udHJvbGxlcnNcXHRlbXBsYXRlLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQVN3QjtBQUN4Qiw2Q0FNeUI7QUFDekIsbUVBQStEO0FBQy9ELDhFQUF5RTtBQUN6RSw4RUFBeUU7QUFDekUsMEVBQXFFO0FBQ3JFLGtGQUE2RTtBQUM3RSwwRUFBcUU7QUFFckU7O0dBRUc7QUFHSSxJQUFNLGtCQUFrQixHQUF4QixNQUFNLGtCQUFrQjtJQUNBO0lBQTdCLFlBQTZCLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtJQUFHLENBQUM7SUFFakU7Ozs7T0FJRztJQWNHLEFBQU4sS0FBSyxDQUFDLFdBQVcsQ0FDQSxJQUF1QjtRQUV0QyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRDs7OztPQUlHO0lBaUJHLEFBQU4sS0FBSyxDQUFDLGVBQWUsQ0FDRixNQUFjO1FBRS9CLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVEOzs7O09BSUc7SUFZRyxBQUFOLEtBQUssQ0FBQyxLQUFLLENBQVMsR0FBc0I7UUFDeEMsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFxQkcsQUFBTixLQUFLLENBQUMsU0FBUyxDQUNJLE1BQWMsRUFDdkIsR0FBc0I7UUFFOUIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDckQsQ0FBQztJQUVEOzs7T0FHRztJQWdCRyxBQUFOLEtBQUssQ0FBQyxPQUFPLENBQWtCLE1BQWM7UUFDM0MsTUFBTSxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQ7Ozs7T0FJRztJQW9CRyxBQUFOLEtBQUssQ0FBQyxNQUFNLENBQVMsR0FBb0I7UUFDdkMsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFpQkcsQUFBTixLQUFLLENBQUMsYUFBYSxDQUNBLE1BQWMsRUFDdkIsRUFBRSxLQUFLLEVBQXNCO1FBRXJDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRDs7OztPQUlHO0lBYUcsQUFBTixLQUFLLENBQUMsYUFBYSxDQUNGLElBQXNCO1FBRXJDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDbEQsQ0FBQztDQUNGLENBQUE7QUFqTlksZ0RBQWtCO0FBcUJ2QjtJQWJMLElBQUEsWUFBRyxHQUFFO0lBQ0wsSUFBQSxzQkFBWSxFQUFDLEVBQUUsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLENBQUM7SUFDakUsSUFBQSxrQkFBUSxFQUFDO1FBQ1IsSUFBSSxFQUFFLE1BQU07UUFDWixRQUFRLEVBQUUsS0FBSztRQUNmLFdBQVcsRUFBRSw4QkFBOEI7UUFDM0MsSUFBSSxFQUFFLHFDQUFnQjtLQUN2QixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsZ0NBQWdDO1FBQzdDLElBQUksRUFBRSxDQUFDLDJDQUFtQixDQUFDO0tBQzVCLENBQUM7SUFFQyxXQUFBLElBQUEsY0FBSyxFQUFDLE1BQU0sQ0FBQyxDQUFBOzt5REFBUSxxQ0FBZ0Isb0JBQWhCLHFDQUFnQjt3REFDckMsT0FBTyxvQkFBUCxPQUFPO3FEQUVUO0FBdUJLO0lBaEJMLElBQUEsWUFBRyxFQUFDLFNBQVMsQ0FBQztJQUNkLElBQUEsc0JBQVksRUFBQyxFQUFFLE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxDQUFDO0lBQ3ZELElBQUEsa0JBQVEsRUFBQztRQUNSLElBQUksRUFBRSxRQUFRO1FBQ2QsV0FBVyxFQUFFLDBCQUEwQjtRQUN2QyxPQUFPLEVBQUUsaUJBQWlCO0tBQzNCLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSxxQkFBcUI7UUFDbEMsSUFBSSxFQUFFLDJDQUFtQjtLQUMxQixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUseUJBQXlCO0tBQ3ZDLENBQUM7SUFFQyxXQUFBLElBQUEsY0FBSyxFQUFDLFFBQVEsQ0FBQyxDQUFBOzs7d0RBQ2YsT0FBTyxvQkFBUCxPQUFPO3lEQUVUO0FBa0JLO0lBWEwsSUFBQSxhQUFJLEdBQUU7SUFDTixJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsQ0FBQztJQUNoRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSw2QkFBNkI7UUFDMUMsSUFBSSxFQUFFLDJDQUFtQjtLQUMxQixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsdUNBQXVDO0tBQ3JELENBQUM7SUFDVyxXQUFBLElBQUEsYUFBSSxHQUFFLENBQUE7O3lEQUFNLHVDQUFpQixvQkFBakIsdUNBQWlCO3dEQUFHLE9BQU8sb0JBQVAsT0FBTzsrQ0FFbkQ7QUE0Qks7SUFwQkwsSUFBQSxZQUFHLEVBQUMsU0FBUyxDQUFDO0lBQ2QsSUFBQSxzQkFBWSxFQUFDLEVBQUUsT0FBTyxFQUFFLDhCQUE4QixFQUFFLENBQUM7SUFDekQsSUFBQSxrQkFBUSxFQUFDO1FBQ1IsSUFBSSxFQUFFLFFBQVE7UUFDZCxXQUFXLEVBQUUsMEJBQTBCO1FBQ3ZDLE9BQU8sRUFBRSxpQkFBaUI7S0FDM0IsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBQ1gsV0FBVyxFQUFFLGlDQUFpQztRQUM5QyxJQUFJLEVBQUUsMkNBQW1CO0tBQzFCLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSx5QkFBeUI7S0FDdkMsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBQ1gsV0FBVyxFQUFFLGlCQUFpQjtLQUMvQixDQUFDO0lBRUMsV0FBQSxJQUFBLGNBQUssRUFBQyxRQUFRLENBQUMsQ0FBQTtJQUNmLFdBQUEsSUFBQSxhQUFJLEdBQUUsQ0FBQTs7aUVBQU0sdUNBQWlCLG9CQUFqQix1Q0FBaUI7d0RBQzdCLE9BQU8sb0JBQVAsT0FBTzttREFFVDtBQXFCSztJQWZMLElBQUEsZUFBTSxFQUFDLFNBQVMsQ0FBQztJQUNqQixJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQztJQUM3QyxJQUFBLGtCQUFRLEVBQUM7UUFDUixJQUFJLEVBQUUsUUFBUTtRQUNkLFdBQVcsRUFBRSwwQkFBMEI7UUFDdkMsT0FBTyxFQUFFLGlCQUFpQjtLQUMzQixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsK0JBQStCO0tBQzdDLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSx5QkFBeUI7S0FDdkMsQ0FBQztJQUNhLFdBQUEsSUFBQSxjQUFLLEVBQUMsUUFBUSxDQUFDLENBQUE7Ozt3REFBa0IsT0FBTyxvQkFBUCxPQUFPO2lEQUV0RDtBQTBCSztJQW5CTCxJQUFBLGFBQUksRUFBQyxRQUFRLENBQUM7SUFDZCxJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUsaUNBQWlDLEVBQUUsQ0FBQztJQUM1RCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSxrQ0FBa0M7UUFDL0MsTUFBTSxFQUFFO1lBQ04sSUFBSSxFQUFFLFFBQVE7WUFDZCxVQUFVLEVBQUU7Z0JBQ1YsUUFBUSxFQUFFO29CQUNSLElBQUksRUFBRSxRQUFRO29CQUNkLFdBQVcsRUFBRSxrQ0FBa0M7aUJBQ2hEO2FBQ0Y7U0FDRjtLQUNGLENBQUM7SUFDRCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSx5Q0FBeUM7S0FDdkQsQ0FBQztJQUNZLFdBQUEsSUFBQSxhQUFJLEdBQUUsQ0FBQTs7eURBQU0sbUNBQWUsb0JBQWYsbUNBQWU7d0RBQUcsT0FBTyxvQkFBUCxPQUFPO2dEQUVsRDtBQXdCSztJQWhCTCxJQUFBLFlBQUcsRUFBQyxnQkFBZ0IsQ0FBQztJQUNyQixJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUsOEJBQThCLEVBQUUsQ0FBQztJQUN6RCxJQUFBLGtCQUFRLEVBQUM7UUFDUixJQUFJLEVBQUUsUUFBUTtRQUNkLFdBQVcsRUFBRSwwQkFBMEI7UUFDdkMsT0FBTyxFQUFFLGlCQUFpQjtLQUMzQixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsMkNBQTJDO1FBQ3hELElBQUksRUFBRSwyQ0FBbUI7S0FDMUIsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQztRQUNYLE1BQU0sRUFBRSxHQUFHO1FBQ1gsV0FBVyxFQUFFLHlCQUF5QjtLQUN2QyxDQUFDO0lBRUMsV0FBQSxJQUFBLGNBQUssRUFBQyxRQUFRLENBQUMsQ0FBQTtJQUNmLFdBQUEsSUFBQSxhQUFJLEdBQUUsQ0FBQTs7O3dEQUNOLE9BQU8sb0JBQVAsT0FBTzt1REFFVDtBQW1CSztJQVpMLElBQUEsWUFBRyxFQUFDLFlBQVksQ0FBQztJQUNqQixJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsQ0FBQztJQUN0RCxJQUFBLGtCQUFRLEVBQUM7UUFDUixJQUFJLEVBQUUsTUFBTTtRQUNaLFdBQVcsRUFBRSxrQkFBa0I7UUFDL0IsSUFBSSxFQUFFLHFDQUFnQjtLQUN2QixDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsZ0NBQWdDO1FBQzdDLElBQUksRUFBRSxDQUFDLDJDQUFtQixDQUFDO0tBQzVCLENBQUM7SUFFQyxXQUFBLElBQUEsY0FBSyxFQUFDLE1BQU0sQ0FBQyxDQUFBOzt5REFBTyxxQ0FBZ0Isb0JBQWhCLHFDQUFnQjt3REFDcEMsT0FBTyxvQkFBUCxPQUFPO3VEQUVUOzZCQWhOVSxrQkFBa0I7SUFGOUIsSUFBQSxpQkFBTyxFQUFDLGNBQWMsQ0FBQztJQUN2QixJQUFBLG1CQUFVLEVBQUMsd0JBQXdCLENBQUM7eURBRVcsa0NBQWUsb0JBQWYsa0NBQWU7R0FEbEQsa0JBQWtCLENBaU45QiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcY29uZmlndXJhY2FvXFxjb250cm9sbGVyc1xcdGVtcGxhdGUuY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250cm9sbGVyLFxuICBHZXQsXG4gIFBvc3QsXG4gIFB1dCxcbiAgRGVsZXRlLFxuICBCb2R5LFxuICBQYXJhbSxcbiAgUXVlcnksXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7XG4gIEFwaVRhZ3MsXG4gIEFwaU9wZXJhdGlvbixcbiAgQXBpUmVzcG9uc2UsXG4gIEFwaVBhcmFtLFxuICBBcGlRdWVyeSxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IFRlbXBsYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3RlbXBsYXRlLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGVtcGxhdGVDcmVhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLWNyZWF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVVcGRhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLXVwZGF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVUZXN0RHRvIH0gZnJvbSAnLi4vZHRvcy90ZW1wbGF0ZS90ZW1wbGF0ZS10ZXN0LmR0byc7XG5pbXBvcnQgeyBUZW1wbGF0ZVJlc3BvbnNlRHRvIH0gZnJvbSAnLi4vZHRvcy90ZW1wbGF0ZS90ZW1wbGF0ZS1yZXNwb25zZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVUaXBvRW51bSB9IGZyb20gJy4uLy4uLy4uL2VudW1zL3RlbXBsYXRlLXRpcG8uZW51bSc7XG5cbi8qKlxuICogQ29udHJvbGFkb3IgcmVzcG9uc8OhdmVsIHBlbGFzIG9wZXJhw6fDtWVzIGRlIHRlbXBsYXRlcyBkbyBzaXN0ZW1hXG4gKi9cbkBBcGlUYWdzKCdDb25maWd1cmHDp8OjbycpXG5AQ29udHJvbGxlcignY29uZmlndXJhY2FvL3RlbXBsYXRlcycpXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZVNlcnZpY2U6IFRlbXBsYXRlU2VydmljZSkge31cblxuICAvKipcbiAgICogQnVzY2EgdG9kb3Mgb3MgdGVtcGxhdGVzIGRvIHNpc3RlbWFcbiAgICogQHBhcmFtIHRpcG8gVGlwbyBvcGNpb25hbCBwYXJhIGZpbHRyYXJcbiAgICogQHJldHVybnMgTGlzdGEgZGUgdGVtcGxhdGVzXG4gICAqL1xuICBAR2V0KClcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdCdXNjYXIgdG9kb3Mgb3MgdGVtcGxhdGVzIGRvIHNpc3RlbWEnIH0pXG4gIEBBcGlRdWVyeSh7XG4gICAgbmFtZTogJ3RpcG8nLFxuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICBkZXNjcmlwdGlvbjogJ0ZpbHRyYXIgcG9yIHRpcG8gZGUgdGVtcGxhdGUnLFxuICAgIGVudW06IFRlbXBsYXRlVGlwb0VudW0sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdMaXN0YSBkZSB0ZW1wbGF0ZXMgZW5jb250cmFkb3MnLFxuICAgIHR5cGU6IFtUZW1wbGF0ZVJlc3BvbnNlRHRvXSxcbiAgfSlcbiAgYXN5bmMgYnVzY2FyVG9kb3MoXG4gICAgQFF1ZXJ5KCd0aXBvJykgdGlwbz86IFRlbXBsYXRlVGlwb0VudW0sXG4gICk6IFByb21pc2U8VGVtcGxhdGVSZXNwb25zZUR0b1tdPiB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJ1c2NhclRvZG9zKHRpcG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHVtIHRlbXBsYXRlIGVzcGVjw61maWNvIHBvciBzZXUgY8OzZGlnb1xuICAgKiBAcGFyYW0gY29kaWdvIEPDs2RpZ28gZG8gdGVtcGxhdGVcbiAgICogQHJldHVybnMgVGVtcGxhdGUgZW5jb250cmFkb1xuICAgKi9cbiAgQEdldCgnOmNvZGlnbycpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQnVzY2FyIHRlbXBsYXRlIHBvciBjw7NkaWdvJyB9KVxuICBAQXBpUGFyYW0oe1xuICAgIG5hbWU6ICdjb2RpZ28nLFxuICAgIGRlc2NyaXB0aW9uOiAnQ8OzZGlnbyDDum5pY28gZG8gdGVtcGxhdGUnLFxuICAgIGV4YW1wbGU6ICdlbWFpbC1iZW0tdmluZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnVGVtcGxhdGUgZW5jb250cmFkbycsXG4gICAgdHlwZTogVGVtcGxhdGVSZXNwb25zZUR0byxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBkZXNjcmlwdGlvbjogJ1RlbXBsYXRlIG7Do28gZW5jb250cmFkbycsXG4gIH0pXG4gIGFzeW5jIGJ1c2NhclBvckNvZGlnbyhcbiAgICBAUGFyYW0oJ2NvZGlnbycpIGNvZGlnbzogc3RyaW5nLFxuICApOiBQcm9taXNlPFRlbXBsYXRlUmVzcG9uc2VEdG8+IHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYnVzY2FyUG9yQ29kaWdvKGNvZGlnbyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JpYSB1bSBub3ZvIHRlbXBsYXRlIG5vIHNpc3RlbWFcbiAgICogQHBhcmFtIGR0byBEYWRvcyBkbyB0ZW1wbGF0ZSBhIHNlciBjcmlhZG9cbiAgICogQHJldHVybnMgVGVtcGxhdGUgY3JpYWRvXG4gICAqL1xuICBAUG9zdCgpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ3JpYXIgbm92byB0ZW1wbGF0ZScgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMSxcbiAgICBkZXNjcmlwdGlvbjogJ1RlbXBsYXRlIGNyaWFkbyBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogVGVtcGxhdGVSZXNwb25zZUR0byxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0RhZG9zIGludsOhbGlkb3Mgb3UgdGVtcGxhdGUgasOhIGV4aXN0ZScsXG4gIH0pXG4gIGFzeW5jIGNyaWFyKEBCb2R5KCkgZHRvOiBUZW1wbGF0ZUNyZWF0ZUR0byk6IFByb21pc2U8VGVtcGxhdGVSZXNwb25zZUR0bz4ge1xuICAgIHJldHVybiB0aGlzLnRlbXBsYXRlU2VydmljZS5jcmlhcihkdG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dWFsaXphIHVtIHRlbXBsYXRlIGV4aXN0ZW50ZVxuICAgKiBAcGFyYW0gY29kaWdvIEPDs2RpZ28gZG8gdGVtcGxhdGVcbiAgICogQHBhcmFtIGR0byBEYWRvcyBwYXJhIGF0dWFsaXphw6fDo29cbiAgICogQHJldHVybnMgVGVtcGxhdGUgYXR1YWxpemFkb1xuICAgKi9cbiAgQFB1dCgnOmNvZGlnbycpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQXR1YWxpemFyIHRlbXBsYXRlIGV4aXN0ZW50ZScgfSlcbiAgQEFwaVBhcmFtKHtcbiAgICBuYW1lOiAnY29kaWdvJyxcbiAgICBkZXNjcmlwdGlvbjogJ0PDs2RpZ28gw7puaWNvIGRvIHRlbXBsYXRlJyxcbiAgICBleGFtcGxlOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ1RlbXBsYXRlIGF0dWFsaXphZG8gY29tIHN1Y2Vzc28nLFxuICAgIHR5cGU6IFRlbXBsYXRlUmVzcG9uc2VEdG8sXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiA0MDQsXG4gICAgZGVzY3JpcHRpb246ICdUZW1wbGF0ZSBuw6NvIGVuY29udHJhZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcycsXG4gIH0pXG4gIGFzeW5jIGF0dWFsaXphcihcbiAgICBAUGFyYW0oJ2NvZGlnbycpIGNvZGlnbzogc3RyaW5nLFxuICAgIEBCb2R5KCkgZHRvOiBUZW1wbGF0ZVVwZGF0ZUR0byxcbiAgKTogUHJvbWlzZTxUZW1wbGF0ZVJlc3BvbnNlRHRvPiB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTZXJ2aWNlLmF0dWFsaXphcihjb2RpZ28sIGR0byk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHVtIHRlbXBsYXRlIGRvIHNpc3RlbWFcbiAgICogQHBhcmFtIGNvZGlnbyBDw7NkaWdvIGRvIHRlbXBsYXRlXG4gICAqL1xuICBARGVsZXRlKCc6Y29kaWdvJylcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdSZW1vdmVyIHRlbXBsYXRlJyB9KVxuICBAQXBpUGFyYW0oe1xuICAgIG5hbWU6ICdjb2RpZ28nLFxuICAgIGRlc2NyaXB0aW9uOiAnQ8OzZGlnbyDDum5pY28gZG8gdGVtcGxhdGUnLFxuICAgIGV4YW1wbGU6ICdlbWFpbC1iZW0tdmluZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjA0LFxuICAgIGRlc2NyaXB0aW9uOiAnVGVtcGxhdGUgcmVtb3ZpZG8gY29tIHN1Y2Vzc28nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDA0LFxuICAgIGRlc2NyaXB0aW9uOiAnVGVtcGxhdGUgbsOjbyBlbmNvbnRyYWRvJyxcbiAgfSlcbiAgYXN5bmMgcmVtb3ZlcihAUGFyYW0oJ2NvZGlnbycpIGNvZGlnbzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgYXdhaXQgdGhpcy50ZW1wbGF0ZVNlcnZpY2UucmVtb3Zlcihjb2RpZ28pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3RhIGEgcmVuZGVyaXphw6fDo28gZGUgdW0gdGVtcGxhdGUgY29tIGRhZG9zIGRlIGV4ZW1wbG9cbiAgICogQHBhcmFtIGR0byBEYWRvcyBwYXJhIHRlc3RlIGRvIHRlbXBsYXRlXG4gICAqIEByZXR1cm5zIENvbnRlw7pkbyByZW5kZXJpemFkb1xuICAgKi9cbiAgQFBvc3QoJ3Rlc3RhcicpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnVGVzdGFyIHJlbmRlcml6YcOnw6NvIGRlIHRlbXBsYXRlJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnVGVtcGxhdGUgcmVuZGVyaXphZG8gY29tIHN1Y2Vzc28nLFxuICAgIHNjaGVtYToge1xuICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGNvbnRldWRvOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDb250ZcO6ZG8gcmVuZGVyaXphZG8gZG8gdGVtcGxhdGUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogNDAwLFxuICAgIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcyBvdSBlcnJvIG5hIHJlbmRlcml6YcOnw6NvJyxcbiAgfSlcbiAgYXN5bmMgdGVzdGFyKEBCb2R5KCkgZHRvOiBUZW1wbGF0ZVRlc3REdG8pOiBQcm9taXNlPHsgY29udGV1ZG86IHN0cmluZyB9PiB7XG4gICAgcmV0dXJuIHRoaXMudGVtcGxhdGVTZXJ2aWNlLnRlc3RhcihkdG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0aXZhIG91IGRlc2F0aXZhIHVtIHRlbXBsYXRlXG4gICAqIEBwYXJhbSBjb2RpZ28gQ8OzZGlnbyBkbyB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0gYXRpdm8gU3RhdHVzIGRlIGF0aXZhw6fDo29cbiAgICogQHJldHVybnMgVGVtcGxhdGUgYXR1YWxpemFkb1xuICAgKi9cbiAgQFB1dCgnOmNvZGlnby9zdGF0dXMnKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0F0aXZhciBvdSBkZXNhdGl2YXIgdGVtcGxhdGUnIH0pXG4gIEBBcGlQYXJhbSh7XG4gICAgbmFtZTogJ2NvZGlnbycsXG4gICAgZGVzY3JpcHRpb246ICdDw7NkaWdvIMO6bmljbyBkbyB0ZW1wbGF0ZScsXG4gICAgZXhhbXBsZTogJ2VtYWlsLWJlbS12aW5kbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdTdGF0dXMgZG8gdGVtcGxhdGUgYXR1YWxpemFkbyBjb20gc3VjZXNzbycsXG4gICAgdHlwZTogVGVtcGxhdGVSZXNwb25zZUR0byxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDQwNCxcbiAgICBkZXNjcmlwdGlvbjogJ1RlbXBsYXRlIG7Do28gZW5jb250cmFkbycsXG4gIH0pXG4gIGFzeW5jIGFsdGVyYXJTdGF0dXMoXG4gICAgQFBhcmFtKCdjb2RpZ28nKSBjb2RpZ286IHN0cmluZyxcbiAgICBAQm9keSgpIHsgYXRpdm8gfTogeyBhdGl2bzogYm9vbGVhbiB9LFxuICApOiBQcm9taXNlPFRlbXBsYXRlUmVzcG9uc2VEdG8+IHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYWx0ZXJhclN0YXR1cyhjb2RpZ28sIGF0aXZvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdXNjYSB0ZW1wbGF0ZXMgcG9yIHRpcG9cbiAgICogQHBhcmFtIHRpcG8gVGlwbyBkb3MgdGVtcGxhdGVzXG4gICAqIEByZXR1cm5zIExpc3RhIGRlIHRlbXBsYXRlc1xuICAgKi9cbiAgQEdldCgndGlwby86dGlwbycpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQnVzY2FyIHRlbXBsYXRlcyBwb3IgdGlwbycgfSlcbiAgQEFwaVBhcmFtKHtcbiAgICBuYW1lOiAndGlwbycsXG4gICAgZGVzY3JpcHRpb246ICdUaXBvIGRlIHRlbXBsYXRlJyxcbiAgICBlbnVtOiBUZW1wbGF0ZVRpcG9FbnVtLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGRlc2NyaXB0aW9uOiAnTGlzdGEgZGUgdGVtcGxhdGVzIGVuY29udHJhZG9zJyxcbiAgICB0eXBlOiBbVGVtcGxhdGVSZXNwb25zZUR0b10sXG4gIH0pXG4gIGFzeW5jIGJ1c2NhclBvclRpcG8oXG4gICAgQFBhcmFtKCd0aXBvJykgdGlwbzogVGVtcGxhdGVUaXBvRW51bSxcbiAgKTogUHJvbWlzZTxUZW1wbGF0ZVJlc3BvbnNlRHRvW10+IHtcbiAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYnVzY2FyUG9yVGlwbyh0aXBvKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9