14b9321218bfe23c54a0de1e4a075ee2
"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const request = __importStar(require("supertest"));
const typeorm_1 = require("@nestjs/typeorm");
const config_1 = require("@nestjs/config");
const jwt_1 = require("@nestjs/jwt");
const axios_1 = require("@nestjs/axios");
const pagamento_module_1 = require("../../pagamento.module");
const entities_1 = require("../../entities");
const status_pagamento_enum_1 = require("../../enums/status-pagamento.enum");
const integracao_documento_service_1 = require("../../services/integracao-documento.service");
const auditoria_pagamento_service_1 = require("../../services/auditoria-pagamento.service");
/**
 * Testes de integração para gerenciamento de comprovantes
 *
 * Verifica o funcionamento correto das operações de upload, listagem,
 * visualização e remoção de comprovantes de pagamento.
 *
 * @author Equipe PGBen
 */
describe('Gerenciamento de Comprovantes (Integration)', () => {
    let app;
    let jwtService;
    let integracaoDocumentoService;
    let auditoriaPagamentoService;
    // Dados de teste
    const usuarioId = 'usuario-teste-id';
    const pagamentoId = 'pagamento-teste-id';
    const unidadeId = 'unidade-teste-id';
    const comprovanteId = 'comprovante-teste-id';
    const documentoId = 'documento-teste-id';
    // Mock dos repositórios
    const mockPagamentoRepository = {
        findOne: jest.fn().mockImplementation((options) => {
            if (options.where.id === pagamentoId) {
                return Promise.resolve({
                    id: pagamentoId,
                    status: status_pagamento_enum_1.StatusPagamentoEnum.LIBERADO,
                    unidadeId,
                });
            }
            return Promise.resolve(null);
        }),
    };
    const mockComprovanteRepository = {
        create: jest.fn(),
        save: jest.fn(),
        findOne: jest.fn(),
        find: jest.fn(),
        findAndCount: jest.fn(),
        delete: jest.fn(),
    };
    const mockConfirmacaoRepository = {
        findOne: jest.fn(),
    };
    // Mock do serviço de integração com documentos
    const mockIntegracaoDocumentoService = {
        uploadComprovante: jest
            .fn()
            .mockImplementation((pagamentoId, arquivo, usuarioId) => {
            return Promise.resolve({
                id: documentoId,
                nome: arquivo.originalname,
                tamanho: arquivo.size,
                tipo: arquivo.mimetype,
                categoria: 'COMPROVANTE_PAGAMENTO',
                referencia: pagamentoId,
                url: `http://api-documento.pgben.local/documentos/${documentoId}`,
                createdAt: new Date(),
            });
        }),
        obterComprovante: jest.fn().mockImplementation((documentoId) => {
            return Promise.resolve({
                id: documentoId,
                nome: 'comprovante.pdf',
                tamanho: 1024,
                tipo: 'application/pdf',
                categoria: 'COMPROVANTE_PAGAMENTO',
                url: `http://api-documento.pgben.local/documentos/${documentoId}`,
                createdAt: new Date(),
            });
        }),
        listarComprovantes: jest.fn().mockImplementation((pagamentoId) => {
            return Promise.resolve([
                {
                    id: documentoId,
                    nome: 'comprovante.pdf',
                    tamanho: 1024,
                    tipo: 'application/pdf',
                    categoria: 'COMPROVANTE_PAGAMENTO',
                    referencia: pagamentoId,
                    url: `http://api-documento.pgben.local/documentos/${documentoId}`,
                    createdAt: new Date(),
                },
            ]);
        }),
        removerComprovante: jest
            .fn()
            .mockImplementation((documentoId, usuarioId) => {
            return Promise.resolve();
        }),
    };
    // Mock do serviço de auditoria
    const mockAuditoriaPagamentoService = {
        logUploadComprovante: jest.fn(),
        logRemocaoComprovante: jest.fn(),
        logErroProcessamento: jest.fn(),
    };
    beforeAll(async () => {
        const moduleFixture = await testing_1.Test.createTestingModule({
            imports: [
                pagamento_module_1.PagamentoModule,
                config_1.ConfigModule.forRoot({
                    isGlobal: true,
                    envFilePath: '.env.test',
                }),
                jwt_1.JwtModule.registerAsync({
                    imports: [config_1.ConfigModule],
                    useFactory: async (configService) => ({
                        secret: configService.get('JWT_SECRET') || 'test-secret',
                        signOptions: { expiresIn: '1h' },
                    }),
                    inject: [config_1.ConfigService],
                }),
                axios_1.HttpModule,
            ],
            providers: [
                {
                    provide: (0, typeorm_1.getRepositoryToken)(entities_1.Pagamento),
                    useValue: mockPagamentoRepository,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(entities_1.ComprovantePagamento),
                    useValue: mockComprovanteRepository,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(entities_1.ConfirmacaoRecebimento),
                    useValue: mockConfirmacaoRepository,
                },
            ],
        })
            .overrideProvider(integracao_documento_service_1.IntegracaoDocumentoService)
            .useValue(mockIntegracaoDocumentoService)
            .overrideProvider(auditoria_pagamento_service_1.AuditoriaPagamentoService)
            .useValue(mockAuditoriaPagamentoService)
            .compile();
        app = moduleFixture.createNestApplication();
        jwtService = moduleFixture.get(jwt_1.JwtService);
        integracaoDocumentoService = moduleFixture.get(integracao_documento_service_1.IntegracaoDocumentoService);
        auditoriaPagamentoService = moduleFixture.get(auditoria_pagamento_service_1.AuditoriaPagamentoService);
        await app.init();
    });
    afterAll(async () => {
        await app.close();
    });
    beforeEach(() => {
        jest.clearAllMocks();
        // Configurar mocks padrão para os repositórios
        mockComprovanteRepository.create.mockImplementation((dto) => ({
            id: comprovanteId,
            pagamentoId: dto.pagamentoId,
            documentoId: dto.documentoId,
            nomeArquivo: dto.nomeArquivo,
            tipoArquivo: dto.tipoArquivo,
            tamanhoArquivo: dto.tamanhoArquivo,
            urlDownload: dto.urlDownload,
            uploadedBy: dto.uploadedBy,
            descricao: dto.descricao,
            createdAt: new Date(),
        }));
        mockComprovanteRepository.save.mockImplementation((entity) => Promise.resolve(entity));
        mockComprovanteRepository.findOne.mockImplementation((options) => {
            if (options.where.id === comprovanteId) {
                return Promise.resolve({
                    id: comprovanteId,
                    pagamentoId,
                    documentoId,
                    nomeArquivo: 'comprovante.pdf',
                    tipoArquivo: 'application/pdf',
                    tamanhoArquivo: 1024,
                    urlDownload: `http://api-documento.pgben.local/documentos/${documentoId}`,
                    uploadedBy: usuarioId,
                    createdAt: new Date(),
                });
            }
            return Promise.resolve(null);
        });
        mockComprovanteRepository.find.mockImplementation((options) => {
            if (options.where.pagamentoId === pagamentoId) {
                return Promise.resolve([
                    {
                        id: comprovanteId,
                        pagamentoId,
                        documentoId,
                        nomeArquivo: 'comprovante.pdf',
                        tipoArquivo: 'application/pdf',
                        tamanhoArquivo: 1024,
                        urlDownload: `http://api-documento.pgben.local/documentos/${documentoId}`,
                        uploadedBy: usuarioId,
                        createdAt: new Date(),
                    },
                ]);
            }
            return Promise.resolve([]);
        });
    });
    // Função auxiliar para gerar tokens JWT
    const gerarToken = (userId, perfis = ['usuario'], unidadeId = 'unidade-teste-id') => {
        return jwtService.sign({
            sub: userId,
            perfis,
            unidadeId,
        });
    };
    describe('Upload de Comprovantes', () => {
        it('deve fazer upload de comprovante PDF com sucesso', async () => {
            // Criar arquivo de teste
            const buffer = Buffer.from('conteúdo de teste do arquivo PDF');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.pdf')
                .field('descricao', 'Comprovante de transferência bancária');
            expect(response.status).toBe(201);
            expect(response.body).toHaveProperty('id');
            expect(response.body.nomeArquivo).toBe('comprovante.pdf');
            expect(response.body.tipoArquivo).toBe('application/pdf');
            expect(integracaoDocumentoService.uploadComprovante).toHaveBeenCalled();
            expect(auditoriaPagamentoService.logUploadComprovante).toHaveBeenCalled();
        });
        it('deve fazer upload de comprovante JPG com sucesso', async () => {
            // Criar arquivo de teste
            const buffer = Buffer.from('conteúdo de teste do arquivo JPG');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.jpg')
                .field('descricao', 'Comprovante de transferência bancária');
            expect(response.status).toBe(201);
            expect(response.body).toHaveProperty('id');
            expect(response.body.nomeArquivo).toBe('comprovante.jpg');
            expect(response.body.tipoArquivo).toBe('image/jpeg');
        });
        it('deve rejeitar upload de comprovante com formato não permitido', async () => {
            // Criar arquivo de teste com formato não permitido
            const buffer = Buffer.from('conteúdo de teste do arquivo');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.exe')
                .field('descricao', 'Arquivo não permitido');
            expect(response.status).toBe(400);
            expect(response.body.message).toContain('não permitido');
        });
        it('deve rejeitar upload quando pagamento não existe', async () => {
            // Sobrescrever mock para este teste
            mockPagamentoRepository.findOne.mockResolvedValueOnce(null);
            // Criar arquivo de teste
            const buffer = Buffer.from('conteúdo de teste do arquivo');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/pagamento-inexistente/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.pdf')
                .field('descricao', 'Comprovante de teste');
            expect(response.status).toBe(404);
            expect(response.body.message).toContain('não encontrado');
        });
        it('deve rejeitar upload quando pagamento está em status CANCELADO', async () => {
            // Sobrescrever mock para este teste
            mockPagamentoRepository.findOne.mockResolvedValueOnce({
                id: pagamentoId,
                status: status_pagamento_enum_1.StatusPagamentoEnum.CANCELADO,
                unidadeId,
            });
            // Criar arquivo de teste
            const buffer = Buffer.from('conteúdo de teste do arquivo');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.pdf')
                .field('descricao', 'Comprovante de teste');
            expect(response.status).toBe(409);
            expect(response.body.message).toContain('cancelado');
        });
    });
    describe('Listagem de Comprovantes', () => {
        it('deve listar comprovantes de um pagamento', async () => {
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .get(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`);
            expect(response.status).toBe(200);
            expect(response.body).toHaveProperty('items');
            expect(response.body.items).toBeInstanceOf(Array);
            expect(response.body.items.length).toBeGreaterThan(0);
            expect(response.body.items[0]).toHaveProperty('id');
            expect(response.body.items[0]).toHaveProperty('nomeArquivo');
        });
        it('deve retornar lista vazia quando não há comprovantes', async () => {
            // Sobrescrever mock para este teste
            mockComprovanteRepository.find.mockResolvedValueOnce([]);
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .get(`/pagamentos/pagamento-sem-comprovantes/comprovantes`)
                .set('Authorization', `Bearer ${token}`);
            expect(response.status).toBe(200);
            expect(response.body).toHaveProperty('items');
            expect(response.body.items).toBeInstanceOf(Array);
            expect(response.body.items.length).toBe(0);
        });
    });
    describe('Visualização de Comprovante', () => {
        it('deve obter detalhes de um comprovante específico', async () => {
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .get(`/comprovantes/${comprovanteId}`)
                .set('Authorization', `Bearer ${token}`);
            expect(response.status).toBe(200);
            expect(response.body).toHaveProperty('id');
            expect(response.body).toHaveProperty('nomeArquivo');
            expect(response.body).toHaveProperty('urlDownload');
            expect(response.body.id).toBe(comprovanteId);
        });
        it('deve retornar 404 quando comprovante não existe', async () => {
            // Sobrescrever mock para este teste
            mockComprovanteRepository.findOne.mockResolvedValueOnce(null);
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .get(`/comprovantes/comprovante-inexistente`)
                .set('Authorization', `Bearer ${token}`);
            expect(response.status).toBe(404);
            expect(response.body.message).toContain('não encontrado');
        });
    });
    describe('Remoção de Comprovante', () => {
        it('deve remover comprovante com sucesso', async () => {
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .delete(`/comprovantes/${comprovanteId}`)
                .set('Authorization', `Bearer ${token}`)
                .send({
                motivo: 'Documento incorreto',
            });
            expect(response.status).toBe(200);
            expect(response.body.success).toBe(true);
            expect(integracaoDocumentoService.removerComprovante).toHaveBeenCalled();
            expect(auditoriaPagamentoService.logRemocaoComprovante).toHaveBeenCalled();
        });
        it('deve rejeitar remoção sem informar motivo', async () => {
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .delete(`/comprovantes/${comprovanteId}`)
                .set('Authorization', `Bearer ${token}`)
                .send({});
            expect(response.status).toBe(400);
            expect(response.body.message).toContain('motivo');
        });
        it('deve rejeitar remoção quando comprovante não existe', async () => {
            // Sobrescrever mock para este teste
            mockComprovanteRepository.findOne.mockResolvedValueOnce(null);
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .delete(`/comprovantes/comprovante-inexistente`)
                .set('Authorization', `Bearer ${token}`)
                .send({
                motivo: 'Documento incorreto',
            });
            expect(response.status).toBe(404);
            expect(response.body.message).toContain('não encontrado');
        });
        it('deve rejeitar remoção quando usuário não tem permissão', async () => {
            // Token com perfil insuficiente
            const token = gerarToken('outro-usuario', ['usuario_basico'], 'outra-unidade');
            const response = await request(app.getHttpServer())
                .delete(`/comprovantes/${comprovanteId}`)
                .set('Authorization', `Bearer ${token}`)
                .send({
                motivo: 'Documento incorreto',
            });
            expect(response.status).toBe(403);
        });
    });
    describe('Validação de Tipos de Arquivo', () => {
        it('deve aceitar arquivos PDF', async () => {
            const buffer = Buffer.from('conteúdo de teste PDF');
            const token = gerarToken(usuarioId);
            const response = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.pdf');
            expect(response.status).toBe(201);
        });
        it('deve aceitar arquivos de imagem (JPG, PNG)', async () => {
            const buffer = Buffer.from('conteúdo de teste imagem');
            const token = gerarToken(usuarioId);
            const responseJpg = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.jpg');
            expect(responseJpg.status).toBe(201);
            const responsePng = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.png');
            expect(responsePng.status).toBe(201);
        });
        it('deve rejeitar outros tipos de arquivo', async () => {
            const buffer = Buffer.from('conteúdo de teste arquivo não permitido');
            const token = gerarToken(usuarioId);
            const responseDoc = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.doc');
            expect(responseDoc.status).toBe(400);
            const responseExe = await request(app.getHttpServer())
                .post(`/pagamentos/${pagamentoId}/comprovantes`)
                .set('Authorization', `Bearer ${token}`)
                .attach('arquivo', buffer, 'comprovante.exe');
            expect(responseExe.status).toBe(400);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXGludGVncmF0aW9uXFxjb21wcm92YW50ZXMuc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDZDQUFzRDtBQUV0RCxtREFBcUM7QUFDckMsNkNBQXFEO0FBQ3JELDJDQUE2RDtBQUM3RCxxQ0FBb0Q7QUFDcEQseUNBQTJDO0FBRTNDLDZEQUF5RDtBQUN6RCw2Q0FJd0I7QUFDeEIsNkVBQXdFO0FBQ3hFLDhGQUF5RjtBQUN6Riw0RkFBdUY7QUFFdkY7Ozs7Ozs7R0FPRztBQUNILFFBQVEsQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7SUFDM0QsSUFBSSxHQUFxQixDQUFDO0lBQzFCLElBQUksVUFBc0IsQ0FBQztJQUMzQixJQUFJLDBCQUFzRCxDQUFDO0lBQzNELElBQUkseUJBQW9ELENBQUM7SUFFekQsaUJBQWlCO0lBQ2pCLE1BQU0sU0FBUyxHQUFHLGtCQUFrQixDQUFDO0lBQ3JDLE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDO0lBQ3pDLE1BQU0sU0FBUyxHQUFHLGtCQUFrQixDQUFDO0lBQ3JDLE1BQU0sYUFBYSxHQUFHLHNCQUFzQixDQUFDO0lBQzdDLE1BQU0sV0FBVyxHQUFHLG9CQUFvQixDQUFDO0lBRXpDLHdCQUF3QjtJQUN4QixNQUFNLHVCQUF1QixHQUFHO1FBQzlCLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRTtZQUNoRCxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLFdBQVcsRUFBRSxDQUFDO2dCQUNyQyxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUM7b0JBQ3JCLEVBQUUsRUFBRSxXQUFXO29CQUNmLE1BQU0sRUFBRSwyQ0FBbUIsQ0FB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ZSxXQUFXLGVBQWUsQ0FBQztpQkFDL0MsR0FBRyxDQUFDLGVBQWUsRUFBRSxVQUFVLEtBQUssRUFBRSxDQUFDO2lCQUN2QyxNQUFNLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1lBRWhELE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccGFnYW1lbnRvXFx0ZXN0c1xcaW50ZWdyYXRpb25cXGNvbXByb3ZhbnRlcy5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xuaW1wb3J0IHsgSU5lc3RBcHBsaWNhdGlvbiB9IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCAqIGFzIHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JztcbmltcG9ydCB7IGdldFJlcG9zaXRvcnlUb2tlbiB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XG5pbXBvcnQgeyBDb25maWdNb2R1bGUsIENvbmZpZ1NlcnZpY2UgfSBmcm9tICdAbmVzdGpzL2NvbmZpZyc7XG5pbXBvcnQgeyBKd3RNb2R1bGUsIEp3dFNlcnZpY2UgfSBmcm9tICdAbmVzdGpzL2p3dCc7XG5pbXBvcnQgeyBIdHRwTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy9heGlvcyc7XG5cbmltcG9ydCB7IFBhZ2FtZW50b01vZHVsZSB9IGZyb20gJy4uLy4uL3BhZ2FtZW50by5tb2R1bGUnO1xuaW1wb3J0IHtcbiAgUGFnYW1lbnRvLFxuICBDb21wcm92YW50ZVBhZ2FtZW50byxcbiAgQ29uZmlybWFjYW9SZWNlYmltZW50byxcbn0gZnJvbSAnLi4vLi4vZW50aXRpZXMnO1xuaW1wb3J0IHsgU3RhdHVzUGFnYW1lbnRvRW51bSB9IGZyb20gJy4uLy4uL2VudW1zL3N0YXR1cy1wYWdhbWVudG8uZW51bSc7XG5pbXBvcnQgeyBJbnRlZ3JhY2FvRG9jdW1lbnRvU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2ludGVncmFjYW8tZG9jdW1lbnRvLnNlcnZpY2UnO1xuaW1wb3J0IHsgQXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2F1ZGl0b3JpYS1wYWdhbWVudG8uc2VydmljZSc7XG5cbi8qKlxuICogVGVzdGVzIGRlIGludGVncmHDp8OjbyBwYXJhIGdlcmVuY2lhbWVudG8gZGUgY29tcHJvdmFudGVzXG4gKlxuICogVmVyaWZpY2EgbyBmdW5jaW9uYW1lbnRvIGNvcnJldG8gZGFzIG9wZXJhw6fDtWVzIGRlIHVwbG9hZCwgbGlzdGFnZW0sXG4gKiB2aXN1YWxpemHDp8OjbyBlIHJlbW/Dp8OjbyBkZSBjb21wcm92YW50ZXMgZGUgcGFnYW1lbnRvLlxuICpcbiAqIEBhdXRob3IgRXF1aXBlIFBHQmVuXG4gKi9cbmRlc2NyaWJlKCdHZXJlbmNpYW1lbnRvIGRlIENvbXByb3ZhbnRlcyAoSW50ZWdyYXRpb24pJywgKCkgPT4ge1xuICBsZXQgYXBwOiBJTmVzdEFwcGxpY2F0aW9uO1xuICBsZXQgand0U2VydmljZTogSnd0U2VydmljZTtcbiAgbGV0IGludGVncmFjYW9Eb2N1bWVudG9TZXJ2aWNlOiBJbnRlZ3JhY2FvRG9jdW1lbnRvU2VydmljZTtcbiAgbGV0IGF1ZGl0b3JpYVBhZ2FtZW50b1NlcnZpY2U6IEF1ZGl0b3JpYVBhZ2FtZW50b1NlcnZpY2U7XG5cbiAgLy8gRGFkb3MgZGUgdGVzdGVcbiAgY29uc3QgdXN1YXJpb0lkID0gJ3VzdWFyaW8tdGVzdGUtaWQnO1xuICBjb25zdCBwYWdhbWVudG9JZCA9ICdwYWdhbWVudG8tdGVzdGUtaWQnO1xuICBjb25zdCB1bmlkYWRlSWQgPSAndW5pZGFkZS10ZXN0ZS1pZCc7XG4gIGNvbnN0IGNvbXByb3ZhbnRlSWQgPSAnY29tcHJvdmFudGUtdGVzdGUtaWQnO1xuICBjb25zdCBkb2N1bWVudG9JZCA9ICdkb2N1bWVudG8tdGVzdGUtaWQnO1xuXG4gIC8vIE1vY2sgZG9zIHJlcG9zaXTDs3Jpb3NcbiAgY29uc3QgbW9ja1BhZ2FtZW50b1JlcG9zaXRvcnkgPSB7XG4gICAgZmluZE9uZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigob3B0aW9ucykgPT4ge1xuICAgICAgaWYgKG9wdGlvbnMud2hlcmUuaWQgPT09IHBhZ2FtZW50b0lkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGlkOiBwYWdhbWVudG9JZCxcbiAgICAgICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uTElCRVJBRE8sXG4gICAgICAgICAgdW5pZGFkZUlkLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfSksXG4gIH07XG5cbiAgY29uc3QgbW9ja0NvbXByb3ZhbnRlUmVwb3NpdG9yeSA9IHtcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICBzYXZlOiBqZXN0LmZuKCksXG4gICAgZmluZE9uZTogamVzdC5mbigpLFxuICAgIGZpbmQ6IGplc3QuZm4oKSxcbiAgICBmaW5kQW5kQ291bnQ6IGplc3QuZm4oKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgfTtcblxuICBjb25zdCBtb2NrQ29uZmlybWFjYW9SZXBvc2l0b3J5ID0ge1xuICAgIGZpbmRPbmU6IGplc3QuZm4oKSxcbiAgfTtcblxuICAvLyBNb2NrIGRvIHNlcnZpw6dvIGRlIGludGVncmHDp8OjbyBjb20gZG9jdW1lbnRvc1xuICBjb25zdCBtb2NrSW50ZWdyYWNhb0RvY3VtZW50b1NlcnZpY2UgPSB7XG4gICAgdXBsb2FkQ29tcHJvdmFudGU6IGplc3RcbiAgICAgIC5mbigpXG4gICAgICAubW9ja0ltcGxlbWVudGF0aW9uKChwYWdhbWVudG9JZCwgYXJxdWl2bywgdXN1YXJpb0lkKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGlkOiBkb2N1bWVudG9JZCxcbiAgICAgICAgICBub21lOiBhcnF1aXZvLm9yaWdpbmFsbmFtZSxcbiAgICAgICAgICB0YW1hbmhvOiBhcnF1aXZvLnNpemUsXG4gICAgICAgICAgdGlwbzogYXJxdWl2by5taW1ldHlwZSxcbiAgICAgICAgICBjYXRlZ29yaWE6ICdDT01QUk9WQU5URV9QQUdBTUVOVE8nLFxuICAgICAgICAgIHJlZmVyZW5jaWE6IHBhZ2FtZW50b0lkLFxuICAgICAgICAgIHVybDogYGh0dHA6Ly9hcGktZG9jdW1lbnRvLnBnYmVuLmxvY2FsL2RvY3VtZW50b3MvJHtkb2N1bWVudG9JZH1gLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSk7XG4gICAgICB9KSxcbiAgICBvYnRlckNvbXByb3ZhbnRlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChkb2N1bWVudG9JZCkgPT4ge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGlkOiBkb2N1bWVudG9JZCxcbiAgICAgICAgbm9tZTogJ2NvbXByb3ZhbnRlLnBkZicsXG4gICAgICAgIHRhbWFuaG86IDEwMjQsXG4gICAgICAgIHRpcG86ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgICBjYXRlZ29yaWE6ICdDT01QUk9WQU5URV9QQUdBTUVOVE8nLFxuICAgICAgICB1cmw6IGBodHRwOi8vYXBpLWRvY3VtZW50by5wZ2Jlbi5sb2NhbC9kb2N1bWVudG9zLyR7ZG9jdW1lbnRvSWR9YCxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSk7XG4gICAgfSksXG4gICAgbGlzdGFyQ29tcHJvdmFudGVzOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChwYWdhbWVudG9JZCkgPT4ge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogZG9jdW1lbnRvSWQsXG4gICAgICAgICAgbm9tZTogJ2NvbXByb3ZhbnRlLnBkZicsXG4gICAgICAgICAgdGFtYW5obzogMTAyNCxcbiAgICAgICAgICB0aXBvOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICAgICBjYXRlZ29yaWE6ICdDT01QUk9WQU5URV9QQUdBTUVOVE8nLFxuICAgICAgICAgIHJlZmVyZW5jaWE6IHBhZ2FtZW50b0lkLFxuICAgICAgICAgIHVybDogYGh0dHA6Ly9hcGktZG9jdW1lbnRvLnBnYmVuLmxvY2FsL2RvY3VtZW50b3MvJHtkb2N1bWVudG9JZH1gLFxuICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgIH0pLFxuICAgIHJlbW92ZXJDb21wcm92YW50ZTogamVzdFxuICAgICAgLmZuKClcbiAgICAgIC5tb2NrSW1wbGVtZW50YXRpb24oKGRvY3VtZW50b0lkLCB1c3VhcmlvSWQpID0+IHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgfSksXG4gIH07XG5cbiAgLy8gTW9jayBkbyBzZXJ2acOnbyBkZSBhdWRpdG9yaWFcbiAgY29uc3QgbW9ja0F1ZGl0b3JpYVBhZ2FtZW50b1NlcnZpY2UgPSB7XG4gICAgbG9nVXBsb2FkQ29tcHJvdmFudGU6IGplc3QuZm4oKSxcbiAgICBsb2dSZW1vY2FvQ29tcHJvdmFudGU6IGplc3QuZm4oKSxcbiAgICBsb2dFcnJvUHJvY2Vzc2FtZW50bzogamVzdC5mbigpLFxuICB9O1xuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kdWxlRml4dHVyZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBpbXBvcnRzOiBbXG4gICAgICAgIFBhZ2FtZW50b01vZHVsZSxcbiAgICAgICAgQ29uZmlnTW9kdWxlLmZvclJvb3Qoe1xuICAgICAgICAgIGlzR2xvYmFsOiB0cnVlLFxuICAgICAgICAgIGVudkZpbGVQYXRoOiAnLmVudi50ZXN0JyxcbiAgICAgICAgfSksXG4gICAgICAgIEp3dE1vZHVsZS5yZWdpc3RlckFzeW5jKHtcbiAgICAgICAgICBpbXBvcnRzOiBbQ29uZmlnTW9kdWxlXSxcbiAgICAgICAgICB1c2VGYWN0b3J5OiBhc3luYyAoY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkgPT4gKHtcbiAgICAgICAgICAgIHNlY3JldDogY29uZmlnU2VydmljZS5nZXQ8c3RyaW5nPignSldUX1NFQ1JFVCcpIHx8ICd0ZXN0LXNlY3JldCcsXG4gICAgICAgICAgICBzaWduT3B0aW9uczogeyBleHBpcmVzSW46ICcxaCcgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBpbmplY3Q6IFtDb25maWdTZXJ2aWNlXSxcbiAgICAgICAgfSksXG4gICAgICAgIEh0dHBNb2R1bGUsXG4gICAgICBdLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oUGFnYW1lbnRvKSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1BhZ2FtZW50b1JlcG9zaXRvcnksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oQ29tcHJvdmFudGVQYWdhbWVudG8pLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ29tcHJvdmFudGVSZXBvc2l0b3J5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENvbmZpcm1hY2FvUmVjZWJpbWVudG8pLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ29uZmlybWFjYW9SZXBvc2l0b3J5LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KVxuICAgICAgLm92ZXJyaWRlUHJvdmlkZXIoSW50ZWdyYWNhb0RvY3VtZW50b1NlcnZpY2UpXG4gICAgICAudXNlVmFsdWUobW9ja0ludGVncmFjYW9Eb2N1bWVudG9TZXJ2aWNlKVxuICAgICAgLm92ZXJyaWRlUHJvdmlkZXIoQXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZSlcbiAgICAgIC51c2VWYWx1ZShtb2NrQXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZSlcbiAgICAgIC5jb21waWxlKCk7XG5cbiAgICBhcHAgPSBtb2R1bGVGaXh0dXJlLmNyZWF0ZU5lc3RBcHBsaWNhdGlvbigpO1xuICAgIGp3dFNlcnZpY2UgPSBtb2R1bGVGaXh0dXJlLmdldDxKd3RTZXJ2aWNlPihKd3RTZXJ2aWNlKTtcbiAgICBpbnRlZ3JhY2FvRG9jdW1lbnRvU2VydmljZSA9IG1vZHVsZUZpeHR1cmUuZ2V0PEludGVncmFjYW9Eb2N1bWVudG9TZXJ2aWNlPihcbiAgICAgIEludGVncmFjYW9Eb2N1bWVudG9TZXJ2aWNlLFxuICAgICk7XG4gICAgYXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZSA9IG1vZHVsZUZpeHR1cmUuZ2V0PEF1ZGl0b3JpYVBhZ2FtZW50b1NlcnZpY2U+KFxuICAgICAgQXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZSxcbiAgICApO1xuXG4gICAgYXdhaXQgYXBwLmluaXQoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGFwcC5jbG9zZSgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIENvbmZpZ3VyYXIgbW9ja3MgcGFkcsOjbyBwYXJhIG9zIHJlcG9zaXTDs3Jpb3NcbiAgICBtb2NrQ29tcHJvdmFudGVSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrSW1wbGVtZW50YXRpb24oKGR0bykgPT4gKHtcbiAgICAgIGlkOiBjb21wcm92YW50ZUlkLFxuICAgICAgcGFnYW1lbnRvSWQ6IGR0by5wYWdhbWVudG9JZCxcbiAgICAgIGRvY3VtZW50b0lkOiBkdG8uZG9jdW1lbnRvSWQsXG4gICAgICBub21lQXJxdWl2bzogZHRvLm5vbWVBcnF1aXZvLFxuICAgICAgdGlwb0FycXVpdm86IGR0by50aXBvQXJxdWl2byxcbiAgICAgIHRhbWFuaG9BcnF1aXZvOiBkdG8udGFtYW5ob0FycXVpdm8sXG4gICAgICB1cmxEb3dubG9hZDogZHRvLnVybERvd25sb2FkLFxuICAgICAgdXBsb2FkZWRCeTogZHRvLnVwbG9hZGVkQnksXG4gICAgICBkZXNjcmljYW86IGR0by5kZXNjcmljYW8sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfSkpO1xuXG4gICAgbW9ja0NvbXByb3ZhbnRlUmVwb3NpdG9yeS5zYXZlLm1vY2tJbXBsZW1lbnRhdGlvbigoZW50aXR5KSA9PlxuICAgICAgUHJvbWlzZS5yZXNvbHZlKGVudGl0eSksXG4gICAgKTtcblxuICAgIG1vY2tDb21wcm92YW50ZVJlcG9zaXRvcnkuZmluZE9uZS5tb2NrSW1wbGVtZW50YXRpb24oKG9wdGlvbnMpID0+IHtcbiAgICAgIGlmIChvcHRpb25zLndoZXJlLmlkID09PSBjb21wcm92YW50ZUlkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIGlkOiBjb21wcm92YW50ZUlkLFxuICAgICAgICAgIHBhZ2FtZW50b0lkLFxuICAgICAgICAgIGRvY3VtZW50b0lkLFxuICAgICAgICAgIG5vbWVBcnF1aXZvOiAnY29tcHJvdmFudGUucGRmJyxcbiAgICAgICAgICB0aXBvQXJxdWl2bzogJ2FwcGxpY2F0aW9uL3BkZicsXG4gICAgICAgICAgdGFtYW5ob0FycXVpdm86IDEwMjQsXG4gICAgICAgICAgdXJsRG93bmxvYWQ6IGBodHRwOi8vYXBpLWRvY3VtZW50by5wZ2Jlbi5sb2NhbC9kb2N1bWVudG9zLyR7ZG9jdW1lbnRvSWR9YCxcbiAgICAgICAgICB1cGxvYWRlZEJ5OiB1c3VhcmlvSWQsXG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfSk7XG5cbiAgICBtb2NrQ29tcHJvdmFudGVSZXBvc2l0b3J5LmZpbmQubW9ja0ltcGxlbWVudGF0aW9uKChvcHRpb25zKSA9PiB7XG4gICAgICBpZiAob3B0aW9ucy53aGVyZS5wYWdhbWVudG9JZCA9PT0gcGFnYW1lbnRvSWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IGNvbXByb3ZhbnRlSWQsXG4gICAgICAgICAgICBwYWdhbWVudG9JZCxcbiAgICAgICAgICAgIGRvY3VtZW50b0lkLFxuICAgICAgICAgICAgbm9tZUFycXVpdm86ICdjb21wcm92YW50ZS5wZGYnLFxuICAgICAgICAgICAgdGlwb0FycXVpdm86ICdhcHBsaWNhdGlvbi9wZGYnLFxuICAgICAgICAgICAgdGFtYW5ob0FycXVpdm86IDEwMjQsXG4gICAgICAgICAgICB1cmxEb3dubG9hZDogYGh0dHA6Ly9hcGktZG9jdW1lbnRvLnBnYmVuLmxvY2FsL2RvY3VtZW50b3MvJHtkb2N1bWVudG9JZH1gLFxuICAgICAgICAgICAgdXBsb2FkZWRCeTogdXN1YXJpb0lkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEZ1bsOnw6NvIGF1eGlsaWFyIHBhcmEgZ2VyYXIgdG9rZW5zIEpXVFxuICBjb25zdCBnZXJhclRva2VuID0gKFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHBlcmZpczogc3RyaW5nW10gPSBbJ3VzdWFyaW8nXSxcbiAgICB1bmlkYWRlSWQ6IHN0cmluZyA9ICd1bmlkYWRlLXRlc3RlLWlkJyxcbiAgKSA9PiB7XG4gICAgcmV0dXJuIGp3dFNlcnZpY2Uuc2lnbih7XG4gICAgICBzdWI6IHVzZXJJZCxcbiAgICAgIHBlcmZpcyxcbiAgICAgIHVuaWRhZGVJZCxcbiAgICB9KTtcbiAgfTtcblxuICBkZXNjcmliZSgnVXBsb2FkIGRlIENvbXByb3ZhbnRlcycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBmYXplciB1cGxvYWQgZGUgY29tcHJvdmFudGUgUERGIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JpYXIgYXJxdWl2byBkZSB0ZXN0ZVxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBkbyBhcnF1aXZvIFBERicpO1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucG9zdChgL3BhZ2FtZW50b3MvJHtwYWdhbWVudG9JZH0vY29tcHJvdmFudGVzYClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKVxuICAgICAgICAuYXR0YWNoKCdhcnF1aXZvJywgYnVmZmVyLCAnY29tcHJvdmFudGUucGRmJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmljYW8nLCAnQ29tcHJvdmFudGUgZGUgdHJhbnNmZXLDqm5jaWEgYmFuY8OhcmlhJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm5vbWVBcnF1aXZvKS50b0JlKCdjb21wcm92YW50ZS5wZGYnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnRpcG9BcnF1aXZvKS50b0JlKCdhcHBsaWNhdGlvbi9wZGYnKTtcblxuICAgICAgZXhwZWN0KGludGVncmFjYW9Eb2N1bWVudG9TZXJ2aWNlLnVwbG9hZENvbXByb3ZhbnRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoYXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZS5sb2dVcGxvYWRDb21wcm92YW50ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmF6ZXIgdXBsb2FkIGRlIGNvbXByb3ZhbnRlIEpQRyBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyaWFyIGFycXVpdm8gZGUgdGVzdGVcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKCdjb250ZcO6ZG8gZGUgdGVzdGUgZG8gYXJxdWl2byBKUEcnKTtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VyYXJUb2tlbih1c3VhcmlvSWQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnBvc3QoYC9wYWdhbWVudG9zLyR7cGFnYW1lbnRvSWR9L2NvbXByb3ZhbnRlc2ApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLmF0dGFjaCgnYXJxdWl2bycsIGJ1ZmZlciwgJ2NvbXByb3ZhbnRlLmpwZycpXG4gICAgICAgIC5maWVsZCgnZGVzY3JpY2FvJywgJ0NvbXByb3ZhbnRlIGRlIHRyYW5zZmVyw6puY2lhIGJhbmPDoXJpYScpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5ub21lQXJxdWl2bykudG9CZSgnY29tcHJvdmFudGUuanBnJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS50aXBvQXJxdWl2bykudG9CZSgnaW1hZ2UvanBlZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVqZWl0YXIgdXBsb2FkIGRlIGNvbXByb3ZhbnRlIGNvbSBmb3JtYXRvIG7Do28gcGVybWl0aWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ3JpYXIgYXJxdWl2byBkZSB0ZXN0ZSBjb20gZm9ybWF0byBuw6NvIHBlcm1pdGlkb1xuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBkbyBhcnF1aXZvJyk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4odXN1YXJpb0lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KGAvcGFnYW1lbnRvcy8ke3BhZ2FtZW50b0lkfS9jb21wcm92YW50ZXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5hdHRhY2goJ2FycXVpdm8nLCBidWZmZXIsICdjb21wcm92YW50ZS5leGUnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaWNhbycsICdBcnF1aXZvIG7Do28gcGVybWl0aWRvJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQ29udGFpbignbsOjbyBwZXJtaXRpZG8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHVwbG9hZCBxdWFuZG8gcGFnYW1lbnRvIG7Do28gZXhpc3RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU29icmVzY3JldmVyIG1vY2sgcGFyYSBlc3RlIHRlc3RlXG4gICAgICBtb2NrUGFnYW1lbnRvUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlT25jZShudWxsKTtcblxuICAgICAgLy8gQ3JpYXIgYXJxdWl2byBkZSB0ZXN0ZVxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBkbyBhcnF1aXZvJyk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4odXN1YXJpb0lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KGAvcGFnYW1lbnRvcy9wYWdhbWVudG8taW5leGlzdGVudGUvY29tcHJvdmFudGVzYClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKVxuICAgICAgICAuYXR0YWNoKCdhcnF1aXZvJywgYnVmZmVyLCAnY29tcHJvdmFudGUucGRmJylcbiAgICAgICAgLmZpZWxkKCdkZXNjcmljYW8nLCAnQ29tcHJvdmFudGUgZGUgdGVzdGUnKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9Db250YWluKCduw6NvIGVuY29udHJhZG8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHVwbG9hZCBxdWFuZG8gcGFnYW1lbnRvIGVzdMOhIGVtIHN0YXR1cyBDQU5DRUxBRE8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTb2JyZXNjcmV2ZXIgbW9jayBwYXJhIGVzdGUgdGVzdGVcbiAgICAgIG1vY2tQYWdhbWVudG9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHtcbiAgICAgICAgaWQ6IHBhZ2FtZW50b0lkLFxuICAgICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uQ0FOQ0VMQURPLFxuICAgICAgICB1bmlkYWRlSWQsXG4gICAgICB9KTtcblxuICAgICAgLy8gQ3JpYXIgYXJxdWl2byBkZSB0ZXN0ZVxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBkbyBhcnF1aXZvJyk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4odXN1YXJpb0lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KGAvcGFnYW1lbnRvcy8ke3BhZ2FtZW50b0lkfS9jb21wcm92YW50ZXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5hdHRhY2goJ2FycXVpdm8nLCBidWZmZXIsICdjb21wcm92YW50ZS5wZGYnKVxuICAgICAgICAuZmllbGQoJ2Rlc2NyaWNhbycsICdDb21wcm92YW50ZSBkZSB0ZXN0ZScpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwOSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5tZXNzYWdlKS50b0NvbnRhaW4oJ2NhbmNlbGFkbycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTGlzdGFnZW0gZGUgQ29tcHJvdmFudGVzJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGxpc3RhciBjb21wcm92YW50ZXMgZGUgdW0gcGFnYW1lbnRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KGAvcGFnYW1lbnRvcy8ke3BhZ2FtZW50b0lkfS9jb21wcm92YW50ZXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2l0ZW1zJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5pdGVtcykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuaXRlbXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5pdGVtc1swXSkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5pdGVtc1swXSkudG9IYXZlUHJvcGVydHkoJ25vbWVBcnF1aXZvJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBsaXN0YSB2YXppYSBxdWFuZG8gbsOjbyBow6EgY29tcHJvdmFudGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gU29icmVzY3JldmVyIG1vY2sgcGFyYSBlc3RlIHRlc3RlXG4gICAgICBtb2NrQ29tcHJvdmFudGVSZXBvc2l0b3J5LmZpbmQubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFtdKTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KGAvcGFnYW1lbnRvcy9wYWdhbWVudG8tc2VtLWNvbXByb3ZhbnRlcy9jb21wcm92YW50ZXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ2l0ZW1zJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5pdGVtcykudG9CZUluc3RhbmNlT2YoQXJyYXkpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuaXRlbXMubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVmlzdWFsaXphw6fDo28gZGUgQ29tcHJvdmFudGUnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgb2J0ZXIgZGV0YWxoZXMgZGUgdW0gY29tcHJvdmFudGUgZXNwZWPDrWZpY28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4odXN1YXJpb0lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5nZXQoYC9jb21wcm92YW50ZXMvJHtjb21wcm92YW50ZUlkfWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnbm9tZUFycXVpdm8nKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgndXJsRG93bmxvYWQnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmlkKS50b0JlKGNvbXByb3ZhbnRlSWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgNDA0IHF1YW5kbyBjb21wcm92YW50ZSBuw6NvIGV4aXN0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFNvYnJlc2NyZXZlciBtb2NrIHBhcmEgZXN0ZSB0ZXN0ZVxuICAgICAgbW9ja0NvbXByb3ZhbnRlUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlT25jZShudWxsKTtcblxuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZ2V0KGAvY29tcHJvdmFudGVzL2NvbXByb3ZhbnRlLWluZXhpc3RlbnRlYClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9Db250YWluKCduw6NvIGVuY29udHJhZG8nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlbW/Dp8OjbyBkZSBDb21wcm92YW50ZScsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZW1vdmVyIGNvbXByb3ZhbnRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZGVsZXRlKGAvY29tcHJvdmFudGVzLyR7Y29tcHJvdmFudGVJZH1gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5zZW5kKHtcbiAgICAgICAgICBtb3Rpdm86ICdEb2N1bWVudG8gaW5jb3JyZXRvJyxcbiAgICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIGV4cGVjdChpbnRlZ3JhY2FvRG9jdW1lbnRvU2VydmljZS5yZW1vdmVyQ29tcHJvdmFudGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgYXVkaXRvcmlhUGFnYW1lbnRvU2VydmljZS5sb2dSZW1vY2FvQ29tcHJvdmFudGUsXG4gICAgICApLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHJlbW/Dp8OjbyBzZW0gaW5mb3JtYXIgbW90aXZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9rZW4gPSBnZXJhclRva2VuKHVzdWFyaW9JZCk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAuZGVsZXRlKGAvY29tcHJvdmFudGVzLyR7Y29tcHJvdmFudGVJZH1gKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5zZW5kKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9Db250YWluKCdtb3Rpdm8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHJlbW/Dp8OjbyBxdWFuZG8gY29tcHJvdmFudGUgbsOjbyBleGlzdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBTb2JyZXNjcmV2ZXIgbW9jayBwYXJhIGVzdGUgdGVzdGVcbiAgICAgIG1vY2tDb21wcm92YW50ZVJlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobnVsbCk7XG5cbiAgICAgIGNvbnN0IHRva2VuID0gZ2VyYXJUb2tlbih1c3VhcmlvSWQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmRlbGV0ZShgL2NvbXByb3ZhbnRlcy9jb21wcm92YW50ZS1pbmV4aXN0ZW50ZWApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIG1vdGl2bzogJ0RvY3VtZW50byBpbmNvcnJldG8nLFxuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkubWVzc2FnZSkudG9Db250YWluKCduw6NvIGVuY29udHJhZG8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIHJlbW/Dp8OjbyBxdWFuZG8gdXN1w6FyaW8gbsOjbyB0ZW0gcGVybWlzc8OjbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRva2VuIGNvbSBwZXJmaWwgaW5zdWZpY2llbnRlXG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4oXG4gICAgICAgICdvdXRyby11c3VhcmlvJyxcbiAgICAgICAgWyd1c3VhcmlvX2Jhc2ljbyddLFxuICAgICAgICAnb3V0cmEtdW5pZGFkZScsXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLmRlbGV0ZShgL2NvbXByb3ZhbnRlcy8ke2NvbXByb3ZhbnRlSWR9YClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKVxuICAgICAgICAuc2VuZCh7XG4gICAgICAgICAgbW90aXZvOiAnRG9jdW1lbnRvIGluY29ycmV0bycsXG4gICAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWYWxpZGHDp8OjbyBkZSBUaXBvcyBkZSBBcnF1aXZvJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGFjZWl0YXIgYXJxdWl2b3MgUERGJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBQREYnKTtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VyYXJUb2tlbih1c3VhcmlvSWQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnBvc3QoYC9wYWdhbWVudG9zLyR7cGFnYW1lbnRvSWR9L2NvbXByb3ZhbnRlc2ApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLmF0dGFjaCgnYXJxdWl2bycsIGJ1ZmZlciwgJ2NvbXByb3ZhbnRlLnBkZicpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBhY2VpdGFyIGFycXVpdm9zIGRlIGltYWdlbSAoSlBHLCBQTkcpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBpbWFnZW0nKTtcbiAgICAgIGNvbnN0IHRva2VuID0gZ2VyYXJUb2tlbih1c3VhcmlvSWQpO1xuXG4gICAgICBjb25zdCByZXNwb25zZUpwZyA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnBvc3QoYC9wYWdhbWVudG9zLyR7cGFnYW1lbnRvSWR9L2NvbXByb3ZhbnRlc2ApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLmF0dGFjaCgnYXJxdWl2bycsIGJ1ZmZlciwgJ2NvbXByb3ZhbnRlLmpwZycpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2VKcGcuc3RhdHVzKS50b0JlKDIwMSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlUG5nID0gYXdhaXQgcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKVxuICAgICAgICAucG9zdChgL3BhZ2FtZW50b3MvJHtwYWdhbWVudG9JZH0vY29tcHJvdmFudGVzYClcbiAgICAgICAgLnNldCgnQXV0aG9yaXphdGlvbicsIGBCZWFyZXIgJHt0b2tlbn1gKVxuICAgICAgICAuYXR0YWNoKCdhcnF1aXZvJywgYnVmZmVyLCAnY29tcHJvdmFudGUucG5nJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZVBuZy5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlamVpdGFyIG91dHJvcyB0aXBvcyBkZSBhcnF1aXZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ2NvbnRlw7pkbyBkZSB0ZXN0ZSBhcnF1aXZvIG7Do28gcGVybWl0aWRvJyk7XG4gICAgICBjb25zdCB0b2tlbiA9IGdlcmFyVG9rZW4odXN1YXJpb0lkKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2VEb2MgPSBhd2FpdCByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpXG4gICAgICAgIC5wb3N0KGAvcGFnYW1lbnRvcy8ke3BhZ2FtZW50b0lkfS9jb21wcm92YW50ZXNgKVxuICAgICAgICAuc2V0KCdBdXRob3JpemF0aW9uJywgYEJlYXJlciAke3Rva2VufWApXG4gICAgICAgIC5hdHRhY2goJ2FycXVpdm8nLCBidWZmZXIsICdjb21wcm92YW50ZS5kb2MnKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlRG9jLnN0YXR1cykudG9CZSg0MDApO1xuXG4gICAgICBjb25zdCByZXNwb25zZUV4ZSA9IGF3YWl0IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSlcbiAgICAgICAgLnBvc3QoYC9wYWdhbWVudG9zLyR7cGFnYW1lbnRvSWR9L2NvbXByb3ZhbnRlc2ApXG4gICAgICAgIC5zZXQoJ0F1dGhvcml6YXRpb24nLCBgQmVhcmVyICR7dG9rZW59YClcbiAgICAgICAgLmF0dGFjaCgnYXJxdWl2bycsIGJ1ZmZlciwgJ2NvbXByb3ZhbnRlLmV4ZScpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2VFeGUuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=