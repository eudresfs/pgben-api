{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\cidadao\\controllers\\composicao-familiar.controller.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\cidadao\\controllers\\composicao-familiar.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\r\nimport { ComposicaoFamiliarController } from './composicao-familiar.controller';\r\nimport { ComposicaoFamiliarService } from '../services/composicao-familiar.service';\r\nimport { CreateComposicaoFamiliarDto } from '../dto/create-composicao-familiar.dto';\r\nimport { UpdateComposicaoFamiliarDto } from '../dto/update-composicao-familiar.dto';\r\nimport {\r\n  ComposicaoFamiliarResponseDto,\r\n  ComposicaoFamiliarPaginatedResponseDto,\r\n} from '../dto/composicao-familiar-response.dto';\r\nimport {\r\n  NotFoundException,\r\n  ConflictException,\r\n  BadRequestException,\r\n} from '@nestjs/common';\r\nimport { EscolaridadeEnum } from '../enums/escolaridade.enum';\r\nimport { ParentescoEnum } from '../enums/parentesco.enum';\r\n\r\ndescribe('ComposicaoFamiliarController', () => {\r\n  let controller: ComposicaoFamiliarController;\r\n  let service: ComposicaoFamiliarService;\r\n\r\n  const mockComposicaoFamiliarService = {\r\n    create: jest.fn(),\r\n    findByCidadao: jest.fn(),\r\n    findOne: jest.fn(),\r\n    update: jest.fn(),\r\n    remove: jest.fn(),\r\n    findByCpf: jest.fn(),\r\n  };\r\n\r\n  const mockComposicaoFamiliarResponse: ComposicaoFamiliarResponseDto = {\r\n    id: '123e4567-e89b-12d3-a456-426614174000',\r\n    cidadao_id: '123e4567-e89b-12d3-a456-426614174001',\r\n    nome: 'João Silva',\r\n    cpf: '123.456.789-00',\r\n    nis: '12345678901',\r\n    idade: 25,\r\n    ocupacao: 'Estudante',\r\n    escolaridade: EscolaridadeEnum.MEDIO_INCOMPLETO,\r\n    parentesco: ParentescoEnum.FILHO,\r\n    renda: 1500.00,\r\n    observacoes: 'Observações de teste',\r\n    created_at: new Date('2024-01-01T10:00:00Z'),\r\n    updated_at: new Date('2024-01-01T10:00:00Z'),\r\n    ativo: true,\r\n    cpf_formatado: '',\r\n    escolaridade_descricao: '',\r\n    parentesco_descricao: ''\r\n  };\r\n\r\n  const mockPaginatedResponse: ComposicaoFamiliarPaginatedResponseDto = {\r\n    data: [mockComposicaoFamiliarResponse],\r\n    meta: {\r\n      total: 1,\r\n      page: 1,\r\n      limit: 10,\r\n      totalPages: 1,\r\n      hasNext: false,\r\n      hasPrev: false,\r\n    },\r\n    estatisticas: {\r\n      totalMembros: 1,\r\n      rendaTotal: 1500.00,\r\n      rendaMedia: 1500.00,\r\n      idadeMedia: 25,\r\n      membrosComRenda: 1,\r\n    },\r\n  };\r\n\r\n  beforeEach(async () => {\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      controllers: [ComposicaoFamiliarController],\r\n      providers: [\r\n        {\r\n          provide: ComposicaoFamiliarService,\r\n          useValue: mockComposicaoFamiliarService,\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    controller = module.get<ComposicaoFamiliarController>(ComposicaoFamiliarController);\r\n    service = module.get<ComposicaoFamiliarService>(ComposicaoFamiliarService);\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('should be defined', () => {\r\n    expect(controller).toBeDefined();\r\n  });\r\n\r\n  describe('create', () => {\r\n    const createDto: CreateComposicaoFamiliarDto = {\r\n      cidadao_id: '123e4567-e89b-12d3-a456-426614174001',\r\n      nome: 'João Silva',\r\n      cpf: '12345678900',\r\n      nis: '12345678901',\r\n      idade: 25,\r\n      ocupacao: 'Estudante',\r\n      escolaridade: EscolaridadeEnum.MEDIO_COMPLETO,\r\n      parentesco: ParentescoEnum.FILHO,\r\n      renda: 1500.00,\r\n      observacoes: 'Observações de teste',\r\n    };\r\n\r\n    const mockRequest = {\r\n      user: { id: 'user123' },\r\n    };\r\n\r\n    it('should create a new composicao familiar member', async () => {\r\n      mockComposicaoFamiliarService.create.mockResolvedValue(mockComposicaoFamiliarResponse);\r\n\r\n      const result = await controller.create(createDto, mockRequest as any);\r\n\r\n      expect(service.create).toHaveBeenCalledWith(createDto, 'user123');\r\n      expect(result).toEqual(mockComposicaoFamiliarResponse);\r\n    });\r\n\r\n    it('should throw ConflictException when member already exists', async () => {\r\n      mockComposicaoFamiliarService.create.mockRejectedValue(\r\n        new ConflictException('Já existe um membro com este CPF na composição familiar'),\r\n      );\r\n\r\n      await expect(controller.create(createDto, mockRequest as any))\r\n        .rejects.toThrow(ConflictException);\r\n    });\r\n\r\n    it('should throw BadRequestException for invalid data', async () => {\r\n      mockComposicaoFamiliarService.create.mockRejectedValue(\r\n        new BadRequestException('CPF inválido'),\r\n      );\r\n\r\n      await expect(controller.create(createDto, mockRequest as any))\r\n        .rejects.toThrow(BadRequestException);\r\n    });\r\n  });\r\n\r\n  describe('findByCidadao', () => {\r\n    const cidadaoId = '123e4567-e89b-12d3-a456-426614174001';\r\n    const query = { page: 1, limit: 10 };\r\n\r\n    it('should return paginated composicao familiar members', async () => {\r\n      mockComposicaoFamiliarService.findByCidadao.mockResolvedValue(mockPaginatedResponse);\r\n\r\n      const result = await controller.findByCidadao(cidadaoId, query.page, query.limit);\r\n\r\n      expect(service.findByCidadao).toHaveBeenCalledWith(cidadaoId, query);\r\n      expect(result).toEqual(mockPaginatedResponse);\r\n    });\r\n\r\n    it('should throw NotFoundException when cidadao does not exist', async () => {\r\n      mockComposicaoFamiliarService.findByCidadao.mockRejectedValue(\r\n        new NotFoundException('Cidadão não encontrado'),\r\n      );\r\n\r\n      await expect(controller.findByCidadao(cidadaoId, 1, 10))\r\n        .rejects.toThrow(NotFoundException);\r\n    });\r\n\r\n    it('should use default pagination values', async () => {\r\n      mockComposicaoFamiliarService.findByCidadao.mockResolvedValue(mockPaginatedResponse);\r\n\r\n      await controller.findByCidadao(cidadaoId, 1, 10);\r\n\r\n      expect(service.findByCidadao).toHaveBeenCalledWith(cidadaoId, {\r\n        page: 1,\r\n        limit: 10,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('findOne', () => {\r\n    const id = '123e4567-e89b-12d3-a456-426614174000';\r\n\r\n    it('should return a composicao familiar member', async () => {\r\n      mockComposicaoFamiliarService.findOne.mockResolvedValue(mockComposicaoFamiliarResponse);\r\n\r\n      const result = await controller.findOne(id);\r\n\r\n      expect(service.findOne).toHaveBeenCalledWith(id);\r\n      expect(result).toEqual(mockComposicaoFamiliarResponse);\r\n    });\r\n\r\n    it('should throw NotFoundException when member does not exist', async () => {\r\n      mockComposicaoFamiliarService.findOne.mockRejectedValue(\r\n        new NotFoundException('Membro da composição familiar não encontrado'),\r\n      );\r\n\r\n      await expect(controller.findOne(id))\r\n        .rejects.toThrow(NotFoundException);\r\n    });\r\n  });\r\n\r\n  describe('update', () => {\r\n    const id = '123e4567-e89b-12d3-a456-426614174000';\r\n    const updateDto: UpdateComposicaoFamiliarDto = {\r\n      nome: 'João Silva Atualizado',\r\n      renda: 2000.00,\r\n    };\r\n\r\n    const mockRequest = {\r\n      user: { id: 'user123' },\r\n    };\r\n\r\n    it('should update a composicao familiar member', async () => {\r\n      const updatedResponse = {\r\n        ...mockComposicaoFamiliarResponse,\r\n        nome: 'João Silva Atualizado',\r\n        renda: 2000.00,\r\n      };\r\n      mockComposicaoFamiliarService.update.mockResolvedValue(updatedResponse);\r\n\r\n      const result = await controller.update(id, updateDto, mockRequest as any);\r\n\r\n      expect(service.update).toHaveBeenCalledWith(id, updateDto, 'user123');\r\n      expect(result).toEqual(updatedResponse);\r\n    });\r\n\r\n    it('should throw NotFoundException when member does not exist', async () => {\r\n      mockComposicaoFamiliarService.update.mockRejectedValue(\r\n        new NotFoundException('Membro da composição familiar não encontrado'),\r\n      );\r\n\r\n      await expect(controller.update(id, updateDto, mockRequest as any))\r\n        .rejects.toThrow(NotFoundException);\r\n    });\r\n\r\n    it('should throw ConflictException for duplicate data', async () => {\r\n      mockComposicaoFamiliarService.update.mockRejectedValue(\r\n        new ConflictException('Já existe um membro com este nome na composição familiar'),\r\n      );\r\n\r\n      await expect(controller.update(id, updateDto, mockRequest as any))\r\n        .rejects.toThrow(ConflictException);\r\n    });\r\n  });\r\n\r\n  describe('remove', () => {\r\n    const id = '123e4567-e89b-12d3-a456-426614174000';\r\n    const mockRequest = {\r\n      user: { id: 'user123' },\r\n    };\r\n\r\n    it('should remove a composicao familiar member', async () => {\r\n      mockComposicaoFamiliarService.remove.mockResolvedValue(undefined);\r\n\r\n      await controller.remove(id, mockRequest as any);\r\n\r\n      expect(service.remove).toHaveBeenCalledWith(id, 'user123');\r\n    });\r\n\r\n    it('should throw NotFoundException when member does not exist', async () => {\r\n      mockComposicaoFamiliarService.remove.mockRejectedValue(\r\n        new NotFoundException('Membro da composição familiar não encontrado'),\r\n      );\r\n\r\n      await expect(controller.remove(id, mockRequest as any))\r\n        .rejects.toThrow(NotFoundException);\r\n    });\r\n  });\r\n\r\n  describe('findByCpf', () => {\r\n    const cpf = '12345678900';\r\n\r\n    it('should return composicao familiar members by CPF', async () => {\r\n      const expectedResponse = [mockComposicaoFamiliarResponse];\r\n      mockComposicaoFamiliarService.findByCpf.mockResolvedValue(expectedResponse);\r\n\r\n      const result = await controller.findByCpf(cpf);\r\n\r\n      expect(service.findByCpf).toHaveBeenCalledWith(cpf);\r\n      expect(result).toEqual(expectedResponse);\r\n    });\r\n\r\n    it('should throw BadRequestException for invalid CPF', async () => {\r\n      mockComposicaoFamiliarService.findByCpf.mockRejectedValue(\r\n        new BadRequestException('CPF deve ter 11 dígitos'),\r\n      );\r\n\r\n      await expect(controller.findByCpf('123'))\r\n        .rejects.toThrow(BadRequestException);\r\n    });\r\n\r\n    it('should return empty array when no members found', async () => {\r\n      mockComposicaoFamiliarService.findByCpf.mockResolvedValue([]);\r\n\r\n      const result = await controller.findByCpf(cpf);\r\n\r\n      expect(result).toEqual([]);\r\n    });\r\n  });\r\n\r\n  describe('Input validation', () => {\r\n    it('should validate UUID format for ID parameters', async () => {\r\n      const invalidId = 'invalid-uuid';\r\n      \r\n      // O controller deve validar UUIDs através dos decorators\r\n      // Este teste verifica se a validação está configurada corretamente\r\n      expect(() => {\r\n        // Simulação de validação de UUID\r\n        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\r\n        if (!uuidRegex.test(invalidId)) {\r\n          throw new BadRequestException('ID deve ser um UUID válido');\r\n        }\r\n      }).toThrow(BadRequestException);\r\n    });\r\n\r\n    it('should validate pagination parameters', () => {\r\n      const invalidQuery = { page: -1, limit: 0 };\r\n      \r\n      // Validação de parâmetros de paginação\r\n      expect(() => {\r\n        if (invalidQuery.page < 1 || invalidQuery.limit < 1) {\r\n          throw new BadRequestException('Parâmetros de paginação inválidos');\r\n        }\r\n      }).toThrow(BadRequestException);\r\n    });\r\n  });\r\n\r\n  describe('Error handling', () => {\r\n    it('should handle service errors gracefully', async () => {\r\n      const createDto: CreateComposicaoFamiliarDto = {\r\n        cidadao_id: '123e4567-e89b-12d3-a456-426614174001',\r\n        nome: 'João Silva',\r\n        cpf: '12345678900',\r\n        nis: '12345678901',\r\n        idade: 25,\r\n        ocupacao: 'Estudante',\r\n        escolaridade: EscolaridadeEnum.MEDIO_COMPLETO,\r\n        parentesco: ParentescoEnum.FILHO,\r\n      };\r\n\r\n      const mockRequest = { user: { id: 'user123' } };\r\n\r\n      mockComposicaoFamiliarService.create.mockRejectedValue(\r\n        new Error('Erro interno do servidor'),\r\n      );\r\n\r\n      await expect(controller.create(createDto, mockRequest as any))\r\n        .rejects.toThrow('Erro interno do servidor');\r\n    });\r\n  });\r\n\r\n  describe('Authorization', () => {\r\n    it('should extract user ID from request', async () => {\r\n      const createDto: CreateComposicaoFamiliarDto = {\r\n        cidadao_id: '123e4567-e89b-12d3-a456-426614174001',\r\n        nome: 'João Silva',\r\n        cpf: '12345678900',\r\n        nis: '12345678901',\r\n        idade: 25,\r\n        ocupacao: 'Estudante',\r\n        escolaridade: EscolaridadeEnum.MEDIO_COMPLETO,\r\n        parentesco: ParentescoEnum.FILHO,\r\n      };\r\n\r\n      const mockRequest = { user: { id: 'user123' } };\r\n      mockComposicaoFamiliarService.create.mockResolvedValue(mockComposicaoFamiliarResponse);\r\n\r\n      await controller.create(createDto, mockRequest as any);\r\n\r\n      expect(service.create).toHaveBeenCalledWith(createDto, 'user123');\r\n    });\r\n  });\r\n});"],"version":3}