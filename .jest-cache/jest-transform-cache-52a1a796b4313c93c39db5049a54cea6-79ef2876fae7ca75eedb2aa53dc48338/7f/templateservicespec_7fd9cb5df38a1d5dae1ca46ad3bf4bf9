5ce8ddca374121bc04fba43a7562b6d2
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const template_service_1 = require("../services/template.service");
const template_repository_1 = require("../repositories/template.repository");
const template_tipo_enum_1 = require("../enums/template-tipo.enum");
const common_1 = require("@nestjs/common");
// Mock do Repositório
const mockTemplateRepository = {
    findByCodigo: jest.fn(),
    findAll: jest.fn(),
    findByTipo: jest.fn(),
    save: jest.fn(),
    remove: jest.fn(),
};
describe('TemplateService', () => {
    let service;
    let repository;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                template_service_1.TemplateService,
                {
                    provide: template_repository_1.TemplateRepository,
                    useValue: mockTemplateRepository,
                },
            ],
        }).compile();
        service = module.get(template_service_1.TemplateService);
        repository = module.get(template_repository_1.TemplateRepository);
        // Limpar todos os mocks antes de cada teste
        jest.clearAllMocks();
    });
    it('deve ser definido', () => {
        expect(service).toBeDefined();
        expect(repository).toBeDefined();
    });
    describe('buscarPorCodigo', () => {
        it('deve retornar um template quando encontrado', async () => {
            // Arrange
            const templateMock = {
                id: '1',
                codigo: 'email-bem-vindo',
                nome: 'E-mail de Boas-vindas',
                descricao: 'Template para e-mail de boas-vindas',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.buscarPorCodigo('email-bem-vindo');
            // Assert
            expect(resultado).toEqual(templateMock);
            expect(repository.findByCodigo).toHaveBeenCalledWith('email-bem-vindo');
        });
        it('deve lançar NotFoundException quando o template não for encontrado', async () => {
            // Arrange
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.buscarPorCodigo('template-inexistente')).rejects.toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-inexistente');
        });
    });
    describe('buscarTodos', () => {
        it('deve retornar todos os templates quando não for especificado um tipo', async () => {
            // Arrange
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
                {
                    id: '2',
                    codigo: 'notificacao-solicitacao',
                    nome: 'Notificação de Solicitação',
                    descricao: 'Template para notificação de solicitação',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.NOTIFICACAO,
                    conteudo: 'Sua solicitação {{protocolo}} foi recebida',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findAll').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarTodos();
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findAll).toHaveBeenCalled();
            expect(repository.findByTipo).not.toHaveBeenCalled();
        });
        it('deve retornar templates filtrados por tipo quando especificado', async () => {
            // Arrange
            const tipo = template_tipo_enum_1.TemplateTipoEnum.EMAIL;
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findByTipo').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarTodos(tipo);
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findByTipo).toHaveBeenCalledWith(tipo);
            expect(repository.findAll).not.toHaveBeenCalled();
        });
    });
    describe('buscarPorTipo', () => {
        it('deve retornar templates filtrados por tipo', async () => {
            // Arrange
            const tipo = template_tipo_enum_1.TemplateTipoEnum.EMAIL;
            const templatesMock = [
                {
                    id: '1',
                    codigo: 'email-bem-vindo',
                    nome: 'E-mail de Boas-vindas',
                    descricao: 'Template para e-mail de boas-vindas',
                    tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                    conteudo: '<html><body>Bem-vindo, {{nome}}!</body></html>',
                    ativo: true,
                },
            ];
            jest.spyOn(repository, 'findByTipo').mockResolvedValue(templatesMock);
            // Act
            const resultado = await service.buscarPorTipo(tipo);
            // Assert
            expect(resultado).toEqual(templatesMock);
            expect(repository.findByTipo).toHaveBeenCalledWith(tipo);
        });
    });
    describe('criar', () => {
        it('deve criar um novo template com sucesso', async () => {
            // Arrange
            const dto = {
                codigo: 'novo-template',
                nome: 'Novo Template',
                descricao: 'Descrição do novo template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo do template: {{variavel}}</body></html>',
            };
            const templateMock = {
                id: '3',
                ...dto,
                ativo: true,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            jest.spyOn(repository, 'save').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.criar(dto);
            // Assert
            expect(resultado).toEqual(templateMock);
            expect(repository.findByCodigo).toHaveBeenCalledWith('novo-template');
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...dto,
                ativo: true,
            }));
        });
        it('deve lançar BadRequestException ao tentar criar um template com código já existente', async () => {
            // Arrange
            const dto = {
                codigo: 'template-existente',
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
            };
            const templateExistente = {
                id: '4',
                ...dto,
                ativo: true,
            };
            jest
                .spyOn(repository, 'findByCodigo')
                .mockResolvedValue(templateExistente);
            // Act & Assert
            await expect(service.criar(dto)).rejects.toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-existente');
            expect(repository.save).not.toHaveBeenCalled();
        });
        it('deve lançar BadRequestException quando o conteúdo do template for inválido', async () => {
            // Arrange
            const dto = {
                codigo: 'template-invalido',
                nome: 'Template Inválido',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>{{#each items}}</body></html>', // Template inválido (tag não fechada)
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.criar(dto)).rejects.toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith('template-invalido');
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('atualizar', () => {
        it('deve atualizar um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'template-existente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>Conteúdo atualizado: {{variavel}}</body></html>',
            };
            const templateExistente = {
                id: '5',
                codigo,
                nome: 'Nome Antigo',
                descricao: 'Descrição antiga',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo antigo</body></html>',
                ativo: true,
            };
            const templateAtualizado = {
                ...templateExistente,
                ...dto,
            };
            jest
                .spyOn(repository, 'findByCodigo')
                .mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'save').mockResolvedValue(templateAtualizado);
            // Act
            const resultado = await service.atualizar(codigo, dto);
            // Assert
            expect(resultado).toEqual(templateAtualizado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...templateExistente,
                ...dto,
            }));
        });
        it('deve lançar NotFoundException ao tentar atualizar um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>Conteúdo atualizado</body></html>',
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.atualizar(codigo, dto)).rejects.toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
        it('deve lançar BadRequestException quando o conteúdo atualizado for inválido', async () => {
            // Arrange
            const codigo = 'template-existente';
            const dto = {
                nome: 'Nome Atualizado',
                descricao: 'Descrição atualizada',
                conteudo: '<html><body>{{#if invalido}</body></html>', // Template inválido (tag não fechada)
            };
            const templateExistente = {
                id: '6',
                codigo,
                nome: 'Nome Antigo',
                descricao: 'Descrição antiga',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo antigo</body></html>',
                ativo: true,
            };
            jest
                .spyOn(repository, 'findByCodigo')
                .mockResolvedValue(templateExistente);
            // Act & Assert
            await expect(service.atualizar(codigo, dto)).rejects.toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('remover', () => {
        it('deve remover um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'template-existente';
            const templateExistente = {
                id: '7',
                codigo,
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: true,
            };
            jest
                .spyOn(repository, 'findByCodigo')
                .mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'remove').mockResolvedValue(undefined);
            // Act
            await service.remover(codigo);
            // Assert
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.remove).toHaveBeenCalledWith(templateExistente);
        });
        it('deve lançar NotFoundException ao tentar remover um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.remover(codigo)).rejects.toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.remove).not.toHaveBeenCalled();
        });
    });
    describe('alterarStatus', () => {
        it('deve alterar o status do template para ativo', async () => {
            // Arrange
            const codigo = 'template-existente';
            const ativo = true;
            const templateExistente = {
                id: '8',
                codigo,
                nome: 'Template Existente',
                descricao: 'Descrição do template',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: false,
            };
            const templateAtualizado = {
                ...templateExistente,
                ativo,
            };
            jest
                .spyOn(repository, 'findByCodigo')
                .mockResolvedValue(templateExistente);
            jest.spyOn(repository, 'save').mockResolvedValue(templateAtualizado);
            // Act
            const resultado = await service.alterarStatus(codigo, ativo);
            // Assert
            expect(resultado).toEqual(templateAtualizado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...templateExistente,
                ativo,
            }));
        });
        it('deve lançar NotFoundException ao tentar alterar o status de um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const ativo = true;
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.alterarStatus(codigo, ativo)).rejects.toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
            expect(repository.save).not.toHaveBeenCalled();
        });
    });
    describe('testar', () => {
        it('deve renderizar um template com sucesso', async () => {
            // Arrange
            const dto = {
                conteudo: '<html><body>Olá, {{nome}}!</body></html>',
                dados: { nome: 'João' },
            };
            const conteudoEsperado = '<html><body>Olá, João!</body></html>';
            // Act
            const resultado = await service.testar(dto);
            // Assert
            expect(resultado).toEqual({ conteudo: conteudoEsperado });
        });
        it('deve lançar BadRequestException quando o template for inválido', async () => {
            // Arrange
            const dto = {
                conteudo: '<html><body>{{#each items}}</body></html>', // Template inválido (tag não fechada)
                dados: { items: ['item1', 'item2'] },
            };
            // Act & Assert
            await expect(service.testar(dto)).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve renderizar um template com dados complexos', async () => {
            // Arrange
            const dto = {
                conteudo: `
          <html>
            <body>
              <h1>Lista de Itens</h1>
              <ul>
                {{#each items}}
                  <li>{{nome}} - R$ {{preco}}</li>
                {{/each}}
              </ul>
              <p>Total: R$ {{total}}</p>
            </body>
          </html>
        `,
                dados: {
                    items: [
                        { nome: 'Item 1', preco: 10.5 },
                        { nome: 'Item 2', preco: 20.75 },
                    ],
                    total: 31.25,
                },
            };
            // Act
            const resultado = await service.testar(dto);
            // Assert
            expect(resultado).toHaveProperty('conteudo');
            expect(resultado.conteudo).toContain('<li>Item 1 - R$ 10.5</li>');
            expect(resultado.conteudo).toContain('<li>Item 2 - R$ 20.75</li>');
            expect(resultado.conteudo).toContain('<p>Total: R$ 31.25</p>');
        });
    });
    describe('renderizar', () => {
        it('deve renderizar um template existente com sucesso', async () => {
            // Arrange
            const codigo = 'email-bem-vindo';
            const dados = { nome: 'João', link: 'https://exemplo.com' };
            const templateMock = {
                id: '9',
                codigo,
                nome: 'E-mail de Boas-vindas',
                descricao: 'Template para e-mail de boas-vindas',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Bem-vindo, {{nome}}! <a href="{{link}}">Acesse aqui</a></body></html>',
                ativo: true,
            };
            const conteudoEsperado = '<html><body>Bem-vindo, João! <a href="https://exemplo.com">Acesse aqui</a></body></html>';
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act
            const resultado = await service.renderizar(codigo, dados);
            // Assert
            expect(resultado).toBe(conteudoEsperado);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
        it('deve lançar NotFoundException ao tentar renderizar um template inexistente', async () => {
            // Arrange
            const codigo = 'template-inexistente';
            const dados = { nome: 'João' };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(null);
            // Act & Assert
            await expect(service.renderizar(codigo, dados)).rejects.toThrow(common_1.NotFoundException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
        it('deve lançar BadRequestException quando o template não estiver ativo', async () => {
            // Arrange
            const codigo = 'template-inativo';
            const dados = { nome: 'João' };
            const templateMock = {
                id: '10',
                codigo,
                nome: 'Template Inativo',
                descricao: 'Template inativo para teste',
                tipo: template_tipo_enum_1.TemplateTipoEnum.EMAIL,
                conteudo: '<html><body>Conteúdo</body></html>',
                ativo: false,
            };
            jest.spyOn(repository, 'findByCodigo').mockResolvedValue(templateMock);
            // Act & Assert
            await expect(service.renderizar(codigo, dados)).rejects.toThrow(common_1.BadRequestException);
            expect(repository.findByCodigo).toHaveBeenCalledWith(codigo);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcdGVzdHNcXHRlbXBsYXRlLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCxtRUFBK0Q7QUFDL0QsNkVBQXlFO0FBSXpFLG9FQUErRDtBQUMvRCwyQ0FBd0U7QUFFeEUsc0JBQXNCO0FBQ3RCLE1BQU0sc0JBQXNCLEdBQUc7SUFDN0IsWUFBWSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdkIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDckIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtDQUNsQixDQUFDO0FBRUYsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLE9BQXdCLENBQUM7SUFDN0IsSUFBSSxVQUE4QixDQUFDO0lBRW5DLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLE1BQU0sR0FBa0IsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDM0QsU0FBUyxFQUFFO2dCQUNULGtDQUFlO2dCQUNmO29CQUNFLE9BQU8sRUFBRSx3Q0FBa0I7b0JBQzNCLFFBQVEsRUFBRSxzQkFBc0I7aUJBQ2pDO2FBQ0Y7U0FDRixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7UUFFYixPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBa0Isa0NBQWUsQ0FBQyxDQUFDO1FBQ3ZELFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFxQix3Q0FBa0IsQ0FBQyxDQUFDO1FBRWhFLDRDQUE0QztRQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFF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YW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNvbmZpZ3VyYWNhb1xcdGVzdHNcXHRlbXBsYXRlLnNlcnZpY2Uuc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IFRlbXBsYXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3RlbXBsYXRlLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGVtcGxhdGVSZXBvc2l0b3J5IH0gZnJvbSAnLi4vcmVwb3NpdG9yaWVzL3RlbXBsYXRlLnJlcG9zaXRvcnknO1xuaW1wb3J0IHsgVGVtcGxhdGVDcmVhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLWNyZWF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVVcGRhdGVEdG8gfSBmcm9tICcuLi9kdG9zL3RlbXBsYXRlL3RlbXBsYXRlLXVwZGF0ZS5kdG8nO1xuaW1wb3J0IHsgVGVtcGxhdGVUZXN0RHRvIH0gZnJvbSAnLi4vZHRvcy90ZW1wbGF0ZS90ZW1wbGF0ZS10ZXN0LmR0byc7XG5pbXBvcnQgeyBUZW1wbGF0ZVRpcG9FbnVtIH0gZnJvbSAnLi4vZW51bXMvdGVtcGxhdGUtdGlwby5lbnVtJztcbmltcG9ydCB7IE5vdEZvdW5kRXhjZXB0aW9uLCBCYWRSZXF1ZXN0RXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuXG4vLyBNb2NrIGRvIFJlcG9zaXTDs3Jpb1xuY29uc3QgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeSA9IHtcbiAgZmluZEJ5Q29kaWdvOiBqZXN0LmZuKCksXG4gIGZpbmRBbGw6IGplc3QuZm4oKSxcbiAgZmluZEJ5VGlwbzogamVzdC5mbigpLFxuICBzYXZlOiBqZXN0LmZuKCksXG4gIHJlbW92ZTogamVzdC5mbigpLFxufTtcblxuZGVzY3JpYmUoJ1RlbXBsYXRlU2VydmljZScsICgpID0+IHtcbiAgbGV0IHNlcnZpY2U6IFRlbXBsYXRlU2VydmljZTtcbiAgbGV0IHJlcG9zaXRvcnk6IFRlbXBsYXRlUmVwb3NpdG9yeTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIFRlbXBsYXRlU2VydmljZSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFRlbXBsYXRlUmVwb3NpdG9yeSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja1RlbXBsYXRlUmVwb3NpdG9yeSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8VGVtcGxhdGVTZXJ2aWNlPihUZW1wbGF0ZVNlcnZpY2UpO1xuICAgIHJlcG9zaXRvcnkgPSBtb2R1bGUuZ2V0PFRlbXBsYXRlUmVwb3NpdG9yeT4oVGVtcGxhdGVSZXBvc2l0b3J5KTtcblxuICAgIC8vIExpbXBhciB0b2RvcyBvcyBtb2NrcyBhbnRlcyBkZSBjYWRhIHRlc3RlXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdkZXZlIHNlciBkZWZpbmlkbycsICgpID0+IHtcbiAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocmVwb3NpdG9yeSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1c2NhclBvckNvZGlnbycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZXRvcm5hciB1bSB0ZW1wbGF0ZSBxdWFuZG8gZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlbXBsYXRlTW9jayA9IHtcbiAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgbm9tZTogJ0UtbWFpbCBkZSBCb2FzLXZpbmRhcycsXG4gICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIHBhcmEgZS1tYWlsIGRlIGJvYXMtdmluZGFzJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZU1vY2spO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyUG9yQ29kaWdvKCdlbWFpbC1iZW0tdmluZG8nKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlTW9jayk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdlbWFpbC1iZW0tdmluZG8nKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIG8gdGVtcGxhdGUgbsOjbyBmb3IgZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgc2VydmljZS5idXNjYXJQb3JDb2RpZ28oJ3RlbXBsYXRlLWluZXhpc3RlbnRlJyksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XG5cbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICd0ZW1wbGF0ZS1pbmV4aXN0ZW50ZScsXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYnVzY2FyVG9kb3MnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdG9kb3Mgb3MgdGVtcGxhdGVzIHF1YW5kbyBuw6NvIGZvciBlc3BlY2lmaWNhZG8gdW0gdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRlbXBsYXRlc01vY2sgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgIGNvZGlnbzogJ2VtYWlsLWJlbS12aW5kbycsXG4gICAgICAgICAgbm9tZTogJ0UtbWFpbCBkZSBCb2FzLXZpbmRhcycsXG4gICAgICAgICAgZGVzY3JpY2FvOiAnVGVtcGxhdGUgcGFyYSBlLW1haWwgZGUgYm9hcy12aW5kYXMnLFxuICAgICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5CZW0tdmluZG8sIHt7bm9tZX19ITwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMicsXG4gICAgICAgICAgY29kaWdvOiAnbm90aWZpY2FjYW8tc29saWNpdGFjYW8nLFxuICAgICAgICAgIG5vbWU6ICdOb3RpZmljYcOnw6NvIGRlIFNvbGljaXRhw6fDo28nLFxuICAgICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIHBhcmEgbm90aWZpY2HDp8OjbyBkZSBzb2xpY2l0YcOnw6NvJyxcbiAgICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLk5PVElGSUNBQ0FPLFxuICAgICAgICAgIGNvbnRldWRvOiAnU3VhIHNvbGljaXRhw6fDo28ge3twcm90b2NvbG99fSBmb2kgcmVjZWJpZGEnLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEFsbCcpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyVG9kb3MoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlc01vY2spO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEFsbCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5VGlwbykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIHRlbXBsYXRlcyBmaWx0cmFkb3MgcG9yIHRpcG8gcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRpcG8gPSBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMO1xuICAgICAgY29uc3QgdGVtcGxhdGVzTW9jayA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgICBub21lOiAnRS1tYWlsIGRlIEJvYXMtdmluZGFzJyxcbiAgICAgICAgICBkZXNjcmljYW86ICdUZW1wbGF0ZSBwYXJhIGUtbWFpbCBkZSBib2FzLXZpbmRhcycsXG4gICAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkJlbS12aW5kbywge3tub21lfX0hPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5VGlwbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyVG9kb3ModGlwbyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbCh0ZW1wbGF0ZXNNb2NrKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeVRpcG8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRpcG8pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEFsbCkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1c2NhclBvclRpcG8nLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdGVtcGxhdGVzIGZpbHRyYWRvcyBwb3IgdGlwbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHRpcG8gPSBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMO1xuICAgICAgY29uc3QgdGVtcGxhdGVzTW9jayA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgY29kaWdvOiAnZW1haWwtYmVtLXZpbmRvJyxcbiAgICAgICAgICBub21lOiAnRS1tYWlsIGRlIEJvYXMtdmluZGFzJyxcbiAgICAgICAgICBkZXNjcmljYW86ICdUZW1wbGF0ZSBwYXJhIGUtbWFpbCBkZSBib2FzLXZpbmRhcycsXG4gICAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkJlbS12aW5kbywge3tub21lfX0hPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5VGlwbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlc01vY2spO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYnVzY2FyUG9yVGlwbyh0aXBvKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlc01vY2spO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5VGlwbykudG9IYXZlQmVlbkNhbGxlZFdpdGgodGlwbyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmlhcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBjcmlhciB1bSBub3ZvIHRlbXBsYXRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZUNyZWF0ZUR0byA9IHtcbiAgICAgICAgY29kaWdvOiAnbm92by10ZW1wbGF0ZScsXG4gICAgICAgIG5vbWU6ICdOb3ZvIFRlbXBsYXRlJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gZG8gbm92byB0ZW1wbGF0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOlxuICAgICAgICAgICc8aHRtbD48Ym9keT5Db250ZcO6ZG8gZG8gdGVtcGxhdGU6IHt7dmFyaWF2ZWx9fTwvYm9keT48L2h0bWw+JyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlTW9jayA9IHtcbiAgICAgICAgaWQ6ICczJyxcbiAgICAgICAgLi4uZHRvLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnc2F2ZScpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlTW9jayk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5jcmlhcihkdG8pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwodGVtcGxhdGVNb2NrKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ25vdm8tdGVtcGxhdGUnKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnNhdmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgLi4uZHRvLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gYW8gdGVudGFyIGNyaWFyIHVtIHRlbXBsYXRlIGNvbSBjw7NkaWdvIGrDoSBleGlzdGVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlQ3JlYXRlRHRvID0ge1xuICAgICAgICBjb2RpZ286ICd0ZW1wbGF0ZS1leGlzdGVudGUnLFxuICAgICAgICBub21lOiAnVGVtcGxhdGUgRXhpc3RlbnRlJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gZG8gdGVtcGxhdGUnLFxuICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5PkNvbnRlw7pkbzwvYm9keT48L2h0bWw+JyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzQnLFxuICAgICAgICAuLi5kdG8sXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZUV4aXN0ZW50ZSk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY3JpYXIoZHRvKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAndGVtcGxhdGUtZXhpc3RlbnRlJyxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHF1YW5kbyBvIGNvbnRlw7pkbyBkbyB0ZW1wbGF0ZSBmb3IgaW52w6FsaWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZUNyZWF0ZUR0byA9IHtcbiAgICAgICAgY29kaWdvOiAndGVtcGxhdGUtaW52YWxpZG8nLFxuICAgICAgICBub21lOiAnVGVtcGxhdGUgSW52w6FsaWRvJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gZG8gdGVtcGxhdGUnLFxuICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMLFxuICAgICAgICBjb250ZXVkbzogJzxodG1sPjxib2R5Pnt7I2VhY2ggaXRlbXN9fTwvYm9keT48L2h0bWw+JywgLy8gVGVtcGxhdGUgaW52w6FsaWRvICh0YWcgbsOjbyBmZWNoYWRhKVxuICAgICAgfTtcblxuICAgICAgamVzdC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY3JpYXIoZHRvKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZW1wbGF0ZS1pbnZhbGlkbycpO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuc2F2ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2F0dWFsaXphcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBhdHVhbGl6YXIgdW0gdGVtcGxhdGUgZXhpc3RlbnRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWV4aXN0ZW50ZSc7XG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlVXBkYXRlRHRvID0ge1xuICAgICAgICBub21lOiAnTm9tZSBBdHVhbGl6YWRvJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnRGVzY3Jpw6fDo28gYXR1YWxpemFkYScsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvIGF0dWFsaXphZG86IHt7dmFyaWF2ZWx9fTwvYm9keT48L2h0bWw+JyxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzUnLFxuICAgICAgICBjb2RpZ28sXG4gICAgICAgIG5vbWU6ICdOb21lIEFudGlnbycsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGFudGlnYScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvIGFudGlnbzwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUF0dWFsaXphZG8gPSB7XG4gICAgICAgIC4uLnRlbXBsYXRlRXhpc3RlbnRlLFxuICAgICAgICAuLi5kdG8sXG4gICAgICB9O1xuXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlRXhpc3RlbnRlKTtcbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ3NhdmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZUF0dWFsaXphZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuYXR1YWxpemFyKGNvZGlnbywgZHRvKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKHRlbXBsYXRlQXR1YWxpemFkbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIC4uLnRlbXBsYXRlRXhpc3RlbnRlLFxuICAgICAgICAgIC4uLmR0byxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBOb3RGb3VuZEV4Y2VwdGlvbiBhbyB0ZW50YXIgYXR1YWxpemFyIHVtIHRlbXBsYXRlIGluZXhpc3RlbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWluZXhpc3RlbnRlJztcbiAgICAgIGNvbnN0IGR0bzogVGVtcGxhdGVVcGRhdGVEdG8gPSB7XG4gICAgICAgIG5vbWU6ICdOb21lIEF0dWFsaXphZG8nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBhdHVhbGl6YWRhJyxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5Db250ZcO6ZG8gYXR1YWxpemFkbzwvYm9keT48L2h0bWw+JyxcbiAgICAgIH07XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmF0dWFsaXphcihjb2RpZ28sIGR0bykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHF1YW5kbyBvIGNvbnRlw7pkbyBhdHVhbGl6YWRvIGZvciBpbnbDoWxpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb2RpZ28gPSAndGVtcGxhdGUtZXhpc3RlbnRlJztcbiAgICAgIGNvbnN0IGR0bzogVGVtcGxhdGVVcGRhdGVEdG8gPSB7XG4gICAgICAgIG5vbWU6ICdOb21lIEF0dWFsaXphZG8nLFxuICAgICAgICBkZXNjcmljYW86ICdEZXNjcmnDp8OjbyBhdHVhbGl6YWRhJyxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT57eyNpZiBpbnZhbGlkb308L2JvZHk+PC9odG1sPicsIC8vIFRlbXBsYXRlIGludsOhbGlkbyAodGFnIG7Do28gZmVjaGFkYSlcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlRXhpc3RlbnRlID0ge1xuICAgICAgICBpZDogJzYnLFxuICAgICAgICBjb2RpZ28sXG4gICAgICAgIG5vbWU6ICdOb21lIEFudGlnbycsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGFudGlnYScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvIGFudGlnbzwvYm9keT48L2h0bWw+JyxcbiAgICAgICAgYXRpdm86IHRydWUsXG4gICAgICB9O1xuXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihyZXBvc2l0b3J5LCAnZmluZEJ5Q29kaWdvJylcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlRXhpc3RlbnRlKTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5hdHVhbGl6YXIoY29kaWdvLCBkdG8pKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVtb3ZlcicsICgpID0+IHtcbiAgICBpdCgnZGV2ZSByZW1vdmVyIHVtIHRlbXBsYXRlIGV4aXN0ZW50ZSBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1leGlzdGVudGUnO1xuICAgICAgY29uc3QgdGVtcGxhdGVFeGlzdGVudGUgPSB7XG4gICAgICAgIGlkOiAnNycsXG4gICAgICAgIGNvZGlnbyxcbiAgICAgICAgbm9tZTogJ1RlbXBsYXRlIEV4aXN0ZW50ZScsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGRvIHRlbXBsYXRlJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5Db250ZcO6ZG88L2JvZHk+PC9odG1sPicsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgfTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZUV4aXN0ZW50ZSk7XG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdyZW1vdmUnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHNlcnZpY2UucmVtb3Zlcihjb2RpZ28pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LnJlbW92ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodGVtcGxhdGVFeGlzdGVudGUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBOb3RGb3VuZEV4Y2VwdGlvbiBhbyB0ZW50YXIgcmVtb3ZlciB1bSB0ZW1wbGF0ZSBpbmV4aXN0ZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1pbmV4aXN0ZW50ZSc7XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbW92ZXIoY29kaWdvKSkucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXhjZXB0aW9uKTtcblxuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5Q29kaWdvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb2RpZ28pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkucmVtb3ZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYWx0ZXJhclN0YXR1cycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBhbHRlcmFyIG8gc3RhdHVzIGRvIHRlbXBsYXRlIHBhcmEgYXRpdm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjb2RpZ28gPSAndGVtcGxhdGUtZXhpc3RlbnRlJztcbiAgICAgIGNvbnN0IGF0aXZvID0gdHJ1ZTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVFeGlzdGVudGUgPSB7XG4gICAgICAgIGlkOiAnOCcsXG4gICAgICAgIGNvZGlnbyxcbiAgICAgICAgbm9tZTogJ1RlbXBsYXRlIEV4aXN0ZW50ZScsXG4gICAgICAgIGRlc2NyaWNhbzogJ0Rlc2NyacOnw6NvIGRvIHRlbXBsYXRlJyxcbiAgICAgICAgdGlwbzogVGVtcGxhdGVUaXBvRW51bS5FTUFJTCxcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5Db250ZcO6ZG88L2JvZHk+PC9odG1sPicsXG4gICAgICAgIGF0aXZvOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlQXR1YWxpemFkbyA9IHtcbiAgICAgICAgLi4udGVtcGxhdGVFeGlzdGVudGUsXG4gICAgICAgIGF0aXZvLFxuICAgICAgfTtcblxuICAgICAgamVzdFxuICAgICAgICAuc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZUV4aXN0ZW50ZSk7XG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdzYXZlJykubW9ja1Jlc29sdmVkVmFsdWUodGVtcGxhdGVBdHVhbGl6YWRvKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLmFsdGVyYXJTdGF0dXMoY29kaWdvLCBhdGl2byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbCh0ZW1wbGF0ZUF0dWFsaXphZG8pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuZmluZEJ5Q29kaWdvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjb2RpZ28pO1xuICAgICAgZXhwZWN0KHJlcG9zaXRvcnkuc2F2ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAuLi50ZW1wbGF0ZUV4aXN0ZW50ZSxcbiAgICAgICAgICBhdGl2byxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBOb3RGb3VuZEV4Y2VwdGlvbiBhbyB0ZW50YXIgYWx0ZXJhciBvIHN0YXR1cyBkZSB1bSB0ZW1wbGF0ZSBpbmV4aXN0ZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGNvZGlnbyA9ICd0ZW1wbGF0ZS1pbmV4aXN0ZW50ZSc7XG4gICAgICBjb25zdCBhdGl2byA9IHRydWU7XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmFsdGVyYXJTdGF0dXMoY29kaWdvLCBhdGl2bykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5zYXZlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndGVzdGFyJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJlbmRlcml6YXIgdW0gdGVtcGxhdGUgY29tIHN1Y2Vzc28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlVGVzdER0byA9IHtcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT5PbMOhLCB7e25vbWV9fSE8L2JvZHk+PC9odG1sPicsXG4gICAgICAgIGRhZG9zOiB7IG5vbWU6ICdKb8OjbycgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbnRldWRvRXNwZXJhZG8gPSAnPGh0bWw+PGJvZHk+T2zDoSwgSm/Do28hPC9ib2R5PjwvaHRtbD4nO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UudGVzdGFyKGR0byk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbCh7IGNvbnRldWRvOiBjb250ZXVkb0VzcGVyYWRvIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHF1YW5kbyBvIHRlbXBsYXRlIGZvciBpbnbDoWxpZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkdG86IFRlbXBsYXRlVGVzdER0byA9IHtcbiAgICAgICAgY29udGV1ZG86ICc8aHRtbD48Ym9keT57eyNlYWNoIGl0ZW1zfX08L2JvZHk+PC9odG1sPicsIC8vIFRlbXBsYXRlIGludsOhbGlkbyAodGFnIG7Do28gZmVjaGFkYSlcbiAgICAgICAgZGFkb3M6IHsgaXRlbXM6IFsnaXRlbTEnLCAnaXRlbTInXSB9LFxuICAgICAgfTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS50ZXN0YXIoZHRvKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVuZGVyaXphciB1bSB0ZW1wbGF0ZSBjb20gZGFkb3MgY29tcGxleG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZHRvOiBUZW1wbGF0ZVRlc3REdG8gPSB7XG4gICAgICAgIGNvbnRldWRvOiBgXG4gICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICA8Ym9keT5cbiAgICAgICAgICAgICAgPGgxPkxpc3RhIGRlIEl0ZW5zPC9oMT5cbiAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgIHt7I2VhY2ggaXRlbXN9fVxuICAgICAgICAgICAgICAgICAgPGxpPnt7bm9tZX19IC0gUiQge3twcmVjb319PC9saT5cbiAgICAgICAgICAgICAgICB7ey9lYWNofX1cbiAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgPHA+VG90YWw6IFIkIHt7dG90YWx9fTwvcD5cbiAgICAgICAgICAgIDwvYm9keT5cbiAgICAgICAgICA8L2h0bWw+XG4gICAgICAgIGAsXG4gICAgICAgIGRhZG9zOiB7XG4gICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgIHsgbm9tZTogJ0l0ZW0gMScsIHByZWNvOiAxMC41IH0sXG4gICAgICAgICAgICB7IG5vbWU6ICdJdGVtIDInLCBwcmVjbzogMjAuNzUgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHRvdGFsOiAzMS4yNSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS50ZXN0YXIoZHRvKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0hhdmVQcm9wZXJ0eSgnY29udGV1ZG8nKTtcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8uY29udGV1ZG8pLnRvQ29udGFpbignPGxpPkl0ZW0gMSAtIFIkIDEwLjU8L2xpPicpO1xuICAgICAgZXhwZWN0KHJlc3VsdGFkby5jb250ZXVkbykudG9Db250YWluKCc8bGk+SXRlbSAyIC0gUiQgMjAuNzU8L2xpPicpO1xuICAgICAgZXhwZWN0KHJlc3VsdGFkby5jb250ZXVkbykudG9Db250YWluKCc8cD5Ub3RhbDogUiQgMzEuMjU8L3A+Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdyZW5kZXJpemFyJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIHJlbmRlcml6YXIgdW0gdGVtcGxhdGUgZXhpc3RlbnRlIGNvbSBzdWNlc3NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ2VtYWlsLWJlbS12aW5kbyc7XG4gICAgICBjb25zdCBkYWRvcyA9IHsgbm9tZTogJ0pvw6NvJywgbGluazogJ2h0dHBzOi8vZXhlbXBsby5jb20nIH07XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlTW9jayA9IHtcbiAgICAgICAgaWQ6ICc5JyxcbiAgICAgICAgY29kaWdvLFxuICAgICAgICBub21lOiAnRS1tYWlsIGRlIEJvYXMtdmluZGFzJyxcbiAgICAgICAgZGVzY3JpY2FvOiAnVGVtcGxhdGUgcGFyYSBlLW1haWwgZGUgYm9hcy12aW5kYXMnLFxuICAgICAgICB0aXBvOiBUZW1wbGF0ZVRpcG9FbnVtLkVNQUlMLFxuICAgICAgICBjb250ZXVkbzpcbiAgICAgICAgICAnPGh0bWw+PGJvZHk+QmVtLXZpbmRvLCB7e25vbWV9fSEgPGEgaHJlZj1cInt7bGlua319XCI+QWNlc3NlIGFxdWk8L2E+PC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNvbnRldWRvRXNwZXJhZG8gPVxuICAgICAgICAnPGh0bWw+PGJvZHk+QmVtLXZpbmRvLCBKb8OjbyEgPGEgaHJlZj1cImh0dHBzOi8vZXhlbXBsby5jb21cIj5BY2Vzc2UgYXF1aTwvYT48L2JvZHk+PC9odG1sPic7XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKHRlbXBsYXRlTW9jayk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5yZW5kZXJpemFyKGNvZGlnbywgZGFkb3MpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvQmUoY29udGV1ZG9Fc3BlcmFkbyk7XG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIE5vdEZvdW5kRXhjZXB0aW9uIGFvIHRlbnRhciByZW5kZXJpemFyIHVtIHRlbXBsYXRlIGluZXhpc3RlbnRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWluZXhpc3RlbnRlJztcbiAgICAgIGNvbnN0IGRhZG9zID0geyBub21lOiAnSm/Do28nIH07XG5cbiAgICAgIGplc3Quc3B5T24ocmVwb3NpdG9yeSwgJ2ZpbmRCeUNvZGlnbycpLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbmRlcml6YXIoY29kaWdvLCBkYWRvcykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVwb3NpdG9yeS5maW5kQnlDb2RpZ28pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGNvZGlnbyk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcXVhbmRvIG8gdGVtcGxhdGUgbsOjbyBlc3RpdmVyIGF0aXZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgY29kaWdvID0gJ3RlbXBsYXRlLWluYXRpdm8nO1xuICAgICAgY29uc3QgZGFkb3MgPSB7IG5vbWU6ICdKb8OjbycgfTtcblxuICAgICAgY29uc3QgdGVtcGxhdGVNb2NrID0ge1xuICAgICAgICBpZDogJzEwJyxcbiAgICAgICAgY29kaWdvLFxuICAgICAgICBub21lOiAnVGVtcGxhdGUgSW5hdGl2bycsXG4gICAgICAgIGRlc2NyaWNhbzogJ1RlbXBsYXRlIGluYXRpdm8gcGFyYSB0ZXN0ZScsXG4gICAgICAgIHRpcG86IFRlbXBsYXRlVGlwb0VudW0uRU1BSUwsXG4gICAgICAgIGNvbnRldWRvOiAnPGh0bWw+PGJvZHk+Q29udGXDumRvPC9ib2R5PjwvaHRtbD4nLFxuICAgICAgICBhdGl2bzogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICBqZXN0LnNweU9uKHJlcG9zaXRvcnksICdmaW5kQnlDb2RpZ28nKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0ZW1wbGF0ZU1vY2spO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlbmRlcml6YXIoY29kaWdvLCBkYWRvcykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmZpbmRCeUNvZGlnbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoY29kaWdvKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==