{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\role.entity.ts","mappings":";;;;;;;;;;;;;AAAA,qCAQiB;AACjB,qDAAoG;AACpG,qDAA2C;AAC3C,sDAA8C;AAE9C;;;;;;GAMG;AAII,IAAM,IAAI,GAAV,MAAM,IAAI;IAEf,EAAE,CAAS;IAOX,IAAI,CAAS;IAMb,SAAS,CAAS;IAUlB,MAAM,CAAS;IAMf,QAAQ,CAAY;IAGpB,UAAU,CAAO;IAGjB,UAAU,CAAO;IAEjB;;;OAGG;IACH,OAAO;QACL,OAAO,IAAI,CAAC,MAAM,KAAK,oBAAM,CAAC,KAAK,CAAC;IACtC,CAAC;IAED;;OAEG;IACH,MAAM;QACJ,IAAI,CAAC,MAAM,GAAG,oBAAM,CAAC,KAAK,CAAC;IAC7B,CAAC;IAED;;OAEG;IACH,SAAS;QACP,IAAI,CAAC,MAAM,GAAG,oBAAM,CAAC,OAAO,CAAC;IAC/B,CAAC;CACF,CAAA;AA5DY,oBAAI;AAEf;IADC,IAAA,gCAAsB,EAAC,MAAM,CAAC;;gCACpB;AAOX;IALC,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;IACrC,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,4BAA4B,EAAE,CAAC;IACrD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,0BAA0B,EAAE,CAAC;IACjD,IAAA,2BAAS,EAAC,CAAC,EAAE,EAAE,OAAO,EAAE,sCAAsC,EAAE,CAAC;IACjE,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC;;kCACzD;AAMb;IAJC,IAAA,gBAAM,EAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;IACvC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,+BAA+B,EAAE,CAAC;IACtD,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,6CAA6C,EAAE,CAAC;;uCACzD;AAUlB;IARC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,oBAAM;QACZ,OAAO,EAAE,oBAAM,CAAC,KAAK;QACrB,QAAQ,EAAE,aAAa;KACxB,CAAC;IACD,IAAA,4BAAU,GAAE;IACZ,IAAA,2BAAS,EAAC,EAAE,OAAO,EAAE,mCAAmC,EAAE,CAAC;kDACpD,oBAAM,oBAAN,oBAAM;oCAAC;AAMf;IAJC,IAAA,mBAAS,EAAC,GAAG,EAAE,CAAC,wBAAO,EAAE,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,IAAI,EAAE;QACnD,OAAO,EAAE,KAAK;QACd,IAAI,EAAE,IAAI;KACX,CAAC;;sCACkB;AAGpB;IADC,IAAA,0BAAgB,EAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;kDAC7B,IAAI,oBAAJ,IAAI;wCAAC;AAGjB;IADC,IAAA,0BAAgB,EAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;kDAC7B,IAAI,oBAAJ,IAAI;wCAAC;eArCN,IAAI;IAHhB,IAAA,gBAAM,EAAC,MAAM,CAAC;IACd,IAAA,eAAK,EAAC,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;IACjC,IAAA,eAAK,EAAC,CAAC,QAAQ,CAAC,CAAC;GACL,IAAI,CA4DhB","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\role.entity.ts"],"sourcesContent":["import {\r\n  Entity,\r\n  PrimaryGeneratedColumn,\r\n  Column,\r\n  CreateDateColumn,\r\n  UpdateDateColumn,\r\n  OneToMany,\r\n  Index,\r\n} from 'typeorm';\r\nimport { IsNotEmpty, IsString, MaxLength, MinLength, IsBoolean, IsOptional } from 'class-validator';\r\nimport { Usuario } from './usuario.entity';\r\nimport { Status } from '../enums/status.enum';\r\n\r\n/**\r\n * Entidade de Role (Papel)\r\n *\r\n * Representa um papel/função que um usuário pode ter no sistema,\r\n * substituindo o antigo enum Role. Esta entidade permite relacionamentos\r\n * com permissões e outros recursos do sistema.\r\n */\r\n@Entity('role')\r\n@Index(['nome'], { unique: true })\r\n@Index(['status'])\r\nexport class Role {\r\n  @PrimaryGeneratedColumn('uuid')\r\n  id: string;\r\n\r\n  @Column({ unique: true, length: 100 })\r\n  @IsNotEmpty({ message: 'Nome da role é obrigatório' })\r\n  @IsString({ message: 'Nome deve ser uma string' })\r\n  @MinLength(2, { message: 'Nome deve ter no mínimo 2 caracteres' })\r\n  @MaxLength(100, { message: 'Nome deve ter no máximo 100 caracteres' })\r\n  nome: string;\r\n\r\n  @Column({ nullable: true, length: 500 })\r\n  @IsOptional()\r\n  @IsString({ message: 'Descrição deve ser uma string' })\r\n  @MaxLength(500, { message: 'Descrição deve ter no máximo 500 caracteres' })\r\n  descricao: string;\r\n\r\n  @Column({\r\n    type: 'enum',\r\n    enum: Status,\r\n    default: Status.ATIVO,\r\n    enumName: 'status_role'\r\n  })\r\n  @IsOptional()\r\n  @IsBoolean({ message: 'Status deve ser um valor booleano' })\r\n  status: Status;\r\n\r\n  @OneToMany(() => Usuario, (usuario) => usuario.role, {\r\n    cascade: false,\r\n    lazy: true\r\n  })\r\n  usuarios: Usuario[];\r\n\r\n  @CreateDateColumn({ name: 'created_at' })\r\n  created_at: Date;\r\n\r\n  @UpdateDateColumn({ name: 'updated_at' })\r\n  updated_at: Date;\r\n\r\n  /**\r\n   * Verifica se a role está ativa\r\n   * @returns true se a role estiver ativa\r\n   */\r\n  isAtiva(): boolean {\r\n    return this.status === Status.ATIVO;\r\n  }\r\n\r\n  /**\r\n   * Ativa a role\r\n   */\r\n  ativar(): void {\r\n    this.status = Status.ATIVO;\r\n  }\r\n\r\n  /**\r\n   * Desativa a role\r\n   */\r\n  desativar(): void {\r\n    this.status = Status.INATIVO;\r\n  }\r\n}\r\n"],"version":3}