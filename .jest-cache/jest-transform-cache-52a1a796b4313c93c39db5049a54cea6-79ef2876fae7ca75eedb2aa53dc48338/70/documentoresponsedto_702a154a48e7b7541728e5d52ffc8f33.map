{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\documento\\dto\\documento-response.dto.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\documento\\dto\\documento-response.dto.ts"],"sourcesContent":["import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';\nimport { Exclude, Expose, Transform, Type } from 'class-transformer';\nimport { TipoDocumentoEnum } from '@/enums';\n\n/**\n * DTO para resposta de usuário sem informações sensíveis\n *\n * Exclui dados sensíveis como senha hash, tentativas de login, etc.\n */\nexport class UsuarioSafeResponseDto {\n  @ApiProperty({\n    description: 'ID único do usuário',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  id: string;\n\n  @ApiProperty({\n    description: 'Nome completo do usuário',\n    example: 'João Silva',\n  })\n  @Expose()\n  nome: string;\n\n  @ApiProperty({\n    description: 'Email do usuário',\n    example: 'joao.silva@natal.pgben.gov.br',\n  })\n  @Expose()\n  email: string;\n\n  @ApiPropertyOptional({\n    description: 'CPF do usuário',\n    example: '12345678901',\n  })\n  @Expose()\n  cpf?: string;\n\n  @ApiPropertyOptional({\n    description: 'Telefone do usuário',\n    example: '(84) 99999-9999',\n  })\n  @Expose()\n  telefone?: string;\n\n  @ApiPropertyOptional({\n    description: 'Matrícula do usuário',\n    example: '123456',\n  })\n  @Expose()\n  matricula?: string;\n\n  @ApiProperty({\n    description: 'Status do usuário',\n    example: 'ativo',\n  })\n  @Expose()\n  status: string;\n\n  @ApiProperty({\n    description: 'Data de criação',\n    example: '2025-01-01T00:00:00.000Z',\n  })\n  @Expose()\n  created_at: Date;\n\n  @ApiProperty({\n    description: 'Data de última atualização',\n    example: '2025-01-01T00:00:00.000Z',\n  })\n  @Expose()\n  updated_at: Date;\n\n  // Excluir campos sensíveis\n  @Exclude()\n  senha_hash: string;\n\n  @Exclude()\n  tentativas_login: number;\n\n  @Exclude()\n  role_id: string;\n\n  @Exclude()\n  unidade_id: string;\n\n  @Exclude()\n  setor_id: string;\n\n  @Exclude()\n  primeiro_acesso: boolean;\n\n  @Exclude()\n  ultimo_login: Date;\n\n  @Exclude()\n  removed_at: Date;\n}\n\n/**\n * DTO para resposta de documento\n *\n * Inclui informações do documento e dados seguros do usuário que fez upload\n */\nexport class DocumentoResponseDto {\n  @ApiProperty({\n    description: 'ID único do documento',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  id: string;\n\n  @ApiPropertyOptional({\n    description: 'ID da solicitação vinculada',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  solicitacao_id?: string;\n\n  @ApiProperty({\n    description: 'ID do cidadão proprietário',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  cidadao_id: string;\n\n  @ApiProperty({\n    description: 'Tipo do documento',\n    enum: TipoDocumentoEnum,\n    example: 'COMPROVANTE_RESIDENCIA',\n  })\n  @Expose()\n  tipo: TipoDocumentoEnum;\n\n  @ApiProperty({\n    description: 'Nome do arquivo gerado pelo sistema',\n    example: 'documento_123456.pdf',\n  })\n  @Expose()\n  nome_arquivo: string;\n\n  @ApiProperty({\n    description: 'Nome original do arquivo enviado',\n    example: 'comprovante_residencia.pdf',\n  })\n  @Expose()\n  nome_original: string;\n\n  @ApiProperty({\n    description: 'Caminho do arquivo no sistema de armazenamento',\n    example: 'documentos/2025/01/documento_123456.pdf',\n  })\n  @Expose()\n  caminho: string;\n\n  @ApiPropertyOptional({\n    description: 'Caminho da thumbnail (se disponível)',\n    example: 'thumbnails/documento_123456_thumb.jpg',\n  })\n  @Expose()\n  thumbnail?: string;\n\n  @ApiPropertyOptional({\n    description: 'Descrição do documento',\n    example: 'Comprovante de residência atualizado',\n  })\n  @Expose()\n  descricao?: string;\n\n  @ApiProperty({\n    description: 'Tamanho do arquivo em bytes',\n    example: 1024000,\n  })\n  @Expose()\n  tamanho: number;\n\n  @ApiProperty({\n    description: 'Tipo MIME do arquivo',\n    example: 'application/pdf',\n  })\n  @Expose()\n  mimetype: string;\n\n  @ApiProperty({\n    description: 'Data e hora do upload',\n    example: '2025-01-01T10:30:00.000Z',\n  })\n  @Expose()\n  data_upload: Date;\n\n  @ApiProperty({\n    description: 'ID do usuário que fez o upload',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  usuario_upload_id: string;\n\n  @ApiProperty({\n    description: 'Dados seguros do usuário que fez o upload',\n    type: UsuarioSafeResponseDto,\n  })\n  @Expose()\n  @Type(() => UsuarioSafeResponseDto)\n  @Transform(({ value }) => {\n    if (!value) return null;\n    // Aplicar transformação para excluir campos sensíveis\n    const safeUser = new UsuarioSafeResponseDto();\n    Object.assign(safeUser, value);\n    return safeUser;\n  })\n  usuario_upload?: UsuarioSafeResponseDto;\n\n  @ApiProperty({\n    description: 'Indica se o documento foi verificado',\n    example: false,\n  })\n  @Expose()\n  verificado: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Data de verificação do documento',\n    example: '2025-01-01T15:00:00.000Z',\n  })\n  @Expose()\n  data_verificacao?: Date;\n\n  @ApiPropertyOptional({\n    description: 'ID do usuário que verificou o documento',\n    example: '3fa85f64-5717-4562-b3fc-2c963f66afa6',\n  })\n  @Expose()\n  usuario_verificacao_id?: string;\n\n  @ApiPropertyOptional({\n    description: 'Observações da verificação',\n    example: 'Documento aprovado conforme critérios estabelecidos',\n  })\n  @Expose()\n  observacoes_verificacao?: string;\n\n  @ApiProperty({\n    description: 'Indica se o documento pode ser reutilizado',\n    example: false,\n  })\n  @Expose()\n  reutilizavel: boolean;\n\n  @ApiPropertyOptional({\n    description: 'Hash do arquivo para verificação de integridade',\n    example: 'sha256:abc123...',\n  })\n  @Expose()\n  hash_arquivo?: string;\n\n  @ApiPropertyOptional({\n    description: 'Data de validade do documento',\n    example: '2025-12-31',\n  })\n  @Expose()\n  data_validade?: Date;\n\n  @ApiPropertyOptional({\n    description: 'Metadados adicionais do documento',\n    example: {\n      upload_info: {\n        ip: '192.168.1.1',\n        user_agent: 'Mozilla/5.0...',\n        timestamp: '2025-01-01T10:30:00.000Z',\n      },\n    },\n  })\n  @Expose()\n  metadados?: any;\n\n  @ApiProperty({\n    description: 'Data de criação do registro',\n    example: '2025-01-01T10:30:00.000Z',\n  })\n  @Expose()\n  created_at: Date;\n\n  @ApiProperty({\n    description: 'Data de última atualização',\n    example: '2025-01-01T10:30:00.000Z',\n  })\n  @Expose()\n  updated_at: Date;\n\n  @ApiPropertyOptional({\n    description: 'Data de remoção (soft delete)',\n    example: null,\n  })\n  @Expose()\n  removed_at?: Date;\n}\n"],"version":3}