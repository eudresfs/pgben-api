3fc595b519ed637b754737f6cf5e3000
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q;
Object.defineProperty(exports, "__esModule", { value: true });
exports.MetricasDefinicaoController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const express_1 = require("express");
const metricas_definicao_service_1 = require("../services/metricas-definicao.service");
const metricas_coleta_service_1 = require("../services/metricas-coleta.service");
const metricas_cache_service_1 = require("../services/metricas-cache.service");
const metrica_definicao_dto_1 = require("../dto/metrica-definicao.dto");
const metrica_configuracao_dto_1 = require("../dto/metrica-configuracao.dto");
const metrica_snapshot_dto_1 = require("../dto/metrica-snapshot.dto");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const roles_guard_1 = require("../../../auth/guards/roles.guard");
const role_decorator_1 = require("../../../auth/decorators/role.decorator");
const roles_constants_1 = require("../../../shared/constants/roles.constants");
/**
 * Controlador para gerenciamento de métricas
 */
let MetricasDefinicaoController = class MetricasDefinicaoController {
    metricasService;
    coletaService;
    cacheService;
    constructor(metricasService, coletaService, cacheService) {
        this.metricasService = metricasService;
        this.coletaService = coletaService;
        this.cacheService = cacheService;
    }
    /**
     * Cria uma nova definição de métrica
     */
    async criarMetrica(dto, req) {
        // Obter usuário atual da requisição
        const usuarioId = req.user?.['sub'] || 'sistema';
        const usuarioNome = req.user?.['nome'] || 'Sistema';
        return this.metricasService.criarMetrica(dto, usuarioId, usuarioNome);
    }
    /**
     * Atualiza uma definição de métrica existente
     */
    async atualizarMetrica(id, dto, req) {
        // Obter usuário atual da requisição
        const usuarioId = req.user?.['sub'] || 'sistema';
        const usuarioNome = req.user?.['nome'] || 'Sistema';
        return this.metricasService.atualizarMetrica(id, dto, usuarioId, usuarioNome);
    }
    /**
     * Busca uma métrica pelo ID
     */
    async buscarMetricaPorId(id) {
        const metrica = await this.metricasService.buscarMetricaPorId(id);
        if (!metrica) {
            throw new common_1.HttpException('Métrica não encontrada', common_1.HttpStatus.NOT_FOUND);
        }
        return metrica;
    }
    /**
     * Busca uma métrica pelo código
     */
    async buscarMetricaPorCodigo(codigo) {
        const metrica = await this.metricasService.buscarMetricaPorCodigo(codigo);
        if (!metrica) {
            throw new common_1.HttpException('Métrica não encontrada', common_1.HttpStatus.NOT_FOUND);
        }
        return metrica;
    }
    /**
     * Lista métricas com filtros e paginação
     */
    async listarMetricas(filtros) {
        return this.metricasService.listarMetricas(filtros);
    }
    /**
     * Remove uma métrica (exclusão lógica)
     */
    async removerMetrica(id) {
        await this.metricasService.removerMetrica(id);
    }
    /**
     * Cria configuração para uma métrica
     */
    async criarConfiguracao(dto, req) {
        // Obter usuário atual da requisição
        const usuarioId = req.user?.['sub'] || 'sistema';
        const usuarioNome = req.user?.['nome'] || 'Sistema';
        return this.metricasService.criarConfiguracao(dto, usuarioId, usuarioNome);
    }
    /**
     * Atualiza configuração de uma métrica
     */
    async atualizarConfiguracao(id, dto, req) {
        // Obter usuário atual da requisição
        const usuarioId = req.user?.['sub'] || 'sistema';
        const usuarioNome = req.user?.['nome'] || 'Sistema';
        return this.metricasService.atualizarConfiguracao(id, dto, usuarioId, usuarioNome);
    }
    /**
     * Busca configuração de uma métrica
     */
    async buscarConfiguracaoPorMetrica(metricaId) {
        const configuracao = await this.metricasService.buscarConfiguracaoPorMetrica(metricaId);
        if (!configuracao) {
            throw new common_1.HttpException('Configuração não encontrada', common_1.HttpStatus.NOT_FOUND);
        }
        return configuracao;
    }
    /**
     * Coleta manualmente uma métrica específica
     */
    async coletarMetrica(dto) {
        return this.coletaService.coletarMetricaManual(dto.codigo, dto.dimensoes);
    }
    /**
     * Consulta o valor atual de uma métrica
     */
    async consultarValorMetrica(dto) {
        const metrica = await this.metricasService.buscarMetricaPorCodigo(dto.codigo);
        if (!metrica) {
            throw new common_1.HttpException('Métrica não encontrada', common_1.HttpStatus.NOT_FOUND);
        }
        // Buscar último snapshot
        const snapshot = await this.cacheService.obterUltimoSnapshot(metrica.id, dto.dimensoes);
        if (!snapshot) {
            throw new common_1.HttpException('Nenhum valor disponível para a métrica', common_1.HttpStatus.NOT_FOUND);
        }
        return {
            metrica: {
                id: metrica.id,
                codigo: metrica.codigo,
                nome: metrica.nome,
                descricao: metrica.descricao,
                unidade: metrica.unidade,
                prefixo: metrica.prefixo,
                sufixo: metrica.sufixo,
            },
            snapshot: {
                id: snapshot.id,
                valor: snapshot.valor,
                valor_formatado: snapshot.valor_formatado,
                periodo_inicio: snapshot.periodo_inicio,
                periodo_fim: snapshot.periodo_fim,
                dimensoes: snapshot.dimensoes,
                data_coleta: snapshot.created_at,
            },
        };
    }
    /**
     * Consulta série temporal de uma métrica
     */
    async consultarSerieTemporalMetrica(dto) {
        const metrica = await this.metricasService.buscarMetricaPorCodigo(dto.codigo);
        if (!metrica) {
            throw new common_1.HttpException('Métrica não encontrada', common_1.HttpStatus.NOT_FOUND);
        }
        // Buscar snapshots para o período
        const snapshots = await this.cacheService.obterSerieTemporal(metrica.id, dto.data_inicial, dto.data_final, dto.dimensoes);
        return {
            metrica: {
                id: metrica.id,
                codigo: metrica.codigo,
                nome: metrica.nome,
                descricao: metrica.descricao,
                unidade: metrica.unidade,
                prefixo: metrica.prefixo,
                sufixo: metrica.sufixo,
            },
            periodo: {
                inicio: dto.data_inicial,
                fim: dto.data_final,
                granularidade: dto.granularidade || metrica.granularidade,
            },
            dimensoes: dto.dimensoes || {},
            pontos: snapshots.map((s) => ({
                valor: s.valor,
                valor_formatado: s.valor_formatado,
                periodo_inicio: s.periodo_inicio,
                periodo_fim: s.periodo_fim,
            })),
        };
    }
    /**
     * Limpa o cache de métricas
     */
    async limparCache() {
        this.cacheService.limparCacheCompleto();
    }
    /**
     * Obtém estatísticas de uso do cache
     */
    async obterEstatisticasCache() {
        return this.cacheService.obterEstatisticas();
    }
};
exports.MetricasDefinicaoController = MetricasDefinicaoController;
__decorate([
    (0, common_1.Post)(),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Criar nova métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.CREATED,
        description: 'Métrica criada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_d = typeof metrica_definicao_dto_1.CriarMetricaDefinicaoDto !== "undefined" && metrica_definicao_dto_1.CriarMetricaDefinicaoDto) === "function" ? _d : Object, typeof (_e = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _e : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "criarMetrica", null);
__decorate([
    (0, common_1.Put)(':id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Atualizar métrica existente' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ID da métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'Métrica atualizada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof metrica_definicao_dto_1.AtualizarMetricaDefinicaoDto !== "undefined" && metrica_definicao_dto_1.AtualizarMetricaDefinicaoDto) === "function" ? _f : Object, typeof (_g = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _g : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "atualizarMetrica", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar métrica por ID' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ID da métrica' }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.OK, description: 'Métrica encontrada' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "buscarMetricaPorId", null);
__decorate([
    (0, common_1.Get)('codigo/:codigo'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar métrica por código' }),
    (0, swagger_1.ApiParam)({ name: 'codigo', description: 'Código da métrica' }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.OK, description: 'Métrica encontrada' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('codigo')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "buscarMetricaPorCodigo", null);
__decorate([
    (0, common_1.Get)(),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR),
    (0, swagger_1.ApiOperation)({ summary: 'Listar métricas com filtros' }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.OK, description: 'Lista de métricas' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Query)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_h = typeof metrica_definicao_dto_1.FiltroMetricasDto !== "undefined" && metrica_definicao_dto_1.FiltroMetricasDto) === "function" ? _h : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "listarMetricas", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN),
    (0, common_1.HttpCode)(common_1.HttpStatus.NO_CONTENT),
    (0, swagger_1.ApiOperation)({ summary: 'Remover métrica' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ID da métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NO_CONTENT,
        description: 'Métrica removida com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "removerMetrica", null);
__decorate([
    (0, common_1.Post)('configuracao'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Criar configuração para métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.CREATED,
        description: 'Configuração criada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_j = typeof metrica_configuracao_dto_1.CriarMetricaConfiguracaoDto !== "undefined" && metrica_configuracao_dto_1.CriarMetricaConfiguracaoDto) === "function" ? _j : Object, typeof (_k = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _k : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "criarConfiguracao", null);
__decorate([
    (0, common_1.Put)('configuracao/:id'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Atualizar configuração de métrica' }),
    (0, swagger_1.ApiParam)({ name: 'id', description: 'ID da configuração' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'Configuração atualizada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Configuração não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __param(2, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_l = typeof metrica_configuracao_dto_1.AtualizarMetricaConfiguracaoDto !== "undefined" && metrica_configuracao_dto_1.AtualizarMetricaConfiguracaoDto) === "function" ? _l : Object, typeof (_m = typeof express_1.Request !== "undefined" && express_1.Request) === "function" ? _m : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "atualizarConfiguracao", null);
__decorate([
    (0, common_1.Get)('configuracao/metrica/:metricaId'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR),
    (0, swagger_1.ApiOperation)({ summary: 'Buscar configuração de uma métrica' }),
    (0, swagger_1.ApiParam)({ name: 'metricaId', description: 'ID da métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'Configuração encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Configuração não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Param)('metricaId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "buscarConfiguracaoPorMetrica", null);
__decorate([
    (0, common_1.Post)('coleta'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Coletar métrica manualmente' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'Métrica coletada com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_o = typeof metrica_snapshot_dto_1.ColetaManualMetricaDto !== "undefined" && metrica_snapshot_dto_1.ColetaManualMetricaDto) === "function" ? _o : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "coletarMetrica", null);
__decorate([
    (0, common_1.Post)('valor'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR, roles_constants_1.ROLES.TECNICO),
    (0, swagger_1.ApiOperation)({ summary: 'Consultar valor atual de uma métrica' }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.OK, description: 'Valor da métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_p = typeof metrica_snapshot_dto_1.ConsultaValorMetricaDto !== "undefined" && metrica_snapshot_dto_1.ConsultaValorMetricaDto) === "function" ? _p : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "consultarValorMetrica", null);
__decorate([
    (0, common_1.Post)('serie-temporal'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR, roles_constants_1.ROLES.COORDENADOR),
    (0, swagger_1.ApiOperation)({ summary: 'Consultar série temporal de uma métrica' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.OK,
        description: 'Série temporal da métrica',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.BAD_REQUEST,
        description: 'Dados inválidos',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NOT_FOUND,
        description: 'Métrica não encontrada',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __param(0, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_q = typeof metrica_snapshot_dto_1.ConsultaSerieTemporalDto !== "undefined" && metrica_snapshot_dto_1.ConsultaSerieTemporalDto) === "function" ? _q : Object]),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "consultarSerieTemporalMetrica", null);
__decorate([
    (0, common_1.Post)('cache/limpar'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN),
    (0, common_1.HttpCode)(common_1.HttpStatus.NO_CONTENT),
    (0, swagger_1.ApiOperation)({ summary: 'Limpar cache de métricas' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.NO_CONTENT,
        description: 'Cache limpo com sucesso',
    }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "limparCache", null);
__decorate([
    (0, common_1.Get)('cache/estatisticas'),
    (0, role_decorator_1.Roles)(roles_constants_1.ROLES.ADMIN, roles_constants_1.ROLES.GESTOR),
    (0, swagger_1.ApiOperation)({ summary: 'Obter estatísticas do cache de métricas' }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.OK, description: 'Estatísticas do cache' }),
    (0, swagger_1.ApiResponse)({
        status: common_1.HttpStatus.UNAUTHORIZED,
        description: 'Não autorizado',
    }),
    (0, swagger_1.ApiResponse)({ status: common_1.HttpStatus.FORBIDDEN, description: 'Acesso negado' }),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", []),
    __metadata("design:returntype", Promise)
], MetricasDefinicaoController.prototype, "obterEstatisticasCache", null);
exports.MetricasDefinicaoController = MetricasDefinicaoController = __decorate([
    (0, swagger_1.ApiTags)('Métricas e Dashboard'),
    (0, common_1.Controller)('metricas'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, roles_guard_1.RolesGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof metricas_definicao_service_1.MetricasService !== "undefined" && metricas_definicao_service_1.MetricasService) === "function" ? _a : Object, typeof (_b = typeof metricas_coleta_service_1.MetricasColetaService !== "undefined" && metricas_coleta_service_1.MetricasColetaService) === "function" ? _b : Object, typeof (_c = typeof metricas_cache_service_1.MetricasCacheService !== "undefined" && metricas_cache_service_1.MetricasCacheService) === "function" ? _c : Object])
], MetricasDefinicaoController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXG1ldHJpY2FzXFxjb250cm9sbGVyc1xcbWV0cmljYXMtZGVmaW5pY2FvLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQWN3QjtBQUN4Qiw2Q0FPeUI7QUFDekIscUNBQWtDO0FBRWxDLHVGQUFxRztBQUNyRyxpRkFBNEU7QUFDNUUsK0VBQTBFO0FBQzFFLHdFQUlzQztBQUN0Qyw4RUFHeUM7QUFDekMsc0VBSXFDO0FBQ3JDLHdFQUFtRTtBQUNuRSxrRUFBOEQ7QUFDOUQsNEVBQWdFO0FBQ2hFLCtFQUFrRTtBQUVsRTs7R0FFRztBQUtJLElBQU0sMkJBQTJCLEdBQWpDLE1BQU0sMkJBQTJCO0lBRW5CO0lBQ0E7SUFDQTtJQUhuQixZQUNtQixlQUF5QyxFQUN6QyxhQUFvQyxFQUNwQyxZQUFrQztRQUZsQyxvQkFBZSxHQUFmLGVBQWUsQ0FBMEI7UUFDekMsa0JBQWEsR0FBYixhQUFhLENBQXVCO1FBQ3BDLGlCQUFZLEdBQVosWUFBWSxDQUFzQjtJQUNsRCxDQUFDO0lBRUo7O09BRUc7SUFpQkcsQUFBTixLQUFLLENBQUMsWUFBWSxDQUNSLEdBQTZCLEVBQzlCLEdBQVk7UUFFbkIsb0NBQW9DO1FBQ3BDLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsSUFBSSxTQUFTLENBQUM7UUFDakQsTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLFNBQVMsQ0FBQztRQUVwRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDeEUsQ0FBQztJQUVEOztPQUVHO0lBc0JHLEFBQU4sS0FBSyxDQUFDLGdCQUFnQixDQUNQLEVBQVUsRUFDZixH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bUJBQVUsQ0FBQyxTQUFTLEVBQUUsV0FBVyxFQUFFLGVBQWUsRUFBRSxDQUFDOzs7OzhEQUczRTtBQWNLO0lBVEwsSUFBQSxZQUFHLEVBQUMsb0JBQW9CLENBQUM7SUFDekIsSUFBQSxzQkFBSyxFQUFDLHVCQUFLLENBQUMsS0FBSyxFQUFFLHVCQUFLLENBQUMsTUFBTSxDQUFDO0lBQ2hDLElBQUEsc0JBQVksRUFBQyxFQUFFLE9BQU8sRUFBRSx5Q0FBeUMsRUFBRSxDQUFDO0lBQ3BFLElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxtQkFBVSxDQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUsdUJBQXVCLEVBQUUsQ0FBQztJQUM1RSxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsbUJBQVUsQ0FBQyxZQUFZO1FBQy9CLFdBQVcsRUFBRSxnQkFBZ0I7S0FDOUIsQ0FBQztJQUNELElBQUEscUJBQVcsRUFBQyxFQUFFLE1BQU0sRUFBRSxtQkFBVSxDQUFDLFNBQVMsRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLENBQUM7Ozs7eUVBRzNFO3NDQXBkVSwyQkFBMkI7SUFKdkMsSUFBQSxpQkFBTyxFQUFDLHNCQUFzQixDQUFDO0lBQy9CLElBQUEsbUJBQVUsRUFBQyxVQUFVLENBQUM7SUFDdEIsSUFBQSxrQkFBUyxFQUFDLDZCQUFZLEVBQUUsd0JBQVUsQ0FBQztJQUNuQyxJQUFBLHVCQUFhLEdBQUU7eURBR3NCLDRDQUF3QixvQkFBeEIsNENBQXdCLG9EQUMxQiwrQ0FBcUIsb0JBQXJCLCtDQUFxQixvREFDdEIsNkNBQW9CLG9CQUFwQiw2Q0FBb0I7R0FKMUMsMkJBQTJCLENBcWR2QyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcbWV0cmljYXNcXGNvbnRyb2xsZXJzXFxtZXRyaWNhcy1kZWZpbmljYW8uY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250cm9sbGVyLFxuICBHZXQsXG4gIFBvc3QsXG4gIFB1dCxcbiAgRGVsZXRlLFxuICBCb2R5LFxuICBQYXJhbSxcbiAgUXVlcnksXG4gIFVzZUd1YXJkcyxcbiAgSHR0cFN0YXR1cyxcbiAgSHR0cENvZGUsXG4gIFJlcSxcbiAgSHR0cEV4Y2VwdGlvbixcbn0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHtcbiAgQXBpVGFncyxcbiAgQXBpT3BlcmF0aW9uLFxuICBBcGlSZXNwb25zZSxcbiAgQXBpUGFyYW0sXG4gIEFwaVF1ZXJ5LFxuICBBcGlCZWFyZXJBdXRoLFxufSBmcm9tICdAbmVzdGpzL3N3YWdnZXInO1xuaW1wb3J0IHsgUmVxdWVzdCB9IGZyb20gJ2V4cHJlc3MnO1xuXG5pbXBvcnQgeyBNZXRyaWNhc1NlcnZpY2UgYXMgTWV0cmljYXNEZWZpbmljYW9TZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbWV0cmljYXMtZGVmaW5pY2FvLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWV0cmljYXNDb2xldGFTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbWV0cmljYXMtY29sZXRhLnNlcnZpY2UnO1xuaW1wb3J0IHsgTWV0cmljYXNDYWNoZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9tZXRyaWNhcy1jYWNoZS5zZXJ2aWNlJztcbmltcG9ydCB7XG4gIENyaWFyTWV0cmljYURlZmluaWNhb0R0byxcbiAgQXR1YWxpemFyTWV0cmljYURlZmluaWNhb0R0byxcbiAgRmlsdHJvTWV0cmljYXNEdG8sXG59IGZyb20gJy4uL2R0by9tZXRyaWNhLWRlZmluaWNhby5kdG8nO1xuaW1wb3J0IHtcbiAgQ3JpYXJNZXRyaWNhQ29uZmlndXJhY2FvRHRvLFxuICBBdHVhbGl6YXJNZXRyaWNhQ29uZmlndXJhY2FvRHRvLFxufSBmcm9tICcuLi9kdG8vbWV0cmljYS1jb25maWd1cmFjYW8uZHRvJztcbmltcG9ydCB7XG4gIENvbGV0YU1hbnVhbE1ldHJpY2FEdG8sXG4gIENvbnN1bHRhVmFsb3JNZXRyaWNhRHRvLFxuICBDb25zdWx0YVNlcmllVGVtcG9yYWxEdG8sXG59IGZyb20gJy4uL2R0by9tZXRyaWNhLXNuYXBzaG90LmR0byc7XG5pbXBvcnQgeyBKd3RBdXRoR3VhcmQgfSBmcm9tICcuLi8uLi8uLi9hdXRoL2d1YXJkcy9qd3QtYXV0aC5ndWFyZCc7XG5pbXBvcnQgeyBSb2xlc0d1YXJkIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9ndWFyZHMvcm9sZXMuZ3VhcmQnO1xuaW1wb3J0IHsgUm9sZXMgfSBmcm9tICcuLi8uLi8uLi9hdXRoL2RlY29yYXRvcnMvcm9sZS5kZWNvcmF0b3InO1xuaW1wb3J0IHsgUk9MRVMgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvY29uc3RhbnRzL3JvbGVzLmNvbnN0YW50cyc7XG5cbi8qKlxuICogQ29udHJvbGFkb3IgcGFyYSBnZXJlbmNpYW1lbnRvIGRlIG3DqXRyaWNhc1xuICovXG5AQXBpVGFncygnTcOpdHJpY2FzIGUgRGFzaGJvYXJkJylcbkBDb250cm9sbGVyKCdtZXRyaWNhcycpXG5AVXNlR3VhcmRzKEp3dEF1dGhHdWFyZCwgUm9sZXNHdWFyZClcbkBBcGlCZWFyZXJBdXRoKClcbmV4cG9ydCBjbGFzcyBNZXRyaWNhc0RlZmluaWNhb0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1ldHJpY2FzU2VydmljZTogTWV0cmljYXNEZWZpbmljYW9TZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgY29sZXRhU2VydmljZTogTWV0cmljYXNDb2xldGFTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2FjaGVTZXJ2aWNlOiBNZXRyaWNhc0NhY2hlU2VydmljZSxcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBDcmlhIHVtYSBub3ZhIGRlZmluacOnw6NvIGRlIG3DqXRyaWNhXG4gICAqL1xuICBAUG9zdCgpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0NyaWFyIG5vdmEgbcOpdHJpY2EnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLkNSRUFURUQsXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBjcmlhZGEgY29tIHN1Y2Vzc28nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICBkZXNjcmlwdGlvbjogJ0RhZG9zIGludsOhbGlkb3MnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGNyaWFyTWV0cmljYShcbiAgICBAQm9keSgpIGR0bzogQ3JpYXJNZXRyaWNhRGVmaW5pY2FvRHRvLFxuICAgIEBSZXEoKSByZXE6IFJlcXVlc3QsXG4gICkge1xuICAgIC8vIE9idGVyIHVzdcOhcmlvIGF0dWFsIGRhIHJlcXVpc2nDp8Ojb1xuICAgIGNvbnN0IHVzdWFyaW9JZCA9IHJlcS51c2VyPy5bJ3N1YiddIHx8ICdzaXN0ZW1hJztcbiAgICBjb25zdCB1c3VhcmlvTm9tZSA9IHJlcS51c2VyPy5bJ25vbWUnXSB8fCAnU2lzdGVtYSc7XG5cbiAgICByZXR1cm4gdGhpcy5tZXRyaWNhc1NlcnZpY2UuY3JpYXJNZXRyaWNhKGR0bywgdXN1YXJpb0lkLCB1c3VhcmlvTm9tZSk7XG4gIH1cblxuICAvKipcbiAgICogQXR1YWxpemEgdW1hIGRlZmluacOnw6NvIGRlIG3DqXRyaWNhIGV4aXN0ZW50ZVxuICAgKi9cbiAgQFB1dCgnOmlkJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQXR1YWxpemFyIG3DqXRyaWNhIGV4aXN0ZW50ZScgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgZGVzY3JpcHRpb246ICdJRCBkYSBtw6l0cmljYScgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QsXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuTk9UX0ZPVU5ELFxuICAgIGRlc2NyaXB0aW9uOiAnTcOpdHJpY2EgbsOjbyBlbmNvbnRyYWRhJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgIGRlc2NyaXB0aW9uOiAnTsOjbyBhdXRvcml6YWRvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiBIdHRwU3RhdHVzLkZPUkJJRERFTiwgZGVzY3JpcHRpb246ICdBY2Vzc28gbmVnYWRvJyB9KVxuICBhc3luYyBhdHVhbGl6YXJNZXRyaWNhKFxuICAgIEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nLFxuICAgIEBCb2R5KCkgZHRvOiBBdHVhbGl6YXJNZXRyaWNhRGVmaW5pY2FvRHRvLFxuICAgIEBSZXEoKSByZXE6IFJlcXVlc3QsXG4gICkge1xuICAgIC8vIE9idGVyIHVzdcOhcmlvIGF0dWFsIGRhIHJlcXVpc2nDp8Ojb1xuICAgIGNvbnN0IHVzdWFyaW9JZCA9IHJlcS51c2VyPy5bJ3N1YiddIHx8ICdzaXN0ZW1hJztcbiAgICBjb25zdCB1c3VhcmlvTm9tZSA9IHJlcS51c2VyPy5bJ25vbWUnXSB8fCAnU2lzdGVtYSc7XG5cbiAgICByZXR1cm4gdGhpcy5tZXRyaWNhc1NlcnZpY2UuYXR1YWxpemFyTWV0cmljYShcbiAgICAgIGlkLFxuICAgICAgZHRvLFxuICAgICAgdXN1YXJpb0lkLFxuICAgICAgdXN1YXJpb05vbWUsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdXNjYSB1bWEgbcOpdHJpY2EgcGVsbyBJRFxuICAgKi9cbiAgQEdldCgnOmlkJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IsIFJPTEVTLkNPT1JERU5BRE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0J1c2NhciBtw6l0cmljYSBwb3IgSUQnIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnSUQgZGEgbcOpdHJpY2EnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5PSywgZGVzY3JpcHRpb246ICdNw6l0cmljYSBlbmNvbnRyYWRhJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBuw6NvIGVuY29udHJhZGEnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGJ1c2Nhck1ldHJpY2FQb3JJZChAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IG1ldHJpY2EgPSBhd2FpdCB0aGlzLm1ldHJpY2FzU2VydmljZS5idXNjYXJNZXRyaWNhUG9ySWQoaWQpO1xuXG4gICAgaWYgKCFtZXRyaWNhKSB7XG4gICAgICB0aHJvdyBuZXcgSHR0cEV4Y2VwdGlvbignTcOpdHJpY2EgbsOjbyBlbmNvbnRyYWRhJywgSHR0cFN0YXR1cy5OT1RfRk9VTkQpO1xuICAgIH1cblxuICAgIHJldHVybiBtZXRyaWNhO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHVtYSBtw6l0cmljYSBwZWxvIGPDs2RpZ29cbiAgICovXG4gIEBHZXQoJ2NvZGlnby86Y29kaWdvJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IsIFJPTEVTLkNPT1JERU5BRE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0J1c2NhciBtw6l0cmljYSBwb3IgY8OzZGlnbycgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2NvZGlnbycsIGRlc2NyaXB0aW9uOiAnQ8OzZGlnbyBkYSBtw6l0cmljYScgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLCBkZXNjcmlwdGlvbjogJ03DqXRyaWNhIGVuY29udHJhZGEnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICBkZXNjcmlwdGlvbjogJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLlVOQVVUSE9SSVpFRCxcbiAgICBkZXNjcmlwdGlvbjogJ07Do28gYXV0b3JpemFkbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sIGRlc2NyaXB0aW9uOiAnQWNlc3NvIG5lZ2FkbycgfSlcbiAgYXN5bmMgYnVzY2FyTWV0cmljYVBvckNvZGlnbyhAUGFyYW0oJ2NvZGlnbycpIGNvZGlnbzogc3RyaW5nKSB7XG4gICAgY29uc3QgbWV0cmljYSA9IGF3YWl0IHRoaXMubWV0cmljYXNTZXJ2aWNlLmJ1c2Nhck1ldHJpY2FQb3JDb2RpZ28oY29kaWdvKTtcblxuICAgIGlmICghbWV0cmljYSkge1xuICAgICAgdGhyb3cgbmV3IEh0dHBFeGNlcHRpb24oJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsIEh0dHBTdGF0dXMuTk9UX0ZPVU5EKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWV0cmljYTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0YSBtw6l0cmljYXMgY29tIGZpbHRyb3MgZSBwYWdpbmHDp8Ojb1xuICAgKi9cbiAgQEdldCgpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SLCBST0xFUy5DT09SREVOQURPUilcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdMaXN0YXIgbcOpdHJpY2FzIGNvbSBmaWx0cm9zJyB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssIGRlc2NyaXB0aW9uOiAnTGlzdGEgZGUgbcOpdHJpY2FzJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGxpc3Rhck1ldHJpY2FzKEBRdWVyeSgpIGZpbHRyb3M6IEZpbHRyb01ldHJpY2FzRHRvKSB7XG4gICAgcmV0dXJuIHRoaXMubWV0cmljYXNTZXJ2aWNlLmxpc3Rhck1ldHJpY2FzKGZpbHRyb3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB1bWEgbcOpdHJpY2EgKGV4Y2x1c8OjbyBsw7NnaWNhKVxuICAgKi9cbiAgQERlbGV0ZSgnOmlkJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOKVxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5OT19DT05URU5UKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ1JlbW92ZXIgbcOpdHJpY2EnIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdpZCcsIGRlc2NyaXB0aW9uOiAnSUQgZGEgbcOpdHJpY2EnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLk5PX0NPTlRFTlQsXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSByZW1vdmlkYSBjb20gc3VjZXNzbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICBkZXNjcmlwdGlvbjogJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLlVOQVVUSE9SSVpFRCxcbiAgICBkZXNjcmlwdGlvbjogJ07Do28gYXV0b3JpemFkbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sIGRlc2NyaXB0aW9uOiAnQWNlc3NvIG5lZ2FkbycgfSlcbiAgYXN5bmMgcmVtb3Zlck1ldHJpY2EoQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcpIHtcbiAgICBhd2FpdCB0aGlzLm1ldHJpY2FzU2VydmljZS5yZW1vdmVyTWV0cmljYShpZCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JpYSBjb25maWd1cmHDp8OjbyBwYXJhIHVtYSBtw6l0cmljYVxuICAgKi9cbiAgQFBvc3QoJ2NvbmZpZ3VyYWNhbycpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0NyaWFyIGNvbmZpZ3VyYcOnw6NvIHBhcmEgbcOpdHJpY2EnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLkNSRUFURUQsXG4gICAgZGVzY3JpcHRpb246ICdDb25maWd1cmHDp8OjbyBjcmlhZGEgY29tIHN1Y2Vzc28nLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICBkZXNjcmlwdGlvbjogJ0RhZG9zIGludsOhbGlkb3MnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGNyaWFyQ29uZmlndXJhY2FvKFxuICAgIEBCb2R5KCkgZHRvOiBDcmlhck1ldHJpY2FDb25maWd1cmFjYW9EdG8sXG4gICAgQFJlcSgpIHJlcTogUmVxdWVzdCxcbiAgKSB7XG4gICAgLy8gT2J0ZXIgdXN1w6FyaW8gYXR1YWwgZGEgcmVxdWlzacOnw6NvXG4gICAgY29uc3QgdXN1YXJpb0lkID0gcmVxLnVzZXI/Llsnc3ViJ10gfHwgJ3Npc3RlbWEnO1xuICAgIGNvbnN0IHVzdWFyaW9Ob21lID0gcmVxLnVzZXI/Llsnbm9tZSddIHx8ICdTaXN0ZW1hJztcblxuICAgIHJldHVybiB0aGlzLm1ldHJpY2FzU2VydmljZS5jcmlhckNvbmZpZ3VyYWNhbyhkdG8sIHVzdWFyaW9JZCwgdXN1YXJpb05vbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEF0dWFsaXphIGNvbmZpZ3VyYcOnw6NvIGRlIHVtYSBtw6l0cmljYVxuICAgKi9cbiAgQFB1dCgnY29uZmlndXJhY2FvLzppZCcpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0F0dWFsaXphciBjb25maWd1cmHDp8OjbyBkZSBtw6l0cmljYScgfSlcbiAgQEFwaVBhcmFtKHsgbmFtZTogJ2lkJywgZGVzY3JpcHRpb246ICdJRCBkYSBjb25maWd1cmHDp8OjbycgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgZGVzY3JpcHRpb246ICdDb25maWd1cmHDp8OjbyBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuQkFEX1JFUVVFU1QsXG4gICAgZGVzY3JpcHRpb246ICdEYWRvcyBpbnbDoWxpZG9zJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuTk9UX0ZPVU5ELFxuICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJhw6fDo28gbsOjbyBlbmNvbnRyYWRhJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuVU5BVVRIT1JJWkVELFxuICAgIGRlc2NyaXB0aW9uOiAnTsOjbyBhdXRvcml6YWRvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiBIdHRwU3RhdHVzLkZPUkJJRERFTiwgZGVzY3JpcHRpb246ICdBY2Vzc28gbmVnYWRvJyB9KVxuICBhc3luYyBhdHVhbGl6YXJDb25maWd1cmFjYW8oXG4gICAgQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcsXG4gICAgQEJvZHkoKSBkdG86IEF0dWFsaXphck1ldHJpY2FDb25maWd1cmFjYW9EdG8sXG4gICAgQFJlcSgpIHJlcTogUmVxdWVzdCxcbiAgKSB7XG4gICAgLy8gT2J0ZXIgdXN1w6FyaW8gYXR1YWwgZGEgcmVxdWlzacOnw6NvXG4gICAgY29uc3QgdXN1YXJpb0lkID0gcmVxLnVzZXI/Llsnc3ViJ10gfHwgJ3Npc3RlbWEnO1xuICAgIGNvbnN0IHVzdWFyaW9Ob21lID0gcmVxLnVzZXI/Llsnbm9tZSddIHx8ICdTaXN0ZW1hJztcblxuICAgIHJldHVybiB0aGlzLm1ldHJpY2FzU2VydmljZS5hdHVhbGl6YXJDb25maWd1cmFjYW8oXG4gICAgICBpZCxcbiAgICAgIGR0byxcbiAgICAgIHVzdWFyaW9JZCxcbiAgICAgIHVzdWFyaW9Ob21lLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQnVzY2EgY29uZmlndXJhw6fDo28gZGUgdW1hIG3DqXRyaWNhXG4gICAqL1xuICBAR2V0KCdjb25maWd1cmFjYW8vbWV0cmljYS86bWV0cmljYUlkJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IsIFJPTEVTLkNPT1JERU5BRE9SKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0J1c2NhciBjb25maWd1cmHDp8OjbyBkZSB1bWEgbcOpdHJpY2EnIH0pXG4gIEBBcGlQYXJhbSh7IG5hbWU6ICdtZXRyaWNhSWQnLCBkZXNjcmlwdGlvbjogJ0lEIGRhIG3DqXRyaWNhJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5PSyxcbiAgICBkZXNjcmlwdGlvbjogJ0NvbmZpZ3VyYcOnw6NvIGVuY29udHJhZGEnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgZGVzY3JpcHRpb246ICdDb25maWd1cmHDp8OjbyBuw6NvIGVuY29udHJhZGEnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGJ1c2NhckNvbmZpZ3VyYWNhb1Bvck1ldHJpY2EoQFBhcmFtKCdtZXRyaWNhSWQnKSBtZXRyaWNhSWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGNvbmZpZ3VyYWNhbyA9XG4gICAgICBhd2FpdCB0aGlzLm1ldHJpY2FzU2VydmljZS5idXNjYXJDb25maWd1cmFjYW9Qb3JNZXRyaWNhKG1ldHJpY2FJZCk7XG5cbiAgICBpZiAoIWNvbmZpZ3VyYWNhbykge1xuICAgICAgdGhyb3cgbmV3IEh0dHBFeGNlcHRpb24oXG4gICAgICAgICdDb25maWd1cmHDp8OjbyBuw6NvIGVuY29udHJhZGEnLFxuICAgICAgICBIdHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbmZpZ3VyYWNhbztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xldGEgbWFudWFsbWVudGUgdW1hIG3DqXRyaWNhIGVzcGVjw61maWNhXG4gICAqL1xuICBAUG9zdCgnY29sZXRhJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ29sZXRhciBtw6l0cmljYSBtYW51YWxtZW50ZScgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBjb2xldGFkYSBjb20gc3VjZXNzbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLkJBRF9SRVFVRVNULFxuICAgIGRlc2NyaXB0aW9uOiAnRGFkb3MgaW52w6FsaWRvcycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICBkZXNjcmlwdGlvbjogJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLlVOQVVUSE9SSVpFRCxcbiAgICBkZXNjcmlwdGlvbjogJ07Do28gYXV0b3JpemFkbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sIGRlc2NyaXB0aW9uOiAnQWNlc3NvIG5lZ2FkbycgfSlcbiAgYXN5bmMgY29sZXRhck1ldHJpY2EoQEJvZHkoKSBkdG86IENvbGV0YU1hbnVhbE1ldHJpY2FEdG8pIHtcbiAgICByZXR1cm4gdGhpcy5jb2xldGFTZXJ2aWNlLmNvbGV0YXJNZXRyaWNhTWFudWFsKGR0by5jb2RpZ28sIGR0by5kaW1lbnNvZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bHRhIG8gdmFsb3IgYXR1YWwgZGUgdW1hIG3DqXRyaWNhXG4gICAqL1xuICBAUG9zdCgndmFsb3InKVxuICBAUm9sZXMoUk9MRVMuQURNSU4sIFJPTEVTLkdFU1RPUiwgUk9MRVMuQ09PUkRFTkFET1IsIFJPTEVTLlRFQ05JQ08pXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnQ29uc3VsdGFyIHZhbG9yIGF0dWFsIGRlIHVtYSBtw6l0cmljYScgfSlcbiAgQEFwaVJlc3BvbnNlKHsgc3RhdHVzOiBIdHRwU3RhdHVzLk9LLCBkZXNjcmlwdGlvbjogJ1ZhbG9yIGRhIG3DqXRyaWNhJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICBkZXNjcmlwdGlvbjogJ0RhZG9zIGludsOhbGlkb3MnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBuw6NvIGVuY29udHJhZGEnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGNvbnN1bHRhclZhbG9yTWV0cmljYShAQm9keSgpIGR0bzogQ29uc3VsdGFWYWxvck1ldHJpY2FEdG8pIHtcbiAgICBjb25zdCBtZXRyaWNhID0gYXdhaXQgdGhpcy5tZXRyaWNhc1NlcnZpY2UuYnVzY2FyTWV0cmljYVBvckNvZGlnbyhcbiAgICAgIGR0by5jb2RpZ28sXG4gICAgKTtcblxuICAgIGlmICghbWV0cmljYSkge1xuICAgICAgdGhyb3cgbmV3IEh0dHBFeGNlcHRpb24oJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsIEh0dHBTdGF0dXMuTk9UX0ZPVU5EKTtcbiAgICB9XG5cbiAgICAvLyBCdXNjYXIgw7psdGltbyBzbmFwc2hvdFxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdGhpcy5jYWNoZVNlcnZpY2Uub2J0ZXJVbHRpbW9TbmFwc2hvdChcbiAgICAgIG1ldHJpY2EuaWQsXG4gICAgICBkdG8uZGltZW5zb2VzLFxuICAgICk7XG5cbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgSHR0cEV4Y2VwdGlvbihcbiAgICAgICAgJ05lbmh1bSB2YWxvciBkaXNwb27DrXZlbCBwYXJhIGEgbcOpdHJpY2EnLFxuICAgICAgICBIdHRwU3RhdHVzLk5PVF9GT1VORCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldHJpY2E6IHtcbiAgICAgICAgaWQ6IG1ldHJpY2EuaWQsXG4gICAgICAgIGNvZGlnbzogbWV0cmljYS5jb2RpZ28sXG4gICAgICAgIG5vbWU6IG1ldHJpY2Eubm9tZSxcbiAgICAgICAgZGVzY3JpY2FvOiBtZXRyaWNhLmRlc2NyaWNhbyxcbiAgICAgICAgdW5pZGFkZTogbWV0cmljYS51bmlkYWRlLFxuICAgICAgICBwcmVmaXhvOiBtZXRyaWNhLnByZWZpeG8sXG4gICAgICAgIHN1Zml4bzogbWV0cmljYS5zdWZpeG8sXG4gICAgICB9LFxuICAgICAgc25hcHNob3Q6IHtcbiAgICAgICAgaWQ6IHNuYXBzaG90LmlkLFxuICAgICAgICB2YWxvcjogc25hcHNob3QudmFsb3IsXG4gICAgICAgIHZhbG9yX2Zvcm1hdGFkbzogc25hcHNob3QudmFsb3JfZm9ybWF0YWRvLFxuICAgICAgICBwZXJpb2RvX2luaWNpbzogc25hcHNob3QucGVyaW9kb19pbmljaW8sXG4gICAgICAgIHBlcmlvZG9fZmltOiBzbmFwc2hvdC5wZXJpb2RvX2ZpbSxcbiAgICAgICAgZGltZW5zb2VzOiBzbmFwc2hvdC5kaW1lbnNvZXMsXG4gICAgICAgIGRhdGFfY29sZXRhOiBzbmFwc2hvdC5jcmVhdGVkX2F0LFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bHRhIHPDqXJpZSB0ZW1wb3JhbCBkZSB1bWEgbcOpdHJpY2FcbiAgICovXG4gIEBQb3N0KCdzZXJpZS10ZW1wb3JhbCcpXG4gIEBSb2xlcyhST0xFUy5BRE1JTiwgUk9MRVMuR0VTVE9SLCBST0xFUy5DT09SREVOQURPUilcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdDb25zdWx0YXIgc8OpcmllIHRlbXBvcmFsIGRlIHVtYSBtw6l0cmljYScgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IEh0dHBTdGF0dXMuT0ssXG4gICAgZGVzY3JpcHRpb246ICdTw6lyaWUgdGVtcG9yYWwgZGEgbcOpdHJpY2EnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5CQURfUkVRVUVTVCxcbiAgICBkZXNjcmlwdGlvbjogJ0RhZG9zIGludsOhbGlkb3MnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5OT1RfRk9VTkQsXG4gICAgZGVzY3JpcHRpb246ICdNw6l0cmljYSBuw6NvIGVuY29udHJhZGEnLFxuICB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIGNvbnN1bHRhclNlcmllVGVtcG9yYWxNZXRyaWNhKEBCb2R5KCkgZHRvOiBDb25zdWx0YVNlcmllVGVtcG9yYWxEdG8pIHtcbiAgICBjb25zdCBtZXRyaWNhID0gYXdhaXQgdGhpcy5tZXRyaWNhc1NlcnZpY2UuYnVzY2FyTWV0cmljYVBvckNvZGlnbyhcbiAgICAgIGR0by5jb2RpZ28sXG4gICAgKTtcblxuICAgIGlmICghbWV0cmljYSkge1xuICAgICAgdGhyb3cgbmV3IEh0dHBFeGNlcHRpb24oJ03DqXRyaWNhIG7Do28gZW5jb250cmFkYScsIEh0dHBTdGF0dXMuTk9UX0ZPVU5EKTtcbiAgICB9XG5cbiAgICAvLyBCdXNjYXIgc25hcHNob3RzIHBhcmEgbyBwZXLDrW9kb1xuICAgIGNvbnN0IHNuYXBzaG90cyA9IGF3YWl0IHRoaXMuY2FjaGVTZXJ2aWNlLm9idGVyU2VyaWVUZW1wb3JhbChcbiAgICAgIG1ldHJpY2EuaWQsXG4gICAgICBkdG8uZGF0YV9pbmljaWFsLFxuICAgICAgZHRvLmRhdGFfZmluYWwsXG4gICAgICBkdG8uZGltZW5zb2VzLFxuICAgICk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbWV0cmljYToge1xuICAgICAgICBpZDogbWV0cmljYS5pZCxcbiAgICAgICAgY29kaWdvOiBtZXRyaWNhLmNvZGlnbyxcbiAgICAgICAgbm9tZTogbWV0cmljYS5ub21lLFxuICAgICAgICBkZXNjcmljYW86IG1ldHJpY2EuZGVzY3JpY2FvLFxuICAgICAgICB1bmlkYWRlOiBtZXRyaWNhLnVuaWRhZGUsXG4gICAgICAgIHByZWZpeG86IG1ldHJpY2EucHJlZml4byxcbiAgICAgICAgc3VmaXhvOiBtZXRyaWNhLnN1Zml4byxcbiAgICAgIH0sXG4gICAgICBwZXJpb2RvOiB7XG4gICAgICAgIGluaWNpbzogZHRvLmRhdGFfaW5pY2lhbCxcbiAgICAgICAgZmltOiBkdG8uZGF0YV9maW5hbCxcbiAgICAgICAgZ3JhbnVsYXJpZGFkZTogZHRvLmdyYW51bGFyaWRhZGUgfHwgbWV0cmljYS5ncmFudWxhcmlkYWRlLFxuICAgICAgfSxcbiAgICAgIGRpbWVuc29lczogZHRvLmRpbWVuc29lcyB8fCB7fSxcbiAgICAgIHBvbnRvczogc25hcHNob3RzLm1hcCgocykgPT4gKHtcbiAgICAgICAgdmFsb3I6IHMudmFsb3IsXG4gICAgICAgIHZhbG9yX2Zvcm1hdGFkbzogcy52YWxvcl9mb3JtYXRhZG8sXG4gICAgICAgIHBlcmlvZG9faW5pY2lvOiBzLnBlcmlvZG9faW5pY2lvLFxuICAgICAgICBwZXJpb2RvX2ZpbTogcy5wZXJpb2RvX2ZpbSxcbiAgICAgIH0pKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIExpbXBhIG8gY2FjaGUgZGUgbcOpdHJpY2FzXG4gICAqL1xuICBAUG9zdCgnY2FjaGUvbGltcGFyJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOKVxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5OT19DT05URU5UKVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0xpbXBhciBjYWNoZSBkZSBtw6l0cmljYXMnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLk5PX0NPTlRFTlQsXG4gICAgZGVzY3JpcHRpb246ICdDYWNoZSBsaW1wbyBjb20gc3VjZXNzbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiBIdHRwU3RhdHVzLlVOQVVUSE9SSVpFRCxcbiAgICBkZXNjcmlwdGlvbjogJ07Do28gYXV0b3JpemFkbycsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5GT1JCSURERU4sIGRlc2NyaXB0aW9uOiAnQWNlc3NvIG5lZ2FkbycgfSlcbiAgYXN5bmMgbGltcGFyQ2FjaGUoKSB7XG4gICAgdGhpcy5jYWNoZVNlcnZpY2UubGltcGFyQ2FjaGVDb21wbGV0bygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBlc3RhdMOtc3RpY2FzIGRlIHVzbyBkbyBjYWNoZVxuICAgKi9cbiAgQEdldCgnY2FjaGUvZXN0YXRpc3RpY2FzJylcbiAgQFJvbGVzKFJPTEVTLkFETUlOLCBST0xFUy5HRVNUT1IpXG4gIEBBcGlPcGVyYXRpb24oeyBzdW1tYXJ5OiAnT2J0ZXIgZXN0YXTDrXN0aWNhcyBkbyBjYWNoZSBkZSBtw6l0cmljYXMnIH0pXG4gIEBBcGlSZXNwb25zZSh7IHN0YXR1czogSHR0cFN0YXR1cy5PSywgZGVzY3JpcHRpb246ICdFc3RhdMOtc3RpY2FzIGRvIGNhY2hlJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogSHR0cFN0YXR1cy5VTkFVVEhPUklaRUQsXG4gICAgZGVzY3JpcHRpb246ICdOw6NvIGF1dG9yaXphZG8nLFxuICB9KVxuICBAQXBpUmVzcG9uc2UoeyBzdGF0dXM6IEh0dHBTdGF0dXMuRk9SQklEREVOLCBkZXNjcmlwdGlvbjogJ0FjZXNzbyBuZWdhZG8nIH0pXG4gIGFzeW5jIG9idGVyRXN0YXRpc3RpY2FzQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGVTZXJ2aWNlLm9idGVyRXN0YXRpc3RpY2FzKCk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==