{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\auth\\dtos\\password-reset.dto.ts","mappings":";;;;;;;;;;;;AAAA,qCAAqC;AACrC,6CAA8C;AAC9C,qDAQyB;AAEzB;;GAEG;AACH,MAAa,iBAAiB;IAQ5B,KAAK,CAAS;CACf;AATD,8CASC;AADC;IAPC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,4CAA4C;QACzD,OAAO,EAAE,uBAAuB;QAChC,MAAM,EAAE,OAAO;KAChB,CAAC;IACD,IAAA,yBAAO,EAAC,EAAE,EAAE,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC;IAC5D,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;;gDACjC;AAGhB;;GAEG;AACH,MAAa,gBAAgB;IAW3B,KAAK,CAAS;IAgBd,WAAW,CAAS;IAQpB,eAAe,CAAS;CACzB;AApCD,4CAoCC;AAzBC;IAVC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,+BAA+B;QAC5C,OAAO,EAAE,oBAAoB;QAC7B,SAAS,EAAE,EAAE;QACb,SAAS,EAAE,GAAG;KACf,CAAC;IACD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC;IAClD,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;IAC9C,IAAA,2BAAS,EAAC,EAAE,EAAE,EAAE,OAAO,EAAE,yCAAyC,EAAE,CAAC;IACrE,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,yCAAyC,EAAE,CAAC;;+CACzD;AAgBd;IAdC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,uBAAuB;QACpC,OAAO,EAAE,mBAAmB;QAC5B,SAAS,EAAE,CAAC;QACZ,SAAS,EAAE,GAAG;KACf,CAAC;IACD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC;IAClD,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;IAC9C,IAAA,2BAAS,EAAC,CAAC,EAAE,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC;IACnE,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,yCAAyC,EAAE,CAAC;IACtE,IAAA,yBAAO,EAAC,iEAAiE,EAAE;QAC1E,OAAO,EACL,+FAA+F;KAClG,CAAC;;qDACkB;AAQpB;IANC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,2BAA2B;QACxC,OAAO,EAAE,mBAAmB;KAC7B,CAAC;IACD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,0CAA0C,EAAE,CAAC;IACjE,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,oCAAoC,EAAE,CAAC;;yDACtC;AAG1B;;GAEG;AACH,MAAa,gBAAgB;IAO3B,KAAK,CAAS;CACf;AARD,4CAQC;AADC;IANC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,qCAAqC;QAClD,OAAO,EAAE,oBAAoB;KAC9B,CAAC;IACD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC;IAClD,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,qBAAqB,EAAE,CAAC;;+CACjC;AAGhB;;GAEG;AACH,MAAa,yBAAyB;IAKpC,OAAO,CAAS;IAMhB,SAAS,CAAS;IAMlB,gBAAgB,CAAS;CAC1B;AAlBD,8DAkBC;AAbC;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,yBAAyB;QACtC,OAAO,EAAE,yDAAyD;KACnE,CAAC;;0DACc;AAMhB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,0BAA0B;QACvC,OAAO,EAAE,sBAAsB;KAChC,CAAC;;4DACgB;AAMlB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,wCAAwC;QACrD,OAAO,EAAE,EAAE;KACZ,CAAC;;mEACuB;AAG3B;;GAEG;AACH,MAAa,wBAAwB;IAKnC,OAAO,CAAS;IAMhB,SAAS,CAAS;IAMlB,cAAc,CAAU;CACzB;AAlBD,4DAkBC;AAbC;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,yBAAyB;QACtC,OAAO,EAAE,8BAA8B;KACxC,CAAC;;yDACc;AAMhB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,0BAA0B;QACvC,OAAO,EAAE,sBAAsB;KAChC,CAAC;;2DACgB;AAMlB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,gDAAgD;QAC7D,OAAO,EAAE,IAAI;KACd,CAAC;;gEACsB;AAG1B;;GAEG;AACH,MAAa,wBAAwB;IAKnC,KAAK,CAAU;IAOf,gBAAgB,CAAU;IAO1B,KAAK,CAAU;IAOf,KAAK,CAAU;CAChB;AA3BD,4DA2BC;AAtBC;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,4BAA4B;QACzC,OAAO,EAAE,IAAI;KACd,CAAC;;uDACa;AAOf;IALC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,uCAAuC;QACpD,OAAO,EAAE,EAAE;QACX,QAAQ,EAAE,KAAK;KAChB,CAAC;;kEACwB;AAO1B;IALC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,sCAAsC;QACnD,OAAO,EAAE,uBAAuB;QAChC,QAAQ,EAAE,KAAK;KAChB,CAAC;;uDACa;AAOf;IALC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,gCAAgC;QAC7C,OAAO,EAAE,4BAA4B;QACrC,QAAQ,EAAE,KAAK;KAChB,CAAC;;uDACa;AAGjB;;GAEG;AACH,MAAa,qBAAqB;IAKhC,eAAe,CAAS;IAMxB,uBAAuB,CAAS;IAMhC,YAAY,CAAS;IAMrB,oBAAoB,CAAS;IAM7B,WAAW,CAAS;IAMpB,kBAAkB,CAAS;CAC5B;AApCD,sDAoCC;AA/BC;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,uCAAuC;QACpD,OAAO,EAAE,EAAE;KACZ,CAAC;;8DACsB;AAMxB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,qDAAqD;QAClE,OAAO,EAAE,EAAE;KACZ,CAAC;;sEAC8B;AAMhC;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,+BAA+B;QAC5C,OAAO,EAAE,CAAC;KACX,CAAC;;2DACmB;AAMrB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,kCAAkC;QAC/C,OAAO,EAAE,CAAC;KACX,CAAC;;mEAC2B;AAM7B;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,qBAAqB;QAClC,OAAO,EAAE,IAAI;KACd,CAAC;;0DACkB;AAMpB;IAJC,IAAA,qBAAW,EAAC;QACX,WAAW,EAAE,6DAA6D;QAC1E,OAAO,EAAE,EAAE;KACZ,CAAC;;iEACyB","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\auth\\dtos\\password-reset.dto.ts"],"sourcesContent":["// src/auth/dto/password-reset.dto.ts\nimport { ApiProperty } from '@nestjs/swagger';\nimport {\n  IsEmail,\n  IsString,\n  MinLength,\n  MaxLength,\n  Matches,\n  IsNotEmpty,\n  IsUUID,\n} from 'class-validator';\n\n/**\n * DTO para solicitação de recuperação de senha\n */\nexport class ForgotPasswordDto {\n  @ApiProperty({\n    description: 'Email do usuário para recuperação de senha',\n    example: 'usuario@semtas.gov.br',\n    format: 'email',\n  })\n  @IsEmail({}, { message: 'Email deve ter um formato válido' })\n  @IsNotEmpty({ message: 'Email é obrigatório' })\n  email: string;\n}\n\n/**\n * DTO para redefinição de senha\n */\nexport class ResetPasswordDto {\n  @ApiProperty({\n    description: 'Token de recuperação de senha',\n    example: 'abc123def456ghi789',\n    minLength: 32,\n    maxLength: 128,\n  })\n  @IsString({ message: 'Token deve ser uma string' })\n  @IsNotEmpty({ message: 'Token é obrigatório' })\n  @MinLength(32, { message: 'Token deve ter pelo menos 32 caracteres' })\n  @MaxLength(128, { message: 'Token deve ter no máximo 128 caracteres' })\n  token: string;\n\n  @ApiProperty({\n    description: 'Nova senha do usuário',\n    example: 'MinhaNovaSenh@123',\n    minLength: 8,\n    maxLength: 128,\n  })\n  @IsString({ message: 'Senha deve ser uma string' })\n  @IsNotEmpty({ message: 'Senha é obrigatória' })\n  @MinLength(8, { message: 'Senha deve ter pelo menos 8 caracteres' })\n  @MaxLength(128, { message: 'Senha deve ter no máximo 128 caracteres' })\n  @Matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]/, {\n    message:\n      'Senha deve conter pelo menos: 1 letra minúscula, 1 maiúscula, 1 número e 1 caractere especial',\n  })\n  newPassword: string;\n\n  @ApiProperty({\n    description: 'Confirmação da nova senha',\n    example: 'MinhaNovaSenh@123',\n  })\n  @IsString({ message: 'Confirmação de senha deve ser uma string' })\n  @IsNotEmpty({ message: 'Confirmação de senha é obrigatória' })\n  confirmPassword: string;\n}\n\n/**\n * DTO para validação de token\n */\nexport class ValidateTokenDto {\n  @ApiProperty({\n    description: 'Token de recuperação para validação',\n    example: 'abc123def456ghi789',\n  })\n  @IsString({ message: 'Token deve ser uma string' })\n  @IsNotEmpty({ message: 'Token é obrigatório' })\n  token: string;\n}\n\n/**\n * DTO de resposta para solicitação de recuperação\n */\nexport class ForgotPasswordResponseDto {\n  @ApiProperty({\n    description: 'Mensagem de confirmação',\n    example: 'Se o email existir, um link de recuperação será enviado',\n  })\n  message: string;\n\n  @ApiProperty({\n    description: 'Timestamp da solicitação',\n    example: '2024-01-15T10:30:00Z',\n  })\n  timestamp: string;\n\n  @ApiProperty({\n    description: 'Tempo de expiração do token em minutos',\n    example: 15,\n  })\n  expiresInMinutes: number;\n}\n\n/**\n * DTO de resposta para redefinição de senha\n */\nexport class ResetPasswordResponseDto {\n  @ApiProperty({\n    description: 'Mensagem de confirmação',\n    example: 'Senha redefinida com sucesso',\n  })\n  message: string;\n\n  @ApiProperty({\n    description: 'Timestamp da redefinição',\n    example: '2024-01-15T10:35:00Z',\n  })\n  timestamp: string;\n\n  @ApiProperty({\n    description: 'Indica se o usuário deve fazer login novamente',\n    example: true,\n  })\n  requiresReauth: boolean;\n}\n\n/**\n * DTO de resposta para validação de token\n */\nexport class ValidateTokenResponseDto {\n  @ApiProperty({\n    description: 'Indica se o token é válido',\n    example: true,\n  })\n  valid: boolean;\n\n  @ApiProperty({\n    description: 'Tempo restante em minutos (se válido)',\n    example: 12,\n    required: false,\n  })\n  minutesRemaining?: number;\n\n  @ApiProperty({\n    description: 'Email associado ao token (se válido)',\n    example: 'usuario@semtas.gov.br',\n    required: false,\n  })\n  email?: string;\n\n  @ApiProperty({\n    description: 'Mensagem de erro (se inválido)',\n    example: 'Token expirado ou inválido',\n    required: false,\n  })\n  error?: string;\n}\n\n/**\n * DTO para estatísticas de recuperação de senha (admin)\n */\nexport class PasswordResetStatsDto {\n  @ApiProperty({\n    description: 'Total de solicitações nas últimas 24h',\n    example: 15,\n  })\n  requestsLast24h: number;\n\n  @ApiProperty({\n    description: 'Total de redefinições bem-sucedidas nas últimas 24h',\n    example: 12,\n  })\n  successfulResetsLast24h: number;\n\n  @ApiProperty({\n    description: 'Tokens ativos (não expirados)',\n    example: 8,\n  })\n  activeTokens: number;\n\n  @ApiProperty({\n    description: 'Tokens expirados nas últimas 24h',\n    example: 3,\n  })\n  expiredTokensLast24h: number;\n\n  @ApiProperty({\n    description: 'Taxa de sucesso (%)',\n    example: 80.0,\n  })\n  successRate: number;\n\n  @ApiProperty({\n    description: 'Usuários únicos que solicitaram recuperação nas últimas 24h',\n    example: 14,\n  })\n  uniqueUsersLast24h: number;\n}\n"],"version":3}