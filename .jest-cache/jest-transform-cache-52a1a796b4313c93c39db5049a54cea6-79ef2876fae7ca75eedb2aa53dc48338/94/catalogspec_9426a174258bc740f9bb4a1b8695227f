4743ffea0c7a60c0843528ff6ea16728
"use strict";
/**
 * Testes para o catálogo de erros
 *
 * Valida a estrutura e funcionalidade do sistema
 * de catálogo de erros padronizado.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const catalog_1 = require("./catalog");
describe('Error Catalog', () => {
    describe('ERROR_CATALOG', () => {
        it('should have all required error definitions', () => {
            // Verificar se existem erros para cada categoria
            const categories = Object.values(catalog_1.ErrorCategory);
            categories.forEach((category) => {
                const errorsInCategory = Object.values(catalog_1.ERROR_CATALOG).filter((error) => error.category === category);
                expect(errorsInCategory.length).toBeGreaterThan(0);
            });
        });
        it('should have unique error codes', () => {
            const codes = Object.keys(catalog_1.ERROR_CATALOG);
            const uniqueCodes = new Set(codes);
            expect(codes.length).toBe(uniqueCodes.size);
        });
        it('should follow naming convention for error codes', () => {
            const codes = Object.keys(catalog_1.ERROR_CATALOG);
            const validPattern = /^(VAL|BEN|INT|FLO|SYS)_[A-Z]+_\d{3}$/;
            codes.forEach((code) => {
                expect(code).toMatch(validPattern);
            });
        });
        it('should have valid HTTP status codes', () => {
            const validStatusCodes = [
                400, 401, 403, 404, 409, 422, 429, 500, 502, 503,
            ];
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(validStatusCodes).toContain(error.httpStatus);
            });
        });
        it('should have non-empty messages', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(error.message).toBeTruthy();
                expect(error.message.length).toBeGreaterThan(0);
            });
        });
        it('should have valid categories', () => {
            const validCategories = Object.values(catalog_1.ErrorCategory);
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(validCategories).toContain(error.category);
            });
        });
        it('should have valid severities', () => {
            const validSeverities = Object.values(catalog_1.ErrorSeverity);
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(validSeverities).toContain(error.severity);
            });
        });
    });
    describe('POSTGRES_ERROR_MAP', () => {
        it('should map common PostgreSQL error codes', () => {
            const expectedMappings = {
                '23503': 'SYS_FK_001',
                '23505': 'SYS_UNIQUE_001',
            };
            Object.entries(expectedMappings).forEach(([pgCode, catalogCode]) => {
                expect(catalog_1.POSTGRES_ERROR_MAP[pgCode]).toBe(catalogCode);
            });
        });
        it('should only map to existing catalog codes', () => {
            const catalogCodes = Object.keys(catalog_1.ERROR_CATALOG);
            Object.values(catalog_1.POSTGRES_ERROR_MAP).forEach((catalogCode) => {
                expect(catalogCodes).toContain(catalogCode);
            });
        });
    });
    describe('Error Definition Structure', () => {
        it('should have required fields for each error', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                expect(error).toHaveProperty('message');
                expect(error).toHaveProperty('httpStatus');
                expect(error).toHaveProperty('category');
                expect(error).toHaveProperty('severity');
            });
        });
        it('should have consistent severity mapping to HTTP status', () => {
            Object.values(catalog_1.ERROR_CATALOG).forEach((error) => {
                switch (error.severity) {
                    case catalog_1.ErrorSeverity.CRITICAL:
                        expect([500, 503]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.HIGH:
                        expect([400, 403, 409, 422]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.MEDIUM:
                        expect([400, 404, 409, 429, 502]).toContain(error.httpStatus);
                        break;
                    case catalog_1.ErrorSeverity.LOW:
                        expect([400, 404]).toContain(error.httpStatus);
                        break;
                }
            });
        });
    });
    describe('Validation Errors', () => {
        it('should have CPF validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_CPF_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_CPF_002']).toBeDefined();
        });
        it('should have NIS validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_NIS_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_NIS_002']).toBeDefined();
        });
        it('should have income validation errors', () => {
            expect(catalog_1.ERROR_CATALOG['VAL_INCOME_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['VAL_INCOME_002']).toBeDefined();
        });
    });
    describe('Benefit Errors', () => {
        it('should have natalidade benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_NAT_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_NAT_002']).toBeDefined();
        });
        it('should have aluguel social benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_ALU_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_ALU_002']).toBeDefined();
        });
        it('should have generic benefit errors', () => {
            expect(catalog_1.ERROR_CATALOG['BEN_GEN_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['BEN_WF_001']).toBeDefined();
        });
    });
    describe('Integration Errors', () => {
        it('should have Azure integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_AZURE_001']).toBeDefined();
        });
        it('should have email integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_EMAIL_001']).toBeDefined();
        });
        it('should have database integration errors', () => {
            expect(catalog_1.ERROR_CATALOG['INT_DB_001']).toBeDefined();
        });
    });
    describe('Operational Flow Errors', () => {
        it('should have permission errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_PERM_001']).toBeDefined();
        });
        it('should have document errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_DOC_001']).toBeDefined();
        });
        it('should have deadline errors', () => {
            expect(catalog_1.ERROR_CATALOG['FLO_DEADLINE_001']).toBeDefined();
        });
    });
    describe('System Errors', () => {
        it('should have database constraint errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_FK_001']).toBeDefined();
            expect(catalog_1.ERROR_CATALOG['SYS_UNIQUE_001']).toBeDefined();
        });
        it('should have rate limiting errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_RATE_001']).toBeDefined();
        });
        it('should have maintenance errors', () => {
            expect(catalog_1.ERROR_CATALOG['SYS_MAINT_001']).toBeDefined();
        });
    });
    describe('Message Interpolation Support', () => {
        it('should have placeholder patterns in messages', () => {
            const messagesWithPlaceholders = [
                'VAL_CPF_002',
                'VAL_NIS_002',
                'VAL_AGE_001',
                'VAL_INCOME_002',
                'BEN_NAT_001',
                'BEN_NAT_002',
                'BEN_GEN_001',
                'BEN_WF_001',
                'INT_AZURE_001',
                'INT_EMAIL_001',
                'FLO_DOC_001',
                'FLO_DEADLINE_001',
                'SYS_RATE_001',
                'SYS_MAINT_001',
            ];
            messagesWithPlaceholders.forEach((code) => {
                const error = catalog_1.ERROR_CATALOG[code];
                expect(error.message).toMatch(/\{\w+\}/);
            });
        });
    });
    describe('Legal References', () => {
        it('should have legal references for benefit errors', () => {
            const benefitErrors = Object.entries(catalog_1.ERROR_CATALOG)
                .filter(([code]) => code.startsWith('BEN_'))
                .map(([, error]) => error);
            benefitErrors.forEach((error) => {
                if (error.legalReference) {
                    expect(error.legalReference).toBeTruthy();
                    expect(error.legalReference.length).toBeGreaterThan(0);
                }
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXHNoYXJlZFxcZXhjZXB0aW9uc1xcZXJyb3ItY2F0YWxvZ1xcY2F0YWxvZy5zcGVjLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7R0FLRzs7QUFFSCx1Q0FNbUI7QUFFbkIsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7SUFDN0IsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDN0IsRUFBRSxDQUFDLDRDQUE0QyxFQUFFLEdBQUcsRUFBRTtZQUNwRCxpREFBaUQ7WUFDakQsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyx1QkFBYSxDQUFDLENBQUM7WUFFaEQsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxFQUFFO2dCQUM5QixNQUFNLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsdUJBQWEsQ0FBQyxDQUFDLE1BQU0sQ0FDMUQsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLEtBQUssUUFBUSxDQUN2QyxDQUFDO2dCQUVGLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckQsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7WUFDeEMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyx1QkFBYSxDQUFDLENBQUM7WUFDekMsTUFBTSxXQUFXLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGlE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QUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUNoQyxFQUFFLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO1lBQ3pELE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsdUJBQWEsQ0FBQztpQkFDaEQsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztpQkFDM0MsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUU3QixhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7Z0JBQzlCLElBQUksS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO29CQUN6QixNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO29CQUMxQyxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3pELENBQUM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcc2hhcmVkXFxleGNlcHRpb25zXFxlcnJvci1jYXRhbG9nXFxjYXRhbG9nLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUZXN0ZXMgcGFyYSBvIGNhdMOhbG9nbyBkZSBlcnJvc1xuICpcbiAqIFZhbGlkYSBhIGVzdHJ1dHVyYSBlIGZ1bmNpb25hbGlkYWRlIGRvIHNpc3RlbWFcbiAqIGRlIGNhdMOhbG9nbyBkZSBlcnJvcyBwYWRyb25pemFkby5cbiAqL1xuXG5pbXBvcnQge1xuICBFUlJPUl9DQVRBTE9HLFxuICBQT1NUR1JFU19FUlJPUl9NQVAsXG4gIEVycm9yQ2F0ZWdvcnksXG4gIEVycm9yU2V2ZXJpdHksXG4gIEVycm9yRGVmaW5pdGlvbixcbn0gZnJvbSAnLi9jYXRhbG9nJztcblxuZGVzY3JpYmUoJ0Vycm9yIENhdGFsb2cnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdFUlJPUl9DQVRBTE9HJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBhbGwgcmVxdWlyZWQgZXJyb3IgZGVmaW5pdGlvbnMnLCAoKSA9PiB7XG4gICAgICAvLyBWZXJpZmljYXIgc2UgZXhpc3RlbSBlcnJvcyBwYXJhIGNhZGEgY2F0ZWdvcmlhXG4gICAgICBjb25zdCBjYXRlZ29yaWVzID0gT2JqZWN0LnZhbHVlcyhFcnJvckNhdGVnb3J5KTtcblxuICAgICAgY2F0ZWdvcmllcy5mb3JFYWNoKChjYXRlZ29yeSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvcnNJbkNhdGVnb3J5ID0gT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5maWx0ZXIoXG4gICAgICAgICAgKGVycm9yKSA9PiBlcnJvci5jYXRlZ29yeSA9PT0gY2F0ZWdvcnksXG4gICAgICAgICk7XG5cbiAgICAgICAgZXhwZWN0KGVycm9yc0luQ2F0ZWdvcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSB1bmlxdWUgZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb2RlcyA9IE9iamVjdC5rZXlzKEVSUk9SX0NBVEFMT0cpO1xuICAgICAgY29uc3QgdW5pcXVlQ29kZXMgPSBuZXcgU2V0KGNvZGVzKTtcblxuICAgICAgZXhwZWN0KGNvZGVzLmxlbmd0aCkudG9CZSh1bmlxdWVDb2Rlcy5zaXplKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZm9sbG93IG5hbWluZyBjb252ZW50aW9uIGZvciBlcnJvciBjb2RlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGVzID0gT2JqZWN0LmtleXMoRVJST1JfQ0FUQUxPRyk7XG4gICAgICBjb25zdCB2YWxpZFBhdHRlcm4gPSAvXihWQUx8QkVOfElOVHxGTE98U1lTKV9bQS1aXStfXFxkezN9JC87XG5cbiAgICAgIGNvZGVzLmZvckVhY2goKGNvZGUpID0+IHtcbiAgICAgICAgZXhwZWN0KGNvZGUpLnRvTWF0Y2godmFsaWRQYXR0ZXJuKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZhbGlkIEhUVFAgc3RhdHVzIGNvZGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRTdGF0dXNDb2RlcyA9IFtcbiAgICAgICAgNDAwLCA0MDEsIDQwMywgNDA0LCA0MDksIDQyMiwgNDI5LCA1MDAsIDUwMiwgNTAzLFxuICAgICAgXTtcblxuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgICBleHBlY3QodmFsaWRTdGF0dXNDb2RlcykudG9Db250YWluKGVycm9yLmh0dHBTdGF0dXMpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgbm9uLWVtcHR5IG1lc3NhZ2VzJywgKCkgPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9CZVRydXRoeSgpO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHZhbGlkIGNhdGVnb3JpZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZENhdGVnb3JpZXMgPSBPYmplY3QudmFsdWVzKEVycm9yQ2F0ZWdvcnkpO1xuXG4gICAgICBPYmplY3QudmFsdWVzKEVSUk9SX0NBVEFMT0cpLmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgICAgIGV4cGVjdCh2YWxpZENhdGVnb3JpZXMpLnRvQ29udGFpbihlcnJvci5jYXRlZ29yeSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSB2YWxpZCBzZXZlcml0aWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRTZXZlcml0aWVzID0gT2JqZWN0LnZhbHVlcyhFcnJvclNldmVyaXR5KTtcblxuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgICBleHBlY3QodmFsaWRTZXZlcml0aWVzKS50b0NvbnRhaW4oZXJyb3Iuc2V2ZXJpdHkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUR1JFU19FUlJPUl9NQVAnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYXAgY29tbW9uIFBvc3RncmVTUUwgZXJyb3IgY29kZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBleHBlY3RlZE1hcHBpbmdzID0ge1xuICAgICAgICAnMjM1MDMnOiAnU1lTX0ZLXzAwMScsXG4gICAgICAgICcyMzUwNSc6ICdTWVNfVU5JUVVFXzAwMScsXG4gICAgICB9O1xuXG4gICAgICBPYmplY3QuZW50cmllcyhleHBlY3RlZE1hcHBpbmdzKS5mb3JFYWNoKChbcGdDb2RlLCBjYXRhbG9nQ29kZV0pID0+IHtcbiAgICAgICAgZXhwZWN0KFBPU1RHUkVTX0VSUk9SX01BUFtwZ0NvZGVdKS50b0JlKGNhdGFsb2dDb2RlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBvbmx5IG1hcCB0byBleGlzdGluZyBjYXRhbG9nIGNvZGVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgY2F0YWxvZ0NvZGVzID0gT2JqZWN0LmtleXMoRVJST1JfQ0FUQUxPRyk7XG5cbiAgICAgIE9iamVjdC52YWx1ZXMoUE9TVEdSRVNfRVJST1JfTUFQKS5mb3JFYWNoKChjYXRhbG9nQ29kZSkgPT4ge1xuICAgICAgICBleHBlY3QoY2F0YWxvZ0NvZGVzKS50b0NvbnRhaW4oY2F0YWxvZ0NvZGUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBEZWZpbml0aW9uIFN0cnVjdHVyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcmVxdWlyZWQgZmllbGRzIGZvciBlYWNoIGVycm9yJywgKCkgPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcjogRXJyb3JEZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0hhdmVQcm9wZXJ0eSgnaHR0cFN0YXR1cycpO1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvSGF2ZVByb3BlcnR5KCdjYXRlZ29yeScpO1xuICAgICAgICBleHBlY3QoZXJyb3IpLnRvSGF2ZVByb3BlcnR5KCdzZXZlcml0eScpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgY29uc2lzdGVudCBzZXZlcml0eSBtYXBwaW5nIHRvIEhUVFAgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgT2JqZWN0LnZhbHVlcyhFUlJPUl9DQVRBTE9HKS5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgICBzd2l0Y2ggKGVycm9yLnNldmVyaXR5KSB7XG4gICAgICAgICAgY2FzZSBFcnJvclNldmVyaXR5LkNSSVRJQ0FMOlxuICAgICAgICAgICAgZXhwZWN0KFs1MDAsIDUwM10pLnRvQ29udGFpbihlcnJvci5odHRwU3RhdHVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgRXJyb3JTZXZlcml0eS5ISUdIOlxuICAgICAgICAgICAgZXhwZWN0KFs0MDAsIDQwMywgNDA5LCA0MjJdKS50b0NvbnRhaW4oZXJyb3IuaHR0cFN0YXR1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIEVycm9yU2V2ZXJpdHkuTUVESVVNOlxuICAgICAgICAgICAgZXhwZWN0KFs0MDAsIDQwNCwgNDA5LCA0MjksIDUwMl0pLnRvQ29udGFpbihlcnJvci5odHRwU3RhdHVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgRXJyb3JTZXZlcml0eS5MT1c6XG4gICAgICAgICAgICBleHBlY3QoWzQwMCwgNDA0XSkudG9Db250YWluKGVycm9yLmh0dHBTdGF0dXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVmFsaWRhdGlvbiBFcnJvcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIENQRiB2YWxpZGF0aW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydWQUxfQ1BGXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1ZBTF9DUEZfMDAyJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgTklTIHZhbGlkYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1ZBTF9OSVNfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snVkFMX05JU18wMDInXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBpbmNvbWUgdmFsaWRhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snVkFMX0lOQ09NRV8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydWQUxfSU5DT01FXzAwMiddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmVuZWZpdCBFcnJvcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIG5hdGFsaWRhZGUgYmVuZWZpdCBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snQkVOX05BVF8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydCRU5fTkFUXzAwMiddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGFsdWd1ZWwgc29jaWFsIGJlbmVmaXQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0JFTl9BTFVfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snQkVOX0FMVV8wMDInXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBnZW5lcmljIGJlbmVmaXQgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0JFTl9HRU5fMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snQkVOX1dGXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBBenVyZSBpbnRlZ3JhdGlvbiBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snSU5UX0FaVVJFXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIGVtYWlsIGludGVncmF0aW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydJTlRfRU1BSUxfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgZGF0YWJhc2UgaW50ZWdyYXRpb24gZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ0lOVF9EQl8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09wZXJhdGlvbmFsIEZsb3cgRXJyb3JzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBwZXJtaXNzaW9uIGVycm9ycycsICgpID0+IHtcbiAgICAgIGV4cGVjdChFUlJPUl9DQVRBTE9HWydGTE9fUEVSTV8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBkb2N1bWVudCBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snRkxPX0RPQ18wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBkZWFkbGluZSBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snRkxPX0RFQURMSU5FXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnU3lzdGVtIEVycm9ycycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgZGF0YWJhc2UgY29uc3RyYWludCBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snU1lTX0ZLXzAwMSddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1NZU19VTklRVUVfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcmF0ZSBsaW1pdGluZyBlcnJvcnMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRVJST1JfQ0FUQUxPR1snU1lTX1JBVEVfMDAxJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgbWFpbnRlbmFuY2UgZXJyb3JzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KEVSUk9SX0NBVEFMT0dbJ1NZU19NQUlOVF8wMDEnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01lc3NhZ2UgSW50ZXJwb2xhdGlvbiBTdXBwb3J0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBwbGFjZWhvbGRlciBwYXR0ZXJucyBpbiBtZXNzYWdlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc3NhZ2VzV2l0aFBsYWNlaG9sZGVycyA9IFtcbiAgICAgICAgJ1ZBTF9DUEZfMDAyJyxcbiAgICAgICAgJ1ZBTF9OSVNfMDAyJyxcbiAgICAgICAgJ1ZBTF9BR0VfMDAxJyxcbiAgICAgICAgJ1ZBTF9JTkNPTUVfMDAyJyxcbiAgICAgICAgJ0JFTl9OQVRfMDAxJyxcbiAgICAgICAgJ0JFTl9OQVRfMDAyJyxcbiAgICAgICAgJ0JFTl9HRU5fMDAxJyxcbiAgICAgICAgJ0JFTl9XRl8wMDEnLFxuICAgICAgICAnSU5UX0FaVVJFXzAwMScsXG4gICAgICAgICdJTlRfRU1BSUxfMDAxJyxcbiAgICAgICAgJ0ZMT19ET0NfMDAxJyxcbiAgICAgICAgJ0ZMT19ERUFETElORV8wMDEnLFxuICAgICAgICAnU1lTX1JBVEVfMDAxJyxcbiAgICAgICAgJ1NZU19NQUlOVF8wMDEnLFxuICAgICAgXTtcblxuICAgICAgbWVzc2FnZXNXaXRoUGxhY2Vob2xkZXJzLmZvckVhY2goKGNvZGUpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBFUlJPUl9DQVRBTE9HW2NvZGVdO1xuICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9NYXRjaCgvXFx7XFx3K1xcfS8pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdMZWdhbCBSZWZlcmVuY2VzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBsZWdhbCByZWZlcmVuY2VzIGZvciBiZW5lZml0IGVycm9ycycsICgpID0+IHtcbiAgICAgIGNvbnN0IGJlbmVmaXRFcnJvcnMgPSBPYmplY3QuZW50cmllcyhFUlJPUl9DQVRBTE9HKVxuICAgICAgICAuZmlsdGVyKChbY29kZV0pID0+IGNvZGUuc3RhcnRzV2l0aCgnQkVOXycpKVxuICAgICAgICAubWFwKChbLCBlcnJvcl0pID0+IGVycm9yKTtcblxuICAgICAgYmVuZWZpdEVycm9ycy5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgICBpZiAoZXJyb3IubGVnYWxSZWZlcmVuY2UpIHtcbiAgICAgICAgICBleHBlY3QoZXJyb3IubGVnYWxSZWZlcmVuY2UpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgICBleHBlY3QoZXJyb3IubGVnYWxSZWZlcmVuY2UubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9