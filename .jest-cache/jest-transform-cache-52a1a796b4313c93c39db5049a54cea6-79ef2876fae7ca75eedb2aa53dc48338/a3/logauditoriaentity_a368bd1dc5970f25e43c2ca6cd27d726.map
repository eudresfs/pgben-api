{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\log-auditoria.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\log-auditoria.entity.ts"],"sourcesContent":["import {\n  Entity,\n  Column,\n  PrimaryGeneratedColumn,\n  CreateDateColumn,\n  Index,\n  UpdateDateColumn,\n} from 'typeorm';\nimport { TipoOperacao } from '../enums/tipo-operacao.enum';\n\n/**\n * Entidade LogAuditoria - Versão MVP\n *\n * Responsável por armazenar os logs de auditoria do sistema,\n * registrando operações críticas realizadas pelos usuários.\n * Implementação simplificada para o MVP com foco em rastreabilidade básica.\n */\n@Entity('logs_auditoria')\n@Index(['usuario_id', 'created_at'])\n@Index(['entidade_afetada', 'created_at'])\n@Index(['tipo_operacao', 'created_at'])\nexport class LogAuditoria {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  /**\n   * Tipo de operação realizada\n   * Utiliza o enum TipoOperacao para padronização\n   */\n  @Column({\n    type: 'varchar',\n    length: 20,\n    comment: 'Tipo de operação (CREATE, READ, UPDATE, DELETE, ACCESS, etc.)',\n  })\n  tipo_operacao: TipoOperacao;\n\n  /**\n   * Entidade afetada pela operação\n   * Ex: Usuario, Cidadao, Solicitacao, etc.\n   */\n  @Column({\n    type: 'varchar',\n    length: 100,\n    comment: 'Nome da entidade afetada pela operação',\n  })\n  entidade_afetada: string;\n\n  /**\n   * ID da entidade afetada\n   */\n  @Column({\n    type: 'varchar',\n    length: 36,\n    nullable: true,\n    comment: 'ID da entidade afetada pela operação',\n  })\n  entidade_id: string;\n\n  /**\n   * Dados anteriores à operação\n   */\n  @Column({\n    type: 'jsonb',\n    nullable: true,\n    comment: 'Dados anteriores à operação, armazenados em formato JSON',\n  })\n  dados_anteriores: Record<string, any>;\n\n  /**\n   * Novos dados após a operação\n   */\n  @Column({\n    type: 'jsonb',\n    nullable: true,\n    comment: 'Novos dados após a operação, armazenados em formato JSON',\n  })\n  dados_novos: Record<string, any>;\n\n  /**\n   * ID do usuário que realizou a operação\n   */\n  @Column({\n    name: 'usuario_id',\n    nullable: true,\n    comment: 'ID do usuário que realizou a operação',\n  })\n  usuario_id: string;\n\n  // Relação com usuário removida para simplificar o MVP\n\n  /**\n   * Descrição da operação realizada\n   */\n  @Column({\n    type: 'varchar',\n    length: 500,\n    nullable: true,\n    comment: 'Descrição textual da operação realizada',\n  })\n  descricao: string;\n\n  /**\n   * Endereço IP de origem da requisição\n   */\n  @Column({\n    type: 'varchar',\n    length: 45, // Suporte para IPv4 e IPv6\n    nullable: true,\n    comment: 'Endereço IP de origem que realizou a requisição',\n  })\n  ip_origem: string;\n\n  /**\n   * User-Agent do navegador ou cliente\n   */\n  @Column({\n    type: 'varchar',\n    length: 500,\n    nullable: true,\n    comment: 'User-Agent do navegador ou cliente que realizou a requisição',\n  })\n  user_agent: string;\n\n  /**\n   * Dados sensíveis que foram acessados (LGPD)\n   */\n  @Column({\n    type: 'jsonb',\n    nullable: true,\n    comment:\n      'Array de campos sensíveis que foram acessados, para compliance com LGPD',\n  })\n  dados_sensiveis_acessados: string[];\n\n  /**\n   * Endpoint acessado\n   */\n  @Column({\n    type: 'varchar',\n    length: 255,\n    nullable: true,\n    comment: 'Endpoint acessado',\n  })\n  endpoint: string;\n\n  /**\n   * Método HTTP utilizado\n   */\n  @Column({\n    type: 'varchar',\n    length: 10,\n    nullable: true,\n    comment: 'Método HTTP utilizado',\n  })\n  metodo_http: string;\n\n  // Campos não essenciais para o MVP foram removidos\n\n  /**\n   * Data e hora da operação\n   */\n  @Column({\n    type: 'timestamptz',\n    nullable: true,\n    comment: 'Data e hora em que a operação foi realizada',\n  })\n  data_hora: Date;\n\n  /**\n   * Data e hora de criação do registro\n   */\n  @CreateDateColumn({\n    type: 'timestamptz',\n    comment: 'Data e hora de criação do registro',\n  })\n  created_at: Date;\n\n  /**\n   * Data e hora da última atualização do registro\n   */\n  @UpdateDateColumn({\n    type: 'timestamptz',\n    comment: 'Data e hora da última atualização do registro',\n  })\n  updated_at: Date;\n}\n"],"version":3}