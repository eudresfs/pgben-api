{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\notificacao\\controllers\\notification-template.controller.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\modules\\notificacao\\controllers\\notification-template.controller.ts"],"sourcesContent":["import {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Param,\n  Query,\n  Put,\n  UseGuards,\n  Logger,\n} from '@nestjs/common';\nimport {\n  ApiTags,\n  ApiOperation,\n  ApiResponse,\n  ApiBearerAuth,\n} from '@nestjs/swagger';\nimport { JwtAuthGuard } from '../../../auth/guards/jwt-auth.guard';\nimport { RolesGuard } from '../../../auth/guards/roles.guard';\nimport { Roles } from '../../../auth/decorators/role.decorator';\nimport { NotificationManagerService } from '../services/notification-manager.service';\nimport { CreateNotificationTemplateDto } from '../dtos/create-notification-template.dto';\nimport { ROLES } from '../../../shared/constants/roles.constants';\n\n/**\n * Controlador para gerenciamento de templates de notificação\n */\n@ApiTags('Notificações')\n@Controller('notificacao/templates')\n@UseGuards(JwtAuthGuard, RolesGuard)\n@ApiBearerAuth()\nexport class NotificationTemplateController {\n  private readonly logger = new Logger(NotificationTemplateController.name);\n\n  constructor(\n    private readonly notificationManagerService: NotificationManagerService,\n  ) {}\n\n  /**\n   * Cria um novo template de notificação\n   */\n  @Post()\n  @Roles(ROLES.ADMIN)\n  @ApiOperation({ summary: 'Criar um novo template de notificação' })\n  @ApiResponse({\n    status: 201,\n    description: 'Template criado com sucesso',\n  })\n  async criarTemplate(\n    @Body() createTemplateDto: CreateNotificationTemplateDto,\n  ) {\n    this.logger.log(`Criando novo template: ${createTemplateDto.nome}`);\n    return this.notificationManagerService.criarTemplate(createTemplateDto);\n  }\n\n  /**\n   * Lista todos os templates de notificação com paginação e filtros\n   */\n  @Get()\n  @Roles(ROLES.ADMIN, ROLES.GESTOR)\n  @ApiOperation({ summary: 'Listar templates de notificação' })\n  @ApiResponse({\n    status: 200,\n    description: 'Lista de templates retornada com sucesso',\n  })\n  async listarTemplates(\n    @Query('page') page?: number,\n    @Query('limit') limit?: number,\n    @Query('ativo') ativo?: boolean,\n  ) {\n    return this.notificationManagerService.listarTemplates({\n      page: page ? Number(page) : undefined,\n      limit: limit ? Number(limit) : undefined,\n      ativo: ativo !== undefined ? ativo === true : undefined,\n    });\n  }\n\n  /**\n   * Obtém um template de notificação pelo ID\n   */\n  @Get(':id')\n  @Roles(ROLES.ADMIN, ROLES.GESTOR)\n  @ApiOperation({ summary: 'Obter template por ID' })\n  @ApiResponse({\n    status: 200,\n    description: 'Template encontrado',\n  })\n  @ApiResponse({\n    status: 404,\n    description: 'Template não encontrado',\n  })\n  async buscarTemplatePorId(@Param('id') id: string) {\n    return this.notificationManagerService.buscarTemplatePorId(id);\n  }\n\n  /**\n   * Ativa um template de notificação\n   */\n  @Put(':id/ativar')\n  @Roles(ROLES.ADMIN)\n  @ApiOperation({ summary: 'Ativar template de notificação' })\n  @ApiResponse({\n    status: 200,\n    description: 'Template ativado com sucesso',\n  })\n  async ativarTemplate(@Param('id') id: string) {\n    this.logger.log(`Ativando template ID: ${id}`);\n    return this.notificationManagerService.ativarTemplate(id);\n  }\n\n  /**\n   * Desativa um template de notificação\n   */\n  @Put(':id/desativar')\n  @Roles(ROLES.ADMIN)\n  @ApiOperation({ summary: 'Desativar template de notificação' })\n  @ApiResponse({\n    status: 200,\n    description: 'Template desativado com sucesso',\n  })\n  async desativarTemplate(@Param('id') id: string) {\n    this.logger.log(`Desativando template ID: ${id}`);\n    return this.notificationManagerService.desativarTemplate(id);\n  }\n}\n"],"version":3}