{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\solicitacao.entity.ts","mappings":"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","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\solicitacao.entity.ts"],"sourcesContent":["import {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n  DeleteDateColumn,\n  ManyToOne,\n  JoinColumn,\n  OneToMany,\n  Index,\n  BeforeInsert,\n  AfterUpdate,\n  VersionColumn,\n} from 'typeorm';\nimport { IsNotEmpty, IsOptional } from 'class-validator';\nimport { Cidadao } from './cidadao.entity';\nimport { TipoBeneficio } from './tipo-beneficio.entity';\nimport { Usuario } from './usuario.entity';\nimport { Unidade } from './unidade.entity';\nimport { Documento } from './documento.entity';\nimport { HistoricoSolicitacao } from './historico-solicitacao.entity';\nimport { Pendencia } from './pendencia.entity';\nimport { ProcessoJudicial } from './processo-judicial.entity';\nimport { DeterminacaoJudicial } from './determinacao-judicial.entity';\nimport { StatusSolicitacao } from '../enums/status-solicitacao.enum';\n\n@Entity('solicitacao')\n@Index(['protocolo'], { unique: true })\n@Index(['status', 'unidade_id'])\n@Index(['status', 'tipo_beneficio_id'])\n@Index(['data_abertura', 'status'])\n@Index(['status'], { where: \"status IN ('pendente', 'em_analise')\" })\n@Index(['processo_judicial_id'], { where: 'processo_judicial_id IS NOT NULL' })\n@Index(['determinacao_judicial_id'], {\n  where: 'determinacao_judicial_id IS NOT NULL',\n})\nexport class Solicitacao {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ unique: true })\n  @IsNotEmpty({ message: 'Protocolo é obrigatório' })\n  protocolo: string;\n\n  @BeforeInsert()\n  generateProtocol() {\n    const date = new Date();\n    const random = Math.floor(Math.random() * 10000)\n      .toString()\n      .padStart(4, '0');\n    this.protocolo = `SOL${date.getFullYear()}${(date.getMonth() + 1).toString().padStart(2, '0')}${random}`;\n  }\n\n  @Column({ select: false, insert: false, update: false })\n  private statusAnterior: StatusSolicitacao;\n\n  @Column({ select: false, insert: false, update: false })\n  private usuarioAlteracao: string;\n\n  @Column({ select: false, insert: false, update: false })\n  private observacaoAlteracao: string;\n\n  @Column({ select: false, insert: false, update: false })\n  private ipUsuario: string;\n\n  /**\n   * Prepara a alteração de status para posterior registro no histórico\n   * @param novoStatus Novo status da solicitação\n   * @param usuario ID do usuário que realizou a alteração\n   * @param observacao Observação sobre a alteração\n   * @param ip IP do usuário que realizou a alteração\n   */\n  prepararAlteracaoStatus(\n    novoStatus: StatusSolicitacao,\n    usuario: string,\n    observacao: string,\n    ip: string,\n  ) {\n    this.statusAnterior = this.status;\n    this.status = novoStatus;\n    this.usuarioAlteracao = usuario;\n    this.observacaoAlteracao = observacao;\n    this.ipUsuario = ip;\n  }\n\n  // REMOVIDO: @AfterUpdate logStatusChange()\n  // O logging de histórico agora é feito diretamente nos serviços\n  // que têm acesso ao DataSource e repositórios adequados.\n  // Isso evita o erro ConnectionNotFoundError que ocorria quando\n  // o método tentava usar getRepository() sem contexto de conexão.\n\n  @Column()\n  @IsNotEmpty({ message: 'Beneficiário é obrigatório' })\n  beneficiario_id: string;\n\n  @ManyToOne(() => Cidadao, { eager: false })\n  @JoinColumn({ name: 'beneficiario_id' })\n  beneficiario: Cidadao;\n\n  @Column()\n  @IsNotEmpty({ message: 'Tipo de benefício é obrigatório' })\n  tipo_beneficio_id: string;\n\n  @ManyToOne(() => TipoBeneficio)\n  @JoinColumn({ name: 'tipo_beneficio_id' })\n  tipo_beneficio: TipoBeneficio;\n\n  @Column()\n  @IsNotEmpty({ message: 'Unidade é obrigatória' })\n  unidade_id: string;\n\n  @ManyToOne(() => Unidade)\n  @JoinColumn({ name: 'unidade_id' })\n  unidade: Unidade;\n\n  @Column()\n  @IsNotEmpty({ message: 'Técnico responsável é obrigatório' })\n  tecnico_id: string;\n\n  @ManyToOne(() => Usuario)\n  @JoinColumn({ name: 'tecnico_id' })\n  tecnico: Usuario;\n\n  @Column({ type: 'timestamp' })\n  @IsNotEmpty({ message: 'Data de abertura é obrigatória' })\n  data_abertura: Date;\n\n  @Column({\n    type: 'enum',\n    enum: StatusSolicitacao,\n    enumName: 'status_solicitacao',\n    default: StatusSolicitacao.RASCUNHO,\n  })\n  status: StatusSolicitacao;\n\n  @Column('text', { nullable: true })\n  @IsOptional()\n  parecer_semtas: string;\n\n  @Column({ nullable: true })\n  aprovador_id: string;\n\n  @ManyToOne(() => Usuario)\n  @JoinColumn({ name: 'aprovador_id' })\n  aprovador: Usuario;\n\n  @Column({ type: 'timestamp', nullable: true })\n  data_aprovacao: Date;\n\n  @Column({ type: 'timestamp', nullable: true })\n  data_liberacao: Date;\n\n  @Column({ nullable: true })\n  liberador_id: string;\n\n  @ManyToOne(() => Usuario)\n  @JoinColumn({ name: 'liberador_id' })\n  liberador: Usuario;\n\n  @Column('text', { nullable: true })\n  @IsOptional()\n  observacoes: string;\n\n  @Column('jsonb', { nullable: true })\n  dados_complementares: Record<string, any>;\n\n  @OneToMany(() => Documento, (documento) => documento.solicitacao, {\n    cascade: ['insert', 'update'],\n    onDelete: 'RESTRICT',\n  })\n  documentos: Documento[];\n\n  /**\n   * Relação com histórico de status da solicitação\n   */\n  @OneToMany(() => HistoricoSolicitacao, (historico) => historico.solicitacao, {\n    cascade: ['insert'],\n    onDelete: 'CASCADE',\n  })\n  historico: HistoricoSolicitacao[];\n\n  /**\n   * Relação com histórico de status da solicitação\n   */\n  @OneToMany(() => Pendencia, (pendencia) => pendencia.solicitacao, {\n    cascade: ['insert'],\n    onDelete: 'CASCADE',\n  })\n  pendencias: Pendencia[];\n\n  /**\n   * Controle de versão para detectar e prevenir atualizações concorrentes\n   * Este campo é incrementado automaticamente a cada atualização\n   */\n  @VersionColumn()\n  version: number;\n\n  /**\n   * Relação com processo judicial\n   * Esta relação é gerenciada pelo módulo de solicitação, não pelo módulo judicial\n   */\n  @Column({ nullable: true })\n  processo_judicial_id: string;\n\n  @ManyToOne(() => ProcessoJudicial, { nullable: true })\n  @JoinColumn({ name: 'processo_judicial_id' })\n  processo_judicial: ProcessoJudicial;\n\n  /**\n   * Relação com determinação judicial\n   * Esta relação é gerenciada pelo módulo de solicitação, não pelo módulo judicial\n   */\n  @Column({ nullable: true })\n  determinacao_judicial_id: string;\n\n  @ManyToOne(() => DeterminacaoJudicial, { nullable: true })\n  @JoinColumn({ name: 'determinacao_judicial_id' })\n  determinacao_judicial: DeterminacaoJudicial;\n\n  /**\n   * Flag que indica se a solicitação tem determinação judicial\n   */\n  @Column({\n    name: 'determinacao_judicial_flag',\n    type: 'boolean',\n    default: false,\n  })\n  determinacao_judicial_flag: boolean;\n\n  /**\n   * Relação com solicitação original (auto-relacionamento)\n   * Usado para renovações, revisões ou outras solicitações derivadas\n   */\n  @Column({ nullable: true })\n  solicitacao_original_id: string;\n\n  @ManyToOne(() => Solicitacao, { nullable: true })\n  @JoinColumn({ name: 'solicitacao_original_id' })\n  solicitacao_original: Solicitacao;\n\n  /**\n   * Campos para suporte a renovação automática\n   */\n  @Column({ name: 'renovacao_automatica', type: 'boolean', default: false })\n  renovacao_automatica: boolean;\n\n  @Column({ name: 'contador_renovacoes', type: 'integer', default: 0 })\n  contador_renovacoes: number;\n\n  @Column({ name: 'data_proxima_renovacao', type: 'timestamp', nullable: true })\n  data_proxima_renovacao: Date;\n\n  /**\n   * Dados dinâmicos específicos para cada tipo de benefício\n   */\n  @Column({ name: 'dados_dinamicos', type: 'jsonb', nullable: true })\n  dados_dinamicos: Record<string, any>;\n\n  /**\n   * Data limite para conclusão da análise da solicitação\n   * Utilizado para controle de SLA do processo de análise\n   */\n  @Column({ name: 'prazo_analise', type: 'timestamp', nullable: true })\n  prazo_analise: Date | null;\n\n  /**\n   * Data limite para envio de documentos pelo cidadão\n   * Utilizado quando a solicitação está no estado AGUARDANDO_DOCUMENTOS\n   */\n  @Column({ name: 'prazo_documentos', type: 'timestamp', nullable: true })\n  prazo_documentos: Date | null;\n\n  /**\n   * Data limite para conclusão do processamento da solicitação\n   * Utilizado quando a solicitação está no estado EM_PROCESSAMENTO\n   */\n  @Column({ name: 'prazo_processamento', type: 'timestamp', nullable: true })\n  prazo_processamento: Date | null;\n\n  @CreateDateColumn()\n  created_at: Date;\n\n  @UpdateDateColumn()\n  updated_at: Date;\n\n  @DeleteDateColumn()\n  removed_at: Date;\n}\n\nexport { StatusSolicitacao };\n"],"version":3}