b2d883b3a04e8b5287cf5cfc296fdc60
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PermissionDeniedException = void 0;
const common_1 = require("@nestjs/common");
/**
 * Exceção lançada quando um usuário não tem permissão para acessar um recurso.
 *
 * Esta exceção contém informações detalhadas sobre a permissão necessária
 * para auxiliar o usuário a entender o que está faltando.
 */
class PermissionDeniedException extends common_1.ForbiddenException {
    constructor(permissionName, scopeType, scopeId) {
        const baseMessage = `Acesso negado: você não possui a permissão necessária`;
        const detailMessage = `Permissão necessária: ${permissionName} com escopo ${scopeType}${scopeId ? ` e ID ${scopeId}` : ''}`;
        super({
            message: baseMessage,
            code: 'PERMISSION_DENIED',
            details: {
                requiredPermission: detailMessage,
            },
        });
    }
}
exports.PermissionDeniedException = PermissionDeniedException;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGF1dGhcXGV4Y2VwdGlvbnNcXHBlcm1pc3Npb24tZGVuaWVkLmV4Y2VwdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSwyQ0FBb0Q7QUFHcEQ7Ozs7O0dBS0c7QUFDSCxNQUFhLHlCQUEwQixTQUFRLDJCQUFrQjtJQUMvRCxZQUNFLGNBQXNCLEVBQ3RCLFNBQXFCLEVBQ3JCLE9BQWdCO1FBRWhCLE1BQU0sV0FBVyxHQUFHLHVEQUF1RCxDQUFDO1FBQzVFLE1BQU0sYUFBYSxHQUFHLHlCQUF5QixjQUFjLGVBQWUsU0FBUyxHQUNuRixPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQ2pDLEVBQUUsQ0FBQztRQUVILEtBQUssQ0FBQztZQUNKLE9BQU8sRUFBRSxXQUFXO1lBQ3BCLElBQUksRUFBRSxtQkFBbUI7WUFDekIsT0FBTyxFQUFFO2dCQUNQLGtCQUFrQixFQUFFLGFBQWE7YUFDbEM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0NBQ0Y7QUFuQkQsOERBbUJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxhdXRoXFxleGNlcHRpb25zXFxwZXJtaXNzaW9uLWRlbmllZC5leGNlcHRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9yYmlkZGVuRXhjZXB0aW9uIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgVGlwb0VzY29wbyB9IGZyb20gJy4uLy4uL2VudGl0aWVzL3VzZXItcGVybWlzc2lvbi5lbnRpdHknO1xuXG4vKipcbiAqIEV4Y2XDp8OjbyBsYW7Dp2FkYSBxdWFuZG8gdW0gdXN1w6FyaW8gbsOjbyB0ZW0gcGVybWlzc8OjbyBwYXJhIGFjZXNzYXIgdW0gcmVjdXJzby5cbiAqIFxuICogRXN0YSBleGNlw6fDo28gY29udMOpbSBpbmZvcm1hw6fDtWVzIGRldGFsaGFkYXMgc29icmUgYSBwZXJtaXNzw6NvIG5lY2Vzc8OhcmlhXG4gKiBwYXJhIGF1eGlsaWFyIG8gdXN1w6FyaW8gYSBlbnRlbmRlciBvIHF1ZSBlc3TDoSBmYWx0YW5kby5cbiAqL1xuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25EZW5pZWRFeGNlcHRpb24gZXh0ZW5kcyBGb3JiaWRkZW5FeGNlcHRpb24ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwZXJtaXNzaW9uTmFtZTogc3RyaW5nLFxuICAgIHNjb3BlVHlwZTogVGlwb0VzY29wbyxcbiAgICBzY29wZUlkPzogc3RyaW5nLFxuICApIHtcbiAgICBjb25zdCBiYXNlTWVzc2FnZSA9IGBBY2Vzc28gbmVnYWRvOiB2b2PDqiBuw6NvIHBvc3N1aSBhIHBlcm1pc3PDo28gbmVjZXNzw6FyaWFgO1xuICAgIGNvbnN0IGRldGFpbE1lc3NhZ2UgPSBgUGVybWlzc8OjbyBuZWNlc3PDoXJpYTogJHtwZXJtaXNzaW9uTmFtZX0gY29tIGVzY29wbyAke3Njb3BlVHlwZX0ke1xuICAgICAgc2NvcGVJZCA/IGAgZSBJRCAke3Njb3BlSWR9YCA6ICcnXG4gICAgfWA7XG5cbiAgICBzdXBlcih7XG4gICAgICBtZXNzYWdlOiBiYXNlTWVzc2FnZSxcbiAgICAgIGNvZGU6ICdQRVJNSVNTSU9OX0RFTklFRCcsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIHJlcXVpcmVkUGVybWlzc2lvbjogZGV0YWlsTWVzc2FnZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==