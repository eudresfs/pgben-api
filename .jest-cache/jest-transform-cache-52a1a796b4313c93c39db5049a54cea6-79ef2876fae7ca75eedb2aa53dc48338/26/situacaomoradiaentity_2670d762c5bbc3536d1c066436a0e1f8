3d36a75f127cd69d7b945cc1802be311
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d;
Object.defineProperty(exports, "__esModule", { value: true });
exports.SituacaoMoradia = exports.TipoMoradiaEnum = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const cidadao_entity_1 = require("./cidadao.entity");
var TipoMoradiaEnum;
(function (TipoMoradiaEnum) {
    TipoMoradiaEnum["PROPRIA"] = "propria";
    TipoMoradiaEnum["ALUGADA"] = "alugada";
    TipoMoradiaEnum["CEDIDA"] = "cedida";
    TipoMoradiaEnum["OCUPACAO"] = "ocupacao";
    TipoMoradiaEnum["SITUACAO_RUA"] = "situacao_rua";
    TipoMoradiaEnum["ABRIGO"] = "abrigo";
    TipoMoradiaEnum["OUTRO"] = "outro";
})(TipoMoradiaEnum || (exports.TipoMoradiaEnum = TipoMoradiaEnum = {}));
let SituacaoMoradia = class SituacaoMoradia {
    id;
    cidadao_id;
    cidadao;
    tipo_moradia;
    numero_comodos;
    valor_aluguel;
    tempo_moradia;
    possui_banheiro;
    possui_energia_eletrica;
    possui_agua_encanada;
    possui_coleta_lixo;
    observacoes;
    created_at;
    updated_at;
    removed_at;
    // Getters e Setters
    get cidadaoId() {
        return this.cidadao_id;
    }
    set cidadaoId(value) {
        this.cidadao_id = value;
    }
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se a situação foi criada recentemente (últimas 24 horas)
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do registro em dias
     */
    getIdadeRegistroEmDias() {
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    /**
     * Verifica se a situação foi removida
     */
    foiRemovido() {
        return !!this.removed_at;
    }
    /**
     * Verifica se a situação está ativa
     */
    isAtivo() {
        return !this.removed_at;
    }
    /**
     * Verifica se é moradia própria
     */
    isMoradiaPropria() {
        return this.tipo_moradia === TipoMoradiaEnum.PROPRIA;
    }
    /**
     * Verifica se é moradia alugada
     */
    isMoradiaAlugada() {
        return this.tipo_moradia === TipoMoradiaEnum.ALUGADA;
    }
    /**
     * Verifica se é moradia cedida
     */
    isMoradiaCedida() {
        return this.tipo_moradia === TipoMoradiaEnum.CEDIDA;
    }
    /**
     * Verifica se é ocupação
     */
    isOcupacao() {
        return this.tipo_moradia === TipoMoradiaEnum.OCUPACAO;
    }
    /**
     * Verifica se está em situação de rua
     */
    isSituacaoRua() {
        return this.tipo_moradia === TipoMoradiaEnum.SITUACAO_RUA;
    }
    /**
     * Verifica se está em abrigo
     */
    isAbrigo() {
        return this.tipo_moradia === TipoMoradiaEnum.ABRIGO;
    }
    /**
     * Verifica se tem moradia estável (própria ou alugada)
     */
    temMoradiaEstavel() {
        return this.isMoradiaPropria() || this.isMoradiaAlugada();
    }
    /**
     * Verifica se tem moradia precária (ocupação, situação de rua, abrigo)
     */
    temMoradiaPrecaria() {
        return this.isOcupacao() || this.isSituacaoRua() || this.isAbrigo();
    }
    /**
     * Verifica se tem valor de aluguel definido
     */
    temValorAluguel() {
        return this.valor_aluguel !== null && this.valor_aluguel !== undefined && this.valor_aluguel > 0;
    }
    /**
     * Obtém o valor do aluguel formatado
     */
    getValorAluguelFormatado() {
        if (!this.temValorAluguel())
            return 'Não informado';
        return new Intl.NumberFormat('pt-BR', {
            style: 'currency',
            currency: 'BRL',
        }).format(this.valor_aluguel);
    }
    /**
     * Verifica se tem número de cômodos definido
     */
    temNumeroComodos() {
        return this.numero_comodos !== null && this.numero_comodos !== undefined && this.numero_comodos > 0;
    }
    /**
     * Verifica se a moradia é adequada (tem infraestrutura básica)
     */
    isMoradiaAdequada() {
        return this.possui_banheiro &&
            this.possui_energia_eletrica &&
            this.possui_agua_encanada &&
            this.possui_coleta_lixo;
    }
    /**
     * Conta quantos itens de infraestrutura possui
     */
    getItensInfraestrutura() {
        let count = 0;
        if (this.possui_banheiro)
            count++;
        if (this.possui_energia_eletrica)
            count++;
        if (this.possui_agua_encanada)
            count++;
        if (this.possui_coleta_lixo)
            count++;
        return count;
    }
    /**
     * Obtém a pontuação de adequação da moradia (0-100)
     */
    getPontuacaoAdequacao() {
        let pontos = 0;
        // Tipo de moradia (40 pontos)
        if (this.isMoradiaPropria())
            pontos += 40;
        else if (this.isMoradiaAlugada())
            pontos += 35;
        else if (this.isMoradiaCedida())
            pontos += 25;
        else if (this.isOcupacao())
            pontos += 15;
        else if (this.isAbrigo())
            pontos += 10;
        else if (this.isSituacaoRua())
            pontos += 0;
        // Infraestrutura (60 pontos - 15 cada)
        pontos += this.getItensInfraestrutura() * 15;
        return Math.min(pontos, 100);
    }
    /**
     * Verifica se tem tempo de moradia definido
     */
    temTempoMoradia() {
        return this.tempo_moradia !== null && this.tempo_moradia !== undefined && this.tempo_moradia > 0;
    }
    /**
     * Verifica se mora há muito tempo no local (mais de 5 anos)
     */
    moraMuitoTempo() {
        return this.temTempoMoradia() && this.tempo_moradia >= 60; // 60 meses = 5 anos
    }
    /**
     * Verifica se mora há pouco tempo no local (menos de 1 ano)
     */
    moraPoucoTempo() {
        return this.temTempoMoradia() && this.tempo_moradia < 12; // menos de 12 meses
    }
    /**
     * Obtém a descrição do tipo de moradia
     */
    getDescricaoTipoMoradia() {
        const descricoes = {
            [TipoMoradiaEnum.PROPRIA]: 'Própria',
            [TipoMoradiaEnum.ALUGADA]: 'Alugada',
            [TipoMoradiaEnum.CEDIDA]: 'Cedida',
            [TipoMoradiaEnum.OCUPACAO]: 'Ocupação',
            [TipoMoradiaEnum.SITUACAO_RUA]: 'Situação de Rua',
            [TipoMoradiaEnum.ABRIGO]: 'Abrigo',
            [TipoMoradiaEnum.OUTRO]: 'Outro',
        };
        return descricoes[this.tipo_moradia] || 'Não informado';
    }
    /**
     * Obtém a descrição do tempo de moradia
     */
    getDescricaoTempoMoradia() {
        if (!this.temTempoMoradia())
            return 'Não informado';
        if (this.tempo_moradia < 12) {
            return `${this.tempo_moradia} mês(es)`;
        }
        else {
            const anos = Math.floor(this.tempo_moradia / 12);
            const meses = this.tempo_moradia % 12;
            if (meses === 0) {
                return `${anos} ano(s)`;
            }
            else {
                return `${anos} ano(s) e ${meses} mês(es)`;
            }
        }
    }
    /**
     * Obtém lista de itens de infraestrutura disponíveis
     */
    getItensInfraestruturaDisponiveis() {
        const itens = [];
        if (this.possui_banheiro)
            itens.push('Banheiro');
        if (this.possui_energia_eletrica)
            itens.push('Energia Elétrica');
        if (this.possui_agua_encanada)
            itens.push('Água Encanada');
        if (this.possui_coleta_lixo)
            itens.push('Coleta de Lixo');
        return itens;
    }
    /**
     * Obtém lista de itens de infraestrutura faltantes
     */
    getItensInfraestruturaFaltantes() {
        const itens = [];
        if (!this.possui_banheiro)
            itens.push('Banheiro');
        if (!this.possui_energia_eletrica)
            itens.push('Energia Elétrica');
        if (!this.possui_agua_encanada)
            itens.push('Água Encanada');
        if (!this.possui_coleta_lixo)
            itens.push('Coleta de Lixo');
        return itens;
    }
    /**
     * Verifica se pertence a um cidadão específico
     */
    pertenceAoCidadao(cidadaoId) {
        return this.cidadao_id === cidadaoId;
    }
    /**
     * Obtém um resumo da situação de moradia
     */
    getSummary() {
        const tipo = this.getDescricaoTipoMoradia();
        const adequacao = this.getPontuacaoAdequacao();
        const tempo = this.temTempoMoradia() ? ` - ${this.getDescricaoTempoMoradia()}` : '';
        return `${tipo} (${adequacao}% adequada)${tempo}`;
    }
    /**
     * Gera uma chave única para a situação
     */
    getUniqueKey() {
        return `situacao_moradia_${this.cidadao_id}`;
    }
    /**
     * Verifica se a situação é consistente
     */
    isConsistente() {
        // Verifica se tem cidadão
        if (!this.cidadao_id)
            return false;
        // Se é alugada, deve ter valor do aluguel
        if (this.isMoradiaAlugada() && !this.temValorAluguel()) {
            return false;
        }
        // Se tem valor de aluguel, deve ser moradia alugada
        if (this.temValorAluguel() && !this.isMoradiaAlugada()) {
            return false;
        }
        // Situação de rua não deveria ter infraestrutura
        if (this.isSituacaoRua() && this.getItensInfraestrutura() > 0) {
            return false;
        }
        return true;
    }
    /**
     * Verifica se pode ser removida
     */
    podeSerRemovido() {
        // Não pode remover se já foi removido
        if (this.foiRemovido())
            return false;
        return true;
    }
    /**
     * Clona a situação de moradia (sem ID)
     */
    clone() {
        return {
            cidadao_id: this.cidadao_id,
            tipo_moradia: this.tipo_moradia,
            numero_comodos: this.numero_comodos,
            valor_aluguel: this.valor_aluguel,
            tempo_moradia: this.tempo_moradia,
            possui_banheiro: this.possui_banheiro,
            possui_energia_eletrica: this.possui_energia_eletrica,
            possui_agua_encanada: this.possui_agua_encanada,
            possui_coleta_lixo: this.possui_coleta_lixo,
            observacoes: this.observacoes,
        };
    }
    /**
     * Verifica se é elegível para auxílio moradia
     */
    isElegivelAuxilioMoradia() {
        // Situações que podem ser elegíveis para auxílio
        return this.isMoradiaAlugada() ||
            this.temMoradiaPrecaria() ||
            !this.isMoradiaAdequada();
    }
    /**
     * Verifica se é prioritário para programas habitacionais
     */
    isPrioritarioHabitacao() {
        return this.isSituacaoRua() ||
            this.isAbrigo() ||
            this.isOcupacao() ||
            this.getPontuacaoAdequacao() < 50;
    }
    /**
     * Obtém o nível de vulnerabilidade habitacional
     */
    getNivelVulnerabilidade() {
        if (this.isSituacaoRua())
            return 'CRITICO';
        if (this.isAbrigo() || this.isOcupacao())
            return 'ALTO';
        if (!this.isMoradiaAdequada() || this.getPontuacaoAdequacao() < 50)
            return 'MEDIO';
        return 'BAIXO';
    }
    /**
     * Formata a data de criação
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de atualização
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleDateString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            tipo_moradia: this.tipo_moradia,
            numero_comodos: this.numero_comodos,
            tempo_moradia: this.tempo_moradia,
            possui_banheiro: this.possui_banheiro,
            possui_energia_eletrica: this.possui_energia_eletrica,
            possui_agua_encanada: this.possui_agua_encanada,
            possui_coleta_lixo: this.possui_coleta_lixo,
            created_at: this.created_at,
            updated_at: this.updated_at,
        };
    }
    /**
     * Obtém sugestões de melhoria para a situação de moradia
     */
    getSugestoesMelhoria() {
        const sugestoes = [];
        if (this.temMoradiaPrecaria()) {
            sugestoes.push('Buscar programas habitacionais ou auxílio moradia');
        }
        if (!this.isMoradiaAdequada()) {
            const faltantes = this.getItensInfraestruturaFaltantes();
            sugestoes.push(`Melhorar infraestrutura: ${faltantes.join(', ')}`);
        }
        if (this.isMoradiaAlugada() && !this.temValorAluguel()) {
            sugestoes.push('Informar valor do aluguel para análise de benefícios');
        }
        if (!this.temTempoMoradia()) {
            sugestoes.push('Informar tempo de moradia no local atual');
        }
        if (!this.temNumeroComodos()) {
            sugestoes.push('Informar número de cômodos da moradia');
        }
        if (!this.isConsistente()) {
            sugestoes.push('Verificar e corrigir inconsistências nos dados');
        }
        return sugestoes;
    }
    /**
     * Verifica se precisa de atualização (dados muito antigos)
     */
    precisaAtualizacao() {
        // Dados com mais de 6 meses podem precisar de atualização
        const seiseMesesAtras = new Date();
        seiseMesesAtras.setMonth(seiseMesesAtras.getMonth() - 6);
        return this.updated_at < seiseMesesAtras;
    }
    /**
     * Obtém estatísticas da situação de moradia
     */
    getEstatisticas() {
        return {
            pontuacaoAdequacao: this.getPontuacaoAdequacao(),
            nivelVulnerabilidade: this.getNivelVulnerabilidade(),
            itensInfraestrutura: this.getItensInfraestrutura(),
            tempoMoradia: this.getDescricaoTempoMoradia(),
            elegibilidadeAuxilio: this.isElegivelAuxilioMoradia(),
        };
    }
};
exports.SituacaoMoradia = SituacaoMoradia;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], SituacaoMoradia.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do cidadão é obrigatório' }),
    __metadata("design:type", String)
], SituacaoMoradia.prototype, "cidadao_id", void 0);
__decorate([
    (0, typeorm_1.OneToOne)(() => cidadao_entity_1.Cidadao, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'cidadao_id' }),
    __metadata("design:type", typeof (_a = typeof cidadao_entity_1.Cidadao !== "undefined" && cidadao_entity_1.Cidadao) === "function" ? _a : Object)
], SituacaoMoradia.prototype, "cidadao", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: TipoMoradiaEnum,
        enumName: 'tipo_moradia_enum',
        nullable: true,
    }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsEnum)(TipoMoradiaEnum, { message: 'Tipo de moradia inválido' }),
    __metadata("design:type", String)
], SituacaoMoradia.prototype, "tipo_moradia", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Number)
], SituacaoMoradia.prototype, "numero_comodos", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Valor do aluguel deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Valor do aluguel não pode ser negativo' }),
    __metadata("design:type", Number)
], SituacaoMoradia.prototype, "valor_aluguel", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Tempo de moradia deve ser um número' }),
    __metadata("design:type", Number)
], SituacaoMoradia.prototype, "tempo_moradia", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], SituacaoMoradia.prototype, "possui_banheiro", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], SituacaoMoradia.prototype, "possui_energia_eletrica", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], SituacaoMoradia.prototype, "possui_agua_encanada", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", Boolean)
], SituacaoMoradia.prototype, "possui_coleta_lixo", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], SituacaoMoradia.prototype, "observacoes", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], SituacaoMoradia.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], SituacaoMoradia.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], SituacaoMoradia.prototype, "removed_at", void 0);
exports.SituacaoMoradia = SituacaoMoradia = __decorate([
    (0, typeorm_1.Entity)('situacao_moradia'),
    (0, typeorm_1.Index)(['cidadao_id'], { unique: true })
], SituacaoMoradia);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxzaXR1YWNhby1tb3JhZGlhLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBVWlCO0FBQ2pCLHFEQUFnRjtBQUNoRixxREFBMkM7QUFFM0MsSUFBWSxlQVFYO0FBUkQsV0FBWSxlQUFlO0lBQ3pCLHNDQUFtQixDQUFBO0lBQ25CLHNDQUFtQixDQUFBO0lBQ25CLG9DQUFpQixDQUFBO0lBQ2pCLHdDQUFxQixDQUFBO0lBQ3JCLGdEQUE2QixDQUFBO0lBQzdCLG9DQUFpQixDQUFBO0lBQ2pCLGtDQUFlLENBQUE7QUFDakIsQ0FBQyxFQVJXLGVBQWUsK0JBQWYsZUFBZSxRQVExQjtBQUlNLElBQU0sZUFBZSxHQUFyQixNQUFNLGVBQWU7SUFFMUIsRUFBRSxDQUFTO0lBSVgsVUFBVSxDQUFTO0lBSW5CLE9BQU8sQ0FBVTtJQVVqQixZQUFZLENBQWtCO0lBSTlCLGNBQWMsQ0FBUztJQU12QixhQUFhLENBQVM7SUFLdEIsYUFBYSxDQUFTO0lBSXRCLGVBQWUsQ0FBVTtJQUl6Qix1QkFBdUIsQ0FBVTtJQUlqQyxvQkFBb0IsQ0FBVTtJQUk5QixrQkFBa0IsQ0FBVTtJQUk1QixXQUFXLENBQVM7SUFHcEIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUdqQixVQUFVLENBQU87SUFFakIsb0JBQW9CO0lBQ3BCLElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxTQUFTLENBQUMsS0FBYTtRQUN6QixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFD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QkFBVSxHQUFFOzs2REFDaUI7QUFJOUI7SUFGQyxJQUFBLGdCQUFNLEVBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDMUIsSUFBQSw0QkFBVSxHQUFFOzsyREFDZTtBQUk1QjtJQUZDLElBQUEsZ0JBQU0sRUFBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUMxQixJQUFBLDRCQUFVLEdBQUU7O29EQUNPO0FBR3BCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7bURBQUM7QUFHakI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTttREFBQztBQUdqQjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1AsSUFBSSxvQkFBSixJQUFJO21EQUFDOzBCQWhFTixlQUFlO0lBRjNCLElBQUEsZ0JBQU0sRUFBQyxrQkFBa0IsQ0FBQztJQUMxQixJQUFBLGVBQUssRUFBQyxDQUFDLFlBQVksQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0dBQzNCLGVBQWUsQ0E2Z0IzQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcZW50aXRpZXNcXHNpdHVhY2FvLW1vcmFkaWEuZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEVudGl0eSxcbiAgUHJpbWFyeUdlbmVyYXRlZENvbHVtbixcbiAgQ29sdW1uLFxuICBDcmVhdGVEYXRlQ29sdW1uLFxuICBVcGRhdGVEYXRlQ29sdW1uLFxuICBEZWxldGVEYXRlQ29sdW1uLFxuICBPbmVUb09uZSxcbiAgSm9pbkNvbHVtbixcbiAgSW5kZXgsXG59IGZyb20gJ3R5cGVvcm0nO1xuaW1wb3J0IHsgSXNOb3RFbXB0eSwgSXNPcHRpb25hbCwgSXNOdW1iZXIsIE1pbiwgSXNFbnVtIH0gZnJvbSAnY2xhc3MtdmFsaWRhdG9yJztcbmltcG9ydCB7IENpZGFkYW8gfSBmcm9tICcuL2NpZGFkYW8uZW50aXR5JztcblxuZXhwb3J0IGVudW0gVGlwb01vcmFkaWFFbnVtIHtcbiAgUFJPUFJJQSA9ICdwcm9wcmlhJyxcbiAgQUxVR0FEQSA9ICdhbHVnYWRhJyxcbiAgQ0VESURBID0gJ2NlZGlkYScsXG4gIE9DVVBBQ0FPID0gJ29jdXBhY2FvJyxcbiAgU0lUVUFDQU9fUlVBID0gJ3NpdHVhY2FvX3J1YScsXG4gIEFCUklHTyA9ICdhYnJpZ28nLFxuICBPVVRSTyA9ICdvdXRybycsXG59XG5cbkBFbnRpdHkoJ3NpdHVhY2FvX21vcmFkaWEnKVxuQEluZGV4KFsnY2lkYWRhb19pZCddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuZXhwb3J0IGNsYXNzIFNpdHVhY2FvTW9yYWRpYSB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSUQgZG8gY2lkYWTDo28gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBjaWRhZGFvX2lkOiBzdHJpbmc7XG5cbiAgQE9uZVRvT25lKCgpID0+IENpZGFkYW8sIHsgb25EZWxldGU6ICdDQVNDQURFJyB9KVxuICBASm9pbkNvbHVtbih7IG5hbWU6ICdjaWRhZGFvX2lkJyB9KVxuICBjaWRhZGFvOiBDaWRhZGFvO1xuXG4gIEBDb2x1bW4oe1xuICAgIHR5cGU6ICdlbnVtJyxcbiAgICBlbnVtOiBUaXBvTW9yYWRpYUVudW0sXG4gICAgZW51bU5hbWU6ICd0aXBvX21vcmFkaWFfZW51bScsXG4gICAgbnVsbGFibGU6IHRydWUsXG4gIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzRW51bShUaXBvTW9yYWRpYUVudW0sIHsgbWVzc2FnZTogJ1RpcG8gZGUgbW9yYWRpYSBpbnbDoWxpZG8nIH0pXG4gIHRpcG9fbW9yYWRpYTogVGlwb01vcmFkaWFFbnVtO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIG51bWVyb19jb21vZG9zOiBudW1iZXI7XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdWYWxvciBkbyBhbHVndWVsIGRldmUgc2VyIHVtIG7Dum1lcm8nIH0pXG4gIEBNaW4oMCwgeyBtZXNzYWdlOiAnVmFsb3IgZG8gYWx1Z3VlbCBuw6NvIHBvZGUgc2VyIG5lZ2F0aXZvJyB9KVxuICB2YWxvcl9hbHVndWVsOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdUZW1wbyBkZSBtb3JhZGlhIGRldmUgc2VyIHVtIG7Dum1lcm8nIH0pXG4gIHRlbXBvX21vcmFkaWE6IG51bWJlcjtcblxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcbiAgQElzT3B0aW9uYWwoKVxuICBwb3NzdWlfYmFuaGVpcm86IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgcG9zc3VpX2VuZXJnaWFfZWxldHJpY2E6IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgcG9zc3VpX2FndWFfZW5jYW5hZGE6IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgcG9zc3VpX2NvbGV0YV9saXhvOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIG9ic2VydmFjb2VzOiBzdHJpbmc7XG5cbiAgQENyZWF0ZURhdGVDb2x1bW4oKVxuICBjcmVhdGVkX2F0OiBEYXRlO1xuXG4gIEBVcGRhdGVEYXRlQ29sdW1uKClcbiAgdXBkYXRlZF9hdDogRGF0ZTtcblxuICBARGVsZXRlRGF0ZUNvbHVtbigpXG4gIHJlbW92ZWRfYXQ6IERhdGU7XG5cbiAgLy8gR2V0dGVycyBlIFNldHRlcnNcbiAgZ2V0IGNpZGFkYW9JZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNpZGFkYW9faWQ7XG4gIH1cblxuICBzZXQgY2lkYWRhb0lkKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNpZGFkYW9faWQgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBjcmVhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdDtcbiAgfVxuXG4gIGdldCB1cGRhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdDtcbiAgfVxuXG4gIGdldCByZW1vdmVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIFV0aWxpdMOhcmlvc1xuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBhIHNpdHVhw6fDo28gZm9pIGNyaWFkYSByZWNlbnRlbWVudGUgKMO6bHRpbWFzIDI0IGhvcmFzKVxuICAgKi9cbiAgaXNDcmlhZG9SZWNlbnRlbWVudGUoKTogYm9vbGVhbiB7XG4gICAgY29uc3QgYWdvcmEgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHVtRGlhQXRyYXMgPSBuZXcgRGF0ZShhZ29yYS5nZXRUaW1lKCkgLSAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0ID4gdW1EaWFBdHJhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhIGEgaWRhZGUgZG8gcmVnaXN0cm8gZW0gZGlhc1xuICAgKi9cbiAgZ2V0SWRhZGVSZWdpc3Ryb0VtRGlhcygpOiBudW1iZXIge1xuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmVGltZSA9IE1hdGguYWJzKGFnb3JhLmdldFRpbWUoKSAtIHRoaXMuY3JlYXRlZF9hdC5nZXRUaW1lKCkpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGEgc2l0dWHDp8OjbyBmb2kgcmVtb3ZpZGFcbiAgICovXG4gIGZvaVJlbW92aWRvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBhIHNpdHVhw6fDo28gZXN0w6EgYXRpdmFcbiAgICovXG4gIGlzQXRpdm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICF0aGlzLnJlbW92ZWRfYXQ7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgbW9yYWRpYSBwcsOzcHJpYVxuICAgKi9cbiAgaXNNb3JhZGlhUHJvcHJpYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50aXBvX21vcmFkaWEgPT09IFRpcG9Nb3JhZGlhRW51bS5QUk9QUklBO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIG1vcmFkaWEgYWx1Z2FkYVxuICAgKi9cbiAgaXNNb3JhZGlhQWx1Z2FkYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50aXBvX21vcmFkaWEgPT09IFRpcG9Nb3JhZGlhRW51bS5BTFVHQURBO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIG1vcmFkaWEgY2VkaWRhXG4gICAqL1xuICBpc01vcmFkaWFDZWRpZGEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlwb19tb3JhZGlhID09PSBUaXBvTW9yYWRpYUVudW0uQ0VESURBO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIG9jdXBhw6fDo29cbiAgICovXG4gIGlzT2N1cGFjYW8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlwb19tb3JhZGlhID09PSBUaXBvTW9yYWRpYUVudW0uT0NVUEFDQU87XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgZXN0w6EgZW0gc2l0dWHDp8OjbyBkZSBydWFcbiAgICovXG4gIGlzU2l0dWFjYW9SdWEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlwb19tb3JhZGlhID09PSBUaXBvTW9yYWRpYUVudW0uU0lUVUFDQU9fUlVBO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGVzdMOhIGVtIGFicmlnb1xuICAgKi9cbiAgaXNBYnJpZ28oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlwb19tb3JhZGlhID09PSBUaXBvTW9yYWRpYUVudW0uQUJSSUdPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSBtb3JhZGlhIGVzdMOhdmVsIChwcsOzcHJpYSBvdSBhbHVnYWRhKVxuICAgKi9cbiAgdGVtTW9yYWRpYUVzdGF2ZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNNb3JhZGlhUHJvcHJpYSgpIHx8IHRoaXMuaXNNb3JhZGlhQWx1Z2FkYSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSBtb3JhZGlhIHByZWPDoXJpYSAob2N1cGHDp8Ojbywgc2l0dWHDp8OjbyBkZSBydWEsIGFicmlnbylcbiAgICovXG4gIHRlbU1vcmFkaWFQcmVjYXJpYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc09jdXBhY2FvKCkgfHwgdGhpcy5pc1NpdHVhY2FvUnVhKCkgfHwgdGhpcy5pc0FicmlnbygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHRlbSB2YWxvciBkZSBhbHVndWVsIGRlZmluaWRvXG4gICAqL1xuICB0ZW1WYWxvckFsdWd1ZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudmFsb3JfYWx1Z3VlbCAhPT0gbnVsbCAmJiB0aGlzLnZhbG9yX2FsdWd1ZWwgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnZhbG9yX2FsdWd1ZWwgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBvIHZhbG9yIGRvIGFsdWd1ZWwgZm9ybWF0YWRvXG4gICAqL1xuICBnZXRWYWxvckFsdWd1ZWxGb3JtYXRhZG8oKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMudGVtVmFsb3JBbHVndWVsKCkpIHJldHVybiAnTsOjbyBpbmZvcm1hZG8nO1xuICAgIHJldHVybiBuZXcgSW50bC5OdW1iZXJGb3JtYXQoJ3B0LUJSJywge1xuICAgICAgc3R5bGU6ICdjdXJyZW5jeScsXG4gICAgICBjdXJyZW5jeTogJ0JSTCcsXG4gICAgfSkuZm9ybWF0KHRoaXMudmFsb3JfYWx1Z3VlbCk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIG7Dum1lcm8gZGUgY8O0bW9kb3MgZGVmaW5pZG9cbiAgICovXG4gIHRlbU51bWVyb0NvbW9kb3MoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubnVtZXJvX2NvbW9kb3MgIT09IG51bGwgJiYgdGhpcy5udW1lcm9fY29tb2RvcyAhPT0gdW5kZWZpbmVkICYmIHRoaXMubnVtZXJvX2NvbW9kb3MgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIGEgbW9yYWRpYSDDqSBhZGVxdWFkYSAodGVtIGluZnJhZXN0cnV0dXJhIGLDoXNpY2EpXG4gICAqL1xuICBpc01vcmFkaWFBZGVxdWFkYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wb3NzdWlfYmFuaGVpcm8gJiYgXG4gICAgICAgICAgIHRoaXMucG9zc3VpX2VuZXJnaWFfZWxldHJpY2EgJiYgXG4gICAgICAgICAgIHRoaXMucG9zc3VpX2FndWFfZW5jYW5hZGEgJiYgXG4gICAgICAgICAgIHRoaXMucG9zc3VpX2NvbGV0YV9saXhvO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRhIHF1YW50b3MgaXRlbnMgZGUgaW5mcmFlc3RydXR1cmEgcG9zc3VpXG4gICAqL1xuICBnZXRJdGVuc0luZnJhZXN0cnV0dXJhKCk6IG51bWJlciB7XG4gICAgbGV0IGNvdW50ID0gMDtcbiAgICBpZiAodGhpcy5wb3NzdWlfYmFuaGVpcm8pIGNvdW50Kys7XG4gICAgaWYgKHRoaXMucG9zc3VpX2VuZXJnaWFfZWxldHJpY2EpIGNvdW50Kys7XG4gICAgaWYgKHRoaXMucG9zc3VpX2FndWFfZW5jYW5hZGEpIGNvdW50Kys7XG4gICAgaWYgKHRoaXMucG9zc3VpX2NvbGV0YV9saXhvKSBjb3VudCsrO1xuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSBwb250dWHDp8OjbyBkZSBhZGVxdWHDp8OjbyBkYSBtb3JhZGlhICgwLTEwMClcbiAgICovXG4gIGdldFBvbnR1YWNhb0FkZXF1YWNhbygpOiBudW1iZXIge1xuICAgIGxldCBwb250b3MgPSAwO1xuICAgIFxuICAgIC8vIFRpcG8gZGUgbW9yYWRpYSAoNDAgcG9udG9zKVxuICAgIGlmICh0aGlzLmlzTW9yYWRpYVByb3ByaWEoKSkgcG9udG9zICs9IDQwO1xuICAgIGVsc2UgaWYgKHRoaXMuaXNNb3JhZGlhQWx1Z2FkYSgpKSBwb250b3MgKz0gMzU7XG4gICAgZWxzZSBpZiAodGhpcy5pc01vcmFkaWFDZWRpZGEoKSkgcG9udG9zICs9IDI1O1xuICAgIGVsc2UgaWYgKHRoaXMuaXNPY3VwYWNhbygpKSBwb250b3MgKz0gMTU7XG4gICAgZWxzZSBpZiAodGhpcy5pc0FicmlnbygpKSBwb250b3MgKz0gMTA7XG4gICAgZWxzZSBpZiAodGhpcy5pc1NpdHVhY2FvUnVhKCkpIHBvbnRvcyArPSAwO1xuICAgIFxuICAgIC8vIEluZnJhZXN0cnV0dXJhICg2MCBwb250b3MgLSAxNSBjYWRhKVxuICAgIHBvbnRvcyArPSB0aGlzLmdldEl0ZW5zSW5mcmFlc3RydXR1cmEoKSAqIDE1O1xuICAgIFxuICAgIHJldHVybiBNYXRoLm1pbihwb250b3MsIDEwMCk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgdGVtIHRlbXBvIGRlIG1vcmFkaWEgZGVmaW5pZG9cbiAgICovXG4gIHRlbVRlbXBvTW9yYWRpYSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wb19tb3JhZGlhICE9PSBudWxsICYmIHRoaXMudGVtcG9fbW9yYWRpYSAhPT0gdW5kZWZpbmVkICYmIHRoaXMudGVtcG9fbW9yYWRpYSA+IDA7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgbW9yYSBow6EgbXVpdG8gdGVtcG8gbm8gbG9jYWwgKG1haXMgZGUgNSBhbm9zKVxuICAgKi9cbiAgbW9yYU11aXRvVGVtcG8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGVtVGVtcG9Nb3JhZGlhKCkgJiYgdGhpcy50ZW1wb19tb3JhZGlhID49IDYwOyAvLyA2MCBtZXNlcyA9IDUgYW5vc1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG1vcmEgaMOhIHBvdWNvIHRlbXBvIG5vIGxvY2FsIChtZW5vcyBkZSAxIGFubylcbiAgICovXG4gIG1vcmFQb3Vjb1RlbXBvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRlbVRlbXBvTW9yYWRpYSgpICYmIHRoaXMudGVtcG9fbW9yYWRpYSA8IDEyOyAvLyBtZW5vcyBkZSAxMiBtZXNlc1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIGRlc2NyacOnw6NvIGRvIHRpcG8gZGUgbW9yYWRpYVxuICAgKi9cbiAgZ2V0RGVzY3JpY2FvVGlwb01vcmFkaWEoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXNjcmljb2VzID0ge1xuICAgICAgW1RpcG9Nb3JhZGlhRW51bS5QUk9QUklBXTogJ1Byw7NwcmlhJyxcbiAgICAgIFtUaXBvTW9yYWRpYUVudW0uQUxVR0FEQV06ICdBbHVnYWRhJyxcbiAgICAgIFtUaXBvTW9yYWRpYUVudW0uQ0VESURBXTogJ0NlZGlkYScsXG4gICAgICBbVGlwb01vcmFkaWFFbnVtLk9DVVBBQ0FPXTogJ09jdXBhw6fDo28nLFxuICAgICAgW1RpcG9Nb3JhZGlhRW51bS5TSVRVQUNBT19SVUFdOiAnU2l0dWHDp8OjbyBkZSBSdWEnLFxuICAgICAgW1RpcG9Nb3JhZGlhRW51bS5BQlJJR09dOiAnQWJyaWdvJyxcbiAgICAgIFtUaXBvTW9yYWRpYUVudW0uT1VUUk9dOiAnT3V0cm8nLFxuICAgIH07XG4gICAgcmV0dXJuIGRlc2NyaWNvZXNbdGhpcy50aXBvX21vcmFkaWFdIHx8ICdOw6NvIGluZm9ybWFkbyc7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZGVzY3Jpw6fDo28gZG8gdGVtcG8gZGUgbW9yYWRpYVxuICAgKi9cbiAgZ2V0RGVzY3JpY2FvVGVtcG9Nb3JhZGlhKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnRlbVRlbXBvTW9yYWRpYSgpKSByZXR1cm4gJ07Do28gaW5mb3JtYWRvJztcbiAgICBcbiAgICBpZiAodGhpcy50ZW1wb19tb3JhZGlhIDwgMTIpIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnRlbXBvX21vcmFkaWF9IG3DqnMoZXMpYDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYW5vcyA9IE1hdGguZmxvb3IodGhpcy50ZW1wb19tb3JhZGlhIC8gMTIpO1xuICAgICAgY29uc3QgbWVzZXMgPSB0aGlzLnRlbXBvX21vcmFkaWEgJSAxMjtcbiAgICAgIGlmIChtZXNlcyA9PT0gMCkge1xuICAgICAgICByZXR1cm4gYCR7YW5vc30gYW5vKHMpYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgJHthbm9zfSBhbm8ocykgZSAke21lc2VzfSBtw6pzKGVzKWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBsaXN0YSBkZSBpdGVucyBkZSBpbmZyYWVzdHJ1dHVyYSBkaXNwb27DrXZlaXNcbiAgICovXG4gIGdldEl0ZW5zSW5mcmFlc3RydXR1cmFEaXNwb25pdmVpcygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgaXRlbnM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHRoaXMucG9zc3VpX2JhbmhlaXJvKSBpdGVucy5wdXNoKCdCYW5oZWlybycpO1xuICAgIGlmICh0aGlzLnBvc3N1aV9lbmVyZ2lhX2VsZXRyaWNhKSBpdGVucy5wdXNoKCdFbmVyZ2lhIEVsw6l0cmljYScpO1xuICAgIGlmICh0aGlzLnBvc3N1aV9hZ3VhX2VuY2FuYWRhKSBpdGVucy5wdXNoKCfDgWd1YSBFbmNhbmFkYScpO1xuICAgIGlmICh0aGlzLnBvc3N1aV9jb2xldGFfbGl4bykgaXRlbnMucHVzaCgnQ29sZXRhIGRlIExpeG8nKTtcbiAgICByZXR1cm4gaXRlbnM7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGxpc3RhIGRlIGl0ZW5zIGRlIGluZnJhZXN0cnV0dXJhIGZhbHRhbnRlc1xuICAgKi9cbiAgZ2V0SXRlbnNJbmZyYWVzdHJ1dHVyYUZhbHRhbnRlcygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgaXRlbnM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKCF0aGlzLnBvc3N1aV9iYW5oZWlybykgaXRlbnMucHVzaCgnQmFuaGVpcm8nKTtcbiAgICBpZiAoIXRoaXMucG9zc3VpX2VuZXJnaWFfZWxldHJpY2EpIGl0ZW5zLnB1c2goJ0VuZXJnaWEgRWzDqXRyaWNhJyk7XG4gICAgaWYgKCF0aGlzLnBvc3N1aV9hZ3VhX2VuY2FuYWRhKSBpdGVucy5wdXNoKCfDgWd1YSBFbmNhbmFkYScpO1xuICAgIGlmICghdGhpcy5wb3NzdWlfY29sZXRhX2xpeG8pIGl0ZW5zLnB1c2goJ0NvbGV0YSBkZSBMaXhvJyk7XG4gICAgcmV0dXJuIGl0ZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHBlcnRlbmNlIGEgdW0gY2lkYWTDo28gZXNwZWPDrWZpY29cbiAgICovXG4gIHBlcnRlbmNlQW9DaWRhZGFvKGNpZGFkYW9JZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY2lkYWRhb19pZCA9PT0gY2lkYWRhb0lkO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSB1bSByZXN1bW8gZGEgc2l0dWHDp8OjbyBkZSBtb3JhZGlhXG4gICAqL1xuICBnZXRTdW1tYXJ5KCk6IHN0cmluZyB7XG4gICAgY29uc3QgdGlwbyA9IHRoaXMuZ2V0RGVzY3JpY2FvVGlwb01vcmFkaWEoKTtcbiAgICBjb25zdCBhZGVxdWFjYW8gPSB0aGlzLmdldFBvbnR1YWNhb0FkZXF1YWNhbygpO1xuICAgIGNvbnN0IHRlbXBvID0gdGhpcy50ZW1UZW1wb01vcmFkaWEoKSA/IGAgLSAke3RoaXMuZ2V0RGVzY3JpY2FvVGVtcG9Nb3JhZGlhKCl9YCA6ICcnO1xuICAgIHJldHVybiBgJHt0aXBvfSAoJHthZGVxdWFjYW99JSBhZGVxdWFkYSkke3RlbXBvfWA7XG4gIH1cblxuICAvKipcbiAgICogR2VyYSB1bWEgY2hhdmUgw7puaWNhIHBhcmEgYSBzaXR1YcOnw6NvXG4gICAqL1xuICBnZXRVbmlxdWVLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHNpdHVhY2FvX21vcmFkaWFfJHt0aGlzLmNpZGFkYW9faWR9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBhIHNpdHVhw6fDo28gw6kgY29uc2lzdGVudGVcbiAgICovXG4gIGlzQ29uc2lzdGVudGUoKTogYm9vbGVhbiB7XG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIGNpZGFkw6NvXG4gICAgaWYgKCF0aGlzLmNpZGFkYW9faWQpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICAvLyBTZSDDqSBhbHVnYWRhLCBkZXZlIHRlciB2YWxvciBkbyBhbHVndWVsXG4gICAgaWYgKHRoaXMuaXNNb3JhZGlhQWx1Z2FkYSgpICYmICF0aGlzLnRlbVZhbG9yQWx1Z3VlbCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIFNlIHRlbSB2YWxvciBkZSBhbHVndWVsLCBkZXZlIHNlciBtb3JhZGlhIGFsdWdhZGFcbiAgICBpZiAodGhpcy50ZW1WYWxvckFsdWd1ZWwoKSAmJiAhdGhpcy5pc01vcmFkaWFBbHVnYWRhKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2l0dWHDp8OjbyBkZSBydWEgbsOjbyBkZXZlcmlhIHRlciBpbmZyYWVzdHJ1dHVyYVxuICAgIGlmICh0aGlzLmlzU2l0dWFjYW9SdWEoKSAmJiB0aGlzLmdldEl0ZW5zSW5mcmFlc3RydXR1cmEoKSA+IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgcG9kZSBzZXIgcmVtb3ZpZGFcbiAgICovXG4gIHBvZGVTZXJSZW1vdmlkbygpOiBib29sZWFuIHtcbiAgICAvLyBOw6NvIHBvZGUgcmVtb3ZlciBzZSBqw6EgZm9pIHJlbW92aWRvXG4gICAgaWYgKHRoaXMuZm9pUmVtb3ZpZG8oKSkgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25hIGEgc2l0dWHDp8OjbyBkZSBtb3JhZGlhIChzZW0gSUQpXG4gICAqL1xuICBjbG9uZSgpOiBQYXJ0aWFsPFNpdHVhY2FvTW9yYWRpYT4ge1xuICAgIHJldHVybiB7XG4gICAgICBjaWRhZGFvX2lkOiB0aGlzLmNpZGFkYW9faWQsXG4gICAgICB0aXBvX21vcmFkaWE6IHRoaXMudGlwb19tb3JhZGlhLFxuICAgICAgbnVtZXJvX2NvbW9kb3M6IHRoaXMubnVtZXJvX2NvbW9kb3MsXG4gICAgICB2YWxvcl9hbHVndWVsOiB0aGlzLnZhbG9yX2FsdWd1ZWwsXG4gICAgICB0ZW1wb19tb3JhZGlhOiB0aGlzLnRlbXBvX21vcmFkaWEsXG4gICAgICBwb3NzdWlfYmFuaGVpcm86IHRoaXMucG9zc3VpX2JhbmhlaXJvLFxuICAgICAgcG9zc3VpX2VuZXJnaWFfZWxldHJpY2E6IHRoaXMucG9zc3VpX2VuZXJnaWFfZWxldHJpY2EsXG4gICAgICBwb3NzdWlfYWd1YV9lbmNhbmFkYTogdGhpcy5wb3NzdWlfYWd1YV9lbmNhbmFkYSxcbiAgICAgIHBvc3N1aV9jb2xldGFfbGl4bzogdGhpcy5wb3NzdWlfY29sZXRhX2xpeG8sXG4gICAgICBvYnNlcnZhY29lczogdGhpcy5vYnNlcnZhY29lcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGVsZWfDrXZlbCBwYXJhIGF1eMOtbGlvIG1vcmFkaWFcbiAgICovXG4gIGlzRWxlZ2l2ZWxBdXhpbGlvTW9yYWRpYSgpOiBib29sZWFuIHtcbiAgICAvLyBTaXR1YcOnw7VlcyBxdWUgcG9kZW0gc2VyIGVsZWfDrXZlaXMgcGFyYSBhdXjDrWxpb1xuICAgIHJldHVybiB0aGlzLmlzTW9yYWRpYUFsdWdhZGEoKSB8fCBcbiAgICAgICAgICAgdGhpcy50ZW1Nb3JhZGlhUHJlY2FyaWEoKSB8fCBcbiAgICAgICAgICAgIXRoaXMuaXNNb3JhZGlhQWRlcXVhZGEoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBwcmlvcml0w6FyaW8gcGFyYSBwcm9ncmFtYXMgaGFiaXRhY2lvbmFpc1xuICAgKi9cbiAgaXNQcmlvcml0YXJpb0hhYml0YWNhbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pc1NpdHVhY2FvUnVhKCkgfHwgXG4gICAgICAgICAgIHRoaXMuaXNBYnJpZ28oKSB8fCBcbiAgICAgICAgICAgdGhpcy5pc09jdXBhY2FvKCkgfHwgXG4gICAgICAgICAgIHRoaXMuZ2V0UG9udHVhY2FvQWRlcXVhY2FvKCkgPCA1MDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyBuw612ZWwgZGUgdnVsbmVyYWJpbGlkYWRlIGhhYml0YWNpb25hbFxuICAgKi9cbiAgZ2V0Tml2ZWxWdWxuZXJhYmlsaWRhZGUoKTogJ0JBSVhPJyB8ICdNRURJTycgfCAnQUxUTycgfCAnQ1JJVElDTycge1xuICAgIGlmICh0aGlzLmlzU2l0dWFjYW9SdWEoKSkgcmV0dXJuICdDUklUSUNPJztcbiAgICBpZiAodGhpcy5pc0FicmlnbygpIHx8IHRoaXMuaXNPY3VwYWNhbygpKSByZXR1cm4gJ0FMVE8nO1xuICAgIGlmICghdGhpcy5pc01vcmFkaWFBZGVxdWFkYSgpIHx8IHRoaXMuZ2V0UG9udHVhY2FvQWRlcXVhY2FvKCkgPCA1MCkgcmV0dXJuICdNRURJTyc7XG4gICAgcmV0dXJuICdCQUlYTyc7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgY3JpYcOnw6NvXG4gICAqL1xuICBnZXRDcmlhY2FvRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdC50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0YSBhIGRhdGEgZGUgYXR1YWxpemHDp8Ojb1xuICAgKi9cbiAgZ2V0QXR1YWxpemFjYW9Gb3JtYXRhZGEoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0LnRvTG9jYWxlRGF0ZVN0cmluZygncHQtQlInKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgaW5mb3JtYcOnw7VlcyBzZW5zw612ZWlzIHBhcmEgbG9nc1xuICAgKi9cbiAgdG9TYWZlTG9nKCk6IFBhcnRpYWw8U2l0dWFjYW9Nb3JhZGlhPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgdGlwb19tb3JhZGlhOiB0aGlzLnRpcG9fbW9yYWRpYSxcbiAgICAgIG51bWVyb19jb21vZG9zOiB0aGlzLm51bWVyb19jb21vZG9zLFxuICAgICAgdGVtcG9fbW9yYWRpYTogdGhpcy50ZW1wb19tb3JhZGlhLFxuICAgICAgcG9zc3VpX2JhbmhlaXJvOiB0aGlzLnBvc3N1aV9iYW5oZWlybyxcbiAgICAgIHBvc3N1aV9lbmVyZ2lhX2VsZXRyaWNhOiB0aGlzLnBvc3N1aV9lbmVyZ2lhX2VsZXRyaWNhLFxuICAgICAgcG9zc3VpX2FndWFfZW5jYW5hZGE6IHRoaXMucG9zc3VpX2FndWFfZW5jYW5hZGEsXG4gICAgICBwb3NzdWlfY29sZXRhX2xpeG86IHRoaXMucG9zc3VpX2NvbGV0YV9saXhvLFxuICAgICAgY3JlYXRlZF9hdDogdGhpcy5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogdGhpcy51cGRhdGVkX2F0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIHN1Z2VzdMO1ZXMgZGUgbWVsaG9yaWEgcGFyYSBhIHNpdHVhw6fDo28gZGUgbW9yYWRpYVxuICAgKi9cbiAgZ2V0U3VnZXN0b2VzTWVsaG9yaWEoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN1Z2VzdG9lczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAodGhpcy50ZW1Nb3JhZGlhUHJlY2FyaWEoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0J1c2NhciBwcm9ncmFtYXMgaGFiaXRhY2lvbmFpcyBvdSBhdXjDrWxpbyBtb3JhZGlhJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy5pc01vcmFkaWFBZGVxdWFkYSgpKSB7XG4gICAgICBjb25zdCBmYWx0YW50ZXMgPSB0aGlzLmdldEl0ZW5zSW5mcmFlc3RydXR1cmFGYWx0YW50ZXMoKTtcbiAgICAgIHN1Z2VzdG9lcy5wdXNoKGBNZWxob3JhciBpbmZyYWVzdHJ1dHVyYTogJHtmYWx0YW50ZXMuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuaXNNb3JhZGlhQWx1Z2FkYSgpICYmICF0aGlzLnRlbVZhbG9yQWx1Z3VlbCgpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnSW5mb3JtYXIgdmFsb3IgZG8gYWx1Z3VlbCBwYXJhIGFuw6FsaXNlIGRlIGJlbmVmw61jaW9zJyk7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGhpcy50ZW1UZW1wb01vcmFkaWEoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0luZm9ybWFyIHRlbXBvIGRlIG1vcmFkaWEgbm8gbG9jYWwgYXR1YWwnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKCF0aGlzLnRlbU51bWVyb0NvbW9kb3MoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ0luZm9ybWFyIG7Dum1lcm8gZGUgY8O0bW9kb3MgZGEgbW9yYWRpYScpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXRoaXMuaXNDb25zaXN0ZW50ZSgpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnVmVyaWZpY2FyIGUgY29ycmlnaXIgaW5jb25zaXN0w6puY2lhcyBub3MgZGFkb3MnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN1Z2VzdG9lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBwcmVjaXNhIGRlIGF0dWFsaXphw6fDo28gKGRhZG9zIG11aXRvIGFudGlnb3MpXG4gICAqL1xuICBwcmVjaXNhQXR1YWxpemFjYW8oKTogYm9vbGVhbiB7XG4gICAgLy8gRGFkb3MgY29tIG1haXMgZGUgNiBtZXNlcyBwb2RlbSBwcmVjaXNhciBkZSBhdHVhbGl6YcOnw6NvXG4gICAgY29uc3Qgc2Vpc2VNZXNlc0F0cmFzID0gbmV3IERhdGUoKTtcbiAgICBzZWlzZU1lc2VzQXRyYXMuc2V0TW9udGgoc2Vpc2VNZXNlc0F0cmFzLmdldE1vbnRoKCkgLSA2KTtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0IDwgc2Vpc2VNZXNlc0F0cmFzO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBlc3RhdMOtc3RpY2FzIGRhIHNpdHVhw6fDo28gZGUgbW9yYWRpYVxuICAgKi9cbiAgZ2V0RXN0YXRpc3RpY2FzKCk6IHtcbiAgICBwb250dWFjYW9BZGVxdWFjYW86IG51bWJlcjtcbiAgICBuaXZlbFZ1bG5lcmFiaWxpZGFkZTogc3RyaW5nO1xuICAgIGl0ZW5zSW5mcmFlc3RydXR1cmE6IG51bWJlcjtcbiAgICB0ZW1wb01vcmFkaWE6IHN0cmluZztcbiAgICBlbGVnaWJpbGlkYWRlQXV4aWxpbzogYm9vbGVhbjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvbnR1YWNhb0FkZXF1YWNhbzogdGhpcy5nZXRQb250dWFjYW9BZGVxdWFjYW8oKSxcbiAgICAgIG5pdmVsVnVsbmVyYWJpbGlkYWRlOiB0aGlzLmdldE5pdmVsVnVsbmVyYWJpbGlkYWRlKCksXG4gICAgICBpdGVuc0luZnJhZXN0cnV0dXJhOiB0aGlzLmdldEl0ZW5zSW5mcmFlc3RydXR1cmEoKSxcbiAgICAgIHRlbXBvTW9yYWRpYTogdGhpcy5nZXREZXNjcmljYW9UZW1wb01vcmFkaWEoKSxcbiAgICAgIGVsZWdpYmlsaWRhZGVBdXhpbGlvOiB0aGlzLmlzRWxlZ2l2ZWxBdXhpbGlvTW9yYWRpYSgpLFxuICAgIH07XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==