7fac8d4dfe27c667ce387eb256e539ea
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e, _f;
Object.defineProperty(exports, "__esModule", { value: true });
exports.ComposicaoFamiliar = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const cidadao_entity_1 = require("./cidadao.entity");
const escolaridade_enum_1 = require("../enums/escolaridade.enum");
const cpf_validator_1 = require("../modules/cidadao/validators/cpf-validator");
const parentesco_enum_1 = require("../enums/parentesco.enum");
let ComposicaoFamiliar = class ComposicaoFamiliar {
    id;
    cidadao_id;
    cidadao;
    nome;
    cpf;
    nis;
    idade;
    ocupacao;
    escolaridade;
    parentesco;
    renda;
    observacoes;
    created_at;
    updated_at;
    removed_at;
    // Getters e Setters
    get cidadaoId() {
        return this.cidadao_id;
    }
    set cidadaoId(value) {
        this.cidadao_id = value;
    }
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se o membro foi criado recentemente (últimas 24 horas)
     */
    isCriadoRecentemente() {
        const agora = new Date();
        const umDiaAtras = new Date(agora.getTime() - 24 * 60 * 60 * 1000);
        return this.created_at > umDiaAtras;
    }
    /**
     * Calcula a idade do registro em dias
     */
    getIdadeRegistroEmDias() {
        const agora = new Date();
        const diffTime = Math.abs(agora.getTime() - this.created_at.getTime());
        return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }
    /**
     * Verifica se o membro foi removido
     */
    foiRemovido() {
        return !!this.removed_at;
    }
    /**
     * Verifica se o membro está ativo
     */
    isAtivo() {
        return !this.removed_at;
    }
    /**
     * Verifica se é menor de idade
     */
    isMenorIdade() {
        return this.idade < 18;
    }
    /**
     * Verifica se é maior de idade
     */
    isMaiorIdade() {
        return this.idade >= 18;
    }
    /**
     * Verifica se é idoso (65 anos ou mais)
     */
    isIdoso() {
        return this.idade >= 65;
    }
    /**
     * Verifica se é criança (0-12 anos)
     */
    isCrianca() {
        return this.idade >= 0 && this.idade <= 12;
    }
    /**
     * Verifica se é adolescente (13-17 anos)
     */
    isAdolescente() {
        return this.idade >= 13 && this.idade <= 17;
    }
    /**
     * Verifica se é adulto (18-64 anos)
     */
    isAdulto() {
        return this.idade >= 18 && this.idade <= 64;
    }
    /**
     * Obtém a faixa etária
     */
    getFaixaEtaria() {
        if (this.isCrianca())
            return 'Criança';
        if (this.isAdolescente())
            return 'Adolescente';
        if (this.isAdulto())
            return 'Adulto';
        if (this.isIdoso())
            return 'Idoso';
        return 'Indefinido';
    }
    /**
     * Verifica se tem renda
     */
    temRenda() {
        return this.renda !== null && this.renda !== undefined && this.renda > 0;
    }
    /**
     * Obtém a renda formatada
     */
    getRendaFormatada() {
        if (!this.temRenda())
            return 'Sem renda';
        return new Intl.NumberFormat('pt-BR', {
            style: 'currency',
            currency: 'BRL',
        }).format(this.renda);
    }
    /**
     * Verifica se tem NIS
     */
    temNIS() {
        return !!(this.nis && this.nis.trim());
    }
    /**
     * Verifica se é cônjuge
     */
    isConjuge() {
        return this.parentesco === parentesco_enum_1.ParentescoEnum.CONJUGE;
    }
    /**
     * Verifica se é filho(a)
     */
    isFilho() {
        return this.parentesco === parentesco_enum_1.ParentescoEnum.FILHO;
    }
    /**
     * Verifica se é pai/mãe
     */
    isPai() {
        return (this.parentesco === parentesco_enum_1.ParentescoEnum.PAI ||
            this.parentesco === parentesco_enum_1.ParentescoEnum.MAE);
    }
    /**
     * Verifica se é irmão(ã)
     */
    isIrmao() {
        return this.parentesco === parentesco_enum_1.ParentescoEnum.IRMAO;
    }
    /**
     * Verifica se é avô/avó
     */
    isAvo() {
        return this.parentesco === parentesco_enum_1.ParentescoEnum.AVO;
    }
    /**
     * Verifica se é neto(a)
     */
    isNeto() {
        return this.parentesco === parentesco_enum_1.ParentescoEnum.NETO;
    }
    /**
     * Obtém a descrição do parentesco
     */
    getDescricaoParentesco() {
        const descricoes = {
            [parentesco_enum_1.ParentescoEnum.CONJUGE]: 'Cônjuge',
            [parentesco_enum_1.ParentescoEnum.FILHO]: 'Filho(a)',
            [parentesco_enum_1.ParentescoEnum.PAI]: 'Pai',
            [parentesco_enum_1.ParentescoEnum.MAE]: 'Mãe',
            [parentesco_enum_1.ParentescoEnum.IRMAO]: 'Irmão(ã)',
            [parentesco_enum_1.ParentescoEnum.AVO]: 'Avô/Avó',
            [parentesco_enum_1.ParentescoEnum.NETO]: 'Neto(a)',
            [parentesco_enum_1.ParentescoEnum.TIO]: 'Tio(a)',
            [parentesco_enum_1.ParentescoEnum.SOBRINHO]: 'Sobrinho(a)',
            [parentesco_enum_1.ParentescoEnum.OUTRO]: 'Outro',
        };
        return descricoes[this.parentesco] || this.parentesco;
    }
    /**
     * Obtém a descrição da escolaridade
     */
    getDescricaoEscolaridade() {
        const descricoes = {
            [escolaridade_enum_1.EscolaridadeEnum.ANALFABETO]: 'Analfabeto',
            [escolaridade_enum_1.EscolaridadeEnum.FUNDAMENTAL_INCOMPLETO]: 'Fundamental Incompleto',
            [escolaridade_enum_1.EscolaridadeEnum.FUNDAMENTAL_COMPLETO]: 'Fundamental Completo',
            [escolaridade_enum_1.EscolaridadeEnum.MEDIO_INCOMPLETO]: 'Médio Incompleto',
            [escolaridade_enum_1.EscolaridadeEnum.MEDIO_COMPLETO]: 'Médio Completo',
            [escolaridade_enum_1.EscolaridadeEnum.SUPERIOR_INCOMPLETO]: 'Superior Incompleto',
            [escolaridade_enum_1.EscolaridadeEnum.SUPERIOR_COMPLETO]: 'Superior Completo',
            [escolaridade_enum_1.EscolaridadeEnum.POS_GRADUACAO]: 'Pós-graduação',
        };
        return descricoes[this.escolaridade] || this.escolaridade;
    }
    /**
     * Verifica se pertence a um cidadão específico
     */
    pertenceAoCidadao(cidadaoId) {
        return this.cidadao_id === cidadaoId;
    }
    /**
     * Obtém um resumo do membro familiar
     */
    getSummary() {
        const renda = this.temRenda()
            ? ` - ${this.getRendaFormatada()}`
            : ' - Sem renda';
        return `${this.nome} (${this.getDescricaoParentesco()}, ${this.idade} anos)${renda}`;
    }
    /**
     * Gera uma chave única para o membro
     */
    getUniqueKey() {
        return `${this.cidadao_id}_${this.cpf}_${this.parentesco}`;
    }
    /**
     * Verifica se os dados são consistentes
     */
    isConsistente() {
        // Verifica se tem cidadão
        if (!this.cidadao_id)
            return false;
        // Verifica se tem nome
        if (!this.nome || !this.nome.trim())
            return false;
        // Verifica se tem CPF
        if (!this.cpf || !this.cpf.trim())
            return false;
        // Verifica se a idade é válida
        if (this.idade < 0 || this.idade > 150)
            return false;
        // Verifica se tem ocupação
        if (!this.ocupacao || !this.ocupacao.trim())
            return false;
        // Se tem renda, deve ser positiva
        if (this.renda !== null && this.renda !== undefined && this.renda < 0) {
            return false;
        }
        return true;
    }
    /**
     * Verifica se pode ser removido
     */
    podeSerRemovido() {
        // Não pode remover se já foi removido
        if (this.foiRemovido())
            return false;
        // Outras validações específicas podem ser adicionadas
        return true;
    }
    /**
     * Clona o membro familiar (sem ID)
     */
    clone() {
        return {
            cidadao_id: this.cidadao_id,
            nome: this.nome,
            cpf: this.cpf,
            nis: this.nis,
            idade: this.idade,
            ocupacao: this.ocupacao,
            escolaridade: this.escolaridade,
            parentesco: this.parentesco,
            renda: this.renda,
            observacoes: this.observacoes,
        };
    }
    /**
     * Verifica se é dependente econômico (menor de idade ou sem renda)
     */
    isDependenteEconomico() {
        return this.isMenorIdade() || !this.temRenda();
    }
    /**
     * Verifica se contribui para a renda familiar
     */
    contribuiParaRenda() {
        return this.temRenda() && this.isMaiorIdade();
    }
    /**
     * Obtém o CPF formatado
     */
    getCpfFormatado() {
        if (!this.cpf)
            return '';
        const cpfLimpo = this.cpf.replace(/\D/g, '');
        return cpfLimpo.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
    }
    /**
     * Formata a data de criação
     */
    getCriacaoFormatada() {
        return this.created_at.toLocaleDateString('pt-BR');
    }
    /**
     * Formata a data de atualização
     */
    getAtualizacaoFormatada() {
        return this.updated_at.toLocaleDateString('pt-BR');
    }
    /**
     * Remove informações sensíveis para logs
     */
    toSafeLog() {
        return {
            id: this.id,
            nome: this.nome.substring(0, 3) + '***',
            idade: this.idade,
            parentesco: this.parentesco,
            escolaridade: this.escolaridade,
            ocupacao: this.ocupacao,
            created_at: this.created_at,
            updated_at: this.updated_at,
        };
    }
    /**
     * Verifica se é prioritário para benefícios (idoso, criança, deficiente)
     */
    isPrioritario() {
        return this.isIdoso() || this.isCrianca();
    }
    /**
     * Obtém sugestões de verificação para o membro
     */
    getSugestoesVerificacao() {
        const sugestoes = [];
        if (!this.temNIS()) {
            sugestoes.push('Cadastrar NIS do membro familiar');
        }
        if (this.isMaiorIdade() &&
            !this.temRenda() &&
            !this.ocupacao.toLowerCase().includes('estudante')) {
            sugestoes.push('Verificar situação de trabalho/renda');
        }
        if (!this.observacoes && this.isPrioritario()) {
            sugestoes.push('Adicionar observações sobre condições especiais');
        }
        if (!this.isConsistente()) {
            sugestoes.push('Verificar consistência dos dados do membro');
        }
        return sugestoes;
    }
    /**
     * Calcula a contribuição percentual para a renda familiar
     */
    getContribuicaoPercentual(rendaFamiliarTotal) {
        if (!this.temRenda() || !rendaFamiliarTotal || rendaFamiliarTotal <= 0) {
            return 0;
        }
        return (this.renda / rendaFamiliarTotal) * 100;
    }
};
exports.ComposicaoFamiliar = ComposicaoFamiliar;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do cidadão é obrigatório' }),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "cidadao_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => cidadao_entity_1.Cidadao, (cidadao) => cidadao.composicao_familiar, {
        onDelete: 'CASCADE',
    }),
    (0, typeorm_1.JoinColumn)({ name: 'cidadao_id' }),
    __metadata("design:type", typeof (_a = typeof cidadao_entity_1.Cidadao !== "undefined" && cidadao_entity_1.Cidadao) === "function" ? _a : Object)
], ComposicaoFamiliar.prototype, "cidadao", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome é obrigatório' }),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "nome", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: false }),
    (0, class_validator_1.IsNotEmpty)({ message: 'CPF é obrigatório' }),
    (0, class_validator_1.Length)(11, 14, { message: 'CPF deve ter entre 11 e 14 caracteres' }),
    (0, class_validator_1.Validate)(cpf_validator_1.CPFValidator, { message: 'CPF inválido' }),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "cpf", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsNotEmpty)({ message: 'NIS do parente é obrigatório' }),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "nis", void 0);
__decorate([
    (0, typeorm_1.Column)('integer'),
    (0, class_validator_1.IsNotEmpty)({ message: 'Idade do parente é obrigatório' }),
    (0, class_validator_1.IsNumber)({}, { message: 'Idade deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Idade não pode ser negativa' }),
    __metadata("design:type", Number)
], ComposicaoFamiliar.prototype, "idade", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'Nome é obrigatório' }),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "ocupacao", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: escolaridade_enum_1.EscolaridadeEnum,
        enumName: 'escolaridade_enum',
        nullable: false,
    }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Escolaridade é obrigatória' }),
    (0, class_validator_1.IsEnum)(escolaridade_enum_1.EscolaridadeEnum, { message: 'Escolaridade inválida' }),
    __metadata("design:type", typeof (_b = typeof escolaridade_enum_1.EscolaridadeEnum !== "undefined" && escolaridade_enum_1.EscolaridadeEnum) === "function" ? _b : Object)
], ComposicaoFamiliar.prototype, "escolaridade", void 0);
__decorate([
    (0, typeorm_1.Column)({
        type: 'enum',
        enum: parentesco_enum_1.ParentescoEnum,
        enumName: 'parentesco',
        default: parentesco_enum_1.ParentescoEnum.OUTRO,
    }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Parentesco é obrigatório' }),
    __metadata("design:type", typeof (_c = typeof parentesco_enum_1.ParentescoEnum !== "undefined" && parentesco_enum_1.ParentescoEnum) === "function" ? _c : Object)
], ComposicaoFamiliar.prototype, "parentesco", void 0);
__decorate([
    (0, typeorm_1.Column)('decimal', { precision: 10, scale: 2, nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Renda deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Renda não pode ser negativa' }),
    __metadata("design:type", Number)
], ComposicaoFamiliar.prototype, "renda", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], ComposicaoFamiliar.prototype, "observacoes", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], ComposicaoFamiliar.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], ComposicaoFamiliar.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_f = typeof Date !== "undefined" && Date) === "function" ? _f : Object)
], ComposicaoFamiliar.prototype, "removed_at", void 0);
exports.ComposicaoFamiliar = ComposicaoFamiliar = __decorate([
    (0, typeorm_1.Entity)('composicao_familiar'),
    (0, typeorm_1.Index)(['cidadao_id', 'nome'], { unique: true })
], ComposicaoFamiliar);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxjb21wb3NpY2FvLWZhbWlsaWFyLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBV2lCO0FBQ2pCLHFEQVF5QjtBQUN6QixxREFBMkM7QUFDM0Msa0VBQThEO0FBQzlELCtFQUEyRTtBQUMzRSw4REFBMEQ7QUFJbkQsSUFBTSxrQkFBa0IsR0FBeEIsTUFBTSxrQkFBa0I7SUFFN0IsRUFBRSxDQUFTO0lBSVgsVUFBVSxDQUFTO0lBTW5CLE9BQU8sQ0FBVTtJQUlqQixJQUFJLENBQVM7SUFNYixHQUFHLENBQVM7SUFJWixHQUFHLENBQVM7SUFNWixLQUFLLENBQVM7SUFJZCxRQUFRLENBQVM7SUFVakIsWUFBWSxDQUFtQjtJQVMvQixVQUFVLENBQWlCO0lBTTNCLEtBQUssQ0FBUztJQUlkLFdBQVcsQ0FBUztJQUdwQixVQUFVLENBQU87SUFHakIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUVqQixvQkFBb0I7SUFDcEIsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVMsQ0FBQyxLQUFhO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxzQkFBc0I7SUFFdEI7O09BRUc7SUFDSCxvQkFBb0I7UUFDbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixNQUFNLFVBQVUs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QkFBSixJQUFJO3NEQUFDOzZCQTFFTixrQkFBa0I7SUFGOUIsSUFBQSxnQkFBTSxFQUFDLHFCQUFxQixDQUFDO0lBQzdCLElBQUEsZUFBSyxFQUFDLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDO0dBQ25DLGtCQUFrQixDQW9kOUIiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxjb21wb3NpY2FvLWZhbWlsaWFyLmVudGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBFbnRpdHksXG4gIFByaW1hcnlHZW5lcmF0ZWRDb2x1bW4sXG4gIENvbHVtbixcbiAgQ3JlYXRlRGF0ZUNvbHVtbixcbiAgVXBkYXRlRGF0ZUNvbHVtbixcbiAgRGVsZXRlRGF0ZUNvbHVtbixcbiAgTWFueVRvT25lLFxuICBKb2luQ29sdW1uLFxuICBJbmRleCxcbiAgT25lVG9PbmUsXG59IGZyb20gJ3R5cGVvcm0nO1xuaW1wb3J0IHtcbiAgSXNOb3RFbXB0eSxcbiAgSXNPcHRpb25hbCxcbiAgSXNOdW1iZXIsXG4gIE1pbixcbiAgSXNFbnVtLFxuICBMZW5ndGgsXG4gIFZhbGlkYXRlLFxufSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xuaW1wb3J0IHsgQ2lkYWRhbyB9IGZyb20gJy4vY2lkYWRhby5lbnRpdHknO1xuaW1wb3J0IHsgRXNjb2xhcmlkYWRlRW51bSB9IGZyb20gJy4uL2VudW1zL2VzY29sYXJpZGFkZS5lbnVtJztcbmltcG9ydCB7IENQRlZhbGlkYXRvciB9IGZyb20gJy4uL21vZHVsZXMvY2lkYWRhby92YWxpZGF0b3JzL2NwZi12YWxpZGF0b3InO1xuaW1wb3J0IHsgUGFyZW50ZXNjb0VudW0gfSBmcm9tICcuLi9lbnVtcy9wYXJlbnRlc2NvLmVudW0nO1xuXG5ARW50aXR5KCdjb21wb3NpY2FvX2ZhbWlsaWFyJylcbkBJbmRleChbJ2NpZGFkYW9faWQnLCAnbm9tZSddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuZXhwb3J0IGNsYXNzIENvbXBvc2ljYW9GYW1pbGlhciB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSUQgZG8gY2lkYWTDo28gw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBjaWRhZGFvX2lkOiBzdHJpbmc7XG5cbiAgQE1hbnlUb09uZSgoKSA9PiBDaWRhZGFvLCAoY2lkYWRhbykgPT4gY2lkYWRhby5jb21wb3NpY2FvX2ZhbWlsaWFyLCB7XG4gICAgb25EZWxldGU6ICdDQVNDQURFJyxcbiAgfSlcbiAgQEpvaW5Db2x1bW4oeyBuYW1lOiAnY2lkYWRhb19pZCcgfSlcbiAgY2lkYWRhbzogQ2lkYWRhbztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnTm9tZSDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIG5vbWU6IHN0cmluZztcblxuICBAQ29sdW1uKHsgbnVsbGFibGU6IGZhbHNlIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0NQRiDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBMZW5ndGgoMTEsIDE0LCB7IG1lc3NhZ2U6ICdDUEYgZGV2ZSB0ZXIgZW50cmUgMTEgZSAxNCBjYXJhY3RlcmVzJyB9KVxuICBAVmFsaWRhdGUoQ1BGVmFsaWRhdG9yLCB7IG1lc3NhZ2U6ICdDUEYgaW52w6FsaWRvJyB9KVxuICBjcGY6IHN0cmluZztcblxuICBAQ29sdW1uKHsgbnVsbGFibGU6IHRydWUgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnTklTIGRvIHBhcmVudGUgw6kgb2JyaWdhdMOzcmlvJyB9KVxuICBuaXM6IHN0cmluZztcblxuICBAQ29sdW1uKCdpbnRlZ2VyJylcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSWRhZGUgZG8gcGFyZW50ZSDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBJc051bWJlcih7fSwgeyBtZXNzYWdlOiAnSWRhZGUgZGV2ZSBzZXIgdW0gbsO6bWVybycgfSlcbiAgQE1pbigwLCB7IG1lc3NhZ2U6ICdJZGFkZSBuw6NvIHBvZGUgc2VyIG5lZ2F0aXZhJyB9KVxuICBpZGFkZTogbnVtYmVyO1xuXG4gIEBDb2x1bW4oKVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdOb21lIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgb2N1cGFjYW86IHN0cmluZztcblxuICBAQ29sdW1uKHtcbiAgICB0eXBlOiAnZW51bScsXG4gICAgZW51bTogRXNjb2xhcmlkYWRlRW51bSxcbiAgICBlbnVtTmFtZTogJ2VzY29sYXJpZGFkZV9lbnVtJyxcbiAgICBudWxsYWJsZTogZmFsc2UsXG4gIH0pXG4gIEBJc05vdEVtcHR5KHsgbWVzc2FnZTogJ0VzY29sYXJpZGFkZSDDqSBvYnJpZ2F0w7NyaWEnIH0pXG4gIEBJc0VudW0oRXNjb2xhcmlkYWRlRW51bSwgeyBtZXNzYWdlOiAnRXNjb2xhcmlkYWRlIGludsOhbGlkYScgfSlcbiAgZXNjb2xhcmlkYWRlOiBFc2NvbGFyaWRhZGVFbnVtO1xuXG4gIEBDb2x1bW4oe1xuICAgIHR5cGU6ICdlbnVtJyxcbiAgICBlbnVtOiBQYXJlbnRlc2NvRW51bSxcbiAgICBlbnVtTmFtZTogJ3BhcmVudGVzY28nLFxuICAgIGRlZmF1bHQ6IFBhcmVudGVzY29FbnVtLk9VVFJPLFxuICB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdQYXJlbnRlc2NvIMOpIG9icmlnYXTDs3JpbycgfSlcbiAgcGFyZW50ZXNjbzogUGFyZW50ZXNjb0VudW07XG5cbiAgQENvbHVtbignZGVjaW1hbCcsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdSZW5kYSBkZXZlIHNlciB1bSBuw7ptZXJvJyB9KVxuICBATWluKDAsIHsgbWVzc2FnZTogJ1JlbmRhIG7Do28gcG9kZSBzZXIgbmVnYXRpdmEnIH0pXG4gIHJlbmRhOiBudW1iZXI7XG5cbiAgQENvbHVtbih7IG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgb2JzZXJ2YWNvZXM6IHN0cmluZztcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkX2F0OiBEYXRlO1xuXG4gIEBEZWxldGVEYXRlQ29sdW1uKClcbiAgcmVtb3ZlZF9hdDogRGF0ZTtcblxuICAvLyBHZXR0ZXJzIGUgU2V0dGVyc1xuICBnZXQgY2lkYWRhb0lkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY2lkYWRhb19pZDtcbiAgfVxuXG4gIHNldCBjaWRhZGFvSWQodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuY2lkYWRhb19pZCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGNyZWF0ZWRBdCgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVkX2F0O1xuICB9XG5cbiAgZ2V0IHVwZGF0ZWRBdCgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy51cGRhdGVkX2F0O1xuICB9XG5cbiAgZ2V0IHJlbW92ZWRBdCgpOiBEYXRlIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVkX2F0O1xuICB9XG5cbiAgLy8gTcOpdG9kb3MgVXRpbGl0w6FyaW9zXG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIG8gbWVtYnJvIGZvaSBjcmlhZG8gcmVjZW50ZW1lbnRlICjDumx0aW1hcyAyNCBob3JhcylcbiAgICovXG4gIGlzQ3JpYWRvUmVjZW50ZW1lbnRlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGFnb3JhID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB1bURpYUF0cmFzID0gbmV3IERhdGUoYWdvcmEuZ2V0VGltZSgpIC0gMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdCA+IHVtRGlhQXRyYXM7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYSBhIGlkYWRlIGRvIHJlZ2lzdHJvIGVtIGRpYXNcbiAgICovXG4gIGdldElkYWRlUmVnaXN0cm9FbURpYXMoKTogbnVtYmVyIHtcbiAgICBjb25zdCBhZ29yYSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGlmZlRpbWUgPSBNYXRoLmFicyhhZ29yYS5nZXRUaW1lKCkgLSB0aGlzLmNyZWF0ZWRfYXQuZ2V0VGltZSgpKTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKGRpZmZUaW1lIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIG1lbWJybyBmb2kgcmVtb3ZpZG9cbiAgICovXG4gIGZvaVJlbW92aWRvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvIG1lbWJybyBlc3TDoSBhdGl2b1xuICAgKi9cbiAgaXNBdGl2bygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBtZW5vciBkZSBpZGFkZVxuICAgKi9cbiAgaXNNZW5vcklkYWRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlkYWRlIDwgMTg7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgbWFpb3IgZGUgaWRhZGVcbiAgICovXG4gIGlzTWFpb3JJZGFkZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pZGFkZSA+PSAxODtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBpZG9zbyAoNjUgYW5vcyBvdSBtYWlzKVxuICAgKi9cbiAgaXNJZG9zbygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pZGFkZSA+PSA2NTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBjcmlhbsOnYSAoMC0xMiBhbm9zKVxuICAgKi9cbiAgaXNDcmlhbmNhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlkYWRlID49IDAgJiYgdGhpcy5pZGFkZSA8PSAxMjtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBhZG9sZXNjZW50ZSAoMTMtMTcgYW5vcylcbiAgICovXG4gIGlzQWRvbGVzY2VudGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaWRhZGUgPj0gMTMgJiYgdGhpcy5pZGFkZSA8PSAxNztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBhZHVsdG8gKDE4LTY0IGFub3MpXG4gICAqL1xuICBpc0FkdWx0bygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pZGFkZSA+PSAxOCAmJiB0aGlzLmlkYWRlIDw9IDY0O1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIGZhaXhhIGV0w6FyaWFcbiAgICovXG4gIGdldEZhaXhhRXRhcmlhKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuaXNDcmlhbmNhKCkpIHJldHVybiAnQ3JpYW7Dp2EnO1xuICAgIGlmICh0aGlzLmlzQWRvbGVzY2VudGUoKSkgcmV0dXJuICdBZG9sZXNjZW50ZSc7XG4gICAgaWYgKHRoaXMuaXNBZHVsdG8oKSkgcmV0dXJuICdBZHVsdG8nO1xuICAgIGlmICh0aGlzLmlzSWRvc28oKSkgcmV0dXJuICdJZG9zbyc7XG4gICAgcmV0dXJuICdJbmRlZmluaWRvJztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gcmVuZGFcbiAgICovXG4gIHRlbVJlbmRhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlbmRhICE9PSBudWxsICYmIHRoaXMucmVuZGEgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJlbmRhID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gYSByZW5kYSBmb3JtYXRhZGFcbiAgICovXG4gIGdldFJlbmRhRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnRlbVJlbmRhKCkpIHJldHVybiAnU2VtIHJlbmRhJztcbiAgICByZXR1cm4gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdwdC1CUicsIHtcbiAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgY3VycmVuY3k6ICdCUkwnLFxuICAgIH0pLmZvcm1hdCh0aGlzLnJlbmRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0ZW0gTklTXG4gICAqL1xuICB0ZW1OSVMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKHRoaXMubmlzICYmIHRoaXMubmlzLnRyaW0oKSk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgY8O0bmp1Z2VcbiAgICovXG4gIGlzQ29uanVnZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRlc2NvID09PSBQYXJlbnRlc2NvRW51bS5DT05KVUdFO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGZpbGhvKGEpXG4gICAqL1xuICBpc0ZpbGhvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBhcmVudGVzY28gPT09IFBhcmVudGVzY29FbnVtLkZJTEhPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIHBhaS9tw6NlXG4gICAqL1xuICBpc1BhaSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5wYXJlbnRlc2NvID09PSBQYXJlbnRlc2NvRW51bS5QQUkgfHxcbiAgICAgIHRoaXMucGFyZW50ZXNjbyA9PT0gUGFyZW50ZXNjb0VudW0uTUFFXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBpcm3Do28ow6MpXG4gICAqL1xuICBpc0lybWFvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBhcmVudGVzY28gPT09IFBhcmVudGVzY29FbnVtLklSTUFPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGF2w7QvYXbDs1xuICAgKi9cbiAgaXNBdm8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50ZXNjbyA9PT0gUGFyZW50ZXNjb0VudW0uQVZPO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIG5ldG8oYSlcbiAgICovXG4gIGlzTmV0bygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRlc2NvID09PSBQYXJlbnRlc2NvRW51bS5ORVRPO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idMOpbSBhIGRlc2NyacOnw6NvIGRvIHBhcmVudGVzY29cbiAgICovXG4gIGdldERlc2NyaWNhb1BhcmVudGVzY28oKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXNjcmljb2VzID0ge1xuICAgICAgW1BhcmVudGVzY29FbnVtLkNPTkpVR0VdOiAnQ8O0bmp1Z2UnLFxuICAgICAgW1BhcmVudGVzY29FbnVtLkZJTEhPXTogJ0ZpbGhvKGEpJyxcbiAgICAgIFtQYXJlbnRlc2NvRW51bS5QQUldOiAnUGFpJyxcbiAgICAgIFtQYXJlbnRlc2NvRW51bS5NQUVdOiAnTcOjZScsXG4gICAgICBbUGFyZW50ZXNjb0VudW0uSVJNQU9dOiAnSXJtw6NvKMOjKScsXG4gICAgICBbUGFyZW50ZXNjb0VudW0uQVZPXTogJ0F2w7QvQXbDsycsXG4gICAgICBbUGFyZW50ZXNjb0VudW0uTkVUT106ICdOZXRvKGEpJyxcbiAgICAgIFtQYXJlbnRlc2NvRW51bS5USU9dOiAnVGlvKGEpJyxcbiAgICAgIFtQYXJlbnRlc2NvRW51bS5TT0JSSU5IT106ICdTb2JyaW5obyhhKScsXG4gICAgICBbUGFyZW50ZXNjb0VudW0uT1VUUk9dOiAnT3V0cm8nLFxuICAgIH07XG4gICAgcmV0dXJuIGRlc2NyaWNvZXNbdGhpcy5wYXJlbnRlc2NvXSB8fCB0aGlzLnBhcmVudGVzY287XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIGEgZGVzY3Jpw6fDo28gZGEgZXNjb2xhcmlkYWRlXG4gICAqL1xuICBnZXREZXNjcmljYW9Fc2NvbGFyaWRhZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkZXNjcmljb2VzID0ge1xuICAgICAgW0VzY29sYXJpZGFkZUVudW0uQU5BTEZBQkVUT106ICdBbmFsZmFiZXRvJyxcbiAgICAgIFtFc2NvbGFyaWRhZGVFbnVtLkZVTkRBTUVOVEFMX0lOQ09NUExFVE9dOiAnRnVuZGFtZW50YWwgSW5jb21wbGV0bycsXG4gICAgICBbRXNjb2xhcmlkYWRlRW51bS5GVU5EQU1FTlRBTF9DT01QTEVUT106ICdGdW5kYW1lbnRhbCBDb21wbGV0bycsXG4gICAgICBbRXNjb2xhcmlkYWRlRW51bS5NRURJT19JTkNPTVBMRVRPXTogJ03DqWRpbyBJbmNvbXBsZXRvJyxcbiAgICAgIFtFc2NvbGFyaWRhZGVFbnVtLk1FRElPX0NPTVBMRVRPXTogJ03DqWRpbyBDb21wbGV0bycsXG4gICAgICBbRXNjb2xhcmlkYWRlRW51bS5TVVBFUklPUl9JTkNPTVBMRVRPXTogJ1N1cGVyaW9yIEluY29tcGxldG8nLFxuICAgICAgW0VzY29sYXJpZGFkZUVudW0uU1VQRVJJT1JfQ09NUExFVE9dOiAnU3VwZXJpb3IgQ29tcGxldG8nLFxuICAgICAgW0VzY29sYXJpZGFkZUVudW0uUE9TX0dSQURVQUNBT106ICdQw7NzLWdyYWR1YcOnw6NvJyxcbiAgICB9O1xuICAgIHJldHVybiBkZXNjcmljb2VzW3RoaXMuZXNjb2xhcmlkYWRlXSB8fCB0aGlzLmVzY29sYXJpZGFkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBwZXJ0ZW5jZSBhIHVtIGNpZGFkw6NvIGVzcGVjw61maWNvXG4gICAqL1xuICBwZXJ0ZW5jZUFvQ2lkYWRhbyhjaWRhZGFvSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNpZGFkYW9faWQgPT09IGNpZGFkYW9JZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gdW0gcmVzdW1vIGRvIG1lbWJybyBmYW1pbGlhclxuICAgKi9cbiAgZ2V0U3VtbWFyeSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlbmRhID0gdGhpcy50ZW1SZW5kYSgpXG4gICAgICA/IGAgLSAke3RoaXMuZ2V0UmVuZGFGb3JtYXRhZGEoKX1gXG4gICAgICA6ICcgLSBTZW0gcmVuZGEnO1xuICAgIHJldHVybiBgJHt0aGlzLm5vbWV9ICgke3RoaXMuZ2V0RGVzY3JpY2FvUGFyZW50ZXNjbygpfSwgJHt0aGlzLmlkYWRlfSBhbm9zKSR7cmVuZGF9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXJhIHVtYSBjaGF2ZSDDum5pY2EgcGFyYSBvIG1lbWJyb1xuICAgKi9cbiAgZ2V0VW5pcXVlS2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY2lkYWRhb19pZH1fJHt0aGlzLmNwZn1fJHt0aGlzLnBhcmVudGVzY299YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSBvcyBkYWRvcyBzw6NvIGNvbnNpc3RlbnRlc1xuICAgKi9cbiAgaXNDb25zaXN0ZW50ZSgpOiBib29sZWFuIHtcbiAgICAvLyBWZXJpZmljYSBzZSB0ZW0gY2lkYWTDo29cbiAgICBpZiAoIXRoaXMuY2lkYWRhb19pZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIG5vbWVcbiAgICBpZiAoIXRoaXMubm9tZSB8fCAhdGhpcy5ub21lLnRyaW0oKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2Egc2UgdGVtIENQRlxuICAgIGlmICghdGhpcy5jcGYgfHwgIXRoaXMuY3BmLnRyaW0oKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2Egc2UgYSBpZGFkZSDDqSB2w6FsaWRhXG4gICAgaWYgKHRoaXMuaWRhZGUgPCAwIHx8IHRoaXMuaWRhZGUgPiAxNTApIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFZlcmlmaWNhIHNlIHRlbSBvY3VwYcOnw6NvXG4gICAgaWYgKCF0aGlzLm9jdXBhY2FvIHx8ICF0aGlzLm9jdXBhY2FvLnRyaW0oKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gU2UgdGVtIHJlbmRhLCBkZXZlIHNlciBwb3NpdGl2YVxuICAgIGlmICh0aGlzLnJlbmRhICE9PSBudWxsICYmIHRoaXMucmVuZGEgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJlbmRhIDwgMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIHBvZGUgc2VyIHJlbW92aWRvXG4gICAqL1xuICBwb2RlU2VyUmVtb3ZpZG8oKTogYm9vbGVhbiB7XG4gICAgLy8gTsOjbyBwb2RlIHJlbW92ZXIgc2UgasOhIGZvaSByZW1vdmlkb1xuICAgIGlmICh0aGlzLmZvaVJlbW92aWRvKCkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIE91dHJhcyB2YWxpZGHDp8O1ZXMgZXNwZWPDrWZpY2FzIHBvZGVtIHNlciBhZGljaW9uYWRhc1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb25hIG8gbWVtYnJvIGZhbWlsaWFyIChzZW0gSUQpXG4gICAqL1xuICBjbG9uZSgpOiBQYXJ0aWFsPENvbXBvc2ljYW9GYW1pbGlhcj4ge1xuICAgIHJldHVybiB7XG4gICAgICBjaWRhZGFvX2lkOiB0aGlzLmNpZGFkYW9faWQsXG4gICAgICBub21lOiB0aGlzLm5vbWUsXG4gICAgICBjcGY6IHRoaXMuY3BmLFxuICAgICAgbmlzOiB0aGlzLm5pcyxcbiAgICAgIGlkYWRlOiB0aGlzLmlkYWRlLFxuICAgICAgb2N1cGFjYW86IHRoaXMub2N1cGFjYW8sXG4gICAgICBlc2NvbGFyaWRhZGU6IHRoaXMuZXNjb2xhcmlkYWRlLFxuICAgICAgcGFyZW50ZXNjbzogdGhpcy5wYXJlbnRlc2NvLFxuICAgICAgcmVuZGE6IHRoaXMucmVuZGEsXG4gICAgICBvYnNlcnZhY29lczogdGhpcy5vYnNlcnZhY29lcyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZlcmlmaWNhIHNlIMOpIGRlcGVuZGVudGUgZWNvbsO0bWljbyAobWVub3IgZGUgaWRhZGUgb3Ugc2VtIHJlbmRhKVxuICAgKi9cbiAgaXNEZXBlbmRlbnRlRWNvbm9taWNvKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzTWVub3JJZGFkZSgpIHx8ICF0aGlzLnRlbVJlbmRhKCk7XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2UgY29udHJpYnVpIHBhcmEgYSByZW5kYSBmYW1pbGlhclxuICAgKi9cbiAgY29udHJpYnVpUGFyYVJlbmRhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRlbVJlbmRhKCkgJiYgdGhpcy5pc01haW9ySWRhZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnTDqW0gbyBDUEYgZm9ybWF0YWRvXG4gICAqL1xuICBnZXRDcGZGb3JtYXRhZG8oKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMuY3BmKSByZXR1cm4gJyc7XG4gICAgY29uc3QgY3BmTGltcG8gPSB0aGlzLmNwZi5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgIHJldHVybiBjcGZMaW1wby5yZXBsYWNlKC8oXFxkezN9KShcXGR7M30pKFxcZHszfSkoXFxkezJ9KS8sICckMS4kMi4kMy0kNCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgYSBkYXRhIGRlIGNyaWHDp8Ojb1xuICAgKi9cbiAgZ2V0Q3JpYWNhb0Zvcm1hdGFkYSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZWRfYXQudG9Mb2NhbGVEYXRlU3RyaW5nKCdwdC1CUicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdGEgYSBkYXRhIGRlIGF0dWFsaXphw6fDo29cbiAgICovXG4gIGdldEF0dWFsaXphY2FvRm9ybWF0YWRhKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdC50b0xvY2FsZURhdGVTdHJpbmcoJ3B0LUJSJyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGluZm9ybWHDp8O1ZXMgc2Vuc8OtdmVpcyBwYXJhIGxvZ3NcbiAgICovXG4gIHRvU2FmZUxvZygpOiBQYXJ0aWFsPENvbXBvc2ljYW9GYW1pbGlhcj4ge1xuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5pZCxcbiAgICAgIG5vbWU6IHRoaXMubm9tZS5zdWJzdHJpbmcoMCwgMykgKyAnKioqJyxcbiAgICAgIGlkYWRlOiB0aGlzLmlkYWRlLFxuICAgICAgcGFyZW50ZXNjbzogdGhpcy5wYXJlbnRlc2NvLFxuICAgICAgZXNjb2xhcmlkYWRlOiB0aGlzLmVzY29sYXJpZGFkZSxcbiAgICAgIG9jdXBhY2FvOiB0aGlzLm9jdXBhY2FvLFxuICAgICAgY3JlYXRlZF9hdDogdGhpcy5jcmVhdGVkX2F0LFxuICAgICAgdXBkYXRlZF9hdDogdGhpcy51cGRhdGVkX2F0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVmVyaWZpY2Egc2Ugw6kgcHJpb3JpdMOhcmlvIHBhcmEgYmVuZWbDrWNpb3MgKGlkb3NvLCBjcmlhbsOnYSwgZGVmaWNpZW50ZSlcbiAgICovXG4gIGlzUHJpb3JpdGFyaW8oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaXNJZG9zbygpIHx8IHRoaXMuaXNDcmlhbmNhKCk7XG4gIH1cblxuICAvKipcbiAgICogT2J0w6ltIHN1Z2VzdMO1ZXMgZGUgdmVyaWZpY2HDp8OjbyBwYXJhIG8gbWVtYnJvXG4gICAqL1xuICBnZXRTdWdlc3RvZXNWZXJpZmljYWNhbygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3VnZXN0b2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCF0aGlzLnRlbU5JUygpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnQ2FkYXN0cmFyIE5JUyBkbyBtZW1icm8gZmFtaWxpYXInKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzTWFpb3JJZGFkZSgpICYmXG4gICAgICAhdGhpcy50ZW1SZW5kYSgpICYmXG4gICAgICAhdGhpcy5vY3VwYWNhby50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdlc3R1ZGFudGUnKVxuICAgICkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ1ZlcmlmaWNhciBzaXR1YcOnw6NvIGRlIHRyYWJhbGhvL3JlbmRhJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm9ic2VydmFjb2VzICYmIHRoaXMuaXNQcmlvcml0YXJpbygpKSB7XG4gICAgICBzdWdlc3RvZXMucHVzaCgnQWRpY2lvbmFyIG9ic2VydmHDp8O1ZXMgc29icmUgY29uZGnDp8O1ZXMgZXNwZWNpYWlzJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzQ29uc2lzdGVudGUoKSkge1xuICAgICAgc3VnZXN0b2VzLnB1c2goJ1ZlcmlmaWNhciBjb25zaXN0w6puY2lhIGRvcyBkYWRvcyBkbyBtZW1icm8nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VnZXN0b2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGEgYSBjb250cmlidWnDp8OjbyBwZXJjZW50dWFsIHBhcmEgYSByZW5kYSBmYW1pbGlhclxuICAgKi9cbiAgZ2V0Q29udHJpYnVpY2FvUGVyY2VudHVhbChyZW5kYUZhbWlsaWFyVG90YWw6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLnRlbVJlbmRhKCkgfHwgIXJlbmRhRmFtaWxpYXJUb3RhbCB8fCByZW5kYUZhbWlsaWFyVG90YWwgPD0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiAodGhpcy5yZW5kYSAvIHJlbmRhRmFtaWxpYXJUb3RhbCkgKiAxMDA7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==