{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\metrica-seguranca.entity.ts","mappings":";;;;;;;;;;;;;AAAA,qCAA0F;AAC1F,qDAAoG;AAEpG;;GAEG;AACH,IAAY,eAKX;AALD,WAAY,eAAe;IACzB,gCAAa,CAAA;IACb,kCAAe,CAAA;IACf,sCAAmB,CAAA;IACnB,4CAAyB,CAAA;AAC3B,CAAC,EALW,eAAe,+BAAf,eAAe,QAK1B;AAED;;;;;;GAMG;AAEI,IAAM,gBAAgB,GAAtB,MAAM,gBAAgB;IAE3B,EAAE,CAAS;IAOX,WAAW,CAAS;IAIpB,UAAU,CAAO;IAMjB,UAAU,CAAS;IAMnB,cAAc,CAAS;IAMvB,SAAS,CAAS;IAKlB,UAAU,CAAS;IAMnB,QAAQ,CAAS;IAGjB,eAAe,CAAsB;IAGrC,QAAQ,CAAsB;IAS9B,KAAK,CAAkB;CACxB,CAAA;AA1DY,4CAAgB;AAE3B;IADC,IAAA,gCAAsB,EAAC,MAAM,CAAC;;4CACpB;AAOX;IALC,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;IACvB,IAAA,eAAK,EAAC,6BAA6B,CAAC;IACpC,IAAA,4BAAU,EAAC,EAAE,OAAO,EAAE,8BAA8B,EAAE,CAAC;IACvD,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,oCAAoC,EAAE,CAAC;IAC3D,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,kDAAkD,EAAE,CAAC;;qDAC5D;AAIpB;IAFC,IAAA,0BAAgB,EAAC,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC;IACxC,IAAA,eAAK,EAAC,kCAAkC,CAAC;kDAC9B,IAAI,oBAAJ,IAAI;oDAAC;AAMjB;IAJC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACxC,IAAA,eAAK,EAAC,gCAAgC,CAAC;IACvC,IAAA,4BAAU,GAAE;IACZ,IAAA,wBAAM,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;;oDAChC;AAMnB;IAJC,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACtC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,uCAAuC,EAAE,CAAC;IAC9D,IAAA,2BAAS,EAAC,EAAE,EAAE,EAAE,OAAO,EAAE,oDAAoD,EAAE,CAAC;;wDAC1D;AAMvB;IAJC,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACtC,IAAA,eAAK,EAAC,2BAA2B,CAAC;IAClC,IAAA,4BAAU,GAAE;IACZ,IAAA,sBAAI,EAAC,SAAS,EAAE,EAAE,OAAO,EAAE,uBAAuB,EAAE,CAAC;;mDACpC;AAKlB;IAHC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACxC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,gCAAgC,EAAE,CAAC;;oDACrC;AAMnB;IAJC,IAAA,gBAAM,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACvC,IAAA,4BAAU,GAAE;IACZ,IAAA,0BAAQ,EAAC,EAAE,OAAO,EAAE,8BAA8B,EAAE,CAAC;IACrD,IAAA,2BAAS,EAAC,GAAG,EAAE,EAAE,OAAO,EAAE,4CAA4C,EAAE,CAAC;;kDACzD;AAGjB;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;kDACzB,MAAM,oBAAN,MAAM;yDAAc;AAGrC;IADC,IAAA,gBAAM,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;kDAChC,MAAM,oBAAN,MAAM;kDAAc;AAS9B;IAPC,IAAA,gBAAM,EAAC;QACN,IAAI,EAAE,MAAM;QACZ,IAAI,EAAE,eAAe;QACrB,OAAO,EAAE,eAAe,CAAC,IAAI;KAC9B,CAAC;IACD,IAAA,eAAK,EAAC,8BAA8B,CAAC;IACrC,IAAA,wBAAM,EAAC,eAAe,EAAE,EAAE,OAAO,EAAE,0BAA0B,EAAE,CAAC;;+CAC1C;2BAzDZ,gBAAgB;IAD5B,IAAA,gBAAM,EAAC,oBAAoB,CAAC;GAChB,gBAAgB,CA0D5B","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\entities\\metrica-seguranca.entity.ts"],"sourcesContent":["import { Entity, PrimaryGeneratedColumn, Column, Index, CreateDateColumn } from 'typeorm';\nimport { IsNotEmpty, IsOptional, IsUUID, IsString, MaxLength, IsIP, IsEnum } from 'class-validator';\n\n/**\n * Níveis de alerta para métricas de segurança\n */\nexport enum NivelAlertaEnum {\n  INFO = 'info',\n  AVISO = 'aviso',\n  CRITICO = 'critico',\n  EMERGENCIA = 'emergencia',\n}\n\n/**\n * Entidade que representa métricas de segurança específicas para LGPD\n * \n * Esta entidade armazena eventos de segurança relacionados à LGPD,\n * incluindo acessos a dados sensíveis, tentativas de autenticação,\n * e outras operações relevantes para conformidade.\n */\n@Entity('metricas_seguranca')\nexport class MetricaSeguranca {\n  @PrimaryGeneratedColumn('uuid')\n  id: string;\n\n  @Column({ length: 100 })\n  @Index('idx_metricas_seguranca_tipo')\n  @IsNotEmpty({ message: 'Tipo de evento é obrigatório' })\n  @IsString({ message: 'Tipo de evento deve ser uma string' })\n  @MaxLength(100, { message: 'Tipo de evento deve ter no máximo 100 caracteres' })\n  tipo_evento: string;\n\n  @CreateDateColumn({ name: 'created_at' })\n  @Index('idx_metricas_seguranca_timestamp')\n  created_at: Date;\n\n  @Column({ type: 'uuid', nullable: true })\n  @Index('idx_metricas_seguranca_usuario')\n  @IsOptional()\n  @IsUUID('4', { message: 'ID do usuário inválido' })\n  usuario_id: string;\n\n  @Column({ length: 50, nullable: true })\n  @IsOptional()\n  @IsString({ message: 'Perfil do usuário deve ser uma string' })\n  @MaxLength(50, { message: 'Perfil do usuário deve ter no máximo 50 caracteres' })\n  perfil_usuario: string;\n\n  @Column({ length: 45, nullable: true })\n  @Index('idx_metricas_seguranca_ip')\n  @IsOptional()\n  @IsIP(undefined, { message: 'IP de origem inválido' })\n  ip_origem: string;\n\n  @Column({ type: 'text', nullable: true })\n  @IsOptional()\n  @IsString({ message: 'User agent deve ser uma string' })\n  user_agent: string;\n\n  @Column({ length: 255, nullable: true })\n  @IsOptional()\n  @IsString({ message: 'Endpoint deve ser uma string' })\n  @MaxLength(255, { message: 'Endpoint deve ter no máximo 255 caracteres' })\n  endpoint: string;\n\n  @Column({ type: 'jsonb', nullable: true })\n  dados_acessados: Record<string, any>;\n\n  @Column({ type: 'jsonb', nullable: true })\n  detalhes: Record<string, any>;\n\n  @Column({\n    type: 'enum',\n    enum: NivelAlertaEnum,\n    default: NivelAlertaEnum.INFO\n  })\n  @Index('idx_metricas_seguranca_nivel')\n  @IsEnum(NivelAlertaEnum, { message: 'Nível de alerta inválido' })\n  nivel: NivelAlertaEnum;\n}\n"],"version":3}