32cfbfea1bd45f41b17accb081881b2b
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.NotificacaoModule = void 0;
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const config_1 = require("@nestjs/config");
const schedule_adapter_module_1 = require("../../shared/schedule/schedule-adapter.module");
const auth_module_1 = require("../../auth/auth.module");
// Controladores
const notificacao_controller_1 = require("./controllers/notificacao.controller");
const notification_template_controller_1 = require("./controllers/notification-template.controller");
// Serviços
const notificacao_service_1 = require("./services/notificacao.service");
const notification_manager_service_1 = require("./services/notification-manager.service");
const template_renderer_service_1 = require("./services/template-renderer.service");
const email_channel_service_1 = require("./channels/email-channel.service");
const sse_service_1 = require("./services/sse.service");
const sse_guard_1 = require("./guards/sse.guard");
// Entidades
const entities_1 = require("../../entities");
/**
 * Módulo de Notificações
 *
 * Responsável por gerenciar as notificações enviadas aos usuários do sistema,
 * incluindo criação, leitura e arquivamento.
 */
let NotificacaoModule = class NotificacaoModule {
};
exports.NotificacaoModule = NotificacaoModule;
exports.NotificacaoModule = NotificacaoModule = __decorate([
    (0, common_1.Module)({
        imports: [
            typeorm_1.TypeOrmModule.forFeature([entities_1.NotificacaoSistema, entities_1.NotificationTemplate]),
            schedule_adapter_module_1.ScheduleAdapterModule,
            config_1.ConfigModule,
            // Importa o módulo compartilhado de autenticação
            (0, common_1.forwardRef)(() => auth_module_1.AuthModule),
        ],
        controllers: [
            notificacao_controller_1.NotificacaoController,
            notification_template_controller_1.NotificationTemplateController,
        ],
        providers: [
            notificacao_service_1.NotificacaoService,
            notification_manager_service_1.NotificationManagerService,
            template_renderer_service_1.TemplateRendererService,
            email_channel_service_1.EmailChannelService,
            sse_service_1.SseService,
            sse_guard_1.SseGuard,
        ],
        exports: [notificacao_service_1.NotificacaoService, notification_manager_service_1.NotificationManagerService, sse_service_1.SseService],
    })
], NotificacaoModule);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXG5vdGlmaWNhY2FvXFxub3RpZmljYWNhby5tb2R1bGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsMkNBQW9EO0FBQ3BELDZDQUFnRDtBQUNoRCwyQ0FBOEM7QUFDOUMsMkZBQXNGO0FBQ3RGLHdEQUFtRDtBQUVuRCxnQkFBZ0I7QUFDaEIsaUZBQTZFO0FBQzdFLHFHQUFnRztBQUVoRyxXQUFXO0FBQ1gsd0VBQW9FO0FBQ3BFLDBGQUFxRjtBQUNyRixvRkFBK0U7QUFDL0UsNEVBQXVFO0FBQ3ZFLHdEQUFvRDtBQUNwRCxrREFBOEM7QUFFOUMsWUFBWTtBQUNaLDZDQUd3QjtBQUV4Qjs7Ozs7R0FLRztBQXVCSSxJQUFNLGlCQUFpQixHQUF2QixNQUFNLGlCQUFpQjtDQUFHLENBQUE7QUFBcEIsOENBQWlCOzRCQUFqQixpQkFBaUI7SUF0QjdCLElBQUEsZUFBTSxFQUFDO1FBQ04sT0FBTyxFQUFFO1lBQ1AsdUJBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyw2QkFBa0IsRUFBRSwrQkFBb0IsQ0FBQyxDQUFDO1lBQ3BFLCtDQUFxQjtZQUNyQixxQkFBWTtZQUNaLGlEQUFpRDtZQUNqRCxJQUFBLG1CQUFVLEVBQUMsR0FBRyxFQUFFLENBQUMsd0JBQVUsQ0FBQztTQUM3QjtRQUNELFdBQVcsRUFBRTtZQUNYLDhDQUFxQjtZQUNyQixpRUFBOEI7U0FDL0I7UUFDRCxTQUFTLEVBQUU7WUFDVCx3Q0FBa0I7WUFDbEIseURBQTBCO1lBQzFCLG1EQUF1QjtZQUN2QiwyQ0FBbUI7WUFDbkIsd0JBQVU7WUFDVixvQkFBUTtTQUNUO1FBQ0QsT0FBTyxFQUFFLENBQUMsd0NBQWtCLEVBQUUseURBQTBCLEVBQUUsd0JBQVUsQ0FBQztLQUN0RSxDQUFDO0dBQ1csaUJBQWlCLENBQUciLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXG5vdGlmaWNhY2FvXFxub3RpZmljYWNhby5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlLCBmb3J3YXJkUmVmIH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHsgVHlwZU9ybU1vZHVsZSB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XG5pbXBvcnQgeyBDb25maWdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL2NvbmZpZyc7XG5pbXBvcnQgeyBTY2hlZHVsZUFkYXB0ZXJNb2R1bGUgfSBmcm9tICcuLi8uLi9zaGFyZWQvc2NoZWR1bGUvc2NoZWR1bGUtYWRhcHRlci5tb2R1bGUnO1xuaW1wb3J0IHsgQXV0aE1vZHVsZSB9IGZyb20gJy4uLy4uL2F1dGgvYXV0aC5tb2R1bGUnXG5cbi8vIENvbnRyb2xhZG9yZXNcbmltcG9ydCB7IE5vdGlmaWNhY2FvQ29udHJvbGxlciB9IGZyb20gJy4vY29udHJvbGxlcnMvbm90aWZpY2FjYW8uY29udHJvbGxlcic7XG5pbXBvcnQgeyBOb3RpZmljYXRpb25UZW1wbGF0ZUNvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXJzL25vdGlmaWNhdGlvbi10ZW1wbGF0ZS5jb250cm9sbGVyJztcblxuLy8gU2VydmnDp29zXG5pbXBvcnQgeyBOb3RpZmljYWNhb1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25vdGlmaWNhY2FvLnNlcnZpY2UnO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uTWFuYWdlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25vdGlmaWNhdGlvbi1tYW5hZ2VyLnNlcnZpY2UnO1xuaW1wb3J0IHsgVGVtcGxhdGVSZW5kZXJlclNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3RlbXBsYXRlLXJlbmRlcmVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgRW1haWxDaGFubmVsU2VydmljZSB9IGZyb20gJy4vY2hhbm5lbHMvZW1haWwtY2hhbm5lbC5zZXJ2aWNlJztcbmltcG9ydCB7IFNzZVNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL3NzZS5zZXJ2aWNlJztcbmltcG9ydCB7IFNzZUd1YXJkIH0gZnJvbSAnLi9ndWFyZHMvc3NlLmd1YXJkJztcblxuLy8gRW50aWRhZGVzXG5pbXBvcnQgeyBcbiAgTm90aWZpY2FjYW9TaXN0ZW1hLCBcbiAgTm90aWZpY2F0aW9uVGVtcGxhdGUgXG59IGZyb20gJy4uLy4uL2VudGl0aWVzJztcblxuLyoqXG4gKiBNw7NkdWxvIGRlIE5vdGlmaWNhw6fDtWVzXG4gKlxuICogUmVzcG9uc8OhdmVsIHBvciBnZXJlbmNpYXIgYXMgbm90aWZpY2HDp8O1ZXMgZW52aWFkYXMgYW9zIHVzdcOhcmlvcyBkbyBzaXN0ZW1hLFxuICogaW5jbHVpbmRvIGNyaWHDp8OjbywgbGVpdHVyYSBlIGFycXVpdmFtZW50by5cbiAqL1xuQE1vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBUeXBlT3JtTW9kdWxlLmZvckZlYXR1cmUoW05vdGlmaWNhY2FvU2lzdGVtYSwgTm90aWZpY2F0aW9uVGVtcGxhdGVdKSxcbiAgICBTY2hlZHVsZUFkYXB0ZXJNb2R1bGUsXG4gICAgQ29uZmlnTW9kdWxlLFxuICAgIC8vIEltcG9ydGEgbyBtw7NkdWxvIGNvbXBhcnRpbGhhZG8gZGUgYXV0ZW50aWNhw6fDo29cbiAgICBmb3J3YXJkUmVmKCgpID0+IEF1dGhNb2R1bGUpLFxuICBdLFxuICBjb250cm9sbGVyczogW1xuICAgIE5vdGlmaWNhY2FvQ29udHJvbGxlcixcbiAgICBOb3RpZmljYXRpb25UZW1wbGF0ZUNvbnRyb2xsZXIsXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIE5vdGlmaWNhY2FvU2VydmljZSxcbiAgICBOb3RpZmljYXRpb25NYW5hZ2VyU2VydmljZSxcbiAgICBUZW1wbGF0ZVJlbmRlcmVyU2VydmljZSxcbiAgICBFbWFpbENoYW5uZWxTZXJ2aWNlLFxuICAgIFNzZVNlcnZpY2UsXG4gICAgU3NlR3VhcmQsXG4gIF0sXG4gIGV4cG9ydHM6IFtOb3RpZmljYWNhb1NlcnZpY2UsIE5vdGlmaWNhdGlvbk1hbmFnZXJTZXJ2aWNlLCBTc2VTZXJ2aWNlXSxcbn0pXG5leHBvcnQgY2xhc3MgTm90aWZpY2FjYW9Nb2R1bGUge31cbiJdLCJ2ZXJzaW9uIjozfQ==