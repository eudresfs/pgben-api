{"file":"C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\shared\\cache\\cache.module.ts","mappings":";;;;;;;;;AAAA,2CAAwC;AACxC,2CAA6D;AAC7D,mDAA+C;AAC/C,qEAAgE;AAChE,uCAA0C;AAC1C,uEAAmE;AACnE,iDAAgD;AA4BzC,IAAM,WAAW,GAAjB,MAAM,WAAW;CAAG,CAAA;AAAd,kCAAW;sBAAX,WAAW;IA1BvB,IAAA,eAAM,EAAC;QACN,OAAO,EAAE;YACP,2DAA2D;YAC3D,iBAAU,CAAC,kBAAkB,CAAC;gBAC5B,IAAI,EAAE,OAAO;gBACb,OAAO,EAAE,CAAC,qBAAY,CAAC;gBACvB,UAAU,EAAE,CAAC,aAA4B,EAAE,EAAE,CAAC,CAAC;oBAC7C,KAAK,EAAE,IAAA,6BAAc,EAAC,aAAa,CAAC;oBACpC,iBAAiB,EAAE;wBACjB,QAAQ,EAAE,CAAC;wBACX,OAAO,EAAE;4BACP,IAAI,EAAE,aAAa;4BACnB,KAAK,EAAE,IAAI;yBACZ;wBACD,gBAAgB,EAAE,IAAI;wBACtB,OAAO,EAAE,IAAI,EAAE,kCAAkC;qBAClD;iBACF,CAAC;gBACF,MAAM,EAAE,CAAC,sBAAa,CAAC;aACxB,CAAC;YACF,8EAA8E;YAC9E,oCAAgB;SACjB;QACD,SAAS,EAAE,CAAC,4BAAY,EAAE,6CAAoB,CAAC;QAC/C,OAAO,EAAE,CAAC,4BAAY,EAAE,6CAAoB,CAAC;KAC9C,CAAC;GACW,WAAW,CAAG","names":[],"sources":["C:\\Users\\eudre\\OneDrive\\Desktop\\Projetos\\pgben\\pgben-server\\src\\shared\\cache\\cache.module.ts"],"sourcesContent":["import { Module } from '@nestjs/common';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { CacheService } from './cache.service';\nimport { CacheMetricsProvider } from './cache-metrics.provider';\nimport { BullModule } from '@nestjs/bull';\nimport { MonitoringModule } from '../monitoring/monitoring.module';\nimport { getRedisConfig } from './redis.config';\n\n@Module({\n  imports: [\n    // Registramos a fila de cache com configurações otimizadas\n    BullModule.registerQueueAsync({\n      name: 'cache',\n      imports: [ConfigModule],\n      useFactory: (configService: ConfigService) => ({\n        redis: getRedisConfig(configService),\n        defaultJobOptions: {\n          attempts: 3,\n          backoff: {\n            type: 'exponential',\n            delay: 1000,\n          },\n          removeOnComplete: true,\n          timeout: 5000, // 5 segundos de timeout para jobs\n        },\n      }),\n      inject: [ConfigService],\n    }),\n    // Importamos o módulo de monitoramento para ter acesso ao serviço de métricas\n    MonitoringModule,\n  ],\n  providers: [CacheService, CacheMetricsProvider],\n  exports: [CacheService, CacheMetricsProvider],\n})\nexport class CacheModule {}\n"],"version":3}