53166f6c4d05adc89d3b9c12c335dd14
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b;
Object.defineProperty(exports, "__esModule", { value: true });
exports.CreatePapelCidadaoDto = void 0;
const swagger_1 = require("@nestjs/swagger");
const class_validator_1 = require("class-validator");
const class_transformer_1 = require("class-transformer");
const tipo_papel_enum_1 = require("../../../enums/tipo-papel.enum");
/**
 * DTO para criação de papel de cidadão
 *
 * Contém os dados necessários para atribuir um papel específico a um cidadão
 */
class CreatePapelCidadaoDto {
    tipo_papel;
    cidadao_id;
    metadados;
    'metadados.documento_representacao';
    'metadados.data_validade_representacao';
    'metadados.grau_parentesco';
}
exports.CreatePapelCidadaoDto = CreatePapelCidadaoDto;
__decorate([
    (0, class_validator_1.IsEnum)(tipo_papel_enum_1.TipoPapel, { message: 'Tipo de papel inválido' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Tipo de papel é obrigatório' }),
    (0, swagger_1.ApiProperty)({
        enum: tipo_papel_enum_1.TipoPapel,
        example: tipo_papel_enum_1.TipoPapel.BENEFICIARIO,
        description: 'Tipo de papel que o cidadão irá assumir',
    }),
    __metadata("design:type", typeof (_a = typeof tipo_papel_enum_1.PaperType !== "undefined" && tipo_papel_enum_1.PaperType) === "function" ? _a : Object)
], CreatePapelCidadaoDto.prototype, "tipo_papel", void 0);
__decorate([
    (0, class_validator_1.IsUUID)('4', { message: 'ID do cidadão deve ser um UUID válido' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID do cidadão é obrigatório' }),
    (0, swagger_1.ApiProperty)({
        example: '123e4567-e89b-12d3-a456-426614174000',
        description: 'ID do cidadão que receberá o papel',
    }),
    __metadata("design:type", String)
], CreatePapelCidadaoDto.prototype, "cidadao_id", void 0);
__decorate([
    (0, class_validator_1.IsOptional)(),
    (0, swagger_1.ApiPropertyOptional)({
        type: 'object',
        additionalProperties: true,
        example: {
            grau_parentesco: 'Mãe',
            documento_representacao: '12345',
            data_validade_representacao: '2026-01-01',
        },
        description: 'Metadados específicos do papel (varia conforme o tipo de papel)',
    }),
    __metadata("design:type", Object)
], CreatePapelCidadaoDto.prototype, "metadados", void 0);
__decorate([
    (0, class_validator_1.ValidateIf)((o) => o.tipo_papel === tipo_papel_enum_1.TipoPapel.REPRESENTANTE_LEGAL),
    (0, class_validator_1.IsString)({
        message: 'Documento de representação é obrigatório para representantes legais',
    }),
    (0, class_validator_1.IsNotEmpty)({
        message: 'Documento de representação é obrigatório para representantes legais',
    }),
    __metadata("design:type", String)
], CreatePapelCidadaoDto.prototype, "metadados.documento_representacao", void 0);
__decorate([
    (0, class_validator_1.ValidateIf)((o) => o.tipo_papel === tipo_papel_enum_1.TipoPapel.REPRESENTANTE_LEGAL),
    (0, class_validator_1.IsDate)({
        message: 'Data de validade da representação deve ser uma data válida',
    }),
    (0, class_transformer_1.Type)(() => Date),
    (0, class_validator_1.IsNotEmpty)({
        message: 'Data de validade da representação é obrigatória para representantes legais',
    }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], CreatePapelCidadaoDto.prototype, "metadados.data_validade_representacao", void 0);
__decorate([
    (0, class_validator_1.ValidateIf)((o) => o.tipo_papel === tipo_papel_enum_1.TipoPapel.REQUERENTE),
    (0, class_validator_1.IsString)({ message: 'Grau de parentesco deve ser uma string' }),
    (0, class_validator_1.IsNotEmpty)({ message: 'Grau de parentesco é obrigatório para requerentes' }),
    __metadata("design:type", String)
], CreatePapelCidadaoDto.prototype, "metadados.grau_parentesco", void 0);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNpZGFkYW9cXGR0b1xcY3JlYXRlLXBhcGVsLWNpZGFkYW8uZHRvLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSw2Q0FBbUU7QUFDbkUscURBUXlCO0FBQ3pCLHlEQUF5QztBQUN6QyxvRUFBc0U7QUFFdEU7Ozs7R0FJRztBQUNILE1BQWEscUJBQXFCO0lBUWhDLFVBQVUsQ0FBWTtJQVF0QixVQUFVLENBQVM7SUFjbkIsU0FBUyxDQUtQO0lBV0YsbUNBQW1DLENBQVU7SUFXN0MsdUNBQXVDLENBQVE7SUFLL0MsMkJBQTJCLENBQVU7Q0FDdEM7QUEvREQsc0RBK0RDO0FBdkRDO0lBUEMsSUFBQSx3QkFBTSxFQUFDLDJCQUFTLEVBQUUsRUFBRSxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsQ0FBQztJQUN4RCxJQUFBLDRCQUFVLEVBQUMsRUFBRSxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsQ0FBQztJQUN0RCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxJQUFJLEVBQUUsMkJBQVM7UUFDZixPQUFPLEVBQUUsMkJBQVMsQ0FBQyxZQUFZO1FBQy9CLFdBQVcsRUFBRSx5Q0FBeUM7S0FDdkQsQ0FBQztrREFDVSwyQkFBUyxvQkFBVCwyQkFBUzt5REFBQztBQVF0QjtJQU5DLElBQUEsd0JBQU0sRUFBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsdUNBQXVDLEVBQUUsQ0FBQztJQUNqRSxJQUFBLDRCQUFVLEVBQUMsRUFBRSxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsQ0FBQztJQUN0RCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxPQUFPLEVBQUUsc0NBQXNDO1FBQy9DLFdBQVcsRUFBRSxvQ0FBb0M7S0FDbEQsQ0FBQzs7eURBQ2lCO0FBY25CO0lBWkMsSUFBQSw0QkFBVSxHQUFFO0lBQ1osSUFBQSw2QkFBbUIsRUFBQztRQUNuQixJQUFJLEVBQUUsUUFBUTtRQUNkLG9CQUFvQixFQUFFLElBQUk7UUFDMUIsT0FBTyxFQUFFO1lBQ1AsZUFBZSxFQUFFLEtBQUs7WUFDdEIsdUJBQXVCLEVBQUUsT0FBTztZQUNoQywyQkFBMkIsRUFBRSxZQUFZO1NBQzFDO1FBQ0QsV0FBVyxFQUNULGlFQUFpRTtLQUNwRSxDQUFDOzt3REFNQTtBQVdGO0lBVEMsSUFBQSw0QkFBVSxFQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxLQUFLLDJCQUFTLENBQUMsbUJBQW1CLENBQUM7SUFDakUsSUFBQSwwQkFBUSxFQUFDO1FBQ1IsT0FBTyxFQUNMLHFFQUFxRTtLQUN4RSxDQUFDO0lBQ0QsSUFBQSw0QkFBVSxFQUFDO1FBQ1YsT0FBTyxFQUNMLHFFQUFxRTtLQUN4RSxDQUFDOztnRkFDMkM7QUFXN0M7SUFUQyxJQUFBLDRCQUFVLEVBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxVQUFVLEtBQUssMkJBQVMsQ0FBQyxtQkFBbUIsQ0FBQztJQUNqRSxJQUFBLHdCQUFNLEVBQUM7UUFDTixPQUFPLEVBQUUsNERBQTREO0tBQ3RFLENBQUM7SUFDRCxJQUFBLHdCQUFJLEVBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDO0lBQ2hCLElBQUEsNEJBQVUsRUFBQztRQUNWLE9BQU8sRUFDTCw0RUFBNEU7S0FDL0UsQ0FBQztrREFDd0MsSUFBSSxvQkFBSixJQUFJO29GQUFDO0FBSy9DO0lBSEMsSUFBQSw0QkFBVSxFQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsVUFBVSxLQUFLLDJCQUFTLENBQUMsVUFBVSxDQUFDO0lBQ3hELElBQUEsMEJBQVEsRUFBQyxFQUFFLE9BQU8sRUFBRSx3Q0FBd0MsRUFBRSxDQUFDO0lBQy9ELElBQUEsNEJBQVUsRUFBQyxFQUFFLE9BQU8sRUFBRSxtREFBbUQsRUFBRSxDQUFDOzt3RUFDeEMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNpZGFkYW9cXGR0b1xcY3JlYXRlLXBhcGVsLWNpZGFkYW8uZHRvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwaVByb3BlcnR5LCBBcGlQcm9wZXJ0eU9wdGlvbmFsIH0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7XG4gIElzRW51bSxcbiAgSXNOb3RFbXB0eSxcbiAgSXNPcHRpb25hbCxcbiAgSXNTdHJpbmcsXG4gIElzVVVJRCxcbiAgVmFsaWRhdGVJZixcbiAgSXNEYXRlLFxufSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xuaW1wb3J0IHsgVHlwZSB9IGZyb20gJ2NsYXNzLXRyYW5zZm9ybWVyJztcbmltcG9ydCB7IFRpcG9QYXBlbCwgUGFwZXJUeXBlIH0gZnJvbSAnLi4vLi4vLi4vZW51bXMvdGlwby1wYXBlbC5lbnVtJztcblxuLyoqXG4gKiBEVE8gcGFyYSBjcmlhw6fDo28gZGUgcGFwZWwgZGUgY2lkYWTDo29cbiAqXG4gKiBDb250w6ltIG9zIGRhZG9zIG5lY2Vzc8OhcmlvcyBwYXJhIGF0cmlidWlyIHVtIHBhcGVsIGVzcGVjw61maWNvIGEgdW0gY2lkYWTDo29cbiAqL1xuZXhwb3J0IGNsYXNzIENyZWF0ZVBhcGVsQ2lkYWRhb0R0byB7XG4gIEBJc0VudW0oVGlwb1BhcGVsLCB7IG1lc3NhZ2U6ICdUaXBvIGRlIHBhcGVsIGludsOhbGlkbycgfSlcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnVGlwbyBkZSBwYXBlbCDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBBcGlQcm9wZXJ0eSh7XG4gICAgZW51bTogVGlwb1BhcGVsLFxuICAgIGV4YW1wbGU6IFRpcG9QYXBlbC5CRU5FRklDSUFSSU8sXG4gICAgZGVzY3JpcHRpb246ICdUaXBvIGRlIHBhcGVsIHF1ZSBvIGNpZGFkw6NvIGlyw6EgYXNzdW1pcicsXG4gIH0pXG4gIHRpcG9fcGFwZWw6IFBhcGVyVHlwZTtcblxuICBASXNVVUlEKCc0JywgeyBtZXNzYWdlOiAnSUQgZG8gY2lkYWTDo28gZGV2ZSBzZXIgdW0gVVVJRCB2w6FsaWRvJyB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdJRCBkbyBjaWRhZMOjbyDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIEBBcGlQcm9wZXJ0eSh7XG4gICAgZXhhbXBsZTogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcsXG4gICAgZGVzY3JpcHRpb246ICdJRCBkbyBjaWRhZMOjbyBxdWUgcmVjZWJlcsOhIG8gcGFwZWwnLFxuICB9KVxuICBjaWRhZGFvX2lkOiBzdHJpbmc7XG5cbiAgQElzT3B0aW9uYWwoKVxuICBAQXBpUHJvcGVydHlPcHRpb25hbCh7XG4gICAgdHlwZTogJ29iamVjdCcsXG4gICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG4gICAgZXhhbXBsZToge1xuICAgICAgZ3JhdV9wYXJlbnRlc2NvOiAnTcOjZScsXG4gICAgICBkb2N1bWVudG9fcmVwcmVzZW50YWNhbzogJzEyMzQ1JyxcbiAgICAgIGRhdGFfdmFsaWRhZGVfcmVwcmVzZW50YWNhbzogJzIwMjYtMDEtMDEnLFxuICAgIH0sXG4gICAgZGVzY3JpcHRpb246XG4gICAgICAnTWV0YWRhZG9zIGVzcGVjw61maWNvcyBkbyBwYXBlbCAodmFyaWEgY29uZm9ybWUgbyB0aXBvIGRlIHBhcGVsKScsXG4gIH0pXG4gIG1ldGFkYWRvcz86IHtcbiAgICBncmF1X3BhcmVudGVzY28/OiBzdHJpbmc7XG4gICAgZG9jdW1lbnRvX3JlcHJlc2VudGFjYW8/OiBzdHJpbmc7XG4gICAgZGF0YV92YWxpZGFkZV9yZXByZXNlbnRhY2FvPzogRGF0ZTtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG4gIH07XG5cbiAgQFZhbGlkYXRlSWYoKG8pID0+IG8udGlwb19wYXBlbCA9PT0gVGlwb1BhcGVsLlJFUFJFU0VOVEFOVEVfTEVHQUwpXG4gIEBJc1N0cmluZyh7XG4gICAgbWVzc2FnZTpcbiAgICAgICdEb2N1bWVudG8gZGUgcmVwcmVzZW50YcOnw6NvIMOpIG9icmlnYXTDs3JpbyBwYXJhIHJlcHJlc2VudGFudGVzIGxlZ2FpcycsXG4gIH0pXG4gIEBJc05vdEVtcHR5KHtcbiAgICBtZXNzYWdlOlxuICAgICAgJ0RvY3VtZW50byBkZSByZXByZXNlbnRhw6fDo28gw6kgb2JyaWdhdMOzcmlvIHBhcmEgcmVwcmVzZW50YW50ZXMgbGVnYWlzJyxcbiAgfSlcbiAgJ21ldGFkYWRvcy5kb2N1bWVudG9fcmVwcmVzZW50YWNhbyc/OiBzdHJpbmc7XG5cbiAgQFZhbGlkYXRlSWYoKG8pID0+IG8udGlwb19wYXBlbCA9PT0gVGlwb1BhcGVsLlJFUFJFU0VOVEFOVEVfTEVHQUwpXG4gIEBJc0RhdGUoe1xuICAgIG1lc3NhZ2U6ICdEYXRhIGRlIHZhbGlkYWRlIGRhIHJlcHJlc2VudGHDp8OjbyBkZXZlIHNlciB1bWEgZGF0YSB2w6FsaWRhJyxcbiAgfSlcbiAgQFR5cGUoKCkgPT4gRGF0ZSlcbiAgQElzTm90RW1wdHkoe1xuICAgIG1lc3NhZ2U6XG4gICAgICAnRGF0YSBkZSB2YWxpZGFkZSBkYSByZXByZXNlbnRhw6fDo28gw6kgb2JyaWdhdMOzcmlhIHBhcmEgcmVwcmVzZW50YW50ZXMgbGVnYWlzJyxcbiAgfSlcbiAgJ21ldGFkYWRvcy5kYXRhX3ZhbGlkYWRlX3JlcHJlc2VudGFjYW8nPzogRGF0ZTtcblxuICBAVmFsaWRhdGVJZigobykgPT4gby50aXBvX3BhcGVsID09PSBUaXBvUGFwZWwuUkVRVUVSRU5URSlcbiAgQElzU3RyaW5nKHsgbWVzc2FnZTogJ0dyYXUgZGUgcGFyZW50ZXNjbyBkZXZlIHNlciB1bWEgc3RyaW5nJyB9KVxuICBASXNOb3RFbXB0eSh7IG1lc3NhZ2U6ICdHcmF1IGRlIHBhcmVudGVzY28gw6kgb2JyaWdhdMOzcmlvIHBhcmEgcmVxdWVyZW50ZXMnIH0pXG4gICdtZXRhZGFkb3MuZ3JhdV9wYXJlbnRlc2NvJz86IHN0cmluZztcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==