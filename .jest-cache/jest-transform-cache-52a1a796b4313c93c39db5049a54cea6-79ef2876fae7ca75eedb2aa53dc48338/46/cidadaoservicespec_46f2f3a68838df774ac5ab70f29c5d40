3168072ad4d21352b69e9290ef8a14e1
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const common_1 = require("@nestjs/common");
const typeorm_1 = require("@nestjs/typeorm");
const class_transformer_1 = require("class-transformer");
const cidadao_service_1 = require("@modules/cidadao/services/cidadao.service");
const cidadao_repository_1 = require("@modules/cidadao/repositories/cidadao.repository");
const cidadao_entity_1 = require("@modules/cidadao/entities/cidadao.entity");
const cidadao_response_dto_1 = require("@modules/cidadao/dto/cidadao-response.dto");
const cache_service_1 = require("@/shared/cache/cache.service");
const papel_cidadao_service_1 = require("@modules/cidadao/services/papel-cidadao.service");
describe('CidadaoService', () => {
    let service;
    let repository;
    let cacheService;
    let papelCidadaoService;
    const mockCidadaoRepository = {
        create: jest.fn(),
        save: jest.fn(),
        find: jest.fn(),
        findOne: jest.fn(),
        update: jest.fn(),
        delete: jest.fn(),
        count: jest.fn(),
        findByCpf: jest.fn(),
        findByNis: jest.fn(),
        findById: jest.fn(),
        findAll: jest.fn(),
    };
    const mockCacheService = {
        get: jest.fn(),
        set: jest.fn(),
        del: jest.fn(),
        clear: jest.fn(),
    };
    const mockPapelCidadaoService = {
        create: jest.fn(),
        createMany: jest.fn(),
        findAll: jest.fn(),
        findOne: jest.fn(),
        update: jest.fn(),
        remove: jest.fn(),
        findByTipo: jest.fn(),
    };
    const mockCidadao = {
        id: '550e8400-e29b-41d4-a716-446655440000',
        nome: 'João da Silva',
        cpf: '12345678901',
        rg: '1234567',
        data_nascimento: new Date('1990-01-01'),
        sexo: cidadao_entity_1.Sexo.MASCULINO,
        email: 'joao@example.com',
        telefone: '84999999999',
        nis: '12345678901',
        endereco: {
            logradouro: 'Rua Exemplo',
            numero: '123',
            complemento: 'Apto 101',
            bairro: 'Centro',
            cidade: 'Natal',
            estado: 'RN',
            cep: '59000000',
        },
        created_at: new Date(),
        updated_at: new Date(),
        composicao_familiar: [],
        papeis: [],
        nome_social: '',
        nome_mae: 'nome da mãoe do cidadão',
        naturalidade: 'Natal',
        prontuario_suas: 'CD651651',
        ativo: false,
        removed_at: null,
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                cidadao_service_1.CidadaoService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(cidadao_entity_1.Cidadao),
                    useValue: {},
                },
                {
                    provide: cidadao_repository_1.CidadaoRepository,
                    useValue: mockCidadaoRepository,
                },
                {
                    provide: cache_service_1.CacheService,
                    useValue: mockCacheService,
                },
                {
                    provide: papel_cidadao_service_1.PapelCidadaoService,
                    useValue: mockPapelCidadaoService,
                },
            ],
        }).compile();
        service = module.get(cidadao_service_1.CidadaoService);
        repository = module.get(cidadao_repository_1.CidadaoRepository);
        cacheService = module.get(cache_service_1.CacheService);
        papelCidadaoService = module.get(papel_cidadao_service_1.PapelCidadaoService);
        // Resetar mocks
        jest.clearAllMocks();
    });
    it('deve estar definido', () => {
        expect(service).toBeDefined();
    });
    describe('findAll', () => {
        it('deve retornar uma lista paginada de cidadãos', async () => {
            const mockCidadaoList = [mockCidadao];
            const total = 1;
            mockCidadaoRepository.findAll.mockResolvedValue([mockCidadaoList, total]);
            const result = await service.findAll({
                page: 1,
                limit: 10,
            });
            expect(result).toEqual({
                items: (0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadaoList, {
                    excludeExtraneousValues: true,
                }),
                meta: {
                    total,
                    page: 1,
                    limit: 10,
                    pages: 1,
                    hasNext: false,
                    hasPrev: false,
                },
            });
            expect(mockCidadaoRepository.findAll).toHaveBeenCalledWith({
                skip: 0,
                take: 10,
                where: {},
                order: { nome: 'ASC' },
            });
        });
        it('deve aplicar filtros de busca', async () => {
            const filters = {
                search: 'João',
                bairro: 'Centro',
                unidadeId: 'unidade-1',
                ativo: true,
                page: 1,
                limit: 10,
            };
            mockCidadaoRepository.findAll.mockResolvedValue([[], 0]);
            await service.findAll(filters);
            expect(mockCidadaoRepository.findAll).toHaveBeenCalledWith({
                skip: 0,
                take: 10,
                where: expect.objectContaining({
                    $or: expect.arrayContaining([
                        { nome: { $iLike: '%João%' } },
                        { cpf: { $iLike: '%%' } },
                        { nis: { $iLike: '%%' } },
                    ]),
                    'endereco.bairro': { $iLike: '%Centro%' },
                    unidadeId: filters.unidadeId,
                    ativo: true,
                }),
                order: { nome: 'ASC' },
            });
        });
        it('deve retornar lista vazia quando não houver resultados', async () => {
            mockCidadaoRepository.findAll.mockResolvedValue([[], 0]);
            const result = await service.findAll({});
            expect(result.items).toHaveLength(0);
            expect(result.meta.total).toBe(0);
        });
        it('deve calcular corretamente a paginação', async () => {
            const totalItems = 25;
            const page = 2;
            const limit = 10;
            mockCidadaoRepository.findAll.mockResolvedValue([
                new Array(limit).fill(mockCidadao),
                totalItems,
            ]);
            const result = await service.findAll({ page, limit });
            expect(result.meta).toEqual({
                total: totalItems,
                page,
                limit,
                pages: 3,
                hasNext: true,
                hasPrev: true,
            });
            expect(mockCidadaoRepository.findAll).toHaveBeenCalledWith({
                skip: 10, // (page - 1) * limit
                take: limit,
                where: {},
                order: { nome: 'ASC' },
            });
        });
    });
    describe('findById', () => {
        it('deve retornar um cidadão pelo ID', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            const result = await service.findById(mockCidadao.id);
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findById).toHaveBeenCalledWith(mockCidadao.id, true);
        });
        it('deve retornar cidadão sem relacionamentos quando includeRelations for false', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            const result = await service.findById(mockCidadao.id, false);
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findById).toHaveBeenCalledWith(mockCidadao.id, false);
        });
        it('deve retornar os dados corretos no DTO de resposta', async () => {
            const cidadaoCompleto = {
                ...mockCidadao,
                data_nascimento: new Date('1990-01-01'),
                sexo: cidadao_entity_1.Sexo.MASCULINO,
                nome_mae: 'Maria da Silva',
                nome_pai: 'João Silva',
                email: 'joao@example.com',
                telefone: '11999999999',
                nis: '12345678901',
                cns: '123456789012345',
                foto_url: 'http://example.com/foto.jpg',
                endereco: {
                    cep: '12345678',
                    logradouro: 'Rua Exemplo',
                    numero: '123',
                    complemento: 'Apto 101',
                    bairro: 'Centro',
                    cidade: 'São Paulo',
                    estado: 'SP',
                },
                created_at: new Date(),
                updated_at: new Date(),
            };
            mockCidadaoRepository.findById.mockResolvedValue(cidadaoCompleto);
            const result = await service.findById(mockCidadao.id);
            expect(result).toMatchObject({
                id: mockCidadao.id,
                nome: mockCidadao.nome,
                cpf: mockCidadao.cpf,
                rg: mockCidadao.rg,
                dataNascimento: expect.any(String),
                sexo: cidadao_entity_1.Sexo.MASCULINO,
                nomeMae: 'Maria da Silva',
                nomePai: 'João Silva',
                email: 'joao@example.com',
                telefone: '11999999999',
                cep: '12345678',
                logradouro: 'Rua Exemplo',
                numero: '123',
                complemento: 'Apto 101',
                bairro: 'Centro',
                cidade: 'São Paulo',
                uf: 'SP',
                nis: '12345678901',
                cns: '123456789012345',
                fotoUrl: 'http://example.com/foto.jpg',
                createdAt: expect.any(String),
                updatedAt: expect.any(String),
            });
        });
        it('deve lançar BadRequestException para ID vazio', async () => {
            await expect(service.findById('')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar NotFoundException quando o cidadão não for encontrado', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(null);
            await expect(service.findById('id-inexistente')).rejects.toThrow(common_1.NotFoundException);
        });
        it('deve lançar InternalServerErrorException em caso de erro inesperado', async () => {
            mockCidadaoRepository.findById.mockRejectedValue(new Error('Erro inesperado'));
            await expect(service.findById('id-válido')).rejects.toThrow(common_1.InternalServerErrorException);
        });
    });
    describe('findByCpf', () => {
        it('deve retornar um cidadão pelo CPF', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(mockCidadao);
            const result = await service.findByCpf('123.456.789-09');
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findByCpf).toHaveBeenCalledWith('12345678909', false);
        });
        it('deve retornar cidadão sem relacionamentos quando includeRelations for false', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(mockCidadao);
            const result = await service.findByCpf('123.456.789-09', false);
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findByCpf).toHaveBeenCalledWith('12345678909', false);
        });
        it('deve formatar o CPF removendo caracteres não numéricos', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(mockCidadao);
            await service.findByCpf('123.456.789-09');
            expect(mockCidadaoRepository.findByCpf).toHaveBeenCalledWith('12345678909', false);
        });
        it('deve lançar BadRequestException para CPF vazio', async () => {
            await expect(service.findByCpf('')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para CPF com menos de 11 dígitos', async () => {
            await expect(service.findByCpf('1234567890')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para CPF com mais de 11 dígitos', async () => {
            await expect(service.findByCpf('123456789012')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para CPF com caracteres não numéricos', async () => {
            await expect(service.findByCpf('123abc456de')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para CPF inválido (todos dígitos iguais)', async () => {
            await expect(service.findByCpf('111.111.111-11')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para CPF inválido (dígito verificador incorreto)', async () => {
            // CPF válido seria 123.456.789-09
            await expect(service.findByCpf('123.456.789-10')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar NotFoundException quando o cidadão não for encontrado', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(null);
            await expect(service.findByCpf('123.456.789-09')).rejects.toThrow(common_1.NotFoundException);
        });
    });
    describe('findByNis', () => {
        it('deve retornar um cidadão pelo NIS', async () => {
            mockCidadaoRepository.findByNis.mockResolvedValue(mockCidadao);
            const result = await service.findByNis('12345678901');
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findByNis).toHaveBeenCalledWith('12345678901', false);
        });
        it('deve retornar cidadão sem relacionamentos quando includeRelations for false', async () => {
            mockCidadaoRepository.findByNis.mockResolvedValue(mockCidadao);
            const result = await service.findByNis('12345678901', false);
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.findByNis).toHaveBeenCalledWith('12345678901', false);
        });
        it('deve formatar o NIS removendo caracteres não numéricos', async () => {
            mockCidadaoRepository.findByNis.mockResolvedValue(mockCidadao);
            await service.findByNis('123.456.789-01');
            expect(mockCidadaoRepository.findByNis).toHaveBeenCalledWith('12345678901', false);
        });
        it('deve lançar BadRequestException para NIS vazio', async () => {
            await expect(service.findByNis('')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para NIS com menos de 11 dígitos', async () => {
            await expect(service.findByNis('1234567890')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para NIS com mais de 11 dígitos', async () => {
            await expect(service.findByNis('123456789012')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para NIS com caracteres não numéricos', async () => {
            await expect(service.findByNis('123abc456de')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar NotFoundException quando o cidadão não for encontrado', async () => {
            mockCidadaoRepository.findByNis.mockResolvedValue(null);
            await expect(service.findByNis('11122233344')).rejects.toThrow(common_1.NotFoundException);
        });
        it('deve remover formatação do NIS antes de buscar', async () => {
            mockCidadaoRepository.findByNis.mockResolvedValue(mockCidadao);
            await service.findByNis('123.456.789-01');
            expect(mockCidadaoRepository.findByNis).toHaveBeenCalledWith('12345678901', false);
        });
    });
    describe('create', () => {
        const createCidadaoDto = {
            nome: 'João da Silva',
            cpf: '123.456.789-01',
            rg: '1234567',
            data_nascimento: new Date('1990-01-01'),
            sexo: cidadao_entity_1.Sexo.MASCULINO,
            email: 'joao@example.com',
            telefone: '84999999999',
            nis: '12345678901',
            endereco: {
                logradouro: 'Rua Exemplo',
                numero: '123',
                complemento: 'Apto 101',
                bairro: 'Centro',
                cidade: 'Natal',
                estado: 'RN',
                cep: '59000-000',
            },
            renda: 5000,
        };
        beforeEach(() => {
            jest.clearAllMocks();
        });
        it('deve criar um novo cidadão', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(null);
            mockCidadaoRepository.findByNis.mockResolvedValue(null);
            mockCidadaoRepository.create.mockResolvedValue(mockCidadao);
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            const result = await service.create(createCidadaoDto, 'unidade-1', 'user-1');
            expect(result).toEqual((0, class_transformer_1.plainToInstance)(cidadao_response_dto_1.CidadaoResponseDto, mockCidadao, {
                excludeExtraneousValues: true,
                enableImplicitConversion: false,
            }));
            expect(mockCidadaoRepository.create).toHaveBeenCalledWith({
                ...createCidadaoDto,
                cpf: '12345678901',
                nis: '12345678901',
            });
        });
        it('deve formatar CPF e NIS removendo caracteres não numéricos', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(null);
            mockCidadaoRepository.findByNis.mockResolvedValue(null);
            mockCidadaoRepository.create.mockResolvedValue(mockCidadao);
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            await service.create({
                ...createCidadaoDto,
                cpf: '123.456.789-01',
                nis: '123.456.789-01',
            }, 'unidade-1', 'user-1');
            expect(mockCidadaoRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                cpf: '12345678901',
                nis: '12345678901',
            }));
        });
        it('deve lançar BadRequestException para CPF inválido', async () => {
            await expect(service.create({
                ...createCidadaoDto,
                cpf: '123',
            }, 'unidade-1', 'user-1')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar BadRequestException para NIS inválido', async () => {
            await expect(service.create({
                ...createCidadaoDto,
                nis: '123',
            }, 'unidade-1', 'user-1')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar ConflictException para CPF já cadastrado', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(mockCidadao);
            await expect(service.create(createCidadaoDto, 'unidade-1', 'user-1')).rejects.toThrow(common_1.ConflictException);
        });
        it('deve lançar ConflictException para NIS já cadastrado', async () => {
            mockCidadaoRepository.findByCpf.mockResolvedValue(null);
            mockCidadaoRepository.findByNis.mockResolvedValue(mockCidadao);
            await expect(service.create(createCidadaoDto, 'unidade-1', 'user-1')).rejects.toThrow(common_1.ConflictException);
        });
        it('deve lançar InternalServerErrorException em caso de erro inesperado', async () => {
            mockCidadaoRepository.findByCpf.mockRejectedValue(new Error('Erro inesperado'));
            await expect(service.create(createCidadaoDto, 'unidade-1', 'user-1')).rejects.toThrow(common_1.InternalServerErrorException);
        });
        it('deve permitir criação sem NIS', async () => {
            const { nis, ...dtoSemNis } = createCidadaoDto;
            mockCidadaoRepository.findByCpf.mockResolvedValue(null);
            mockCidadaoRepository.create.mockResolvedValue(mockCidadao);
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            await service.create(dtoSemNis, 'unidade-1', 'user-1');
            expect(mockCidadaoRepository.create).toHaveBeenCalledWith(expect.objectContaining({
                nis: undefined,
            }));
        });
    });
    describe('findAll', () => {
        it('deve retornar uma lista paginada de cidadãos com metadados', async () => {
            const mockCidadaoList = [mockCidadao];
            const total = 1;
            mockCidadaoRepository.findAll.mockResolvedValue([mockCidadaoList, total]);
            const result = await service.findAll({
                page: 1,
                limit: 10,
            });
            expect(result).toHaveProperty('items');
            expect(result).toHaveProperty('meta');
            expect(result.items).toHaveLength(1);
            expect(result.meta).toEqual({
                total: 1,
                page: 1,
                limit: 10,
                pages: 1,
                hasNext: false,
                hasPrev: false,
            });
        });
        it('deve aplicar filtros de busca corretamente', async () => {
            const mockCidadaoList = [mockCidadao];
            const total = 1;
            mockCidadaoRepository.findAll.mockResolvedValue([mockCidadaoList, total]);
            await service.findAll({
                search: 'João',
                bairro: 'Centro',
                ativo: true,
                unidadeId: 'unidade-1',
            });
            expect(mockCidadaoRepository.findAll).toHaveBeenCalledWith(expect.objectContaining({
                where: expect.objectContaining({
                    $or: expect.any(Array),
                    'endereco.bairro': expect.any(Object),
                    ativo: true,
                    unidadeId: 'unidade-1',
                }),
            }));
        });
        it('deve lançar InternalServerErrorException em caso de erro inesperado', async () => {
            mockCidadaoRepository.findAll.mockRejectedValue(new Error('Erro inesperado'));
            await expect(service.findAll({})).rejects.toThrow(common_1.InternalServerErrorException);
        });
    });
    describe('addComposicaoFamiliar', () => {
        const mockComposicao = {
            nome: 'Maria da Silva',
            parentesco: 'Mãe',
            data_nascimento: new Date('1960-01-01'),
            cpf: '98765432100',
            renda: 1500,
        };
        it('deve adicionar um membro à composição familiar', async () => {
            const cidadaoAtualizado = {
                ...mockCidadao,
                composicao_familiar: [mockComposicao],
            };
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            mockCidadaoRepository.update.mockResolvedValue(cidadaoAtualizado);
            const result = await service.addComposicaoFamiliar(mockCidadao.id, mockComposicao, 'user-1');
            expect(result.composicao_familiar).toHaveLength(1);
            expect(result.composicao_familiar).toBeDefined();
            expect(result.composicao_familiar[0]).toMatchObject({
                nome: mockComposicao.nome,
                parentesco: mockComposicao.parentesco,
            });
            expect(mockCidadaoRepository.update).toHaveBeenCalled();
        });
        it('deve inicializar o array de composição familiar se for nulo', async () => {
            const cidadaoSemComposicao = {
                ...mockCidadao,
                composicao_familiar: null,
            };
            mockCidadaoRepository.findById.mockResolvedValue(cidadaoSemComposicao);
            await service.addComposicaoFamiliar(mockCidadao.id, mockComposicao, 'user-1');
            expect(mockCidadaoRepository.update).toHaveBeenCalledWith(mockCidadao.id, expect.objectContaining({
                composicao_familiar: expect.arrayContaining([
                    expect.objectContaining({
                        nome: mockComposicao.nome,
                        criadoPor: 'user-1',
                    }),
                ]),
            }));
        });
        it('deve lançar NotFoundException quando o cidadão não for encontrado', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(null);
            await expect(service.addComposicaoFamiliar('id-inexistente', mockComposicao, 'user-1')).rejects.toThrow(common_1.NotFoundException);
        });
        it('deve lançar InternalServerErrorException em caso de erro inesperado', async () => {
            mockCidadaoRepository.findById.mockRejectedValue(new Error('Erro inesperado'));
            await expect(service.addComposicaoFamiliar('id-valido', mockComposicao, 'user-1')).rejects.toThrow(common_1.InternalServerErrorException);
        });
    });
    describe('remove', () => {
        beforeEach(() => {
            jest.clearAllMocks();
        });
        it('deve remover um cidadão existente (soft delete)', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(mockCidadao);
            await service.remove(mockCidadao.id, 'user-1');
            expect(mockCidadaoRepository.update).toHaveBeenCalledWith(mockCidadao.id, {
                removed_at: expect.any(Date),
            });
        });
        it('deve lançar BadRequestException para ID vazio', async () => {
            await expect(service.remove('', 'user-1')).rejects.toThrow(common_1.BadRequestException);
        });
        it('deve lançar NotFoundException quando o cidadão não for encontrado', async () => {
            mockCidadaoRepository.findById.mockResolvedValue(null);
            await expect(service.remove('id-inexistente', 'user-1')).rejects.toThrow(common_1.NotFoundException);
        });
        it('deve lançar InternalServerErrorException em caso de erro inesperado', async () => {
            mockCidadaoRepository.findById.mockRejectedValue(new Error('Erro inesperado'));
            await expect(service.remove('id-válido', 'user-1')).rejects.toThrow(common_1.InternalServerErrorException);
        });
        it('não deve tentar remover um cidadão já removido', async () => {
            const cidadaoRemovido = {
                ...mockCidadao,
                removed_at: new Date(),
            };
            mockCidadaoRepository.findById.mockResolvedValue(cidadaoRemovido);
            await service.remove(mockCidadao.id, 'user-1');
            // Verifica se o update foi chamado mesmo para um cidadão já removido
            expect(mockCidadaoRepository.update).toHaveBeenCalled();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFx0ZXN0XFx1bml0XFxjaWRhZGFvXFxjaWRhZGFvLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCwyQ0FLd0I7QUFDeEIsNkNBQXFEO0FBQ3JELHlEQUFvRDtBQUNwRCwrRUFBMkU7QUFDM0UseUZBQXFGO0FBQ3JGLDZFQUF5RTtBQUl6RSxvRkFBK0U7QUFDL0UsZ0VBQTREO0FBQzVELDJGQUFzRjtBQUV0RixRQUFRLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxFQUFFO0lBQzlCLElBQUksT0FBdUIsQ0FBQztJQUM1QixJQUFJLFVBQTZCLENBQUM7SUFDbEMsSUFBSSxZQUEwQixDQUFDO0lBQy9CLElBQUksbUJBQXdDLENBQUM7SUFFN0MsTUFBTSxxQkFBcUIsR0FBRztRQUM1QixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDaEIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDcEIsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDcEIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbkIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbkIsQ0FBQztJQUVGLE1BQU0sZ0JBQWdCLEdBQUc7UUFDdkIsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZCxHQUFHLEVBQUUsSUFBSSxD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QUFDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FDdEUsMEJBQWlCLENBQ2xCLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxxRUFBcUUsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNuRixxQkFBcUIsQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQzlDLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQzdCLENBQUM7WUFFRixNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQ2pFLHFDQUE0QixDQUM3QixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsZ0RBQWdELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDOUQsTUFBTSxlQUFlLEdBQUc7Z0JBQ3RCLEdBQUcsV0FBVztnQkFDZCxVQUFVLEVBQUUsSUFBSSxJQUFJLEVBQUU7YUFDdkIsQ0FBQztZQUVGLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsQ0FBQztZQUVsRSxNQUFNLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUUvQyxxRUFBcUU7WUFDckUsTUFBTSxDQUFDLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcdGVzdFxcdW5pdFxcY2lkYWRhb1xcY2lkYWRhby5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQge1xuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICBDb25mbGljdEV4Y2VwdGlvbixcbiAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgTm90Rm91bmRFeGNlcHRpb24sXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcbmltcG9ydCB7IGdldFJlcG9zaXRvcnlUb2tlbiB9IGZyb20gJ0BuZXN0anMvdHlwZW9ybSc7XG5pbXBvcnQgeyBwbGFpblRvSW5zdGFuY2UgfSBmcm9tICdjbGFzcy10cmFuc2Zvcm1lcic7XG5pbXBvcnQgeyBDaWRhZGFvU2VydmljZSB9IGZyb20gJ0Btb2R1bGVzL2NpZGFkYW8vc2VydmljZXMvY2lkYWRhby5zZXJ2aWNlJztcbmltcG9ydCB7IENpZGFkYW9SZXBvc2l0b3J5IH0gZnJvbSAnQG1vZHVsZXMvY2lkYWRhby9yZXBvc2l0b3JpZXMvY2lkYWRhby5yZXBvc2l0b3J5JztcbmltcG9ydCB7IENpZGFkYW8sIFNleG8gfSBmcm9tICdAbW9kdWxlcy9jaWRhZGFvL2VudGl0aWVzL2NpZGFkYW8uZW50aXR5JztcbmltcG9ydCB7IFRpcG9QYXBlbCwgUGFwZXJUeXBlIH0gZnJvbSAnQG1vZHVsZXMvY2lkYWRhby9lbnVtcy90aXBvLXBhcGVsLmVudW0nO1xuaW1wb3J0IHsgQ3JlYXRlQ2lkYWRhb0R0byB9IGZyb20gJ0Btb2R1bGVzL2NpZGFkYW8vZHRvL2NyZWF0ZS1jaWRhZGFvLmR0byc7XG5pbXBvcnQgeyBVcGRhdGVDaWRhZGFvRHRvIH0gZnJvbSAnQG1vZHVsZXMvY2lkYWRhby9kdG8vdXBkYXRlLWNpZGFkYW8uZHRvJztcbmltcG9ydCB7IENpZGFkYW9SZXNwb25zZUR0byB9IGZyb20gJ0Btb2R1bGVzL2NpZGFkYW8vZHRvL2NpZGFkYW8tcmVzcG9uc2UuZHRvJztcbmltcG9ydCB7IENhY2hlU2VydmljZSB9IGZyb20gJ0Avc2hhcmVkL2NhY2hlL2NhY2hlLnNlcnZpY2UnO1xuaW1wb3J0IHsgUGFwZWxDaWRhZGFvU2VydmljZSB9IGZyb20gJ0Btb2R1bGVzL2NpZGFkYW8vc2VydmljZXMvcGFwZWwtY2lkYWRhby5zZXJ2aWNlJztcblxuZGVzY3JpYmUoJ0NpZGFkYW9TZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogQ2lkYWRhb1NlcnZpY2U7XG4gIGxldCByZXBvc2l0b3J5OiBDaWRhZGFvUmVwb3NpdG9yeTtcbiAgbGV0IGNhY2hlU2VydmljZTogQ2FjaGVTZXJ2aWNlO1xuICBsZXQgcGFwZWxDaWRhZGFvU2VydmljZTogUGFwZWxDaWRhZGFvU2VydmljZTtcblxuICBjb25zdCBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkgPSB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgc2F2ZTogamVzdC5mbigpLFxuICAgIGZpbmQ6IGplc3QuZm4oKSxcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgY291bnQ6IGplc3QuZm4oKSxcbiAgICBmaW5kQnlDcGY6IGplc3QuZm4oKSxcbiAgICBmaW5kQnlOaXM6IGplc3QuZm4oKSxcbiAgICBmaW5kQnlJZDogamVzdC5mbigpLFxuICAgIGZpbmRBbGw6IGplc3QuZm4oKSxcbiAgfTtcblxuICBjb25zdCBtb2NrQ2FjaGVTZXJ2aWNlID0ge1xuICAgIGdldDogamVzdC5mbigpLFxuICAgIHNldDogamVzdC5mbigpLFxuICAgIGRlbDogamVzdC5mbigpLFxuICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gIH07XG5cbiAgY29uc3QgbW9ja1BhcGVsQ2lkYWRhb1NlcnZpY2UgPSB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gICAgY3JlYXRlTWFueTogamVzdC5mbigpLFxuICAgIGZpbmRBbGw6IGplc3QuZm4oKSxcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlOiBqZXN0LmZuKCksXG4gICAgZmluZEJ5VGlwbzogamVzdC5mbigpLFxuICB9O1xuXG4gIGNvbnN0IG1vY2tDaWRhZGFvOiBDaWRhZGFvID0ge1xuICAgIGlkOiAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAwJyxcbiAgICBub21lOiAnSm/Do28gZGEgU2lsdmEnLFxuICAgIGNwZjogJzEyMzQ1Njc4OTAxJyxcbiAgICByZzogJzEyMzQ1NjcnLFxuICAgIGRhdGFfbmFzY2ltZW50bzogbmV3IERhdGUoJzE5OTAtMDEtMDEnKSxcbiAgICBzZXhvOiBTZXhvLk1BU0NVTElOTyxcbiAgICBlbWFpbDogJ2pvYW9AZXhhbXBsZS5jb20nLFxuICAgIHRlbGVmb25lOiAnODQ5OTk5OTk5OTknLFxuICAgIG5pczogJzEyMzQ1Njc4OTAxJyxcbiAgICBlbmRlcmVjbzoge1xuICAgICAgbG9ncmFkb3VybzogJ1J1YSBFeGVtcGxvJyxcbiAgICAgIG51bWVybzogJzEyMycsXG4gICAgICBjb21wbGVtZW50bzogJ0FwdG8gMTAxJyxcbiAgICAgIGJhaXJybzogJ0NlbnRybycsXG4gICAgICBjaWRhZGU6ICdOYXRhbCcsXG4gICAgICBlc3RhZG86ICdSTicsXG4gICAgICBjZXA6ICc1OTAwMDAwMCcsXG4gICAgfSxcbiAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgY29tcG9zaWNhb19mYW1pbGlhcjogW10sXG4gICAgcGFwZWlzOiBbXSxcbiAgICBub21lX3NvY2lhbDogJycsXG4gICAgbm9tZV9tYWU6ICdub21lIGRhIG3Do29lIGRvIGNpZGFkw6NvJyxcbiAgICBuYXR1cmFsaWRhZGU6ICdOYXRhbCcsXG4gICAgcHJvbnR1YXJpb19zdWFzOiAnQ0Q2NTE2NTEnLFxuICAgIGF0aXZvOiBmYWxzZSxcbiAgICByZW1vdmVkX2F0OiBudWxsIGFzIHVua25vd24gYXMgRGF0ZSxcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIENpZGFkYW9TZXJ2aWNlLFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENpZGFkYW8pLFxuICAgICAgICAgIHVzZVZhbHVlOiB7fSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IENpZGFkYW9SZXBvc2l0b3J5LFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ2lkYWRhb1JlcG9zaXRvcnksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDYWNoZVNlcnZpY2UsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tDYWNoZVNlcnZpY2UsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBQYXBlbENpZGFkYW9TZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrUGFwZWxDaWRhZGFvU2VydmljZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8Q2lkYWRhb1NlcnZpY2U+KENpZGFkYW9TZXJ2aWNlKTtcbiAgICByZXBvc2l0b3J5ID0gbW9kdWxlLmdldDxDaWRhZGFvUmVwb3NpdG9yeT4oQ2lkYWRhb1JlcG9zaXRvcnkpO1xuICAgIGNhY2hlU2VydmljZSA9IG1vZHVsZS5nZXQ8Q2FjaGVTZXJ2aWNlPihDYWNoZVNlcnZpY2UpO1xuICAgIHBhcGVsQ2lkYWRhb1NlcnZpY2UgPSBtb2R1bGUuZ2V0PFBhcGVsQ2lkYWRhb1NlcnZpY2U+KFBhcGVsQ2lkYWRhb1NlcnZpY2UpO1xuXG4gICAgLy8gUmVzZXRhciBtb2Nrc1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBpdCgnZGV2ZSBlc3RhciBkZWZpbmlkbycsICgpID0+IHtcbiAgICBleHBlY3Qoc2VydmljZSkudG9CZURlZmluZWQoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2ZpbmRBbGwnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdW1hIGxpc3RhIHBhZ2luYWRhIGRlIGNpZGFkw6NvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDaWRhZGFvTGlzdCA9IFttb2NrQ2lkYWRhb107XG4gICAgICBjb25zdCB0b3RhbCA9IDE7XG5cbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQWxsLm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ2lkYWRhb0xpc3QsIHRvdGFsXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEFsbCh7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaXRlbXM6IHBsYWluVG9JbnN0YW5jZShDaWRhZGFvUmVzcG9uc2VEdG8sIG1vY2tDaWRhZGFvTGlzdCwge1xuICAgICAgICAgIGV4Y2x1ZGVFeHRyYW5lb3VzVmFsdWVzOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgICAgbWV0YToge1xuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICAgIHBhZ2VzOiAxLFxuICAgICAgICAgIGhhc05leHQ6IGZhbHNlLFxuICAgICAgICAgIGhhc1ByZXY6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEFsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBza2lwOiAwLFxuICAgICAgICB0YWtlOiAxMCxcbiAgICAgICAgd2hlcmU6IHt9LFxuICAgICAgICBvcmRlcjogeyBub21lOiAnQVNDJyB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBhcGxpY2FyIGZpbHRyb3MgZGUgYnVzY2EnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWx0ZXJzID0ge1xuICAgICAgICBzZWFyY2g6ICdKb8OjbycsXG4gICAgICAgIGJhaXJybzogJ0NlbnRybycsXG4gICAgICAgIHVuaWRhZGVJZDogJ3VuaWRhZGUtMScsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICB9O1xuXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEFsbC5tb2NrUmVzb2x2ZWRWYWx1ZShbW10sIDBdKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5maW5kQWxsKGZpbHRlcnMpO1xuXG4gICAgICBleHBlY3QobW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRBbGwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc2tpcDogMCxcbiAgICAgICAgdGFrZTogMTAsXG4gICAgICAgIHdoZXJlOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgJG9yOiBleHBlY3QuYXJyYXlDb250YWluaW5nKFtcbiAgICAgICAgICAgIHsgbm9tZTogeyAkaUxpa2U6ICclSm/Do28lJyB9IH0sXG4gICAgICAgICAgICB7IGNwZjogeyAkaUxpa2U6ICclJScgfSB9LFxuICAgICAgICAgICAgeyBuaXM6IHsgJGlMaWtlOiAnJSUnIH0gfSxcbiAgICAgICAgICBdKSxcbiAgICAgICAgICAnZW5kZXJlY28uYmFpcnJvJzogeyAkaUxpa2U6ICclQ2VudHJvJScgfSxcbiAgICAgICAgICB1bmlkYWRlSWQ6IGZpbHRlcnMudW5pZGFkZUlkLFxuICAgICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB9KSxcbiAgICAgICAgb3JkZXI6IHsgbm9tZTogJ0FTQycgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgbGlzdGEgdmF6aWEgcXVhbmRvIG7Do28gaG91dmVyIHJlc3VsdGFkb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEFsbC5tb2NrUmVzb2x2ZWRWYWx1ZShbW10sIDBdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQWxsKHt9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pdGVtcykudG9IYXZlTGVuZ3RoKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhLnRvdGFsKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgY2FsY3VsYXIgY29ycmV0YW1lbnRlIGEgcGFnaW5hw6fDo28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbEl0ZW1zID0gMjU7XG4gICAgICBjb25zdCBwYWdlID0gMjtcbiAgICAgIGNvbnN0IGxpbWl0ID0gMTA7XG5cbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQWxsLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgbmV3IEFycmF5KGxpbWl0KS5maWxsKG1vY2tDaWRhZGFvKSxcbiAgICAgICAgdG90YWxJdGVtcyxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRBbGwoeyBwYWdlLCBsaW1pdCB9KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhKS50b0VxdWFsKHtcbiAgICAgICAgdG90YWw6IHRvdGFsSXRlbXMsXG4gICAgICAgIHBhZ2UsXG4gICAgICAgIGxpbWl0LFxuICAgICAgICBwYWdlczogMyxcbiAgICAgICAgaGFzTmV4dDogdHJ1ZSxcbiAgICAgICAgaGFzUHJldjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQWxsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHNraXA6IDEwLCAvLyAocGFnZSAtIDEpICogbGltaXRcbiAgICAgICAgdGFrZTogbGltaXQsXG4gICAgICAgIHdoZXJlOiB7fSxcbiAgICAgICAgb3JkZXI6IHsgbm9tZTogJ0FTQycgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZmluZEJ5SWQnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdW0gY2lkYWTDo28gcGVsbyBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5SWQobW9ja0NpZGFkYW8uaWQpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFxuICAgICAgICBwbGFpblRvSW5zdGFuY2UoQ2lkYWRhb1Jlc3BvbnNlRHRvLCBtb2NrQ2lkYWRhbywge1xuICAgICAgICAgIGV4Y2x1ZGVFeHRyYW5lb3VzVmFsdWVzOiB0cnVlLFxuICAgICAgICAgIGVuYWJsZUltcGxpY2l0Q29udmVyc2lvbjogZmFsc2UsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBtb2NrQ2lkYWRhby5pZCxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBjaWRhZMOjbyBzZW0gcmVsYWNpb25hbWVudG9zIHF1YW5kbyBpbmNsdWRlUmVsYXRpb25zIGZvciBmYWxzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5SWQobW9ja0NpZGFkYW8uaWQsIGZhbHNlKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChcbiAgICAgICAgcGxhaW5Ub0luc3RhbmNlKENpZGFkYW9SZXNwb25zZUR0bywgbW9ja0NpZGFkYW8sIHtcbiAgICAgICAgICBleGNsdWRlRXh0cmFuZW91c1ZhbHVlczogdHJ1ZSxcbiAgICAgICAgICBlbmFibGVJbXBsaWNpdENvbnZlcnNpb246IGZhbHNlLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgbW9ja0NpZGFkYW8uaWQsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJldG9ybmFyIG9zIGRhZG9zIGNvcnJldG9zIG5vIERUTyBkZSByZXNwb3N0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNpZGFkYW9Db21wbGV0byA9IHtcbiAgICAgICAgLi4ubW9ja0NpZGFkYW8sXG4gICAgICAgIGRhdGFfbmFzY2ltZW50bzogbmV3IERhdGUoJzE5OTAtMDEtMDEnKSxcbiAgICAgICAgc2V4bzogU2V4by5NQVNDVUxJTk8sXG4gICAgICAgIG5vbWVfbWFlOiAnTWFyaWEgZGEgU2lsdmEnLFxuICAgICAgICBub21lX3BhaTogJ0pvw6NvIFNpbHZhJyxcbiAgICAgICAgZW1haWw6ICdqb2FvQGV4YW1wbGUuY29tJyxcbiAgICAgICAgdGVsZWZvbmU6ICcxMTk5OTk5OTk5OScsXG4gICAgICAgIG5pczogJzEyMzQ1Njc4OTAxJyxcbiAgICAgICAgY25zOiAnMTIzNDU2Nzg5MDEyMzQ1JyxcbiAgICAgICAgZm90b191cmw6ICdodHRwOi8vZXhhbXBsZS5jb20vZm90by5qcGcnLFxuICAgICAgICBlbmRlcmVjbzoge1xuICAgICAgICAgIGNlcDogJzEyMzQ1Njc4JyxcbiAgICAgICAgICBsb2dyYWRvdXJvOiAnUnVhIEV4ZW1wbG8nLFxuICAgICAgICAgIG51bWVybzogJzEyMycsXG4gICAgICAgICAgY29tcGxlbWVudG86ICdBcHRvIDEwMScsXG4gICAgICAgICAgYmFpcnJvOiAnQ2VudHJvJyxcbiAgICAgICAgICBjaWRhZGU6ICdTw6NvIFBhdWxvJyxcbiAgICAgICAgICBlc3RhZG86ICdTUCcsXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoY2lkYWRhb0NvbXBsZXRvKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlJZChtb2NrQ2lkYWRhby5pZCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBpZDogbW9ja0NpZGFkYW8uaWQsXG4gICAgICAgIG5vbWU6IG1vY2tDaWRhZGFvLm5vbWUsXG4gICAgICAgIGNwZjogbW9ja0NpZGFkYW8uY3BmLFxuICAgICAgICByZzogbW9ja0NpZGFkYW8ucmcsXG4gICAgICAgIGRhdGFOYXNjaW1lbnRvOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIHNleG86IFNleG8uTUFTQ1VMSU5PLFxuICAgICAgICBub21lTWFlOiAnTWFyaWEgZGEgU2lsdmEnLFxuICAgICAgICBub21lUGFpOiAnSm/Do28gU2lsdmEnLFxuICAgICAgICBlbWFpbDogJ2pvYW9AZXhhbXBsZS5jb20nLFxuICAgICAgICB0ZWxlZm9uZTogJzExOTk5OTk5OTk5JyxcbiAgICAgICAgY2VwOiAnMTIzNDU2NzgnLFxuICAgICAgICBsb2dyYWRvdXJvOiAnUnVhIEV4ZW1wbG8nLFxuICAgICAgICBudW1lcm86ICcxMjMnLFxuICAgICAgICBjb21wbGVtZW50bzogJ0FwdG8gMTAxJyxcbiAgICAgICAgYmFpcnJvOiAnQ2VudHJvJyxcbiAgICAgICAgY2lkYWRlOiAnU8OjbyBQYXVsbycsXG4gICAgICAgIHVmOiAnU1AnLFxuICAgICAgICBuaXM6ICcxMjM0NTY3ODkwMScsXG4gICAgICAgIGNuczogJzEyMzQ1Njc4OTAxMjM0NScsXG4gICAgICAgIGZvdG9Vcmw6ICdodHRwOi8vZXhhbXBsZS5jb20vZm90by5qcGcnLFxuICAgICAgICBjcmVhdGVkQXQ6IGV4cGVjdC5hbnkoU3RyaW5nKSxcbiAgICAgICAgdXBkYXRlZEF0OiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgQmFkUmVxdWVzdEV4Y2VwdGlvbiBwYXJhIElEIHZhemlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5SWQoJycpKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIE5vdEZvdW5kRXhjZXB0aW9uIHF1YW5kbyBvIGNpZGFkw6NvIG7Do28gZm9yIGVuY29udHJhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUlkKCdpZC1pbmV4aXN0ZW50ZScpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIE5vdEZvdW5kRXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbiBlbSBjYXNvIGRlIGVycm8gaW5lc3BlcmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKCdFcnJvIGluZXNwZXJhZG8nKSxcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUlkKCdpZC12w6FsaWRvJykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kQnlDcGYnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdW0gY2lkYWTDo28gcGVsbyBDUEYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5Q3BmLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlDcGYoJzEyMy40NTYuNzg5LTA5Jyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoXG4gICAgICAgIHBsYWluVG9JbnN0YW5jZShDaWRhZGFvUmVzcG9uc2VEdG8sIG1vY2tDaWRhZGFvLCB7XG4gICAgICAgICAgZXhjbHVkZUV4dHJhbmVvdXNWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgZW5hYmxlSW1wbGljaXRDb252ZXJzaW9uOiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnMTIzNDU2Nzg5MDknLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBjaWRhZMOjbyBzZW0gcmVsYWNpb25hbWVudG9zIHF1YW5kbyBpbmNsdWRlUmVsYXRpb25zIGZvciBmYWxzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NpZGFkYW8pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeUNwZignMTIzLjQ1Ni43ODktMDknLCBmYWxzZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoXG4gICAgICAgIHBsYWluVG9JbnN0YW5jZShDaWRhZGFvUmVzcG9uc2VEdG8sIG1vY2tDaWRhZGFvLCB7XG4gICAgICAgICAgZXhjbHVkZUV4dHJhbmVvdXNWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgZW5hYmxlSW1wbGljaXRDb252ZXJzaW9uOiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnMTIzNDU2Nzg5MDknLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmb3JtYXRhciBvIENQRiByZW1vdmVuZG8gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5Q3BmLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5maW5kQnlDcGYoJzEyMy40NTYuNzg5LTA5Jyk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5Q3BmKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJzEyMzQ1Njc4OTA5JyxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgQ1BGIHZhemlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5Q3BmKCcnKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgQ1BGIGNvbSBtZW5vcyBkZSAxMSBkw61naXRvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUNwZignMTIzNDU2Nzg5MCcpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgQ1BGIGNvbSBtYWlzIGRlIDExIGTDrWdpdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5Q3BmKCcxMjM0NTY3ODkwMTInKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgQmFkUmVxdWVzdEV4Y2VwdGlvbiBwYXJhIENQRiBjb20gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5maW5kQnlDcGYoJzEyM2FiYzQ1NmRlJykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcGFyYSBDUEYgaW52w6FsaWRvICh0b2RvcyBkw61naXRvcyBpZ3VhaXMpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5Q3BmKCcxMTEuMTExLjExMS0xMScpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgQ1BGIGludsOhbGlkbyAoZMOtZ2l0byB2ZXJpZmljYWRvciBpbmNvcnJldG8pJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQ1BGIHbDoWxpZG8gc2VyaWEgMTIzLjQ1Ni43ODktMDlcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUNwZignMTIzLjQ1Ni43ODktMTAnKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIG8gY2lkYWTDo28gbsOjbyBmb3IgZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUNwZignMTIzLjQ1Ni43ODktMDknKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmaW5kQnlOaXMnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdW0gY2lkYWTDo28gcGVsbyBOSVMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5TmlzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQnlOaXMoJzEyMzQ1Njc4OTAxJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoXG4gICAgICAgIHBsYWluVG9JbnN0YW5jZShDaWRhZGFvUmVzcG9uc2VEdG8sIG1vY2tDaWRhZGFvLCB7XG4gICAgICAgICAgZXhjbHVkZUV4dHJhbmVvdXNWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgZW5hYmxlSW1wbGljaXRDb252ZXJzaW9uOiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnMTIzNDU2Nzg5MDEnLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBjaWRhZMOjbyBzZW0gcmVsYWNpb25hbWVudG9zIHF1YW5kbyBpbmNsdWRlUmVsYXRpb25zIGZvciBmYWxzZScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NpZGFkYW8pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeU5pcygnMTIzNDU2Nzg5MDEnLCBmYWxzZSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoXG4gICAgICAgIHBsYWluVG9JbnN0YW5jZShDaWRhZGFvUmVzcG9uc2VEdG8sIG1vY2tDaWRhZGFvLCB7XG4gICAgICAgICAgZXhjbHVkZUV4dHJhbmVvdXNWYWx1ZXM6IHRydWUsXG4gICAgICAgICAgZW5hYmxlSW1wbGljaXRDb252ZXJzaW9uOiBmYWxzZSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnMTIzNDU2Nzg5MDEnLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmb3JtYXRhciBvIE5JUyByZW1vdmVuZG8gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5TmlzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5maW5kQnlOaXMoJzEyMy40NTYuNzg5LTAxJyk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5TmlzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJzEyMzQ1Njc4OTAxJyxcbiAgICAgICAgZmFsc2UsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgTklTIHZhemlvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5TmlzKCcnKSkucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgTklTIGNvbSBtZW5vcyBkZSAxMSBkw61naXRvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeU5pcygnMTIzNDU2Nzg5MCcpKS5yZWplY3RzLnRvVGhyb3coXG4gICAgICAgIEJhZFJlcXVlc3RFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgTklTIGNvbSBtYWlzIGRlIDExIGTDrWdpdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEJ5TmlzKCcxMjM0NTY3ODkwMTInKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgQmFkUmVxdWVzdEV4Y2VwdGlvbiBwYXJhIE5JUyBjb20gY2FyYWN0ZXJlcyBuw6NvIG51bcOpcmljb3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5maW5kQnlOaXMoJzEyM2FiYzQ1NmRlJykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgQmFkUmVxdWVzdEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIE5vdEZvdW5kRXhjZXB0aW9uIHF1YW5kbyBvIGNpZGFkw6NvIG7Do28gZm9yIGVuY29udHJhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5TmlzLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5maW5kQnlOaXMoJzExMTIyMjMzMzQ0JykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgTm90Rm91bmRFeGNlcHRpb24sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmVtb3ZlciBmb3JtYXRhw6fDo28gZG8gTklTIGFudGVzIGRlIGJ1c2NhcicsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NpZGFkYW8pO1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmZpbmRCeU5pcygnMTIzLjQ1Ni43ODktMDEnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnMTIzNDU2Nzg5MDEnLFxuICAgICAgICBmYWxzZSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjcmVhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgY3JlYXRlQ2lkYWRhb0R0bzogQ3JlYXRlQ2lkYWRhb0R0byA9IHtcbiAgICAgIG5vbWU6ICdKb8OjbyBkYSBTaWx2YScsXG4gICAgICBjcGY6ICcxMjMuNDU2Ljc4OS0wMScsXG4gICAgICByZzogJzEyMzQ1NjcnLFxuICAgICAgZGF0YV9uYXNjaW1lbnRvOiBuZXcgRGF0ZSgnMTk5MC0wMS0wMScpLFxuICAgICAgc2V4bzogU2V4by5NQVNDVUxJTk8sXG4gICAgICBlbWFpbDogJ2pvYW9AZXhhbXBsZS5jb20nLFxuICAgICAgdGVsZWZvbmU6ICc4NDk5OTk5OTk5OScsXG4gICAgICBuaXM6ICcxMjM0NTY3ODkwMScsXG4gICAgICBlbmRlcmVjbzoge1xuICAgICAgICBsb2dyYWRvdXJvOiAnUnVhIEV4ZW1wbG8nLFxuICAgICAgICBudW1lcm86ICcxMjMnLFxuICAgICAgICBjb21wbGVtZW50bzogJ0FwdG8gMTAxJyxcbiAgICAgICAgYmFpcnJvOiAnQ2VudHJvJyxcbiAgICAgICAgY2lkYWRlOiAnTmF0YWwnLFxuICAgICAgICBlc3RhZG86ICdSTicsXG4gICAgICAgIGNlcDogJzU5MDAwLTAwMCcsXG4gICAgICB9LFxuICAgICAgcmVuZGE6IDUwMDAsXG4gICAgfTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBjcmlhciB1bSBub3ZvIGNpZGFkw6NvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUNwZi5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlKFxuICAgICAgICBjcmVhdGVDaWRhZGFvRHRvLFxuICAgICAgICAndW5pZGFkZS0xJyxcbiAgICAgICAgJ3VzZXItMScsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFxuICAgICAgICBwbGFpblRvSW5zdGFuY2UoQ2lkYWRhb1Jlc3BvbnNlRHRvLCBtb2NrQ2lkYWRhbywge1xuICAgICAgICAgIGV4Y2x1ZGVFeHRyYW5lb3VzVmFsdWVzOiB0cnVlLFxuICAgICAgICAgIGVuYWJsZUltcGxpY2l0Q29udmVyc2lvbjogZmFsc2UsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIC4uLmNyZWF0ZUNpZGFkYW9EdG8sXG4gICAgICAgIGNwZjogJzEyMzQ1Njc4OTAxJyxcbiAgICAgICAgbmlzOiAnMTIzNDU2Nzg5MDEnLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmb3JtYXRhciBDUEYgZSBOSVMgcmVtb3ZlbmRvIGNhcmFjdGVyZXMgbsOjbyBudW3DqXJpY29zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUNwZi5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlOaXMubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UuY3JlYXRlKFxuICAgICAgICB7XG4gICAgICAgICAgLi4uY3JlYXRlQ2lkYWRhb0R0byxcbiAgICAgICAgICBjcGY6ICcxMjMuNDU2Ljc4OS0wMScsXG4gICAgICAgICAgbmlzOiAnMTIzLjQ1Ni43ODktMDEnLFxuICAgICAgICB9LFxuICAgICAgICAndW5pZGFkZS0xJyxcbiAgICAgICAgJ3VzZXItMScsXG4gICAgICApO1xuXG4gICAgICBleHBlY3QobW9ja0NpZGFkYW9SZXBvc2l0b3J5LmNyZWF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBjcGY6ICcxMjM0NTY3ODkwMScsXG4gICAgICAgICAgbmlzOiAnMTIzNDU2Nzg5MDEnLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcGFyYSBDUEYgaW52w6FsaWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5jcmVhdGVDaWRhZGFvRHRvLFxuICAgICAgICAgICAgY3BmOiAnMTIzJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgICd1bmlkYWRlLTEnLFxuICAgICAgICAgICd1c2VyLTEnLFxuICAgICAgICApLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEJhZFJlcXVlc3RFeGNlcHRpb24gcGFyYSBOSVMgaW52w6FsaWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmNyZWF0ZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICAuLi5jcmVhdGVDaWRhZGFvRHRvLFxuICAgICAgICAgICAgbmlzOiAnMTIzJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgICd1bmlkYWRlLTEnLFxuICAgICAgICAgICd1c2VyLTEnLFxuICAgICAgICApLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIENvbmZsaWN0RXhjZXB0aW9uIHBhcmEgQ1BGIGrDoSBjYWRhc3RyYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUNwZi5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgc2VydmljZS5jcmVhdGUoY3JlYXRlQ2lkYWRhb0R0bywgJ3VuaWRhZGUtMScsICd1c2VyLTEnKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KENvbmZsaWN0RXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgQ29uZmxpY3RFeGNlcHRpb24gcGFyYSBOSVMgasOhIGNhZGFzdHJhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5Q3BmLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeU5pcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgc2VydmljZS5jcmVhdGUoY3JlYXRlQ2lkYWRhb0R0bywgJ3VuaWRhZGUtMScsICd1c2VyLTEnKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KENvbmZsaWN0RXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbiBlbSBjYXNvIGRlIGVycm8gaW5lc3BlcmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignRXJybyBpbmVzcGVyYWRvJyksXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIHNlcnZpY2UuY3JlYXRlKGNyZWF0ZUNpZGFkYW9EdG8sICd1bmlkYWRlLTEnLCAndXNlci0xJyksXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHBlcm1pdGlyIGNyaWHDp8OjbyBzZW0gTklTJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBuaXMsIC4uLmR0b1NlbU5pcyB9ID0gY3JlYXRlQ2lkYWRhb0R0bztcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlDcGYubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UuY3JlYXRlKFxuICAgICAgICBkdG9TZW1OaXMgYXMgQ3JlYXRlQ2lkYWRhb0R0byxcbiAgICAgICAgJ3VuaWRhZGUtMScsXG4gICAgICAgICd1c2VyLTEnLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgbmlzOiB1bmRlZmluZWQsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2ZpbmRBbGwnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgdW1hIGxpc3RhIHBhZ2luYWRhIGRlIGNpZGFkw6NvcyBjb20gbWV0YWRhZG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NpZGFkYW9MaXN0ID0gW21vY2tDaWRhZGFvXTtcbiAgICAgIGNvbnN0IHRvdGFsID0gMTtcblxuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRBbGwubW9ja1Jlc29sdmVkVmFsdWUoW21vY2tDaWRhZGFvTGlzdCwgdG90YWxdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5maW5kQWxsKHtcbiAgICAgICAgcGFnZTogMSxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpdGVtcycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21ldGEnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaXRlbXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YSkudG9FcXVhbCh7XG4gICAgICAgIHRvdGFsOiAxLFxuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIHBhZ2VzOiAxLFxuICAgICAgICBoYXNOZXh0OiBmYWxzZSxcbiAgICAgICAgaGFzUHJldjogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGFwbGljYXIgZmlsdHJvcyBkZSBidXNjYSBjb3JyZXRhbWVudGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ2lkYWRhb0xpc3QgPSBbbW9ja0NpZGFkYW9dO1xuICAgICAgY29uc3QgdG90YWwgPSAxO1xuXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEFsbC5tb2NrUmVzb2x2ZWRWYWx1ZShbbW9ja0NpZGFkYW9MaXN0LCB0b3RhbF0pO1xuXG4gICAgICBhd2FpdCBzZXJ2aWNlLmZpbmRBbGwoe1xuICAgICAgICBzZWFyY2g6ICdKb8OjbycsXG4gICAgICAgIGJhaXJybzogJ0NlbnRybycsXG4gICAgICAgIGF0aXZvOiB0cnVlLFxuICAgICAgICB1bmlkYWRlSWQ6ICd1bmlkYWRlLTEnLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEFsbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB3aGVyZTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgJG9yOiBleHBlY3QuYW55KEFycmF5KSxcbiAgICAgICAgICAgICdlbmRlcmVjby5iYWlycm8nOiBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgICAgICBhdGl2bzogdHJ1ZSxcbiAgICAgICAgICAgIHVuaWRhZGVJZDogJ3VuaWRhZGUtMScsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbiBlbSBjYXNvIGRlIGVycm8gaW5lc3BlcmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQWxsLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ0Vycm8gaW5lc3BlcmFkbycpLFxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZEFsbCh7fSkpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhZGRDb21wb3NpY2FvRmFtaWxpYXInLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0NvbXBvc2ljYW8gPSB7XG4gICAgICBub21lOiAnTWFyaWEgZGEgU2lsdmEnLFxuICAgICAgcGFyZW50ZXNjbzogJ03Do2UnLFxuICAgICAgZGF0YV9uYXNjaW1lbnRvOiBuZXcgRGF0ZSgnMTk2MC0wMS0wMScpLFxuICAgICAgY3BmOiAnOTg3NjU0MzIxMDAnLFxuICAgICAgcmVuZGE6IDE1MDAsXG4gICAgfTtcblxuICAgIGl0KCdkZXZlIGFkaWNpb25hciB1bSBtZW1icm8gw6AgY29tcG9zacOnw6NvIGZhbWlsaWFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2lkYWRhb0F0dWFsaXphZG8gPSB7XG4gICAgICAgIC4uLm1vY2tDaWRhZGFvLFxuICAgICAgICBjb21wb3NpY2FvX2ZhbWlsaWFyOiBbbW9ja0NvbXBvc2ljYW9dLFxuICAgICAgfTtcblxuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoY2lkYWRhb0F0dWFsaXphZG8pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmFkZENvbXBvc2ljYW9GYW1pbGlhcihcbiAgICAgICAgbW9ja0NpZGFkYW8uaWQsXG4gICAgICAgIG1vY2tDb21wb3NpY2FvLFxuICAgICAgICAndXNlci0xJyxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuY29tcG9zaWNhb19mYW1pbGlhcikudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wb3NpY2FvX2ZhbWlsaWFyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jb21wb3NpY2FvX2ZhbWlsaWFyIVswXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIG5vbWU6IG1vY2tDb21wb3NpY2FvLm5vbWUsXG4gICAgICAgIHBhcmVudGVzY286IG1vY2tDb21wb3NpY2FvLnBhcmVudGVzY28sXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBpbmljaWFsaXphciBvIGFycmF5IGRlIGNvbXBvc2nDp8OjbyBmYW1pbGlhciBzZSBmb3IgbnVsbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNpZGFkYW9TZW1Db21wb3NpY2FvID0ge1xuICAgICAgICAuLi5tb2NrQ2lkYWRhbyxcbiAgICAgICAgY29tcG9zaWNhb19mYW1pbGlhcjogbnVsbCxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShjaWRhZGFvU2VtQ29tcG9zaWNhbyk7XG5cbiAgICAgIGF3YWl0IHNlcnZpY2UuYWRkQ29tcG9zaWNhb0ZhbWlsaWFyKFxuICAgICAgICBtb2NrQ2lkYWRhby5pZCxcbiAgICAgICAgbW9ja0NvbXBvc2ljYW8sXG4gICAgICAgICd1c2VyLTEnLFxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBtb2NrQ2lkYWRhby5pZCxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGNvbXBvc2ljYW9fZmFtaWxpYXI6IGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgICBub21lOiBtb2NrQ29tcG9zaWNhby5ub21lLFxuICAgICAgICAgICAgICBjcmlhZG9Qb3I6ICd1c2VyLTEnLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgXSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIG8gY2lkYWTDo28gbsOjbyBmb3IgZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmFkZENvbXBvc2ljYW9GYW1pbGlhcihcbiAgICAgICAgICAnaWQtaW5leGlzdGVudGUnLFxuICAgICAgICAgIG1vY2tDb21wb3NpY2FvLFxuICAgICAgICAgICd1c2VyLTEnLFxuICAgICAgICApLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBJbnRlcm5hbFNlcnZlckVycm9yRXhjZXB0aW9uIGVtIGNhc28gZGUgZXJybyBpbmVzcGVyYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ0Vycm8gaW5lc3BlcmFkbycpLFxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBzZXJ2aWNlLmFkZENvbXBvc2ljYW9GYW1pbGlhcignaWQtdmFsaWRvJywgbW9ja0NvbXBvc2ljYW8sICd1c2VyLTEnKSxcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVtb3ZlJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZW1vdmVyIHVtIGNpZGFkw6NvIGV4aXN0ZW50ZSAoc29mdCBkZWxldGUpJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5yZW1vdmUobW9ja0NpZGFkYW8uaWQsICd1c2VyLTEnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDaWRhZGFvUmVwb3NpdG9yeS51cGRhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBtb2NrQ2lkYWRhby5pZCxcbiAgICAgICAge1xuICAgICAgICAgIHJlbW92ZWRfYXQ6IGV4cGVjdC5hbnkoRGF0ZSksXG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbGFuw6dhciBCYWRSZXF1ZXN0RXhjZXB0aW9uIHBhcmEgSUQgdmF6aW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5yZW1vdmUoJycsICd1c2VyLTEnKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGxhbsOnYXIgTm90Rm91bmRFeGNlcHRpb24gcXVhbmRvIG8gY2lkYWTDo28gbsOjbyBmb3IgZW5jb250cmFkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVtb3ZlKCdpZC1pbmV4aXN0ZW50ZScsICd1c2VyLTEnKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBOb3RGb3VuZEV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBsYW7Dp2FyIEludGVybmFsU2VydmVyRXJyb3JFeGNlcHRpb24gZW0gY2FzbyBkZSBlcnJvIGluZXNwZXJhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignRXJybyBpbmVzcGVyYWRvJyksXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5yZW1vdmUoJ2lkLXbDoWxpZG8nLCAndXNlci0xJykpLnJlamVjdHMudG9UaHJvdyhcbiAgICAgICAgSW50ZXJuYWxTZXJ2ZXJFcnJvckV4Y2VwdGlvbixcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnbsOjbyBkZXZlIHRlbnRhciByZW1vdmVyIHVtIGNpZGFkw6NvIGrDoSByZW1vdmlkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNpZGFkYW9SZW1vdmlkbyA9IHtcbiAgICAgICAgLi4ubW9ja0NpZGFkYW8sXG4gICAgICAgIHJlbW92ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICB9O1xuXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUoY2lkYWRhb1JlbW92aWRvKTtcblxuICAgICAgYXdhaXQgc2VydmljZS5yZW1vdmUobW9ja0NpZGFkYW8uaWQsICd1c2VyLTEnKTtcblxuICAgICAgLy8gVmVyaWZpY2Egc2UgbyB1cGRhdGUgZm9pIGNoYW1hZG8gbWVzbW8gcGFyYSB1bSBjaWRhZMOjbyBqw6EgcmVtb3ZpZG9cbiAgICAgIGV4cGVjdChtb2NrQ2lkYWRhb1JlcG9zaXRvcnkudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=