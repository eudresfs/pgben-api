95d7f9a89381fb2162c4d0a589494e2f
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const typeorm_1 = require("@nestjs/typeorm");
const typeorm_2 = require("typeorm");
const composicao_familiar_service_1 = require("./composicao-familiar.service");
const composicao_familiar_entity_1 = require("../entities/composicao-familiar.entity");
const cidadao_entity_1 = require("../entities/cidadao.entity");
const common_1 = require("@nestjs/common");
const cache_1 = require("../../../shared/cache");
const escolaridade_enum_1 = require("../enums/escolaridade.enum");
const parentesco_enum_1 = require("../enums/parentesco.enum");
describe('ComposicaoFamiliarService', () => {
    let service;
    let composicaoFamiliarRepository;
    let cidadaoRepository;
    let cacheService;
    let dataSource;
    let queryRunner;
    const mockQueryRunner = {
        connect: jest.fn(),
        startTransaction: jest.fn(),
        commitTransaction: jest.fn(),
        rollbackTransaction: jest.fn(),
        release: jest.fn(),
        manager: {
            save: jest.fn(),
        },
    };
    const mockDataSource = {
        createQueryRunner: jest.fn().mockReturnValue(mockQueryRunner),
    };
    const mockComposicaoFamiliarRepository = {
        create: jest.fn(),
        save: jest.fn(),
        findOne: jest.fn(),
        find: jest.fn(),
        findAndCount: jest.fn(),
    };
    const mockCidadaoRepository = {
        findOne: jest.fn(),
    };
    const mockCacheService = {
        get: jest.fn(),
        set: jest.fn(),
        del: jest.fn(),
    };
    const mockCidadao = {
        id: '123e4567-e89b-12d3-a456-426614174001',
        cpf: '98765432100',
        nome: 'Maria Silva',
    };
    const mockComposicaoFamiliar = {
        id: '123e4567-e89b-12d3-a456-426614174000',
        cidadao_id: '123e4567-e89b-12d3-a456-426614174001',
        nome: 'João Silva',
        cpf: '12345678900',
        nis: '12345678901',
        idade: 25,
        ocupacao: 'Estudante',
        escolaridade: escolaridade_enum_1.EscolaridadeEnum.MEDIO_COMPLETO,
        parentesco: parentesco_enum_1.ParentescoEnum.FILHO,
        renda: 1500.00,
        observacoes: 'Observações de teste',
        created_at: new Date('2024-01-01T10:00:00Z'),
        updated_at: new Date('2024-01-01T10:00:00Z'),
        removed_at: null,
        cidadao: mockCidadao,
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                composicao_familiar_service_1.ComposicaoFamiliarService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(composicao_familiar_entity_1.ComposicaoFamiliar),
                    useValue: mockComposicaoFamiliarRepository,
                },
                {
                    provide: (0, typeorm_1.getRepositoryToken)(cidadao_entity_1.Cidadao),
                    useValue: mockCidadaoRepository,
                },
                {
                    provide: cache_1.CacheService,
                    useValue: mockCacheService,
                },
                {
                    provide: typeorm_2.DataSource,
                    useValue: mockDataSource,
                },
            ],
        }).compile();
        service = module.get(composicao_familiar_service_1.ComposicaoFamiliarService);
        composicaoFamiliarRepository = module.get((0, typeorm_1.getRepositoryToken)(composicao_familiar_entity_1.ComposicaoFamiliar));
        cidadaoRepository = module.get((0, typeorm_1.getRepositoryToken)(cidadao_entity_1.Cidadao));
        cacheService = module.get(cache_1.CacheService);
        dataSource = module.get(typeorm_2.DataSource);
        queryRunner = mockQueryRunner;
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    it('should be defined', () => {
        expect(service).toBeDefined();
    });
    describe('create', () => {
        const createDto = {
            cidadao_id: '123e4567-e89b-12d3-a456-426614174001',
            nome: 'João Silva',
            cpf: '123.456.789-00',
            nis: '12345678901',
            idade: 25,
            ocupacao: 'Estudante',
            escolaridade: escolaridade_enum_1.EscolaridadeEnum.MEDIO_COMPLETO,
            parentesco: parentesco_enum_1.ParentescoEnum.FILHO,
            renda: 1500.00,
            observacoes: 'Observações de teste',
        };
        const userId = 'user123';
        beforeEach(() => {
            mockCidadaoRepository.findOne.mockResolvedValue(mockCidadao);
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(null);
            mockComposicaoFamiliarRepository.create.mockReturnValue(mockComposicaoFamiliar);
            mockQueryRunner.manager.save.mockResolvedValue(mockComposicaoFamiliar);
            mockCacheService.set.mockResolvedValue(undefined);
            mockCacheService.del.mockResolvedValue(undefined);
        });
        it('should create a new composicao familiar member successfully', async () => {
            const result = await service.create(createDto, userId);
            expect(cidadaoRepository.findOne).toHaveBeenCalledWith({
                where: { id: createDto.cidadao_id },
            });
            expect(composicaoFamiliarRepository.create).toHaveBeenCalledWith({
                ...createDto,
                cpf: '12345678900',
            });
            expect(queryRunner.manager.save).toHaveBeenCalled();
            expect(queryRunner.commitTransaction).toHaveBeenCalled();
            expect(result).toBeDefined();
            expect(result.nome).toBe(createDto.nome);
        });
        it('should throw NotFoundException when cidadao does not exist', async () => {
            mockCidadaoRepository.findOne.mockResolvedValue(null);
            await expect(service.create(createDto, userId))
                .rejects.toThrow(common_1.NotFoundException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should throw BadRequestException for invalid CPF', async () => {
            const invalidCpfDto = { ...createDto, cpf: '123' };
            await expect(service.create(invalidCpfDto, userId))
                .rejects.toThrow(common_1.BadRequestException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should throw ConflictException when member with same CPF exists', async () => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(mockComposicaoFamiliar);
            await expect(service.create(createDto, userId))
                .rejects.toThrow(common_1.ConflictException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should throw ConflictException when CPF is same as cidadao CPF', async () => {
            const sameCpfDto = { ...createDto, cpf: '987.654.321-00' };
            await expect(service.create(sameCpfDto, userId))
                .rejects.toThrow(common_1.ConflictException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should throw ConflictException when member with same name exists', async () => {
            mockComposicaoFamiliarRepository.findOne
                .mockResolvedValueOnce(null) // CPF check
                .mockResolvedValueOnce(mockComposicaoFamiliar); // Name check
            await expect(service.create(createDto, userId))
                .rejects.toThrow(common_1.ConflictException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should handle transaction rollback on error', async () => {
            mockQueryRunner.manager.save.mockRejectedValue(new Error('Database error'));
            await expect(service.create(createDto, userId))
                .rejects.toThrow('Database error');
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
            expect(queryRunner.release).toHaveBeenCalled();
        });
    });
    describe('findByCidadao', () => {
        const cidadaoId = '123e4567-e89b-12d3-a456-426614174001';
        const options = { page: 1, limit: 10 };
        beforeEach(() => {
            mockCidadaoRepository.findOne.mockResolvedValue(mockCidadao);
            mockCacheService.get.mockResolvedValue(null);
            mockComposicaoFamiliarRepository.findAndCount.mockResolvedValue([
                [mockComposicaoFamiliar],
                1,
            ]);
            mockComposicaoFamiliarRepository.find.mockResolvedValue([mockComposicaoFamiliar]);
            mockCacheService.set.mockResolvedValue(undefined);
        });
        it('should return paginated composicao familiar members', async () => {
            const result = await service.findByCidadao(cidadaoId, options);
            expect(cidadaoRepository.findOne).toHaveBeenCalledWith({
                where: { id: cidadaoId },
            });
            expect(composicaoFamiliarRepository.findAndCount).toHaveBeenCalledWith({
                where: {
                    cidadao_id: cidadaoId,
                    removed_at: null,
                },
                order: {
                    created_at: 'DESC',
                },
                skip: 0,
                take: 10,
            });
            expect(result.data).toHaveLength(1);
            expect(result.meta.total).toBe(1);
            expect(result.estatisticas).toBeDefined();
        });
        it('should return cached result when available', async () => {
            const cachedResult = {
                data: [mockComposicaoFamiliar],
                meta: { total: 1, page: 1, limit: 10, totalPages: 1, hasNext: false, hasPrev: false },
                estatisticas: { totalMembros: 1, rendaTotal: 1500, rendaMedia: 1500, idadeMedia: 25, membrosComRenda: 1 },
            };
            mockCacheService.get.mockResolvedValue(cachedResult);
            const result = await service.findByCidadao(cidadaoId, options);
            expect(result).toEqual(cachedResult);
            expect(composicaoFamiliarRepository.findAndCount).not.toHaveBeenCalled();
        });
        it('should throw NotFoundException when cidadao does not exist', async () => {
            mockCidadaoRepository.findOne.mockResolvedValue(null);
            await expect(service.findByCidadao(cidadaoId, options))
                .rejects.toThrow(common_1.NotFoundException);
        });
        it('should calculate correct pagination metadata', async () => {
            mockComposicaoFamiliarRepository.findAndCount.mockResolvedValue([
                [mockComposicaoFamiliar, mockComposicaoFamiliar],
                25,
            ]);
            const result = await service.findByCidadao(cidadaoId, { page: 2, limit: 10 });
            expect(result.meta.total).toBe(25);
            expect(result.meta.page).toBe(2);
            expect(result.meta.totalPages).toBe(3);
            expect(result.meta.hasNext).toBe(true);
            expect(result.meta.hasPrev).toBe(true);
        });
    });
    describe('findOne', () => {
        const id = '123e4567-e89b-12d3-a456-426614174000';
        beforeEach(() => {
            mockCacheService.get.mockResolvedValue(null);
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(mockComposicaoFamiliar);
            mockCacheService.set.mockResolvedValue(undefined);
        });
        it('should return a composicao familiar member', async () => {
            const result = await service.findOne(id);
            expect(composicaoFamiliarRepository.findOne).toHaveBeenCalledWith({
                where: {
                    id,
                    removed_at: null,
                },
                relations: ['cidadao'],
            });
            expect(result).toBeDefined();
            expect(result.id).toBe(id);
        });
        it('should return cached result when available', async () => {
            const cachedResult = { id, nome: 'João Silva' };
            mockCacheService.get.mockResolvedValue(cachedResult);
            const result = await service.findOne(id);
            expect(result).toEqual(cachedResult);
            expect(composicaoFamiliarRepository.findOne).not.toHaveBeenCalled();
        });
        it('should throw NotFoundException when member does not exist', async () => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(null);
            await expect(service.findOne(id))
                .rejects.toThrow(common_1.NotFoundException);
        });
    });
    describe('update', () => {
        const id = '123e4567-e89b-12d3-a456-426614174000';
        const updateDto = {
            nome: 'João Silva Atualizado',
            renda: 2000.00,
        };
        const userId = 'user123';
        beforeEach(() => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(mockComposicaoFamiliar);
            mockQueryRunner.manager.save.mockResolvedValue({
                ...mockComposicaoFamiliar,
                ...updateDto,
            });
            mockCacheService.set.mockResolvedValue(undefined);
            mockCacheService.del.mockResolvedValue(undefined);
        });
        it('should update a composicao familiar member successfully', async () => {
            const result = await service.update(id, updateDto, userId);
            expect(composicaoFamiliarRepository.findOne).toHaveBeenCalledWith({
                where: {
                    id,
                    removed_at: null,
                },
                relations: ['cidadao'],
            });
            expect(queryRunner.manager.save).toHaveBeenCalled();
            expect(queryRunner.commitTransaction).toHaveBeenCalled();
            expect(result.nome).toBe(updateDto.nome);
        });
        it('should throw NotFoundException when member does not exist', async () => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(null);
            await expect(service.update(id, updateDto, userId))
                .rejects.toThrow(common_1.NotFoundException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should validate CPF when updating', async () => {
            const updateWithCpf = { ...updateDto, cpf: '123' };
            await expect(service.update(id, updateWithCpf, userId))
                .rejects.toThrow(common_1.BadRequestException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should check for duplicate CPF when updating', async () => {
            const updateWithCpf = { ...updateDto, cpf: '111.111.111-11' };
            mockComposicaoFamiliarRepository.findOne
                .mockResolvedValueOnce(mockComposicaoFamiliar) // Initial find
                .mockResolvedValueOnce({ ...mockComposicaoFamiliar, id: 'different-id' }); // Duplicate check
            await expect(service.update(id, updateWithCpf, userId))
                .rejects.toThrow(common_1.ConflictException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
        it('should check for duplicate name when updating', async () => {
            const updateWithName = { ...updateDto, nome: 'Nome Duplicado' };
            mockComposicaoFamiliarRepository.findOne
                .mockResolvedValueOnce(mockComposicaoFamiliar) // Initial find
                .mockResolvedValueOnce(null) // CPF check (not applicable)
                .mockResolvedValueOnce({ ...mockComposicaoFamiliar, id: 'different-id' }); // Name check
            await expect(service.update(id, updateWithName, userId))
                .rejects.toThrow(common_1.ConflictException);
            expect(queryRunner.rollbackTransaction).toHaveBeenCalled();
        });
    });
    describe('remove', () => {
        const id = '123e4567-e89b-12d3-a456-426614174000';
        const userId = 'user123';
        beforeEach(() => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(mockComposicaoFamiliar);
            mockComposicaoFamiliarRepository.save.mockResolvedValue({
                ...mockComposicaoFamiliar,
                removed_at: new Date(),
            });
            mockCacheService.del.mockResolvedValue(undefined);
        });
        it('should remove a composicao familiar member (soft delete)', async () => {
            await service.remove(id, userId);
            expect(composicaoFamiliarRepository.findOne).toHaveBeenCalledWith({
                where: {
                    id,
                    removed_at: null,
                },
            });
            expect(composicaoFamiliarRepository.save).toHaveBeenCalledWith(expect.objectContaining({
                ...mockComposicaoFamiliar,
                removed_at: expect.any(Date),
            }));
        });
        it('should throw NotFoundException when member does not exist', async () => {
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(null);
            await expect(service.remove(id, userId))
                .rejects.toThrow(common_1.NotFoundException);
        });
    });
    describe('findByCpf', () => {
        const cpf = '12345678900';
        beforeEach(() => {
            mockComposicaoFamiliarRepository.find.mockResolvedValue([mockComposicaoFamiliar]);
        });
        it('should return composicao familiar members by CPF', async () => {
            const result = await service.findByCpf(cpf);
            expect(composicaoFamiliarRepository.find).toHaveBeenCalledWith({
                where: {
                    cpf,
                    removed_at: null,
                },
                relations: ['cidadao'],
                order: {
                    created_at: 'DESC',
                },
            });
            expect(result).toHaveLength(1);
            expect(result[0].cpf).toBe('123.456.789-00');
        });
        it('should throw BadRequestException for invalid CPF length', async () => {
            await expect(service.findByCpf('123'))
                .rejects.toThrow(common_1.BadRequestException);
        });
        it('should return empty array when no members found', async () => {
            mockComposicaoFamiliarRepository.find.mockResolvedValue([]);
            const result = await service.findByCpf(cpf);
            expect(result).toEqual([]);
        });
        it('should clean CPF format before search', async () => {
            await service.findByCpf('123.456.789-00');
            expect(composicaoFamiliarRepository.find).toHaveBeenCalledWith(expect.objectContaining({
                where: expect.objectContaining({
                    cpf: '12345678900',
                }),
            }));
        });
    });
    describe('Cache management', () => {
        it('should invalidate related cache when creating member', async () => {
            const createDto = {
                cidadao_id: '123e4567-e89b-12d3-a456-426614174001',
                nome: 'João Silva',
                cpf: '123.456.789-00',
                nis: '12345678901',
                idade: 25,
                ocupacao: 'Estudante',
                escolaridade: escolaridade_enum_1.EscolaridadeEnum.MEDIO_COMPLETO,
                parentesco: parentesco_enum_1.ParentescoEnum.FILHO,
            };
            mockCidadaoRepository.findOne.mockResolvedValue(mockCidadao);
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(null);
            mockComposicaoFamiliarRepository.create.mockReturnValue(mockComposicaoFamiliar);
            mockQueryRunner.manager.save.mockResolvedValue(mockComposicaoFamiliar);
            await service.create(createDto, 'user123');
            expect(cacheService.del).toHaveBeenCalledWith(expect.stringContaining('composicao_familiar:cidadao:'));
        });
        it('should set cache after successful operations', async () => {
            mockCacheService.get.mockResolvedValue(null);
            mockComposicaoFamiliarRepository.findOne.mockResolvedValue(mockComposicaoFamiliar);
            await service.findOne('123e4567-e89b-12d3-a456-426614174000');
            expect(cacheService.set).toHaveBeenCalledWith(expect.stringContaining('composicao_familiar:id:'), expect.any(Object), 3600);
        });
    });
    describe('Statistics calculation', () => {
        it('should calculate correct statistics', async () => {
            const membrosComRenda = [
                { ...mockComposicaoFamiliar, renda: 1000, idade: 20 },
                { ...mockComposicaoFamiliar, renda: 2000, idade: 30 },
                { ...mockComposicaoFamiliar, renda: null, idade: 25 },
            ];
            mockCidadaoRepository.findOne.mockResolvedValue(mockCidadao);
            mockComposicaoFamiliarRepository.findAndCount.mockResolvedValue([membrosComRenda, 3]);
            mockComposicaoFamiliarRepository.find.mockResolvedValue(membrosComRenda);
            const result = await service.findByCidadao('cidadao-id', { page: 1, limit: 10 });
            expect(result.estatisticas.totalMembros).toBe(3);
            expect(result.estatisticas.rendaTotal).toBe(3000);
            expect(result.estatisticas.rendaMedia).toBe(1500);
            expect(result.estatisticas.idadeMedia).toBe(25);
            expect(result.estatisticas.membrosComRenda).toBe(2);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXGNpZGFkYW9cXHNlcnZpY2VzXFxjb21wb3NpY2FvLWZhbWlsaWFyLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCw2Q0FBcUQ7QUFDckQscUNBQThEO0FBQzlELCtFQUEwRTtBQUMxRSx1RkFBNEU7QUFDNUUsK0RBQXFEO0FBR3JELDJDQUl3QjtBQUN4QixpREFBcUQ7QUFDckQsa0VBQThEO0FBQzlELDhEQUEwRDtBQUUxRCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLElBQUksT0FBa0MsQ0FBQztJQUN2QyxJQUFJLDRCQUE0RCxDQUFDO0lBQ2pFLElBQUksaUJBQXNDLENBQUM7SUFDM0MsSUFBSSxZQUEwQixDQUFDO0lBQy9CLElBQUksVUFBc0IsQ0FBQztJQUMzQixJQUFJLFdBQXdCLENBQUM7SUFFN0IsTUFBTSxlQUFlLEdBQUc7UUFDdEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUMzQixpQkFBaUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQzVCLG1CQUFtQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDOUIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbEIsT0FBTyxFQUFFO1lBQ1AsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7U0FDaEI7S0FDRixDQUFDO0lBRUYsTUFBTSxjQUFjLEdBQUc7UUFDckIsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxlQUFlLENBQUM7S0FDOUQsQ0FBQztJQUVGLE1BQU0sZ0NBQWdDLEdBQUc7UUFDdkMsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsSUFBSSxF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cnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcY2lkYWRhb1xcc2VydmljZXNcXGNvbXBvc2ljYW8tZmFtaWxpYXIuc2VydmljZS5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlc3QsIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnO1xyXG5pbXBvcnQgeyBnZXRSZXBvc2l0b3J5VG9rZW4gfSBmcm9tICdAbmVzdGpzL3R5cGVvcm0nO1xyXG5pbXBvcnQgeyBSZXBvc2l0b3J5LCBEYXRhU291cmNlLCBRdWVyeVJ1bm5lciB9IGZyb20gJ3R5cGVvcm0nO1xyXG5pbXBvcnQgeyBDb21wb3NpY2FvRmFtaWxpYXJTZXJ2aWNlIH0gZnJvbSAnLi9jb21wb3NpY2FvLWZhbWlsaWFyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBDb21wb3NpY2FvRmFtaWxpYXIgfSBmcm9tICcuLi9lbnRpdGllcy9jb21wb3NpY2FvLWZhbWlsaWFyLmVudGl0eSc7XHJcbmltcG9ydCB7IENpZGFkYW8gfSBmcm9tICcuLi9lbnRpdGllcy9jaWRhZGFvLmVudGl0eSc7XHJcbmltcG9ydCB7IENyZWF0ZUNvbXBvc2ljYW9GYW1pbGlhckR0byB9IGZyb20gJy4uL2R0by9jcmVhdGUtY29tcG9zaWNhby1mYW1pbGlhci5kdG8nO1xyXG5pbXBvcnQgeyBVcGRhdGVDb21wb3NpY2FvRmFtaWxpYXJEdG8gfSBmcm9tICcuLi9kdG8vdXBkYXRlLWNvbXBvc2ljYW8tZmFtaWxpYXIuZHRvJztcclxuaW1wb3J0IHtcclxuICBOb3RGb3VuZEV4Y2VwdGlvbixcclxuICBDb25mbGljdEV4Y2VwdGlvbixcclxuICBCYWRSZXF1ZXN0RXhjZXB0aW9uLFxyXG59IGZyb20gJ0BuZXN0anMvY29tbW9uJztcclxuaW1wb3J0IHsgQ2FjaGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2NhY2hlJztcclxuaW1wb3J0IHsgRXNjb2xhcmlkYWRlRW51bSB9IGZyb20gJy4uL2VudW1zL2VzY29sYXJpZGFkZS5lbnVtJztcclxuaW1wb3J0IHsgUGFyZW50ZXNjb0VudW0gfSBmcm9tICcuLi9lbnVtcy9wYXJlbnRlc2NvLmVudW0nO1xyXG5cclxuZGVzY3JpYmUoJ0NvbXBvc2ljYW9GYW1pbGlhclNlcnZpY2UnLCAoKSA9PiB7XHJcbiAgbGV0IHNlcnZpY2U6IENvbXBvc2ljYW9GYW1pbGlhclNlcnZpY2U7XHJcbiAgbGV0IGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnk6IFJlcG9zaXRvcnk8Q29tcG9zaWNhb0ZhbWlsaWFyPjtcclxuICBsZXQgY2lkYWRhb1JlcG9zaXRvcnk6IFJlcG9zaXRvcnk8Q2lkYWRhbz47XHJcbiAgbGV0IGNhY2hlU2VydmljZTogQ2FjaGVTZXJ2aWNlO1xyXG4gIGxldCBkYXRhU291cmNlOiBEYXRhU291cmNlO1xyXG4gIGxldCBxdWVyeVJ1bm5lcjogUXVlcnlSdW5uZXI7XHJcblxyXG4gIGNvbnN0IG1vY2tRdWVyeVJ1bm5lciA9IHtcclxuICAgIGNvbm5lY3Q6IGplc3QuZm4oKSxcclxuICAgIHN0YXJ0VHJhbnNhY3Rpb246IGplc3QuZm4oKSxcclxuICAgIGNvbW1pdFRyYW5zYWN0aW9uOiBqZXN0LmZuKCksXHJcbiAgICByb2xsYmFja1RyYW5zYWN0aW9uOiBqZXN0LmZuKCksXHJcbiAgICByZWxlYXNlOiBqZXN0LmZuKCksXHJcbiAgICBtYW5hZ2VyOiB7XHJcbiAgICAgIHNhdmU6IGplc3QuZm4oKSxcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbW9ja0RhdGFTb3VyY2UgPSB7XHJcbiAgICBjcmVhdGVRdWVyeVJ1bm5lcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrUXVlcnlSdW5uZXIpLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5ID0ge1xyXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICBzYXZlOiBqZXN0LmZuKCksXHJcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXHJcbiAgICBmaW5kOiBqZXN0LmZuKCksXHJcbiAgICBmaW5kQW5kQ291bnQ6IGplc3QuZm4oKSxcclxuICB9O1xyXG5cclxuICBjb25zdCBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkgPSB7XHJcbiAgICBmaW5kT25lOiBqZXN0LmZuKCksXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbW9ja0NhY2hlU2VydmljZSA9IHtcclxuICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgc2V0OiBqZXN0LmZuKCksXHJcbiAgICBkZWw6IGplc3QuZm4oKSxcclxuICB9O1xyXG5cclxuICBjb25zdCBtb2NrQ2lkYWRhbyA9IHtcclxuICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcclxuICAgIGNwZjogJzk4NzY1NDMyMTAwJyxcclxuICAgIG5vbWU6ICdNYXJpYSBTaWx2YScsXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgbW9ja0NvbXBvc2ljYW9GYW1pbGlhciA9IHtcclxuICAgIGlkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyxcclxuICAgIGNpZGFkYW9faWQ6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnLFxyXG4gICAgbm9tZTogJ0pvw6NvIFNpbHZhJyxcclxuICAgIGNwZjogJzEyMzQ1Njc4OTAwJyxcclxuICAgIG5pczogJzEyMzQ1Njc4OTAxJyxcclxuICAgIGlkYWRlOiAyNSxcclxuICAgIG9jdXBhY2FvOiAnRXN0dWRhbnRlJyxcclxuICAgIGVzY29sYXJpZGFkZTogRXNjb2xhcmlkYWRlRW51bS5NRURJT19DT01QTEVUTyxcclxuICAgIHBhcmVudGVzY286IFBhcmVudGVzY29FbnVtLkZJTEhPLFxyXG4gICAgcmVuZGE6IDE1MDAuMDAsXHJcbiAgICBvYnNlcnZhY29lczogJ09ic2VydmHDp8O1ZXMgZGUgdGVzdGUnLFxyXG4gICAgY3JlYXRlZF9hdDogbmV3IERhdGUoJzIwMjQtMDEtMDFUMTA6MDA6MDBaJyksXHJcbiAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgnMjAyNC0wMS0wMVQxMDowMDowMFonKSxcclxuICAgIHJlbW92ZWRfYXQ6IG51bGwsXHJcbiAgICBjaWRhZGFvOiBtb2NrQ2lkYWRhbyxcclxuICB9O1xyXG5cclxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XHJcbiAgICAgIHByb3ZpZGVyczogW1xyXG4gICAgICAgIENvbXBvc2ljYW9GYW1pbGlhclNlcnZpY2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogZ2V0UmVwb3NpdG9yeVRva2VuKENvbXBvc2ljYW9GYW1pbGlhciksXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnksXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oQ2lkYWRhbyksXHJcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0NpZGFkYW9SZXBvc2l0b3J5LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogQ2FjaGVTZXJ2aWNlLFxyXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tDYWNoZVNlcnZpY2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBEYXRhU291cmNlLFxyXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tEYXRhU291cmNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICB9KS5jb21waWxlKCk7XHJcblxyXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8Q29tcG9zaWNhb0ZhbWlsaWFyU2VydmljZT4oQ29tcG9zaWNhb0ZhbWlsaWFyU2VydmljZSk7XHJcbiAgICBjb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5ID0gbW9kdWxlLmdldDxSZXBvc2l0b3J5PENvbXBvc2ljYW9GYW1pbGlhcj4+KFxyXG4gICAgICBnZXRSZXBvc2l0b3J5VG9rZW4oQ29tcG9zaWNhb0ZhbWlsaWFyKSxcclxuICAgICk7XHJcbiAgICBjaWRhZGFvUmVwb3NpdG9yeSA9IG1vZHVsZS5nZXQ8UmVwb3NpdG9yeTxDaWRhZGFvPj4oZ2V0UmVwb3NpdG9yeVRva2VuKENpZGFkYW8pKTtcclxuICAgIGNhY2hlU2VydmljZSA9IG1vZHVsZS5nZXQ8Q2FjaGVTZXJ2aWNlPihDYWNoZVNlcnZpY2UpO1xyXG4gICAgZGF0YVNvdXJjZSA9IG1vZHVsZS5nZXQ8RGF0YVNvdXJjZT4oRGF0YVNvdXJjZSk7XHJcbiAgICBxdWVyeVJ1bm5lciA9IG1vY2tRdWVyeVJ1bm5lciBhcyBhbnk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3Nob3VsZCBiZSBkZWZpbmVkJywgKCkgPT4ge1xyXG4gICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVEZWZpbmVkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdjcmVhdGUnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBjcmVhdGVEdG86IENyZWF0ZUNvbXBvc2ljYW9GYW1pbGlhckR0byA9IHtcclxuICAgICAgY2lkYWRhb19pZDogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMScsXHJcbiAgICAgIG5vbWU6ICdKb8OjbyBTaWx2YScsXHJcbiAgICAgIGNwZjogJzEyMy40NTYuNzg5LTAwJyxcclxuICAgICAgbmlzOiAnMTIzNDU2Nzg5MDEnLFxyXG4gICAgICBpZGFkZTogMjUsXHJcbiAgICAgIG9jdXBhY2FvOiAnRXN0dWRhbnRlJyxcclxuICAgICAgZXNjb2xhcmlkYWRlOiBFc2NvbGFyaWRhZGVFbnVtLk1FRElPX0NPTVBMRVRPLFxyXG4gICAgICBwYXJlbnRlc2NvOiBQYXJlbnRlc2NvRW51bS5GSUxITyxcclxuICAgICAgcmVuZGE6IDE1MDAuMDAsXHJcbiAgICAgIG9ic2VydmFjb2VzOiAnT2JzZXJ2YcOnw7VlcyBkZSB0ZXN0ZScsXHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyMTIzJztcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NpZGFkYW8pO1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5jcmVhdGUubW9ja1JldHVyblZhbHVlKG1vY2tDb21wb3NpY2FvRmFtaWxpYXIpO1xyXG4gICAgICBtb2NrUXVlcnlSdW5uZXIubWFuYWdlci5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDb21wb3NpY2FvRmFtaWxpYXIpO1xyXG4gICAgICBtb2NrQ2FjaGVTZXJ2aWNlLnNldC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgICBtb2NrQ2FjaGVTZXJ2aWNlLmRlbC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBuZXcgY29tcG9zaWNhbyBmYW1pbGlhciBtZW1iZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEdG8sIHVzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QoY2lkYWRhb1JlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiBjcmVhdGVEdG8uY2lkYWRhb19pZCB9LFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgLi4uY3JlYXRlRHRvLFxyXG4gICAgICAgIGNwZjogJzEyMzQ1Njc4OTAwJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChxdWVyeVJ1bm5lci5tYW5hZ2VyLnNhdmUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLmNvbW1pdFRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubm9tZSkudG9CZShjcmVhdGVEdG8ubm9tZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uIHdoZW4gY2lkYWRhbyBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jcmVhdGUoY3JlYXRlRHRvLCB1c2VySWQpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xyXG4gICAgICBleHBlY3QocXVlcnlSdW5uZXIucm9sbGJhY2tUcmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBCYWRSZXF1ZXN0RXhjZXB0aW9uIGZvciBpbnZhbGlkIENQRicsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgaW52YWxpZENwZkR0byA9IHsgLi4uY3JlYXRlRHRvLCBjcGY6ICcxMjMnIH07XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jcmVhdGUoaW52YWxpZENwZkR0bywgdXNlcklkKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KEJhZFJlcXVlc3RFeGNlcHRpb24pO1xyXG4gICAgICBleHBlY3QocXVlcnlSdW5uZXIucm9sbGJhY2tUcmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBDb25mbGljdEV4Y2VwdGlvbiB3aGVuIG1lbWJlciB3aXRoIHNhbWUgQ1BGIGV4aXN0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyKTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEdG8sIHVzZXJJZCkpXHJcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdyhDb25mbGljdEV4Y2VwdGlvbik7XHJcbiAgICAgIGV4cGVjdChxdWVyeVJ1bm5lci5yb2xsYmFja1RyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IENvbmZsaWN0RXhjZXB0aW9uIHdoZW4gQ1BGIGlzIHNhbWUgYXMgY2lkYWRhbyBDUEYnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHNhbWVDcGZEdG8gPSB7IC4uLmNyZWF0ZUR0bywgY3BmOiAnOTg3LjY1NC4zMjEtMDAnIH07XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jcmVhdGUoc2FtZUNwZkR0bywgdXNlcklkKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KENvbmZsaWN0RXhjZXB0aW9uKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLnJvbGxiYWNrVHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgQ29uZmxpY3RFeGNlcHRpb24gd2hlbiBtZW1iZXIgd2l0aCBzYW1lIG5hbWUgZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShudWxsKSAvLyBDUEYgY2hlY2tcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tDb21wb3NpY2FvRmFtaWxpYXIpOyAvLyBOYW1lIGNoZWNrXHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jcmVhdGUoY3JlYXRlRHRvLCB1c2VySWQpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coQ29uZmxpY3RFeGNlcHRpb24pO1xyXG4gICAgICBleHBlY3QocXVlcnlSdW5uZXIucm9sbGJhY2tUcmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdHJhbnNhY3Rpb24gcm9sbGJhY2sgb24gZXJyb3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tRdWVyeVJ1bm5lci5tYW5hZ2VyLnNhdmUubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcclxuXHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEdG8sIHVzZXJJZCkpXHJcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnRGF0YWJhc2UgZXJyb3InKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLnJvbGxiYWNrVHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLnJlbGVhc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZmluZEJ5Q2lkYWRhbycsICgpID0+IHtcclxuICAgIGNvbnN0IGNpZGFkYW9JZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDEnO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgcGFnZTogMSwgbGltaXQ6IDEwIH07XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tDaWRhZGFvUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDaWRhZGFvKTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5nZXQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRBbmRDb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZShbXHJcbiAgICAgICAgW21vY2tDb21wb3NpY2FvRmFtaWxpYXJdLFxyXG4gICAgICAgIDEsXHJcbiAgICAgIF0pO1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kLm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29tcG9zaWNhb0ZhbWlsaWFyXSk7XHJcbiAgICAgIG1vY2tDYWNoZVNlcnZpY2Uuc2V0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBwYWdpbmF0ZWQgY29tcG9zaWNhbyBmYW1pbGlhciBtZW1iZXJzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeUNpZGFkYW8oY2lkYWRhb0lkLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGV4cGVjdChjaWRhZGFvUmVwb3NpdG9yeS5maW5kT25lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGNpZGFkYW9JZCB9LFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZEFuZENvdW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGNpZGFkYW9faWQ6IGNpZGFkYW9JZCxcclxuICAgICAgICAgIHJlbW92ZWRfYXQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgY3JlYXRlZF9hdDogJ0RFU0MnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2tpcDogMCxcclxuICAgICAgICB0YWtlOiAxMCxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZGF0YSkudG9IYXZlTGVuZ3RoKDEpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGEudG90YWwpLnRvQmUoMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuZXN0YXRpc3RpY2FzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gY2FjaGVkIHJlc3VsdCB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgY2FjaGVkUmVzdWx0ID0ge1xyXG4gICAgICAgIGRhdGE6IFttb2NrQ29tcG9zaWNhb0ZhbWlsaWFyXSxcclxuICAgICAgICBtZXRhOiB7IHRvdGFsOiAxLCBwYWdlOiAxLCBsaW1pdDogMTAsIHRvdGFsUGFnZXM6IDEsIGhhc05leHQ6IGZhbHNlLCBoYXNQcmV2OiBmYWxzZSB9LFxyXG4gICAgICAgIGVzdGF0aXN0aWNhczogeyB0b3RhbE1lbWJyb3M6IDEsIHJlbmRhVG90YWw6IDE1MDAsIHJlbmRhTWVkaWE6IDE1MDAsIGlkYWRlTWVkaWE6IDI1LCBtZW1icm9zQ29tUmVuZGE6IDEgfSxcclxuICAgICAgfTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5nZXQubW9ja1Jlc29sdmVkVmFsdWUoY2FjaGVkUmVzdWx0KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5Q2lkYWRhbyhjaWRhZGFvSWQsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChjYWNoZWRSZXN1bHQpO1xyXG4gICAgICBleHBlY3QoY29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kQW5kQ291bnQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uIHdoZW4gY2lkYWRhbyBkb2VzIG5vdCBleGlzdCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NpZGFkYW9SZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5maW5kQnlDaWRhZGFvKGNpZGFkYW9JZCwgb3B0aW9ucykpXHJcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBjb3JyZWN0IHBhZ2luYXRpb24gbWV0YWRhdGEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRBbmRDb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZShbXHJcbiAgICAgICAgW21vY2tDb21wb3NpY2FvRmFtaWxpYXIsIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJdLFxyXG4gICAgICAgIDI1LFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5Q2lkYWRhbyhjaWRhZGFvSWQsIHsgcGFnZTogMiwgbGltaXQ6IDEwIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhLnRvdGFsKS50b0JlKDI1KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhLnBhZ2UpLnRvQmUoMik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWV0YS50b3RhbFBhZ2VzKS50b0JlKDMpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1ldGEuaGFzTmV4dCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXRhLmhhc1ByZXYpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2ZpbmRPbmUnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrQ2FjaGVTZXJ2aWNlLmdldC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcclxuICAgICAgbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyKTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5zZXQubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGEgY29tcG9zaWNhbyBmYW1pbGlhciBtZW1iZXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZE9uZShpZCk7XHJcblxyXG4gICAgICBleHBlY3QoY29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgcmVtb3ZlZF9hdDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbGF0aW9uczogWydjaWRhZGFvJ10sXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlkKS50b0JlKGlkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGNhY2hlZCByZXN1bHQgd2hlbiBhdmFpbGFibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhY2hlZFJlc3VsdCA9IHsgaWQsIG5vbWU6ICdKb8OjbyBTaWx2YScgfTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5nZXQubW9ja1Jlc29sdmVkVmFsdWUoY2FjaGVkUmVzdWx0KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZE9uZShpZCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKGNhY2hlZFJlc3VsdCk7XHJcbiAgICAgIGV4cGVjdChjb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uIHdoZW4gbWVtYmVyIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuZmluZE9uZShpZCkpXHJcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdyhOb3RGb3VuZEV4Y2VwdGlvbik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3VwZGF0ZScsICgpID0+IHtcclxuICAgIGNvbnN0IGlkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XHJcbiAgICBjb25zdCB1cGRhdGVEdG86IFVwZGF0ZUNvbXBvc2ljYW9GYW1pbGlhckR0byA9IHtcclxuICAgICAgbm9tZTogJ0pvw6NvIFNpbHZhIEF0dWFsaXphZG8nLFxyXG4gICAgICByZW5kYTogMjAwMC4wMCxcclxuICAgIH07XHJcbiAgICBjb25zdCB1c2VySWQgPSAndXNlcjEyMyc7XHJcblxyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBvc2ljYW9GYW1pbGlhcik7XHJcbiAgICAgIG1vY2tRdWVyeVJ1bm5lci5tYW5hZ2VyLnNhdmUubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICAgIC4uLm1vY2tDb21wb3NpY2FvRmFtaWxpYXIsXHJcbiAgICAgICAgLi4udXBkYXRlRHRvLFxyXG4gICAgICB9KTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5zZXQubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5kZWwubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGEgY29tcG9zaWNhbyBmYW1pbGlhciBtZW1iZXIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZShpZCwgdXBkYXRlRHRvLCB1c2VySWQpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZE9uZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBpZCxcclxuICAgICAgICAgIHJlbW92ZWRfYXQ6IG51bGwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWxhdGlvbnM6IFsnY2lkYWRhbyddLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLm1hbmFnZXIuc2F2ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocXVlcnlSdW5uZXIuY29tbWl0VHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5ub21lKS50b0JlKHVwZGF0ZUR0by5ub21lKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgTm90Rm91bmRFeGNlcHRpb24gd2hlbiBtZW1iZXIgZG9lcyBub3QgZXhpc3QnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS51cGRhdGUoaWQsIHVwZGF0ZUR0bywgdXNlcklkKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KE5vdEZvdW5kRXhjZXB0aW9uKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLnJvbGxiYWNrVHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgQ1BGIHdoZW4gdXBkYXRpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZVdpdGhDcGYgPSB7IC4uLnVwZGF0ZUR0bywgY3BmOiAnMTIzJyB9O1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBkYXRlKGlkLCB1cGRhdGVXaXRoQ3BmLCB1c2VySWQpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coQmFkUmVxdWVzdEV4Y2VwdGlvbik7XHJcbiAgICAgIGV4cGVjdChxdWVyeVJ1bm5lci5yb2xsYmFja1RyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNoZWNrIGZvciBkdXBsaWNhdGUgQ1BGIHdoZW4gdXBkYXRpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVwZGF0ZVdpdGhDcGYgPSB7IC4uLnVwZGF0ZUR0bywgY3BmOiAnMTExLjExMS4xMTEtMTEnIH07XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmVcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tDb21wb3NpY2FvRmFtaWxpYXIpIC8vIEluaXRpYWwgZmluZFxyXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyAuLi5tb2NrQ29tcG9zaWNhb0ZhbWlsaWFyLCBpZDogJ2RpZmZlcmVudC1pZCcgfSk7IC8vIER1cGxpY2F0ZSBjaGVja1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBkYXRlKGlkLCB1cGRhdGVXaXRoQ3BmLCB1c2VySWQpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coQ29uZmxpY3RFeGNlcHRpb24pO1xyXG4gICAgICBleHBlY3QocXVlcnlSdW5uZXIucm9sbGJhY2tUcmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjaGVjayBmb3IgZHVwbGljYXRlIG5hbWUgd2hlbiB1cGRhdGluZycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdXBkYXRlV2l0aE5hbWUgPSB7IC4uLnVwZGF0ZUR0bywgbm9tZTogJ05vbWUgRHVwbGljYWRvJyB9O1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyKSAvLyBJbml0aWFsIGZpbmRcclxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG51bGwpIC8vIENQRiBjaGVjayAobm90IGFwcGxpY2FibGUpXHJcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IC4uLm1vY2tDb21wb3NpY2FvRmFtaWxpYXIsIGlkOiAnZGlmZmVyZW50LWlkJyB9KTsgLy8gTmFtZSBjaGVja1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBkYXRlKGlkLCB1cGRhdGVXaXRoTmFtZSwgdXNlcklkKSlcclxuICAgICAgICAucmVqZWN0cy50b1Rocm93KENvbmZsaWN0RXhjZXB0aW9uKTtcclxuICAgICAgZXhwZWN0KHF1ZXJ5UnVubmVyLnJvbGxiYWNrVHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVtb3ZlJywgKCkgPT4ge1xyXG4gICAgY29uc3QgaWQgPSAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJztcclxuICAgIGNvbnN0IHVzZXJJZCA9ICd1c2VyMTIzJztcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyKTtcclxuICAgICAgbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuc2F2ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgICAgLi4ubW9ja0NvbXBvc2ljYW9GYW1pbGlhcixcclxuICAgICAgICByZW1vdmVkX2F0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9KTtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5kZWwubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVtb3ZlIGEgY29tcG9zaWNhbyBmYW1pbGlhciBtZW1iZXIgKHNvZnQgZGVsZXRlKScsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5yZW1vdmUoaWQsIHVzZXJJZCk7XHJcblxyXG4gICAgICBleHBlY3QoY29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgcmVtb3ZlZF9hdDogbnVsbCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuc2F2ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgLi4ubW9ja0NvbXBvc2ljYW9GYW1pbGlhcixcclxuICAgICAgICAgIHJlbW92ZWRfYXQ6IGV4cGVjdC5hbnkoRGF0ZSksXHJcbiAgICAgICAgfSksXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IE5vdEZvdW5kRXhjZXB0aW9uIHdoZW4gbWVtYmVyIGRvZXMgbm90IGV4aXN0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kT25lLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UucmVtb3ZlKGlkLCB1c2VySWQpKVxyXG4gICAgICAgIC5yZWplY3RzLnRvVGhyb3coTm90Rm91bmRFeGNlcHRpb24pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdmaW5kQnlDcGYnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBjcGYgPSAnMTIzNDU2Nzg5MDAnO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrQ29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kLm1vY2tSZXNvbHZlZFZhbHVlKFttb2NrQ29tcG9zaWNhb0ZhbWlsaWFyXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb21wb3NpY2FvIGZhbWlsaWFyIG1lbWJlcnMgYnkgQ1BGJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeUNwZihjcGYpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICAgIHdoZXJlOiB7XHJcbiAgICAgICAgICBjcGYsXHJcbiAgICAgICAgICByZW1vdmVkX2F0OiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVsYXRpb25zOiBbJ2NpZGFkYW8nXSxcclxuICAgICAgICBvcmRlcjoge1xyXG4gICAgICAgICAgY3JlYXRlZF9hdDogJ0RFU0MnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uY3BmKS50b0JlKCcxMjMuNDU2Ljc4OS0wMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBCYWRSZXF1ZXN0RXhjZXB0aW9uIGZvciBpbnZhbGlkIENQRiBsZW5ndGgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmZpbmRCeUNwZignMTIzJykpXHJcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdyhCYWRSZXF1ZXN0RXhjZXB0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcHR5IGFycmF5IHdoZW4gbm8gbWVtYmVycyBmb3VuZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NvbXBvc2ljYW9GYW1pbGlhclJlcG9zaXRvcnkuZmluZC5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XHJcblxyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmZpbmRCeUNwZihjcGYpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNsZWFuIENQRiBmb3JtYXQgYmVmb3JlIHNlYXJjaCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgc2VydmljZS5maW5kQnlDcGYoJzEyMy40NTYuNzg5LTAwJyk7XHJcblxyXG4gICAgICBleHBlY3QoY29tcG9zaWNhb0ZhbWlsaWFyUmVwb3NpdG9yeS5maW5kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICB3aGVyZTogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgICBjcGY6ICcxMjM0NTY3ODkwMCcsXHJcbiAgICAgICAgICB9KSxcclxuICAgICAgICB9KSxcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ2FjaGUgbWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgaW52YWxpZGF0ZSByZWxhdGVkIGNhY2hlIHdoZW4gY3JlYXRpbmcgbWVtYmVyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjcmVhdGVEdG86IENyZWF0ZUNvbXBvc2ljYW9GYW1pbGlhckR0byA9IHtcclxuICAgICAgICBjaWRhZGFvX2lkOiAnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAxJyxcclxuICAgICAgICBub21lOiAnSm/Do28gU2lsdmEnLFxyXG4gICAgICAgIGNwZjogJzEyMy40NTYuNzg5LTAwJyxcclxuICAgICAgICBuaXM6ICcxMjM0NTY3ODkwMScsXHJcbiAgICAgICAgaWRhZGU6IDI1LFxyXG4gICAgICAgIG9jdXBhY2FvOiAnRXN0dWRhbnRlJyxcclxuICAgICAgICBlc2NvbGFyaWRhZGU6IEVzY29sYXJpZGFkZUVudW0uTUVESU9fQ09NUExFVE8sXHJcbiAgICAgICAgcGFyZW50ZXNjbzogUGFyZW50ZXNjb0VudW0uRklMSE8sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmNyZWF0ZS5tb2NrUmV0dXJuVmFsdWUobW9ja0NvbXBvc2ljYW9GYW1pbGlhcik7XHJcbiAgICAgIG1vY2tRdWVyeVJ1bm5lci5tYW5hZ2VyLnNhdmUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBvc2ljYW9GYW1pbGlhcik7XHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmNyZWF0ZShjcmVhdGVEdG8sICd1c2VyMTIzJyk7XHJcblxyXG4gICAgICBleHBlY3QoY2FjaGVTZXJ2aWNlLmRlbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoJ2NvbXBvc2ljYW9fZmFtaWxpYXI6Y2lkYWRhbzonKSxcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgc2V0IGNhY2hlIGFmdGVyIHN1Y2Nlc3NmdWwgb3BlcmF0aW9ucycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NhY2hlU2VydmljZS5nZXQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRPbmUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NvbXBvc2ljYW9GYW1pbGlhcik7XHJcblxyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmZpbmRPbmUoJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCcpO1xyXG5cclxuICAgICAgZXhwZWN0KGNhY2hlU2VydmljZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdjb21wb3NpY2FvX2ZhbWlsaWFyOmlkOicpLFxyXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KSxcclxuICAgICAgICAzNjAwLFxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdTdGF0aXN0aWNzIGNhbGN1bGF0aW9uJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgY29ycmVjdCBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtZW1icm9zQ29tUmVuZGEgPSBbXHJcbiAgICAgICAgeyAuLi5tb2NrQ29tcG9zaWNhb0ZhbWlsaWFyLCByZW5kYTogMTAwMCwgaWRhZGU6IDIwIH0sXHJcbiAgICAgICAgeyAuLi5tb2NrQ29tcG9zaWNhb0ZhbWlsaWFyLCByZW5kYTogMjAwMCwgaWRhZGU6IDMwIH0sXHJcbiAgICAgICAgeyAuLi5tb2NrQ29tcG9zaWNhb0ZhbWlsaWFyLCByZW5kYTogbnVsbCwgaWRhZGU6IDI1IH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBtb2NrQ2lkYWRhb1JlcG9zaXRvcnkuZmluZE9uZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2lkYWRhbyk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmRBbmRDb3VudC5tb2NrUmVzb2x2ZWRWYWx1ZShbbWVtYnJvc0NvbVJlbmRhLCAzXSk7XHJcbiAgICAgIG1vY2tDb21wb3NpY2FvRmFtaWxpYXJSZXBvc2l0b3J5LmZpbmQubW9ja1Jlc29sdmVkVmFsdWUobWVtYnJvc0NvbVJlbmRhKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZmluZEJ5Q2lkYWRhbygnY2lkYWRhby1pZCcsIHsgcGFnZTogMSwgbGltaXQ6IDEwIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdC5lc3RhdGlzdGljYXMudG90YWxNZW1icm9zKS50b0JlKDMpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVzdGF0aXN0aWNhcy5yZW5kYVRvdGFsKS50b0JlKDMwMDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVzdGF0aXN0aWNhcy5yZW5kYU1lZGlhKS50b0JlKDE1MDApO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmVzdGF0aXN0aWNhcy5pZGFkZU1lZGlhKS50b0JlKDI1KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5lc3RhdGlzdGljYXMubWVtYnJvc0NvbVJlbmRhKS50b0JlKDIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==