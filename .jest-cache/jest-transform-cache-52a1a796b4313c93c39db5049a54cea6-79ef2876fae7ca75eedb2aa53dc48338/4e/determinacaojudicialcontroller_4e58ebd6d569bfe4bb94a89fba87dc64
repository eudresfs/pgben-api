ede48d4a5e7e5282591e82021bd95200
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};
var _a, _b, _c, _d, _e, _f, _g, _h, _j;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DeterminacaoJudicialController = void 0;
const common_1 = require("@nestjs/common");
const swagger_1 = require("@nestjs/swagger");
const jwt_auth_guard_1 = require("../../../auth/guards/jwt-auth.guard");
const permission_guard_1 = require("../../../auth/guards/permission.guard");
const requires_permission_decorator_1 = require("../../../auth/decorators/requires-permission.decorator");
const determinacao_judicial_adapter_service_1 = require("../services/determinacao-judicial-adapter.service");
const create_determinacao_judicial_dto_1 = require("../dto/create-determinacao-judicial.dto");
const update_determinacao_judicial_dto_1 = require("../dto/update-determinacao-judicial.dto");
const determinacao_judicial_entity_1 = require("../../../entities/determinacao-judicial.entity");
/**
 * Controller de Determinação Judicial
 *
 * Responsável por expor os endpoints de gerenciamento de determinações judiciais
 * relacionadas às solicitações de benefício.
 */
let DeterminacaoJudicialController = class DeterminacaoJudicialController {
    determinacaoService;
    constructor(determinacaoService) {
        this.determinacaoService = determinacaoService;
    }
    /**
     * Cria uma nova determinação judicial
     * @param createDeterminacaoDto Dados da determinação judicial
     * @param req Requisição
     * @returns Determinação judicial criada
     */
    async create(createDeterminacaoDto, req) {
        const usuarioId = req.user.id;
        return this.determinacaoService.create(createDeterminacaoDto, usuarioId);
    }
    /**
     * Busca todas as determinações judiciais de uma solicitação
     * @param solicitacaoId ID da solicitação
     * @returns Lista de determinações judiciais
     */
    async findBySolicitacaoId(solicitacaoId) {
        return this.determinacaoService.findBySolicitacaoId(solicitacaoId);
    }
    /**
     * Busca uma determinação judicial pelo ID
     * @param id ID da determinação judicial
     * @returns Determinação judicial
     */
    async findById(id) {
        return this.determinacaoService.findById(id);
    }
    /**
     * Atualiza uma determinação judicial
     * @param id ID da determinação judicial
     * @param updateDeterminacaoDto Dados para atualização
     * @returns Determinação judicial atualizada
     */
    async update(id, updateDeterminacaoDto) {
        return this.determinacaoService.update(id, updateDeterminacaoDto);
    }
    /**
     * Registra o cumprimento de uma determinação judicial
     * @param id ID da determinação judicial
     * @param body Observações sobre o cumprimento
     * @returns Determinação judicial atualizada
     */
    async registrarCumprimento(id, body) {
        return this.determinacaoService.registrarCumprimento(id, body.observacoes);
    }
    /**
     * Remove uma determinação judicial
     * @param id ID da determinação judicial
     * @returns Void
     */
    async remove(id) {
        return this.determinacaoService.remove(id);
    }
};
exports.DeterminacaoJudicialController = DeterminacaoJudicialController;
__decorate([
    (0, common_1.Post)(),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.criar-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Cria uma nova determinação judicial' }),
    (0, swagger_1.ApiResponse)({
        status: 201,
        description: 'Determinação judicial criada com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Body)()),
    __param(1, (0, common_1.Req)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_b = typeof create_determinacao_judicial_dto_1.SolicitacaoCreateDeterminacaoJudicialDto !== "undefined" && create_determinacao_judicial_dto_1.SolicitacaoCreateDeterminacaoJudicialDto) === "function" ? _b : Object, Object]),
    __metadata("design:returntype", typeof (_c = typeof Promise !== "undefined" && Promise) === "function" ? _c : Object)
], DeterminacaoJudicialController.prototype, "create", null);
__decorate([
    (0, common_1.Get)('solicitacao/:solicitacaoId'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.listar-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Busca todas as determinações judiciais de uma solicitação',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Lista de determinações judiciais',
        type: [determinacao_judicial_entity_1.DeterminacaoJudicial],
    }),
    __param(0, (0, common_1.Param)('solicitacaoId')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_d = typeof Promise !== "undefined" && Promise) === "function" ? _d : Object)
], DeterminacaoJudicialController.prototype, "findBySolicitacaoId", null);
__decorate([
    (0, common_1.Get)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.visualizar-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Busca uma determinação judicial pelo ID' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação judicial encontrada',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_e = typeof Promise !== "undefined" && Promise) === "function" ? _e : Object)
], DeterminacaoJudicialController.prototype, "findById", null);
__decorate([
    (0, common_1.Patch)(':id'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.atualizar-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Atualiza uma determinação judicial' }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Determinação judicial atualizada com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, typeof (_f = typeof update_determinacao_judicial_dto_1.SolicitacaoUpdateDeterminacaoJudicialDto !== "undefined" && update_determinacao_judicial_dto_1.SolicitacaoUpdateDeterminacaoJudicialDto) === "function" ? _f : Object]),
    __metadata("design:returntype", typeof (_g = typeof Promise !== "undefined" && Promise) === "function" ? _g : Object)
], DeterminacaoJudicialController.prototype, "update", null);
__decorate([
    (0, common_1.Patch)(':id/cumprir'),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.cumprir-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({
        summary: 'Registra o cumprimento de uma determinação judicial',
    }),
    (0, swagger_1.ApiResponse)({
        status: 200,
        description: 'Cumprimento registrado com sucesso',
        type: determinacao_judicial_entity_1.DeterminacaoJudicial,
    }),
    __param(0, (0, common_1.Param)('id')),
    __param(1, (0, common_1.Body)()),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String, Object]),
    __metadata("design:returntype", typeof (_h = typeof Promise !== "undefined" && Promise) === "function" ? _h : Object)
], DeterminacaoJudicialController.prototype, "registrarCumprimento", null);
__decorate([
    (0, common_1.Delete)(':id'),
    (0, common_1.HttpCode)(common_1.HttpStatus.NO_CONTENT),
    (0, requires_permission_decorator_1.RequiresPermission)({
        permissionName: 'solicitacao.remover-determinacao-judicial',
    }),
    (0, swagger_1.ApiOperation)({ summary: 'Remove uma determinação judicial' }),
    (0, swagger_1.ApiResponse)({
        status: 204,
        description: 'Determinação judicial removida com sucesso',
    }),
    __param(0, (0, common_1.Param)('id')),
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [String]),
    __metadata("design:returntype", typeof (_j = typeof Promise !== "undefined" && Promise) === "function" ? _j : Object)
], DeterminacaoJudicialController.prototype, "remove", null);
exports.DeterminacaoJudicialController = DeterminacaoJudicialController = __decorate([
    (0, common_1.Controller)('solicitacao/determinacao-judicial'),
    (0, common_1.UseGuards)(jwt_auth_guard_1.JwtAuthGuard, permission_guard_1.PermissionGuard),
    (0, swagger_1.ApiBearerAuth)(),
    __metadata("design:paramtypes", [typeof (_a = typeof determinacao_judicial_adapter_service_1.DeterminacaoJudicialAdapterService !== "undefined" && determinacao_judicial_adapter_service_1.DeterminacaoJudicialAdapterService) === "function" ? _a : Object])
], DeterminacaoJudicialController);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHNvbGljaXRhY2FvXFxjb250cm9sbGVyc1xcZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDJDQVl3QjtBQUN4Qiw2Q0FLeUI7QUFDekIsd0VBQW1FO0FBQ25FLDRFQUF3RTtBQUN4RSwwR0FBNEY7QUFFNUYsNkdBQXVHO0FBQ3ZHLDhGQUFtRztBQUNuRyw4RkFBbUc7QUFDbkcsaUdBQXNGO0FBRXRGOzs7OztHQUtHO0FBSUksSUFBTSw4QkFBOEIsR0FBcEMsTUFBTSw4QkFBOEI7SUFFdEI7SUFEbkIsWUFDbUIsbUJBQXVEO1FBQXZELHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBb0M7SUFDdkUsQ0FBQztJQUVKOzs7OztPQUtHO0lBV0csQUFBTixLQUFLLENBQUMsTUFBTSxDQUNGLHFCQUErRCxFQUNoRSxHQUFRO1FBRWYsTUFBTSxTQUFTLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDOUIsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLHFCQUFxQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzNFLENBQUM7SUFFRDs7OztPQUlHO0lBYUcsQUFBTixLQUFLLENBQUMsbUJBQW1CLENBQ0MsYUFBcUI7UUFFN0MsT0FBTyxJQUFJLENBQUMsbUJBQW1CLENBQUMsbUJBQW1CLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVEOzs7O09BSUc7SUFXRyxBQUFOLEtBQUssQ0FBQyxRQUFRLENBQWMsRUFBVTtRQUNwQyxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVEOzs7OztPQUtHO0lBV0csQUFBTixLQUFLLENBQUMsTUFBTSxDQUNHLEVBQVUsRUFD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LEVBQUM7UUFDbEIsY0FBYyxFQUFFLDJDQUEyQztLQUM1RCxDQUFDO0lBQ0QsSUFBQSxzQkFBWSxFQUFDO1FBQ1osT0FBTyxFQUFFLHFEQUFxRDtLQUMvRCxDQUFDO0lBQ0QsSUFBQSxxQkFBVyxFQUFDO1FBQ1gsTUFBTSxFQUFFLEdBQUc7UUFDWCxXQUFXLEVBQUUsb0NBQW9DO1FBQ2pELElBQUksRUFBRSxtREFBb0I7S0FDM0IsQ0FBQztJQUVDLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxDQUFDLENBQUE7SUFDWCxXQUFBLElBQUEsYUFBSSxHQUFFLENBQUE7Ozt3REFDTixPQUFPLG9CQUFQLE9BQU87MEVBRVQ7QUFpQks7SUFWTCxJQUFBLGVBQU0sRUFBQyxLQUFLLENBQUM7SUFDYixJQUFBLGlCQUFRLEVBQUMsbUJBQVUsQ0FBQyxVQUFVLENBQUM7SUFDL0IsSUFBQSxrREFBa0IsRUFBQztRQUNsQixjQUFjLEVBQUUsMkNBQTJDO0tBQzVELENBQUM7SUFDRCxJQUFBLHNCQUFZLEVBQUMsRUFBRSxPQUFPLEVBQUUsa0NBQWtDLEVBQUUsQ0FBQztJQUM3RCxJQUFBLHFCQUFXLEVBQUM7UUFDWCxNQUFNLEVBQUUsR0FBRztRQUNYLFdBQVcsRUFBRSw0Q0FBNEM7S0FDMUQsQ0FBQztJQUNZLFdBQUEsSUFBQSxjQUFLLEVBQUMsSUFBSSxDQUFDLENBQUE7Ozt3REFBYyxPQUFPLG9CQUFQLE9BQU87NERBRTdDO3lDQXhJVSw4QkFBOEI7SUFIMUMsSUFBQSxtQkFBVSxFQUFDLG1DQUFtQyxDQUFDO0lBQy9DLElBQUEsa0JBQVMsRUFBQyw2QkFBWSxFQUFFLGtDQUFlLENBQUM7SUFDeEMsSUFBQSx1QkFBYSxHQUFFO3lEQUcwQiwwRUFBa0Msb0JBQWxDLDBFQUFrQztHQUYvRCw4QkFBOEIsQ0F5STFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxzb2xpY2l0YWNhb1xcY29udHJvbGxlcnNcXGRldGVybWluYWNhby1qdWRpY2lhbC5jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbnRyb2xsZXIsXG4gIEdldCxcbiAgUG9zdCxcbiAgQm9keSxcbiAgUGFyYW0sXG4gIFBhdGNoLFxuICBEZWxldGUsXG4gIFVzZUd1YXJkcyxcbiAgUmVxLFxuICBIdHRwQ29kZSxcbiAgSHR0cFN0YXR1cyxcbn0gZnJvbSAnQG5lc3Rqcy9jb21tb24nO1xuaW1wb3J0IHtcbiAgQXBpQmVhcmVyQXV0aCxcbiAgQXBpT3BlcmF0aW9uLFxuICBBcGlSZXNwb25zZSxcbiAgQXBpVGFncyxcbn0gZnJvbSAnQG5lc3Rqcy9zd2FnZ2VyJztcbmltcG9ydCB7IEp3dEF1dGhHdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL2p3dC1hdXRoLmd1YXJkJztcbmltcG9ydCB7IFBlcm1pc3Npb25HdWFyZCB9IGZyb20gJy4uLy4uLy4uL2F1dGgvZ3VhcmRzL3Blcm1pc3Npb24uZ3VhcmQnO1xuaW1wb3J0IHsgUmVxdWlyZXNQZXJtaXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vYXV0aC9kZWNvcmF0b3JzL3JlcXVpcmVzLXBlcm1pc3Npb24uZGVjb3JhdG9yJztcbmltcG9ydCB7IFNjb3BlVHlwZSB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL3VzZXItcGVybWlzc2lvbi5lbnRpdHknO1xuaW1wb3J0IHsgRGV0ZXJtaW5hY2FvSnVkaWNpYWxBZGFwdGVyU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2RldGVybWluYWNhby1qdWRpY2lhbC1hZGFwdGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgU29saWNpdGFjYW9DcmVhdGVEZXRlcm1pbmFjYW9KdWRpY2lhbER0byB9IGZyb20gJy4uL2R0by9jcmVhdGUtZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLmR0byc7XG5pbXBvcnQgeyBTb2xpY2l0YWNhb1VwZGF0ZURldGVybWluYWNhb0p1ZGljaWFsRHRvIH0gZnJvbSAnLi4vZHRvL3VwZGF0ZS1kZXRlcm1pbmFjYW8tanVkaWNpYWwuZHRvJztcbmltcG9ydCB7IERldGVybWluYWNhb0p1ZGljaWFsIH0gZnJvbSAnLi4vLi4vLi4vZW50aXRpZXMvZGV0ZXJtaW5hY2FvLWp1ZGljaWFsLmVudGl0eSc7XG5cbi8qKlxuICogQ29udHJvbGxlciBkZSBEZXRlcm1pbmHDp8OjbyBKdWRpY2lhbFxuICpcbiAqIFJlc3BvbnPDoXZlbCBwb3IgZXhwb3Igb3MgZW5kcG9pbnRzIGRlIGdlcmVuY2lhbWVudG8gZGUgZGV0ZXJtaW5hw6fDtWVzIGp1ZGljaWFpc1xuICogcmVsYWNpb25hZGFzIMOgcyBzb2xpY2l0YcOnw7VlcyBkZSBiZW5lZsOtY2lvLlxuICovXG5AQ29udHJvbGxlcignc29saWNpdGFjYW8vZGV0ZXJtaW5hY2FvLWp1ZGljaWFsJylcbkBVc2VHdWFyZHMoSnd0QXV0aEd1YXJkLCBQZXJtaXNzaW9uR3VhcmQpXG5AQXBpQmVhcmVyQXV0aCgpXG5leHBvcnQgY2xhc3MgRGV0ZXJtaW5hY2FvSnVkaWNpYWxDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBkZXRlcm1pbmFjYW9TZXJ2aWNlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbEFkYXB0ZXJTZXJ2aWNlLFxuICApIHt9XG5cbiAgLyoqXG4gICAqIENyaWEgdW1hIG5vdmEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWxcbiAgICogQHBhcmFtIGNyZWF0ZURldGVybWluYWNhb0R0byBEYWRvcyBkYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbFxuICAgKiBAcGFyYW0gcmVxIFJlcXVpc2nDp8Ojb1xuICAgKiBAcmV0dXJucyBEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBjcmlhZGFcbiAgICovXG4gIEBQb3N0KClcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdzb2xpY2l0YWNhby5jcmlhci1kZXRlcm1pbmFjYW8tanVkaWNpYWwnLFxuICB9KVxuICBAQXBpT3BlcmF0aW9uKHsgc3VtbWFyeTogJ0NyaWEgdW1hIG5vdmEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDEsXG4gICAgZGVzY3JpcHRpb246ICdEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBjcmlhZGEgY29tIHN1Y2Vzc28nLFxuICAgIHR5cGU6IERldGVybWluYWNhb0p1ZGljaWFsLFxuICB9KVxuICBhc3luYyBjcmVhdGUoXG4gICAgQEJvZHkoKSBjcmVhdGVEZXRlcm1pbmFjYW9EdG86IFNvbGljaXRhY2FvQ3JlYXRlRGV0ZXJtaW5hY2FvSnVkaWNpYWxEdG8sXG4gICAgQFJlcSgpIHJlcTogYW55LFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgY29uc3QgdXN1YXJpb0lkID0gcmVxLnVzZXIuaWQ7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvU2VydmljZS5jcmVhdGUoY3JlYXRlRGV0ZXJtaW5hY2FvRHRvLCB1c3VhcmlvSWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1c2NhIHRvZGFzIGFzIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMgZGUgdW1hIHNvbGljaXRhw6fDo29cbiAgICogQHBhcmFtIHNvbGljaXRhY2FvSWQgSUQgZGEgc29saWNpdGHDp8Ojb1xuICAgKiBAcmV0dXJucyBMaXN0YSBkZSBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzXG4gICAqL1xuICBAR2V0KCdzb2xpY2l0YWNhby86c29saWNpdGFjYW9JZCcpXG4gIEBSZXF1aXJlc1Blcm1pc3Npb24oe1xuICAgIHBlcm1pc3Npb25OYW1lOiAnc29saWNpdGFjYW8ubGlzdGFyLWRldGVybWluYWNhby1qdWRpY2lhbCcsXG4gIH0pXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdCdXNjYSB0b2RhcyBhcyBkZXRlcm1pbmHDp8O1ZXMganVkaWNpYWlzIGRlIHVtYSBzb2xpY2l0YcOnw6NvJyxcbiAgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0xpc3RhIGRlIGRldGVybWluYcOnw7VlcyBqdWRpY2lhaXMnLFxuICAgIHR5cGU6IFtEZXRlcm1pbmFjYW9KdWRpY2lhbF0sXG4gIH0pXG4gIGFzeW5jIGZpbmRCeVNvbGljaXRhY2FvSWQoXG4gICAgQFBhcmFtKCdzb2xpY2l0YWNhb0lkJykgc29saWNpdGFjYW9JZDogc3RyaW5nLFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsW10+IHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9TZXJ2aWNlLmZpbmRCeVNvbGljaXRhY2FvSWQoc29saWNpdGFjYW9JZCk7XG4gIH1cblxuICAvKipcbiAgICogQnVzY2EgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsIHBlbG8gSURcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqL1xuICBAR2V0KCc6aWQnKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHtcbiAgICBwZXJtaXNzaW9uTmFtZTogJ3NvbGljaXRhY2FvLnZpc3VhbGl6YXItZGV0ZXJtaW5hY2FvLWp1ZGljaWFsJyxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdCdXNjYSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgcGVsbyBJRCcgfSlcbiAgQEFwaVJlc3BvbnNlKHtcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBkZXNjcmlwdGlvbjogJ0RldGVybWluYcOnw6NvIGp1ZGljaWFsIGVuY29udHJhZGEnLFxuICAgIHR5cGU6IERldGVybWluYWNhb0p1ZGljaWFsLFxuICB9KVxuICBhc3luYyBmaW5kQnlJZChAUGFyYW0oJ2lkJykgaWQ6IHN0cmluZyk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWw+IHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9TZXJ2aWNlLmZpbmRCeUlkKGlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBdHVhbGl6YSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWxcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSB1cGRhdGVEZXRlcm1pbmFjYW9EdG8gRGFkb3MgcGFyYSBhdHVhbGl6YcOnw6NvXG4gICAqIEByZXR1cm5zIERldGVybWluYcOnw6NvIGp1ZGljaWFsIGF0dWFsaXphZGFcbiAgICovXG4gIEBQYXRjaCgnOmlkJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdzb2xpY2l0YWNhby5hdHVhbGl6YXItZGV0ZXJtaW5hY2FvLWp1ZGljaWFsJyxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdBdHVhbGl6YSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWwnIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvJyxcbiAgICB0eXBlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbCxcbiAgfSlcbiAgYXN5bmMgdXBkYXRlKFxuICAgIEBQYXJhbSgnaWQnKSBpZDogc3RyaW5nLFxuICAgIEBCb2R5KCkgdXBkYXRlRGV0ZXJtaW5hY2FvRHRvOiBTb2xpY2l0YWNhb1VwZGF0ZURldGVybWluYWNhb0p1ZGljaWFsRHRvLFxuICApOiBQcm9taXNlPERldGVybWluYWNhb0p1ZGljaWFsPiB7XG4gICAgcmV0dXJuIHRoaXMuZGV0ZXJtaW5hY2FvU2VydmljZS51cGRhdGUoaWQsIHVwZGF0ZURldGVybWluYWNhb0R0byk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0cmEgbyBjdW1wcmltZW50byBkZSB1bWEgZGV0ZXJtaW5hw6fDo28ganVkaWNpYWxcbiAgICogQHBhcmFtIGlkIElEIGRhIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBib2R5IE9ic2VydmHDp8O1ZXMgc29icmUgbyBjdW1wcmltZW50b1xuICAgKiBAcmV0dXJucyBEZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCBhdHVhbGl6YWRhXG4gICAqL1xuICBAUGF0Y2goJzppZC9jdW1wcmlyJylcbiAgQFJlcXVpcmVzUGVybWlzc2lvbih7XG4gICAgcGVybWlzc2lvbk5hbWU6ICdzb2xpY2l0YWNhby5jdW1wcmlyLWRldGVybWluYWNhby1qdWRpY2lhbCcsXG4gIH0pXG4gIEBBcGlPcGVyYXRpb24oe1xuICAgIHN1bW1hcnk6ICdSZWdpc3RyYSBvIGN1bXByaW1lbnRvIGRlIHVtYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbCcsXG4gIH0pXG4gIEBBcGlSZXNwb25zZSh7XG4gICAgc3RhdHVzOiAyMDAsXG4gICAgZGVzY3JpcHRpb246ICdDdW1wcmltZW50byByZWdpc3RyYWRvIGNvbSBzdWNlc3NvJyxcbiAgICB0eXBlOiBEZXRlcm1pbmFjYW9KdWRpY2lhbCxcbiAgfSlcbiAgYXN5bmMgcmVnaXN0cmFyQ3VtcHJpbWVudG8oXG4gICAgQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcsXG4gICAgQEJvZHkoKSBib2R5OiB7IG9ic2VydmFjb2VzPzogc3RyaW5nIH0sXG4gICk6IFByb21pc2U8RGV0ZXJtaW5hY2FvSnVkaWNpYWw+IHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9TZXJ2aWNlLnJlZ2lzdHJhckN1bXByaW1lbnRvKGlkLCBib2R5Lm9ic2VydmFjb2VzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsXG4gICAqIEBwYXJhbSBpZCBJRCBkYSBkZXRlcm1pbmHDp8OjbyBqdWRpY2lhbFxuICAgKiBAcmV0dXJucyBWb2lkXG4gICAqL1xuICBARGVsZXRlKCc6aWQnKVxuICBASHR0cENvZGUoSHR0cFN0YXR1cy5OT19DT05URU5UKVxuICBAUmVxdWlyZXNQZXJtaXNzaW9uKHtcbiAgICBwZXJtaXNzaW9uTmFtZTogJ3NvbGljaXRhY2FvLnJlbW92ZXItZGV0ZXJtaW5hY2FvLWp1ZGljaWFsJyxcbiAgfSlcbiAgQEFwaU9wZXJhdGlvbih7IHN1bW1hcnk6ICdSZW1vdmUgdW1hIGRldGVybWluYcOnw6NvIGp1ZGljaWFsJyB9KVxuICBAQXBpUmVzcG9uc2Uoe1xuICAgIHN0YXR1czogMjA0LFxuICAgIGRlc2NyaXB0aW9uOiAnRGV0ZXJtaW5hw6fDo28ganVkaWNpYWwgcmVtb3ZpZGEgY29tIHN1Y2Vzc28nLFxuICB9KVxuICBhc3luYyByZW1vdmUoQFBhcmFtKCdpZCcpIGlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZXRlcm1pbmFjYW9TZXJ2aWNlLnJlbW92ZShpZCk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==