905b81cbb3943db77d59881688f6416a
"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var _a, _b, _c, _d, _e;
Object.defineProperty(exports, "__esModule", { value: true });
exports.DadosNatalidade = void 0;
const typeorm_1 = require("typeorm");
const class_validator_1 = require("class-validator");
const solicitacao_entity_1 = require("./solicitacao.entity");
/**
 * Entidade para armazenar dados específicos do cidadão para Auxílio Natalidade
 *
 * Armazena informações específicas necessárias para a solicitação do benefício
 * de Auxílio Natalidade, como dados da gestação, pré-natal, etc.
 */
let DadosNatalidade = class DadosNatalidade {
    id;
    solicitacao_id;
    solicitacao;
    realiza_pre_natal;
    atendida_psf_ubs;
    gravidez_risco;
    data_provavel_parto;
    gemeos_trigemeos;
    ja_tem_filhos;
    quantidade_filhos;
    telefone_cadastrado_cpf;
    chave_pix;
    created_at;
    updated_at;
    removed_at;
    // Getters
    get createdAt() {
        return this.created_at;
    }
    get updatedAt() {
        return this.updated_at;
    }
    get removedAt() {
        return this.removed_at;
    }
    // Métodos Utilitários
    /**
     * Verifica se todos os critérios para pecúnia estão preenchidos
     */
    temCriteriosPecunia() {
        return !!(this.telefone_cadastrado_cpf && this.chave_pix);
    }
    /**
     * Verifica se é uma gravidez múltipla
     */
    isGravidezMultipla() {
        return this.gemeos_trigemeos;
    }
    /**
     * Verifica se é primípara (primeiro filho)
     */
    isPrimipara() {
        return !this.ja_tem_filhos || this.quantidade_filhos === 0;
    }
    /**
     * Calcula se está no prazo para solicitação baseado na data provável do parto
     */
    estaNoPrazoSolicitacao(prazoMaximoDias) {
        if (!this.data_provavel_parto)
            return false;
        const hoje = new Date();
        const dataLimite = new Date(this.data_provavel_parto);
        dataLimite.setDate(dataLimite.getDate() + prazoMaximoDias);
        return hoje <= dataLimite;
    }
    /**
     * Valida se os dados estão completos para submissão
     */
    validarDadosCompletos() {
        const erros = [];
        if (this.ja_tem_filhos && (this.quantidade_filhos === null || this.quantidade_filhos === undefined)) {
            erros.push('Quantidade de filhos é obrigatória quando já tem filhos');
        }
        if (this.realiza_pre_natal && !this.atendida_psf_ubs) {
            erros.push('Quando realiza pré-natal, deve informar se é atendida pelo PSF/UBS');
        }
        return {
            valido: erros.length === 0,
            erros
        };
    }
};
exports.DadosNatalidade = DadosNatalidade;
__decorate([
    (0, typeorm_1.PrimaryGeneratedColumn)('uuid'),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "id", void 0);
__decorate([
    (0, typeorm_1.Column)(),
    (0, class_validator_1.IsNotEmpty)({ message: 'ID da solicitação é obrigatório' }),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "solicitacao_id", void 0);
__decorate([
    (0, typeorm_1.ManyToOne)(() => solicitacao_entity_1.Solicitacao, { onDelete: 'CASCADE' }),
    (0, typeorm_1.JoinColumn)({ name: 'solicitacao_id' }),
    __metadata("design:type", typeof (_a = typeof solicitacao_entity_1.Solicitacao !== "undefined" && solicitacao_entity_1.Solicitacao) === "function" ? _a : Object)
], DadosNatalidade.prototype, "solicitacao", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Realiza pré-natal deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "realiza_pre_natal", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Atendida pelo PSF/UBS deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "atendida_psf_ubs", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Gravidez de risco deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "gravidez_risco", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'date', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsDateString)({}, { message: 'Data provável do parto deve ser uma data válida' }),
    __metadata("design:type", typeof (_b = typeof Date !== "undefined" && Date) === "function" ? _b : Object)
], DadosNatalidade.prototype, "data_provavel_parto", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Gêmeos/Trigêmeos deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "gemeos_trigemeos", void 0);
__decorate([
    (0, typeorm_1.Column)({ default: false }),
    (0, class_validator_1.IsBoolean)({ message: 'Já tem filhos deve ser um booleano' }),
    __metadata("design:type", Boolean)
], DadosNatalidade.prototype, "ja_tem_filhos", void 0);
__decorate([
    (0, typeorm_1.Column)({ type: 'integer', nullable: true }),
    (0, class_validator_1.IsOptional)(),
    (0, class_validator_1.IsNumber)({}, { message: 'Quantidade de filhos deve ser um número' }),
    (0, class_validator_1.Min)(0, { message: 'Quantidade de filhos não pode ser negativa' }),
    __metadata("design:type", Number)
], DadosNatalidade.prototype, "quantidade_filhos", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "telefone_cadastrado_cpf", void 0);
__decorate([
    (0, typeorm_1.Column)({ nullable: true }),
    (0, class_validator_1.IsOptional)(),
    __metadata("design:type", String)
], DadosNatalidade.prototype, "chave_pix", void 0);
__decorate([
    (0, typeorm_1.CreateDateColumn)(),
    __metadata("design:type", typeof (_c = typeof Date !== "undefined" && Date) === "function" ? _c : Object)
], DadosNatalidade.prototype, "created_at", void 0);
__decorate([
    (0, typeorm_1.UpdateDateColumn)(),
    __metadata("design:type", typeof (_d = typeof Date !== "undefined" && Date) === "function" ? _d : Object)
], DadosNatalidade.prototype, "updated_at", void 0);
__decorate([
    (0, typeorm_1.DeleteDateColumn)(),
    __metadata("design:type", typeof (_e = typeof Date !== "undefined" && Date) === "function" ? _e : Object)
], DadosNatalidade.prototype, "removed_at", void 0);
exports.DadosNatalidade = DadosNatalidade = __decorate([
    (0, typeorm_1.Entity)('dados_natalidade'),
    (0, typeorm_1.Index)(['solicitacao_id'], { unique: true })
], DadosNatalidade);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXGVudGl0aWVzXFxkYWRvcy1uYXRhbGlkYWRlLmVudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEscUNBVWlCO0FBQ2pCLHFEQU95QjtBQUN6Qiw2REFBbUQ7QUFFbkQ7Ozs7O0dBS0c7QUFHSSxJQUFNLGVBQWUsR0FBckIsTUFBTSxlQUFlO0lBRTFCLEVBQUUsQ0FBUztJQUlYLGNBQWMsQ0FBUztJQUl2QixXQUFXLENBQWM7SUFJekIsaUJBQWlCLENBQVU7SUFJM0IsZ0JBQWdCLENBQVU7SUFJMUIsY0FBYyxDQUFVO0lBS3hCLG1CQUFtQixDQUFRO0lBSTNCLGdCQUFnQixDQUFVO0lBSTFCLGFBQWEsQ0FBVTtJQU12QixpQkFBaUIsQ0FBVTtJQUkzQix1QkFBdUIsQ0FBVTtJQUlqQyxTQUFTLENBQVU7SUFHbkIsVUFBVSxDQUFPO0lBR2pCLFVBQVUsQ0FBTztJQUdqQixVQUFVLENBQU87SUFFakIsVUFBVTtJQUNWLElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELHNCQUFzQjtJQUV0Qjs7T0FFRztJQUNILG1CQUFtQjtRQUNqQixPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsa0JBQWtCO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQy9CLENBQUM7SUFFRDs7T0FFRztJQUNILFdBQVc7UUFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFB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QUUsQ0FBQztJQUMxQixJQUFBLDJCQUFTLEVBQUMsRUFBRSxPQUFPLEVBQUUsb0NBQW9DLEVBQUUsQ0FBQzs7c0RBQ3RDO0FBTXZCO0lBSkMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDM0MsSUFBQSw0QkFBVSxHQUFFO0lBQ1osSUFBQSwwQkFBUSxFQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSx5Q0FBeUMsRUFBRSxDQUFDO0lBQ3BFLElBQUEscUJBQUcsRUFBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsNENBQTRDLEVBQUUsQ0FBQzs7MERBQ3ZDO0FBSTNCO0lBRkMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQzFCLElBQUEsNEJBQVUsR0FBRTs7Z0VBQ29CO0FBSWpDO0lBRkMsSUFBQSxnQkFBTSxFQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQzFCLElBQUEsNEJBQVUsR0FBRTs7a0RBQ007QUFHbkI7SUFEQyxJQUFBLDBCQUFnQixHQUFFO2tEQUNQLElBQUksb0JBQUosSUFBSTttREFBQztBQUdqQjtJQURDLElBQUEsMEJBQWdCLEdBQUU7a0RBQ1AsSUFBSSxvQkFBSixJQUFJO21EQUFDO0FBR2pCO0lBREMsSUFBQSwwQkFBZ0IsR0FBRTtrREFDUCxJQUFJLG9CQUFKLElBQUk7bURBQUM7MEJBMUROLGVBQWU7SUFGM0IsSUFBQSxnQkFBTSxFQUFDLGtCQUFrQixDQUFDO0lBQzFCLElBQUEsZUFBSyxFQUFDLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQztHQUMvQixlQUFlLENBZ0kzQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXGV1ZHJlXFxPbmVEcml2ZVxcRGVza3RvcFxcUHJvamV0b3NcXHBnYmVuXFxwZ2Jlbi1zZXJ2ZXJcXHNyY1xcZW50aXRpZXNcXGRhZG9zLW5hdGFsaWRhZGUuZW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEVudGl0eSxcbiAgUHJpbWFyeUdlbmVyYXRlZENvbHVtbixcbiAgQ29sdW1uLFxuICBDcmVhdGVEYXRlQ29sdW1uLFxuICBVcGRhdGVEYXRlQ29sdW1uLFxuICBEZWxldGVEYXRlQ29sdW1uLFxuICBNYW55VG9PbmUsXG4gIEpvaW5Db2x1bW4sXG4gIEluZGV4LFxufSBmcm9tICd0eXBlb3JtJztcbmltcG9ydCB7XG4gIElzTm90RW1wdHksXG4gIElzQm9vbGVhbixcbiAgSXNEYXRlU3RyaW5nLFxuICBJc09wdGlvbmFsLFxuICBJc051bWJlcixcbiAgTWluLFxufSBmcm9tICdjbGFzcy12YWxpZGF0b3InO1xuaW1wb3J0IHsgU29saWNpdGFjYW8gfSBmcm9tICcuL3NvbGljaXRhY2FvLmVudGl0eSc7XG5cbi8qKlxuICogRW50aWRhZGUgcGFyYSBhcm1hemVuYXIgZGFkb3MgZXNwZWPDrWZpY29zIGRvIGNpZGFkw6NvIHBhcmEgQXV4w61saW8gTmF0YWxpZGFkZVxuICpcbiAqIEFybWF6ZW5hIGluZm9ybWHDp8O1ZXMgZXNwZWPDrWZpY2FzIG5lY2Vzc8OhcmlhcyBwYXJhIGEgc29saWNpdGHDp8OjbyBkbyBiZW5lZsOtY2lvXG4gKiBkZSBBdXjDrWxpbyBOYXRhbGlkYWRlLCBjb21vIGRhZG9zIGRhIGdlc3Rhw6fDo28sIHByw6ktbmF0YWwsIGV0Yy5cbiAqL1xuQEVudGl0eSgnZGFkb3NfbmF0YWxpZGFkZScpXG5ASW5kZXgoWydzb2xpY2l0YWNhb19pZCddLCB7IHVuaXF1ZTogdHJ1ZSB9KVxuZXhwb3J0IGNsYXNzIERhZG9zTmF0YWxpZGFkZSB7XG4gIEBQcmltYXJ5R2VuZXJhdGVkQ29sdW1uKCd1dWlkJylcbiAgaWQ6IHN0cmluZztcblxuICBAQ29sdW1uKClcbiAgQElzTm90RW1wdHkoeyBtZXNzYWdlOiAnSUQgZGEgc29saWNpdGHDp8OjbyDDqSBvYnJpZ2F0w7NyaW8nIH0pXG4gIHNvbGljaXRhY2FvX2lkOiBzdHJpbmc7XG5cbiAgQE1hbnlUb09uZSgoKSA9PiBTb2xpY2l0YWNhbywgeyBvbkRlbGV0ZTogJ0NBU0NBREUnIH0pXG4gIEBKb2luQ29sdW1uKHsgbmFtZTogJ3NvbGljaXRhY2FvX2lkJyB9KVxuICBzb2xpY2l0YWNhbzogU29saWNpdGFjYW87XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXG4gIEBJc0Jvb2xlYW4oeyBtZXNzYWdlOiAnUmVhbGl6YSBwcsOpLW5hdGFsIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICByZWFsaXphX3ByZV9uYXRhbDogYm9vbGVhbjtcblxuICBAQ29sdW1uKHsgZGVmYXVsdDogZmFsc2UgfSlcbiAgQElzQm9vbGVhbih7IG1lc3NhZ2U6ICdBdGVuZGlkYSBwZWxvIFBTRi9VQlMgZGV2ZSBzZXIgdW0gYm9vbGVhbm8nIH0pXG4gIGF0ZW5kaWRhX3BzZl91YnM6IGJvb2xlYW47XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXG4gIEBJc0Jvb2xlYW4oeyBtZXNzYWdlOiAnR3JhdmlkZXogZGUgcmlzY28gZGV2ZSBzZXIgdW0gYm9vbGVhbm8nIH0pXG4gIGdyYXZpZGV6X3Jpc2NvOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAnZGF0ZScsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzRGF0ZVN0cmluZyh7fSwgeyBtZXNzYWdlOiAnRGF0YSBwcm92w6F2ZWwgZG8gcGFydG8gZGV2ZSBzZXIgdW1hIGRhdGEgdsOhbGlkYScgfSlcbiAgZGF0YV9wcm92YXZlbF9wYXJ0bz86IERhdGU7XG5cbiAgQENvbHVtbih7IGRlZmF1bHQ6IGZhbHNlIH0pXG4gIEBJc0Jvb2xlYW4oeyBtZXNzYWdlOiAnR8OqbWVvcy9Ucmlnw6ptZW9zIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICBnZW1lb3NfdHJpZ2VtZW9zOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyBkZWZhdWx0OiBmYWxzZSB9KVxuICBASXNCb29sZWFuKHsgbWVzc2FnZTogJ0rDoSB0ZW0gZmlsaG9zIGRldmUgc2VyIHVtIGJvb2xlYW5vJyB9KVxuICBqYV90ZW1fZmlsaG9zOiBib29sZWFuO1xuXG4gIEBDb2x1bW4oeyB0eXBlOiAnaW50ZWdlcicsIG51bGxhYmxlOiB0cnVlIH0pXG4gIEBJc09wdGlvbmFsKClcbiAgQElzTnVtYmVyKHt9LCB7IG1lc3NhZ2U6ICdRdWFudGlkYWRlIGRlIGZpbGhvcyBkZXZlIHNlciB1bSBuw7ptZXJvJyB9KVxuICBATWluKDAsIHsgbWVzc2FnZTogJ1F1YW50aWRhZGUgZGUgZmlsaG9zIG7Do28gcG9kZSBzZXIgbmVnYXRpdmEnIH0pXG4gIHF1YW50aWRhZGVfZmlsaG9zPzogbnVtYmVyO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIHRlbGVmb25lX2NhZGFzdHJhZG9fY3BmPzogc3RyaW5nO1xuXG4gIEBDb2x1bW4oeyBudWxsYWJsZTogdHJ1ZSB9KVxuICBASXNPcHRpb25hbCgpXG4gIGNoYXZlX3BpeD86IHN0cmluZztcblxuICBAQ3JlYXRlRGF0ZUNvbHVtbigpXG4gIGNyZWF0ZWRfYXQ6IERhdGU7XG5cbiAgQFVwZGF0ZURhdGVDb2x1bW4oKVxuICB1cGRhdGVkX2F0OiBEYXRlO1xuXG4gIEBEZWxldGVEYXRlQ29sdW1uKClcbiAgcmVtb3ZlZF9hdDogRGF0ZTtcblxuICAvLyBHZXR0ZXJzXG4gIGdldCBjcmVhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlZF9hdDtcbiAgfVxuXG4gIGdldCB1cGRhdGVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlZF9hdDtcbiAgfVxuXG4gIGdldCByZW1vdmVkQXQoKTogRGF0ZSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3ZlZF9hdDtcbiAgfVxuXG4gIC8vIE3DqXRvZG9zIFV0aWxpdMOhcmlvc1xuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSB0b2RvcyBvcyBjcml0w6lyaW9zIHBhcmEgcGVjw7puaWEgZXN0w6NvIHByZWVuY2hpZG9zXG4gICAqL1xuICB0ZW1Dcml0ZXJpb3NQZWN1bmlhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhISh0aGlzLnRlbGVmb25lX2NhZGFzdHJhZG9fY3BmICYmIHRoaXMuY2hhdmVfcGl4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSB1bWEgZ3JhdmlkZXogbcO6bHRpcGxhXG4gICAqL1xuICBpc0dyYXZpZGV6TXVsdGlwbGEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZ2VtZW9zX3RyaWdlbWVvcztcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmljYSBzZSDDqSBwcmltw61wYXJhIChwcmltZWlybyBmaWxobylcbiAgICovXG4gIGlzUHJpbWlwYXJhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5qYV90ZW1fZmlsaG9zIHx8IHRoaXMucXVhbnRpZGFkZV9maWxob3MgPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYSBzZSBlc3TDoSBubyBwcmF6byBwYXJhIHNvbGljaXRhw6fDo28gYmFzZWFkbyBuYSBkYXRhIHByb3bDoXZlbCBkbyBwYXJ0b1xuICAgKi9cbiAgZXN0YU5vUHJhem9Tb2xpY2l0YWNhbyhwcmF6b01heGltb0RpYXM6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5kYXRhX3Byb3ZhdmVsX3BhcnRvKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgY29uc3QgaG9qZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGF0YUxpbWl0ZSA9IG5ldyBEYXRlKHRoaXMuZGF0YV9wcm92YXZlbF9wYXJ0byk7XG4gICAgZGF0YUxpbWl0ZS5zZXREYXRlKGRhdGFMaW1pdGUuZ2V0RGF0ZSgpICsgcHJhem9NYXhpbW9EaWFzKTtcbiAgICBcbiAgICByZXR1cm4gaG9qZSA8PSBkYXRhTGltaXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYSBzZSBvcyBkYWRvcyBlc3TDo28gY29tcGxldG9zIHBhcmEgc3VibWlzc8Ojb1xuICAgKi9cbiAgdmFsaWRhckRhZG9zQ29tcGxldG9zKCk6IHsgdmFsaWRvOiBib29sZWFuOyBlcnJvczogc3RyaW5nW10gfSB7XG4gICAgY29uc3QgZXJyb3M6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAodGhpcy5qYV90ZW1fZmlsaG9zICYmICh0aGlzLnF1YW50aWRhZGVfZmlsaG9zID09PSBudWxsIHx8IHRoaXMucXVhbnRpZGFkZV9maWxob3MgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgIGVycm9zLnB1c2goJ1F1YW50aWRhZGUgZGUgZmlsaG9zIMOpIG9icmlnYXTDs3JpYSBxdWFuZG8gasOhIHRlbSBmaWxob3MnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZWFsaXphX3ByZV9uYXRhbCAmJiAhdGhpcy5hdGVuZGlkYV9wc2ZfdWJzKSB7XG4gICAgICBlcnJvcy5wdXNoKCdRdWFuZG8gcmVhbGl6YSBwcsOpLW5hdGFsLCBkZXZlIGluZm9ybWFyIHNlIMOpIGF0ZW5kaWRhIHBlbG8gUFNGL1VCUycpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB2YWxpZG86IGVycm9zLmxlbmd0aCA9PT0gMCxcbiAgICAgIGVycm9zXG4gICAgfTtcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==