7e33fd7afbee256a18c02b92ac6cdbda
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const typeorm_1 = require("@nestjs/typeorm");
const relatorio_pagamento_service_1 = require("../../../services/relatorio-pagamento.service");
const pagamento_entity_1 = require("../../../entities/pagamento.entity");
const status_pagamento_enum_1 = require("../../../enums/status-pagamento.enum");
const metodo_pagamento_enum_1 = require("../../../enums/metodo-pagamento.enum");
/**
 * Testes unitários para RelatorioPagamentoService
 *
 * Garante que os métodos de geração de relatórios e estatísticas
 * sobre pagamentos funcionem corretamente.
 *
 * @author Equipe PGBen
 */
describe('RelatorioPagamentoService', () => {
    let service;
    let pagamentoRepository;
    // Dados de exemplo para testes
    const pagamentosMock = [
        {
            id: 'pagamento-id-1',
            solicitacaoId: 'solicitacao-id-1',
            valor: 500,
            status: status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PIX,
            infoBancariaId: 'info-bancaria-id-1',
            dataLiberacao: new Date('2025-01-15'),
            dataCriacao: new Date('2025-01-10'),
            dataAtualizacao: new Date('2025-01-20'),
            liberadoPor: 'usuario-id-1',
            unidadeId: 'unidade-id-1',
            observacoes: 'Pagamento de benefício eventual',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Moradia',
                valorAprovado: 500
            }
        },
        {
            id: 'pagamento-id-2',
            solicitacaoId: 'solicitacao-id-2',
            valor: 300,
            status: status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PRESENCIAL,
            dataLiberacao: new Date('2025-02-10'),
            dataCriacao: new Date('2025-02-05'),
            dataAtualizacao: new Date('2025-02-15'),
            liberadoPor: 'usuario-id-2',
            unidadeId: 'unidade-id-1',
            observacoes: 'Pagamento de benefício alimentação',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Alimentação',
                valorAprovado: 300
            }
        },
        {
            id: 'pagamento-id-3',
            solicitacaoId: 'solicitacao-id-3',
            valor: 1000,
            status: status_pagamento_enum_1.StatusPagamentoEnum.PAGO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.TRANSFERENCIA,
            infoBancariaId: 'info-bancaria-id-3',
            dataLiberacao: new Date('2025-03-05'),
            dataCriacao: new Date('2025-03-01'),
            dataAtualizacao: new Date('2025-03-05'),
            liberadoPor: 'usuario-id-1',
            unidadeId: 'unidade-id-2',
            observacoes: 'Pagamento de benefício funeral',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Funeral',
                valorAprovado: 1000
            }
        },
        {
            id: 'pagamento-id-4',
            solicitacaoId: 'solicitacao-id-4',
            valor: 500,
            status: status_pagamento_enum_1.StatusPagamentoEnum.CANCELADO,
            metodoPagamento: metodo_pagamento_enum_1.MetodoPagamentoEnum.PIX,
            infoBancariaId: 'info-bancaria-id-4',
            dataLiberacao: new Date('2025-01-20'),
            dataCriacao: new Date('2025-01-15'),
            dataAtualizacao: new Date('2025-01-22'),
            liberadoPor: 'usuario-id-2',
            unidadeId: 'unidade-id-1',
            observacoes: 'CANCELADO: Dados bancários incorretos',
            dadosAdicionais: {
                tipoBeneficio: 'Auxílio Moradia',
                valorAprovado: 500
            }
        }
    ];
    const mockQueryBuilder = {
        select: jest.fn().mockReturnThis(),
        addSelect: jest.fn().mockReturnThis(),
        from: jest.fn().mockReturnThis(),
        where: jest.fn().mockReturnThis(),
        andWhere: jest.fn().mockReturnThis(),
        groupBy: jest.fn().mockReturnThis(),
        orderBy: jest.fn().mockReturnThis(),
        getRawMany: jest.fn().mockResolvedValue([]),
        getRawOne: jest.fn().mockResolvedValue({}),
        execute: jest.fn().mockResolvedValue([])
    };
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                relatorio_pagamento_service_1.RelatorioPagamentoService,
                {
                    provide: (0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento),
                    useValue: {
                        createQueryBuilder: jest.fn().mockReturnValue(mockQueryBuilder),
                        find: jest.fn().mockResolvedValue(pagamentosMock),
                        findAndCount: jest.fn().mockResolvedValue([pagamentosMock, pagamentosMock.length]),
                        manager: {
                            query: jest.fn().mockResolvedValue([])
                        }
                    },
                },
            ],
        }).compile();
        service = module.get(relatorio_pagamento_service_1.RelatorioPagamentoService);
        pagamentoRepository = module.get((0, typeorm_1.getRepositoryToken)(pagamento_entity_1.Pagamento));
    });
    it('deve estar definido', () => {
        expect(service).toBeDefined();
    });
    describe('gerarRelatorioMensal', () => {
        it('deve gerar relatório mensal por período', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { mes: '2025-01', total: 1000, quantidade: 2 },
                { mes: '2025-02', total: 300, quantidade: 1 },
                { mes: '2025-03', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const unidadeId = 'unidade-id-1';
            const mockResultado = [
                { mes: '2025-01', total: 500, quantidade: 1 },
                { mes: '2025-02', total: 300, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim, unidadeId);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.unidadeId = :unidadeId', { unidadeId });
        });
        it('deve filtrar apenas pagamentos finalizados/pagos quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const unidadeId = null;
            const apenasFinalizados = true;
            const mockResultado = [
                { mes: '2025-01', total: 500, quantidade: 1 },
                { mes: '2025-02', total: 300, quantidade: 1 },
                { mes: '2025-03', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioMensal(dataInicio, dataFim, unidadeId, apenasFinalizados);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.status IN (:...statusFinalizado)', { statusFinalizado: [status_pagamento_enum_1.StatusPagamentoEnum.FINALIZADO, status_pagamento_enum_1.StatusPagamentoEnum.PAGO] });
        });
    });
    describe('gerarRelatorioPorMetodo', () => {
        it('deve gerar relatório por método de pagamento', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { metodoPagamento: 'pix', total: 1000, quantidade: 2 },
                { metodoPagamento: 'presencial', total: 300, quantidade: 1 },
                { metodoPagamento: 'transferencia', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorMetodo(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar apenas pagamentos não cancelados', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { metodoPagamento: 'pix', total: 500, quantidade: 1 },
                { metodoPagamento: 'presencial', total: 300, quantidade: 1 },
                { metodoPagamento: 'transferencia', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorMetodo(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.status != :statusCancelado', { statusCancelado: status_pagamento_enum_1.StatusPagamentoEnum.CANCELADO });
        });
    });
    describe('gerarRelatorioPorStatus', () => {
        it('deve gerar relatório por status de pagamento', async () => {
            // Arrange
            const mockResultado = [
                { status: 'finalizado', total: 800, quantidade: 2 },
                { status: 'pago', total: 1000, quantidade: 1 },
                { status: 'cancelado', total: 500, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorStatus();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.select).toHaveBeenCalled();
            expect(mockQueryBuilder.groupBy).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { status: 'finalizado', total: 800, quantidade: 2 },
                { status: 'pago', total: 1000, quantidade: 1 },
                { status: 'cancelado', total: 500, quantidade: 1 }
            ];
            jest.spyOn(mockQueryBuilder, 'getRawMany').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorStatus(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
        });
    });
    describe('gerarRelatorioPorUnidade', () => {
        it('deve gerar relatório por unidade', async () => {
            // Arrange
            const mockResultado = [
                { unidadeId: 'unidade-id-1', nomeUnidade: 'CRAS Centro', total: 1300, quantidade: 3 },
                { unidadeId: 'unidade-id-2', nomeUnidade: 'CRAS Norte', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(pagamentoRepository.manager, 'query').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorUnidade();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            const mockResultado = [
                { unidadeId: 'unidade-id-1', nomeUnidade: 'CRAS Centro', total: 1300, quantidade: 3 },
                { unidadeId: 'unidade-id-2', nomeUnidade: 'CRAS Norte', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(pagamentoRepository.manager, 'query').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorUnidade(dataInicio, dataFim);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalledWith(expect.stringContaining('WHERE p.data_liberacao >= $1 AND p.data_liberacao <= $2'), [dataInicio, dataFim]);
        });
    });
    describe('gerarRelatorioPorTipoBeneficio', () => {
        it('deve gerar relatório por tipo de benefício', async () => {
            // Arrange
            const mockResultado = [
                { tipoBeneficio: 'Auxílio Moradia', total: 1000, quantidade: 2 },
                { tipoBeneficio: 'Auxílio Alimentação', total: 300, quantidade: 1 },
                { tipoBeneficio: 'Auxílio Funeral', total: 1000, quantidade: 1 }
            ];
            jest.spyOn(pagamentoRepository.manager, 'query').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorTipoBeneficio();
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalled();
        });
        it('deve filtrar por unidade quando especificado', async () => {
            // Arrange
            const unidadeId = 'unidade-id-1';
            const mockResultado = [
                { tipoBeneficio: 'Auxílio Moradia', total: 500, quantidade: 1 },
                { tipoBeneficio: 'Auxílio Alimentação', total: 300, quantidade: 1 }
            ];
            jest.spyOn(pagamentoRepository.manager, 'query').mockResolvedValueOnce(mockResultado);
            // Act
            const resultado = await service.gerarRelatorioPorTipoBeneficio(null, null, unidadeId);
            // Assert
            expect(resultado).toEqual(mockResultado);
            expect(pagamentoRepository.manager.query).toHaveBeenCalledWith(expect.stringContaining('WHERE p.unidade_id = $1'), [unidadeId]);
        });
    });
    describe('obterEstatisticasGerais', () => {
        it('deve obter estatísticas gerais de pagamentos', async () => {
            // Arrange
            const mockEstatisticas = {
                totalPagamentos: 4,
                totalValorPago: 2300,
                totalFinalizados: 2,
                totalEmProcessamento: 1,
                totalCancelados: 1,
                mediaValorPagamento: 575,
                pagamentosPorMetodo: {
                    pix: 2,
                    presencial: 1,
                    transferencia: 1
                }
            };
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '4',
                totalValorPago: '2300.00',
                totalFinalizados: '2',
                totalEmProcessamento: '1',
                totalCancelados: '1'
            });
            jest.spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce([
                { metodoPagamento: 'pix', quantidade: '2' },
                { metodoPagamento: 'presencial', quantidade: '1' },
                { metodoPagamento: 'transferencia', quantidade: '1' }
            ]);
            // Act
            const resultado = await service.obterEstatisticasGerais();
            // Assert
            expect(resultado).toEqual(expect.objectContaining({
                totalPagamentos: 4,
                totalValorPago: 2300,
                totalFinalizados: 2,
                totalEmProcessamento: 1,
                totalCancelados: 1,
                pagamentosPorMetodo: expect.any(Object)
            }));
            expect(mockQueryBuilder.select).toHaveBeenCalled();
        });
        it('deve filtrar por período quando especificado', async () => {
            // Arrange
            const dataInicio = new Date('2025-01-01');
            const dataFim = new Date('2025-03-31');
            jest.spyOn(mockQueryBuilder, 'getRawOne').mockResolvedValueOnce({
                totalPagamentos: '4',
                totalValorPago: '2300.00',
                totalFinalizados: '2',
                totalEmProcessamento: '1',
                totalCancelados: '1'
            });
            jest.spyOn(mockQueryBuilder, 'getRawMany')
                .mockResolvedValueOnce([
                { metodoPagamento: 'pix', quantidade: '2' },
                { metodoPagamento: 'presencial', quantidade: '1' },
                { metodoPagamento: 'transferencia', quantidade: '1' }
            ]);
            // Act
            const resultado = await service.obterEstatisticasGerais(dataInicio, dataFim);
            // Assert
            expect(resultado).toBeDefined();
            expect(mockQueryBuilder.where).toHaveBeenCalledWith('pagamento.dataLiberacao >= :dataInicio', { dataInicio });
            expect(mockQueryBuilder.andWhere).toHaveBeenCalledWith('pagamento.dataLiberacao <= :dataFim', { dataFim });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxldWRyZVxcT25lRHJpdmVcXERlc2t0b3BcXFByb2pldG9zXFxwZ2JlblxccGdiZW4tc2VydmVyXFxzcmNcXG1vZHVsZXNcXHBhZ2FtZW50b1xcdGVzdHNcXHVuaXRcXHNlcnZpY2VzXFxyZWxhdG9yaW8tcGFnYW1lbnRvLnNlcnZpY2Uuc3BlYy50cyIsIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFzRDtBQUN0RCw2Q0FBcUQ7QUFHckQsK0ZBQTBGO0FBQzFGLHlFQUErRDtBQUMvRCxnRkFBMkU7QUFDM0UsZ0ZBQTJFO0FBRTNFOzs7Ozs7O0dBT0c7QUFDSCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsR0FBRyxFQUFFO0lBQ3pDLElBQUksT0FBa0MsQ0FBQztJQUN2QyxJQUFJLG1CQUEwQyxDQUFDO0lBRS9DLCtCQUErQjtJQUMvQixNQUFNLGNBQWMsR0FBRztRQUNyQjtZQUNFLEVBQUUsRUFBRSxnQkFBZ0I7WUFDcEIsYUFBYSxFQUFFLGtCQUFrQjtZQUNqQyxLQUFLLEVBQUUsR0FBRztZQUNWLE1BQU0sRUFBRSwyQ0FBbUIsQ0FBQyxVQUFVO1lBQ3RDLGVBQWUsRUFBRSwyQ0FBbUIsQ0FBQyxHQUFHO1lBQ3hDLGNBQWMsRUFBRSxvQkFBb0I7WUFDcEMsYUFBYSxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQztZQUNyQyxXQUFXLEVBQUUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ25DLGVBQWUsRUFBRSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDdkMsV0FBVyxFQUFFLGNBQWM7WUFDM0IsU0FBUyxFQUFFLGNBQWM7WUFDekIsV0FBVyxFQUFFLGlDQUFpQztZQUM5QyxlQUFlLEVBQUU7Z0JBQ2YsYUFBYSxFQUFFLGlCQUFpQjtnQkFDaEMsYUFBYSxFQUFFLEdBQUc7YUFDbkI7U0FDRjtRQUNEO1lBQ0UsRUFBRSxFQUFFLGdCQUFnQjtZQUNwQixhQUFhLEVBQUUsa0JBQWtCO1lBQ2pDLEtBQUssRUFBRSxHQUFHO1lBQ1YsTUFBTSxFQUFFLDJDQUFtQixD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QUFDO2dCQUNyQixFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRTtnQkFDM0MsRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUU7Z0JBQ2xELEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFO2FBQ3RELENBQUMsQ0FBQztZQUVMLE1BQU07WUFDTixNQUFNLFNBQVMsR0FBRyxNQUFNLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFN0UsU0FBUztZQUNULE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUNoQyxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUMsb0JBQW9CLENBQUMsd0NBQXdDLEVBQUUsRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO1lBQzlHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxxQ0FBcUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDN0csQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcZXVkcmVcXE9uZURyaXZlXFxEZXNrdG9wXFxQcm9qZXRvc1xccGdiZW5cXHBnYmVuLXNlcnZlclxcc3JjXFxtb2R1bGVzXFxwYWdhbWVudG9cXHRlc3RzXFx1bml0XFxzZXJ2aWNlc1xccmVsYXRvcmlvLXBhZ2FtZW50by5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBnZXRSZXBvc2l0b3J5VG9rZW4gfSBmcm9tICdAbmVzdGpzL3R5cGVvcm0nO1xuaW1wb3J0IHsgUmVwb3NpdG9yeSB9IGZyb20gJ3R5cGVvcm0nO1xuXG5pbXBvcnQgeyBSZWxhdG9yaW9QYWdhbWVudG9TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvcmVsYXRvcmlvLXBhZ2FtZW50by5zZXJ2aWNlJztcbmltcG9ydCB7IFBhZ2FtZW50byB9IGZyb20gJy4uLy4uLy4uL2VudGl0aWVzL3BhZ2FtZW50by5lbnRpdHknO1xuaW1wb3J0IHsgU3RhdHVzUGFnYW1lbnRvRW51bSB9IGZyb20gJy4uLy4uLy4uL2VudW1zL3N0YXR1cy1wYWdhbWVudG8uZW51bSc7XG5pbXBvcnQgeyBNZXRvZG9QYWdhbWVudG9FbnVtIH0gZnJvbSAnLi4vLi4vLi4vZW51bXMvbWV0b2RvLXBhZ2FtZW50by5lbnVtJztcblxuLyoqXG4gKiBUZXN0ZXMgdW5pdMOhcmlvcyBwYXJhIFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2VcbiAqIFxuICogR2FyYW50ZSBxdWUgb3MgbcOpdG9kb3MgZGUgZ2VyYcOnw6NvIGRlIHJlbGF0w7NyaW9zIGUgZXN0YXTDrXN0aWNhcyBcbiAqIHNvYnJlIHBhZ2FtZW50b3MgZnVuY2lvbmVtIGNvcnJldGFtZW50ZS5cbiAqIFxuICogQGF1dGhvciBFcXVpcGUgUEdCZW5cbiAqL1xuZGVzY3JpYmUoJ1JlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBzZXJ2aWNlOiBSZWxhdG9yaW9QYWdhbWVudG9TZXJ2aWNlO1xuICBsZXQgcGFnYW1lbnRvUmVwb3NpdG9yeTogUmVwb3NpdG9yeTxQYWdhbWVudG8+O1xuXG4gIC8vIERhZG9zIGRlIGV4ZW1wbG8gcGFyYSB0ZXN0ZXNcbiAgY29uc3QgcGFnYW1lbnRvc01vY2sgPSBbXG4gICAge1xuICAgICAgaWQ6ICdwYWdhbWVudG8taWQtMScsXG4gICAgICBzb2xpY2l0YWNhb0lkOiAnc29saWNpdGFjYW8taWQtMScsXG4gICAgICB2YWxvcjogNTAwLFxuICAgICAgc3RhdHVzOiBTdGF0dXNQYWdhbWVudG9FbnVtLkZJTkFMSVpBRE8sXG4gICAgICBtZXRvZG9QYWdhbWVudG86IE1ldG9kb1BhZ2FtZW50b0VudW0uUElYLFxuICAgICAgaW5mb0JhbmNhcmlhSWQ6ICdpbmZvLWJhbmNhcmlhLWlkLTEnLFxuICAgICAgZGF0YUxpYmVyYWNhbzogbmV3IERhdGUoJzIwMjUtMDEtMTUnKSxcbiAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMS0xMCcpLFxuICAgICAgZGF0YUF0dWFsaXphY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMS0yMCcpLFxuICAgICAgbGliZXJhZG9Qb3I6ICd1c3VhcmlvLWlkLTEnLFxuICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0xJyxcbiAgICAgIG9ic2VydmFjb2VzOiAnUGFnYW1lbnRvIGRlIGJlbmVmw61jaW8gZXZlbnR1YWwnLFxuICAgICAgZGFkb3NBZGljaW9uYWlzOiB7XG4gICAgICAgIHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBNb3JhZGlhJyxcbiAgICAgICAgdmFsb3JBcHJvdmFkbzogNTAwXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3BhZ2FtZW50by1pZC0yJyxcbiAgICAgIHNvbGljaXRhY2FvSWQ6ICdzb2xpY2l0YWNhby1pZC0yJyxcbiAgICAgIHZhbG9yOiAzMDAsXG4gICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uRklOQUxJWkFETyxcbiAgICAgIG1ldG9kb1BhZ2FtZW50bzogTWV0b2RvUGFnYW1lbnRvRW51bS5QUkVTRU5DSUFMLFxuICAgICAgZGF0YUxpYmVyYWNhbzogbmV3IERhdGUoJzIwMjUtMDItMTAnKSxcbiAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMi0wNScpLFxuICAgICAgZGF0YUF0dWFsaXphY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMi0xNScpLFxuICAgICAgbGliZXJhZG9Qb3I6ICd1c3VhcmlvLWlkLTInLFxuICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0xJyxcbiAgICAgIG9ic2VydmFjb2VzOiAnUGFnYW1lbnRvIGRlIGJlbmVmw61jaW8gYWxpbWVudGHDp8OjbycsXG4gICAgICBkYWRvc0FkaWNpb25haXM6IHtcbiAgICAgICAgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEFsaW1lbnRhw6fDo28nLFxuICAgICAgICB2YWxvckFwcm92YWRvOiAzMDBcbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAncGFnYW1lbnRvLWlkLTMnLFxuICAgICAgc29saWNpdGFjYW9JZDogJ3NvbGljaXRhY2FvLWlkLTMnLFxuICAgICAgdmFsb3I6IDEwMDAsXG4gICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uUEFHTyxcbiAgICAgIG1ldG9kb1BhZ2FtZW50bzogTWV0b2RvUGFnYW1lbnRvRW51bS5UUkFOU0ZFUkVOQ0lBLFxuICAgICAgaW5mb0JhbmNhcmlhSWQ6ICdpbmZvLWJhbmNhcmlhLWlkLTMnLFxuICAgICAgZGF0YUxpYmVyYWNhbzogbmV3IERhdGUoJzIwMjUtMDMtMDUnKSxcbiAgICAgIGRhdGFDcmlhY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMy0wMScpLFxuICAgICAgZGF0YUF0dWFsaXphY2FvOiBuZXcgRGF0ZSgnMjAyNS0wMy0wNScpLFxuICAgICAgbGliZXJhZG9Qb3I6ICd1c3VhcmlvLWlkLTEnLFxuICAgICAgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0yJyxcbiAgICAgIG9ic2VydmFjb2VzOiAnUGFnYW1lbnRvIGRlIGJlbmVmw61jaW8gZnVuZXJhbCcsXG4gICAgICBkYWRvc0FkaWNpb25haXM6IHtcbiAgICAgICAgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEZ1bmVyYWwnLFxuICAgICAgICB2YWxvckFwcm92YWRvOiAxMDAwXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3BhZ2FtZW50by1pZC00JyxcbiAgICAgIHNvbGljaXRhY2FvSWQ6ICdzb2xpY2l0YWNhby1pZC00JyxcbiAgICAgIHZhbG9yOiA1MDAsXG4gICAgICBzdGF0dXM6IFN0YXR1c1BhZ2FtZW50b0VudW0uQ0FOQ0VMQURPLFxuICAgICAgbWV0b2RvUGFnYW1lbnRvOiBNZXRvZG9QYWdhbWVudG9FbnVtLlBJWCxcbiAgICAgIGluZm9CYW5jYXJpYUlkOiAnaW5mby1iYW5jYXJpYS1pZC00JyxcbiAgICAgIGRhdGFMaWJlcmFjYW86IG5ldyBEYXRlKCcyMDI1LTAxLTIwJyksXG4gICAgICBkYXRhQ3JpYWNhbzogbmV3IERhdGUoJzIwMjUtMDEtMTUnKSxcbiAgICAgIGRhdGFBdHVhbGl6YWNhbzogbmV3IERhdGUoJzIwMjUtMDEtMjInKSxcbiAgICAgIGxpYmVyYWRvUG9yOiAndXN1YXJpby1pZC0yJyxcbiAgICAgIHVuaWRhZGVJZDogJ3VuaWRhZGUtaWQtMScsXG4gICAgICBvYnNlcnZhY29lczogJ0NBTkNFTEFETzogRGFkb3MgYmFuY8OhcmlvcyBpbmNvcnJldG9zJyxcbiAgICAgIGRhZG9zQWRpY2lvbmFpczoge1xuICAgICAgICB0aXBvQmVuZWZpY2lvOiAnQXV4w61saW8gTW9yYWRpYScsXG4gICAgICAgIHZhbG9yQXByb3ZhZG86IDUwMFxuICAgICAgfVxuICAgIH1cbiAgXTtcblxuICBjb25zdCBtb2NrUXVlcnlCdWlsZGVyID0ge1xuICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgYWRkU2VsZWN0OiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICB3aGVyZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgYW5kV2hlcmU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGdyb3VwQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIG9yZGVyQnk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgIGdldFJhd01hbnk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSksXG4gICAgZ2V0UmF3T25lOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe30pLFxuICAgIGV4ZWN1dGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSlcbiAgfTtcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIFJlbGF0b3Jpb1BhZ2FtZW50b1NlcnZpY2UsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBnZXRSZXBvc2l0b3J5VG9rZW4oUGFnYW1lbnRvKSxcbiAgICAgICAgICB1c2VWYWx1ZToge1xuICAgICAgICAgICAgY3JlYXRlUXVlcnlCdWlsZGVyOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG1vY2tRdWVyeUJ1aWxkZXIpLFxuICAgICAgICAgICAgZmluZDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHBhZ2FtZW50b3NNb2NrKSxcbiAgICAgICAgICAgIGZpbmRBbmRDb3VudDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtwYWdhbWVudG9zTW9jaywgcGFnYW1lbnRvc01vY2subGVuZ3RoXSksXG4gICAgICAgICAgICBtYW5hZ2VyOiB7XG4gICAgICAgICAgICAgIHF1ZXJ5OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoW10pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8UmVsYXRvcmlvUGFnYW1lbnRvU2VydmljZT4oUmVsYXRvcmlvUGFnYW1lbnRvU2VydmljZSk7XG4gICAgcGFnYW1lbnRvUmVwb3NpdG9yeSA9IG1vZHVsZS5nZXQ8UmVwb3NpdG9yeTxQYWdhbWVudG8+PihnZXRSZXBvc2l0b3J5VG9rZW4oUGFnYW1lbnRvKSk7XG4gIH0pO1xuXG4gIGl0KCdkZXZlIGVzdGFyIGRlZmluaWRvJywgKCkgPT4ge1xuICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VyYXJSZWxhdG9yaW9NZW5zYWwnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZ2VyYXIgcmVsYXTDs3JpbyBtZW5zYWwgcG9yIHBlcsOtb2RvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcbiAgICAgIFxuICAgICAgY29uc3QgbW9ja1Jlc3VsdGFkbyA9IFtcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAxJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDIgfSxcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAyJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IG1lczogJzIwMjUtMDMnLCB0b3RhbDogMTAwMCwgcXVhbnRpZGFkZTogMSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9NZW5zYWwoZGF0YUluaWNpbywgZGF0YUZpbSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLnNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIud2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwYWdhbWVudG8uZGF0YUxpYmVyYWNhbyA+PSA6ZGF0YUluaWNpbycsIHsgZGF0YUluaWNpbyB9KTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGFnYW1lbnRvLmRhdGFMaWJlcmFjYW8gPD0gOmRhdGFGaW0nLCB7IGRhdGFGaW0gfSk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5ncm91cEJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIHBvciB1bmlkYWRlIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoJzIwMjUtMDEtMDEnKTtcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBuZXcgRGF0ZSgnMjAyNS0wMy0zMScpO1xuICAgICAgY29uc3QgdW5pZGFkZUlkID0gJ3VuaWRhZGUtaWQtMSc7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMScsIHRvdGFsOiA1MDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAyJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9NZW5zYWwoZGF0YUluaWNpbywgZGF0YUZpbSwgdW5pZGFkZUlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwYWdhbWVudG8udW5pZGFkZUlkID0gOnVuaWRhZGVJZCcsIHsgdW5pZGFkZUlkIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmlsdHJhciBhcGVuYXMgcGFnYW1lbnRvcyBmaW5hbGl6YWRvcy9wYWdvcyBxdWFuZG8gZXNwZWNpZmljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcbiAgICAgIGNvbnN0IHVuaWRhZGVJZCA9IG51bGw7XG4gICAgICBjb25zdCBhcGVuYXNGaW5hbGl6YWRvcyA9IHRydWU7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWVzOiAnMjAyNS0wMScsIHRvdGFsOiA1MDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBtZXM6ICcyMDI1LTAyJywgdG90YWw6IDMwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IG1lczogJzIwMjUtMDMnLCB0b3RhbDogMTAwMCwgcXVhbnRpZGFkZTogMSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9NZW5zYWwoZGF0YUluaWNpbywgZGF0YUZpbSwgdW5pZGFkZUlkLCBhcGVuYXNGaW5hbGl6YWRvcyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BhZ2FtZW50by5zdGF0dXMgSU4gKDouLi5zdGF0dXNGaW5hbGl6YWRvKScsIFxuICAgICAgICB7IHN0YXR1c0ZpbmFsaXphZG86IFtTdGF0dXNQYWdhbWVudG9FbnVtLkZJTkFMSVpBRE8sIFN0YXR1c1BhZ2FtZW50b0VudW0uUEFHT10gfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dlcmFyUmVsYXRvcmlvUG9yTWV0b2RvJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGdlcmFyIHJlbGF0w7NyaW8gcG9yIG3DqXRvZG8gZGUgcGFnYW1lbnRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgZGF0YUluaWNpbyA9IG5ldyBEYXRlKCcyMDI1LTAxLTAxJyk7XG4gICAgICBjb25zdCBkYXRhRmltID0gbmV3IERhdGUoJzIwMjUtMDMtMzEnKTtcbiAgICAgIFxuICAgICAgY29uc3QgbW9ja1Jlc3VsdGFkbyA9IFtcbiAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICdwaXgnLCB0b3RhbDogMTAwMCwgcXVhbnRpZGFkZTogMiB9LFxuICAgICAgICB7IG1ldG9kb1BhZ2FtZW50bzogJ3ByZXNlbmNpYWwnLCB0b3RhbDogMzAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAndHJhbnNmZXJlbmNpYScsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1Bvck1ldG9kbyhkYXRhSW5pY2lvLCBkYXRhRmltKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuc2VsZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5ncm91cEJ5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBmaWx0cmFyIGFwZW5hcyBwYWdhbWVudG9zIG7Do28gY2FuY2VsYWRvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgdG90YWw6IDUwMCwgcXVhbnRpZGFkZTogMSB9LFxuICAgICAgICB7IG1ldG9kb1BhZ2FtZW50bzogJ3ByZXNlbmNpYWwnLCB0b3RhbDogMzAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAndHJhbnNmZXJlbmNpYScsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1Bvck1ldG9kbyhkYXRhSW5pY2lvLCBkYXRhRmltKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIuYW5kV2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAncGFnYW1lbnRvLnN0YXR1cyAhPSA6c3RhdHVzQ2FuY2VsYWRvJywgXG4gICAgICAgIHsgc3RhdHVzQ2FuY2VsYWRvOiBTdGF0dXNQYWdhbWVudG9FbnVtLkNBTkNFTEFETyB9XG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VyYXJSZWxhdG9yaW9Qb3JTdGF0dXMnLCAoKSA9PiB7XG4gICAgaXQoJ2RldmUgZ2VyYXIgcmVsYXTDs3JpbyBwb3Igc3RhdHVzIGRlIHBhZ2FtZW50bycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgc3RhdHVzOiAnZmluYWxpemFkbycsIHRvdGFsOiA4MDAsIHF1YW50aWRhZGU6IDIgfSxcbiAgICAgICAgeyBzdGF0dXM6ICdwYWdvJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyBzdGF0dXM6ICdjYW5jZWxhZG8nLCB0b3RhbDogNTAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd01hbnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclN0YXR1cygpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwobW9ja1Jlc3VsdGFkbyk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmdyb3VwQnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGZpbHRyYXIgcG9yIHBlcsOtb2RvIHF1YW5kbyBlc3BlY2lmaWNhZG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBkYXRhSW5pY2lvID0gbmV3IERhdGUoJzIwMjUtMDEtMDEnKTtcbiAgICAgIGNvbnN0IGRhdGFGaW0gPSBuZXcgRGF0ZSgnMjAyNS0wMy0zMScpO1xuICAgICAgXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7IHN0YXR1czogJ2ZpbmFsaXphZG8nLCB0b3RhbDogODAwLCBxdWFudGlkYWRlOiAyIH0sXG4gICAgICAgIHsgc3RhdHVzOiAncGFnbycsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgc3RhdHVzOiAnY2FuY2VsYWRvJywgdG90YWw6IDUwMCwgcXVhbnRpZGFkZTogMSB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBqZXN0LnNweU9uKG1vY2tRdWVyeUJ1aWxkZXIsICdnZXRSYXdNYW55JykubW9ja1Jlc29sdmVkVmFsdWVPbmNlKG1vY2tSZXN1bHRhZG8pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHNlcnZpY2UuZ2VyYXJSZWxhdG9yaW9Qb3JTdGF0dXMoZGF0YUluaWNpbywgZGF0YUZpbSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdGFkbykudG9FcXVhbChtb2NrUmVzdWx0YWRvKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLndoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGFnYW1lbnRvLmRhdGFMaWJlcmFjYW8gPj0gOmRhdGFJbmljaW8nLCB7IGRhdGFJbmljaW8gfSk7XG4gICAgICBleHBlY3QobW9ja1F1ZXJ5QnVpbGRlci5hbmRXaGVyZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BhZ2FtZW50by5kYXRhTGliZXJhY2FvIDw9IDpkYXRhRmltJywgeyBkYXRhRmltIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VyYXJSZWxhdG9yaW9Qb3JVbmlkYWRlJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIGdlcmFyIHJlbGF0w7NyaW8gcG9yIHVuaWRhZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7IHVuaWRhZGVJZDogJ3VuaWRhZGUtaWQtMScsIG5vbWVVbmlkYWRlOiAnQ1JBUyBDZW50cm8nLCB0b3RhbDogMTMwMCwgcXVhbnRpZGFkZTogMyB9LFxuICAgICAgICB7IHVuaWRhZGVJZDogJ3VuaWRhZGUtaWQtMicsIG5vbWVVbmlkYWRlOiAnQ1JBUyBOb3J0ZScsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLCAncXVlcnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclVuaWRhZGUoKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlci5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmlsdHJhciBwb3IgcGVyw61vZG8gcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0xJywgbm9tZVVuaWRhZGU6ICdDUkFTIENlbnRybycsIHRvdGFsOiAxMzAwLCBxdWFudGlkYWRlOiAzIH0sXG4gICAgICAgIHsgdW5pZGFkZUlkOiAndW5pZGFkZS1pZC0yJywgbm9tZVVuaWRhZGU6ICdDUkFTIE5vcnRlJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDEgfVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihwYWdhbWVudG9SZXBvc2l0b3J5Lm1hbmFnZXIsICdxdWVyeScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZShtb2NrUmVzdWx0YWRvKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCBzZXJ2aWNlLmdlcmFyUmVsYXRvcmlvUG9yVW5pZGFkZShkYXRhSW5pY2lvLCBkYXRhRmltKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlci5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXSEVSRSBwLmRhdGFfbGliZXJhY2FvID49ICQxIEFORCBwLmRhdGFfbGliZXJhY2FvIDw9ICQyJyksXG4gICAgICAgIFtkYXRhSW5pY2lvLCBkYXRhRmltXVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dlcmFyUmVsYXRvcmlvUG9yVGlwb0JlbmVmaWNpbycsICgpID0+IHtcbiAgICBpdCgnZGV2ZSBnZXJhciByZWxhdMOzcmlvIHBvciB0aXBvIGRlIGJlbmVmw61jaW8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrUmVzdWx0YWRvID0gW1xuICAgICAgICB7IHRpcG9CZW5lZmljaW86ICdBdXjDrWxpbyBNb3JhZGlhJywgdG90YWw6IDEwMDAsIHF1YW50aWRhZGU6IDIgfSxcbiAgICAgICAgeyB0aXBvQmVuZWZpY2lvOiAnQXV4w61saW8gQWxpbWVudGHDp8OjbycsIHRvdGFsOiAzMDAsIHF1YW50aWRhZGU6IDEgfSxcbiAgICAgICAgeyB0aXBvQmVuZWZpY2lvOiAnQXV4w61saW8gRnVuZXJhbCcsIHRvdGFsOiAxMDAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLCAncXVlcnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclRpcG9CZW5lZmljaW8oKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlci5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmlsdHJhciBwb3IgdW5pZGFkZSBxdWFuZG8gZXNwZWNpZmljYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdW5pZGFkZUlkID0gJ3VuaWRhZGUtaWQtMSc7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHRhZG8gPSBbXG4gICAgICAgIHsgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIE1vcmFkaWEnLCB0b3RhbDogNTAwLCBxdWFudGlkYWRlOiAxIH0sXG4gICAgICAgIHsgdGlwb0JlbmVmaWNpbzogJ0F1eMOtbGlvIEFsaW1lbnRhw6fDo28nLCB0b3RhbDogMzAwLCBxdWFudGlkYWRlOiAxIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24ocGFnYW1lbnRvUmVwb3NpdG9yeS5tYW5hZ2VyLCAncXVlcnknKS5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UobW9ja1Jlc3VsdGFkbyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5nZXJhclJlbGF0b3Jpb1BvclRpcG9CZW5lZmljaW8obnVsbCwgbnVsbCwgdW5pZGFkZUlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0VxdWFsKG1vY2tSZXN1bHRhZG8pO1xuICAgICAgZXhwZWN0KHBhZ2FtZW50b1JlcG9zaXRvcnkubWFuYWdlci5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXSEVSRSBwLnVuaWRhZGVfaWQgPSAkMScpLFxuICAgICAgICBbdW5pZGFkZUlkXVxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ29idGVyRXN0YXRpc3RpY2FzR2VyYWlzJywgKCkgPT4ge1xuICAgIGl0KCdkZXZlIG9idGVyIGVzdGF0w61zdGljYXMgZ2VyYWlzIGRlIHBhZ2FtZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBtb2NrRXN0YXRpc3RpY2FzID0ge1xuICAgICAgICB0b3RhbFBhZ2FtZW50b3M6IDQsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAyMzAwLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAyLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogMSxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAxLFxuICAgICAgICBtZWRpYVZhbG9yUGFnYW1lbnRvOiA1NzUsXG4gICAgICAgIHBhZ2FtZW50b3NQb3JNZXRvZG86IHtcbiAgICAgICAgICBwaXg6IDIsXG4gICAgICAgICAgcHJlc2VuY2lhbDogMSxcbiAgICAgICAgICB0cmFuc2ZlcmVuY2lhOiAxXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsUGFnYW1lbnRvczogJzQnLFxuICAgICAgICB0b3RhbFZhbG9yUGFnbzogJzIzMDAuMDAnLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAnMicsXG4gICAgICAgIHRvdGFsRW1Qcm9jZXNzYW1lbnRvOiAnMScsXG4gICAgICAgIHRvdGFsQ2FuY2VsYWRvczogJzEnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgcXVhbnRpZGFkZTogJzInIH0sXG4gICAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICdwcmVzZW5jaWFsJywgcXVhbnRpZGFkZTogJzEnIH0sXG4gICAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICd0cmFuc2ZlcmVuY2lhJywgcXVhbnRpZGFkZTogJzEnIH1cbiAgICAgICAgXSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5vYnRlckVzdGF0aXN0aWNhc0dlcmFpcygpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHRhZG8pLnRvRXF1YWwoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICB0b3RhbFBhZ2FtZW50b3M6IDQsXG4gICAgICAgIHRvdGFsVmFsb3JQYWdvOiAyMzAwLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAyLFxuICAgICAgICB0b3RhbEVtUHJvY2Vzc2FtZW50bzogMSxcbiAgICAgICAgdG90YWxDYW5jZWxhZG9zOiAxLFxuICAgICAgICBwYWdhbWVudG9zUG9yTWV0b2RvOiBleHBlY3QuYW55KE9iamVjdClcbiAgICAgIH0pKTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLnNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgZmlsdHJhciBwb3IgcGVyw61vZG8gcXVhbmRvIGVzcGVjaWZpY2FkbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IGRhdGFJbmljaW8gPSBuZXcgRGF0ZSgnMjAyNS0wMS0wMScpO1xuICAgICAgY29uc3QgZGF0YUZpbSA9IG5ldyBEYXRlKCcyMDI1LTAzLTMxJyk7XG4gICAgICBcbiAgICAgIGplc3Quc3B5T24obW9ja1F1ZXJ5QnVpbGRlciwgJ2dldFJhd09uZScpLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7XG4gICAgICAgIHRvdGFsUGFnYW1lbnRvczogJzQnLFxuICAgICAgICB0b3RhbFZhbG9yUGFnbzogJzIzMDAuMDAnLFxuICAgICAgICB0b3RhbEZpbmFsaXphZG9zOiAnMicsXG4gICAgICAgIHRvdGFsRW1Qcm9jZXNzYW1lbnRvOiAnMScsXG4gICAgICAgIHRvdGFsQ2FuY2VsYWRvczogJzEnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgamVzdC5zcHlPbihtb2NrUXVlcnlCdWlsZGVyLCAnZ2V0UmF3TWFueScpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW1xuICAgICAgICAgIHsgbWV0b2RvUGFnYW1lbnRvOiAncGl4JywgcXVhbnRpZGFkZTogJzInIH0sXG4gICAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICdwcmVzZW5jaWFsJywgcXVhbnRpZGFkZTogJzEnIH0sXG4gICAgICAgICAgeyBtZXRvZG9QYWdhbWVudG86ICd0cmFuc2ZlcmVuY2lhJywgcXVhbnRpZGFkZTogJzEnIH1cbiAgICAgICAgXSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgc2VydmljZS5vYnRlckVzdGF0aXN0aWNhc0dlcmFpcyhkYXRhSW5pY2lvLCBkYXRhRmltKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0YWRvKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1vY2tRdWVyeUJ1aWxkZXIud2hlcmUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwYWdhbWVudG8uZGF0YUxpYmVyYWNhbyA+PSA6ZGF0YUluaWNpbycsIHsgZGF0YUluaWNpbyB9KTtcbiAgICAgIGV4cGVjdChtb2NrUXVlcnlCdWlsZGVyLmFuZFdoZXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGFnYW1lbnRvLmRhdGFMaWJlcmFjYW8gPD0gOmRhdGFGaW0nLCB7IGRhdGFGaW0gfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=